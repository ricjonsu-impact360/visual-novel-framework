!function(b,d){"object"==typeof module&&"object"==typeof module.exports?module.exports=b.document?d(b,!0):function(b){if(!b.document)throw Error("jQuery requires a window with a document");return d(b)}:d(b)}("undefined"!=typeof window?window:this,function(b,d){function e(b,d){d=d||R;var e=d.createElement("script");e.text=b;d.head.appendChild(e).parentNode.removeChild(e)}function f(b){var d=!!b&&"length"in b&&b.length,e=p.type(b);return"function"!==e&&!p.isWindow(b)&&("array"===e||0===d||"number"==
typeof d&&0<d&&d-1 in b)}function g(b,d){return b.nodeName&&b.nodeName.toLowerCase()===d.toLowerCase()}function j(b,d,e){return p.isFunction(d)?p.grep(b,function(b,f){return!!d.call(b,f,b)!==e}):d.nodeType?p.grep(b,function(b){return b===d!==e}):"string"!=typeof d?p.grep(b,function(b){return-1<Na.call(d,b)!==e}):Ac.test(d)?p.filter(d,b,e):(d=p.filter(d,b),p.grep(b,function(b){return-1<Na.call(d,b)!==e&&1===b.nodeType}))}function l(b,d){for(;(b=b[d])&&1!==b.nodeType;);return b}function n(b){return b}
function m(b){throw b;}function r(b,d,e,f){var g;try{b&&p.isFunction(g=b.promise)?g.call(b).done(d).fail(e):b&&p.isFunction(g=b.then)?g.call(b,d,e):d.apply(void 0,[b].slice(f))}catch(m){e.apply(void 0,[m])}}function q(){R.removeEventListener("DOMContentLoaded",q);b.removeEventListener("load",q);p.ready()}function s(){this.expando=p.expando+s.uid++}function t(b,d,e){var f;if(void 0===e&&1===b.nodeType)if(f="data-"+d.replace(Bc,"-$&").toLowerCase(),e=b.getAttribute(f),"string"==typeof e){try{e="true"===
e||"false"!==e&&("null"===e?null:e===+e+""?+e:Cc.test(e)?JSON.parse(e):e)}catch(g){}da.set(b,d,e)}else e=void 0;return e}function v(b,d,e,f){var g,m=1,j=20,l=f?function(){return f.cur()}:function(){return p.css(b,d,"")},q=l(),r=e&&e[3]||(p.cssNumber[d]?"":"px"),n=(p.cssNumber[d]||"px"!==r&&+q)&&Oa.exec(p.css(b,d));if(n&&n[3]!==r){r=r||n[3];e=e||[];n=+q||1;do m=m||".5",n/=m,p.style(b,d,n+r);while(m!==(m=l()/q)&&1!==m&&--j)}return e&&(n=+n||+q||0,g=e[1]?n+(e[1]+1)*e[2]:+e[2],f&&(f.unit=r,f.start=n,
f.end=g)),g}function u(b,d){for(var e,f,g=[],m=0,j=b.length;m<j;m++)if(f=b[m],f.style)if(e=f.style.display,d){if("none"===e&&(g[m]=K.get(f,"display")||null,g[m]||(f.style.display="")),""===f.style.display&&Va(f)){e=g;var l=m,q,r=void 0;q=f.ownerDocument;var n=f.nodeName;q=(f=Ib[n])?f:(r=q.body.appendChild(q.createElement(n)),f=p.css(r,"display"),r.parentNode.removeChild(r),"none"===f&&(f="block"),Ib[n]=f,f);e[l]=q}}else"none"!==e&&(g[m]="none",K.set(f,"display",e));for(m=0;m<j;m++)null!=g[m]&&(b[m].style.display=
g[m]);return b}function x(b,d){var e;return e="undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(d||"*"):"undefined"!=typeof b.querySelectorAll?b.querySelectorAll(d||"*"):[],void 0===d||d&&g(b,d)?p.merge([b],e):e}function D(b,d){for(var e=0,f=b.length;e<f;e++)K.set(b[e],"globalEval",!d||K.get(d[e],"globalEval"))}function H(b,d,e,f,g){for(var m,j,l,q,r=d.createDocumentFragment(),n=[],t=0,s=b.length;t<s;t++)if(m=b[t],m||0===m)if("object"===p.type(m))p.merge(n,m.nodeType?[m]:m);else if(Dc.test(m)){j=
j||r.appendChild(d.createElement("div"));l=(Jb.exec(m)||["",""])[1].toLowerCase();l=ea[l]||ea._default;j.innerHTML=l[1]+p.htmlPrefilter(m)+l[2];for(l=l[0];l--;)j=j.lastChild;p.merge(n,j.childNodes);j=r.firstChild;j.textContent=""}else n.push(d.createTextNode(m));r.textContent="";for(t=0;m=n[t++];)if(f&&-1<p.inArray(m,f))g&&g.push(m);else if(q=p.contains(m.ownerDocument,m),j=x(r.appendChild(m),"script"),q&&D(j),e)for(l=0;m=j[l++];)Kb.test(m.type||"")&&e.push(m);return r}function M(){return!0}function E(){return!1}
function F(){try{return R.activeElement}catch(b){}}function S(b,d,e,f,g,m){var j,l;if("object"==typeof d){"string"!=typeof e&&(f=f||e,e=void 0);for(l in d)S(b,l,e,f,d[l],m);return b}if(null==f&&null==g?(g=e,f=e=void 0):null==g&&("string"==typeof e?(g=f,f=void 0):(g=f,f=e,e=void 0)),!1===g)g=E;else if(!g)return b;return 1===m&&(j=g,g=function(b){return p().off(b),j.apply(this,arguments)},g.guid=j.guid||(j.guid=p.guid++)),b.each(function(){p.event.add(this,d,g,f,e)})}function I(b,d){return g(b,"table")&&
g(11!==d.nodeType?d:d.firstChild,"tr")?p(">tbody",b)[0]||b:b}function L(b){return b.type=(null!==b.getAttribute("type"))+"/"+b.type,b}function O(b){var d=Ec.exec(b.type);return d?b.type=d[1]:b.removeAttribute("type"),b}function P(b,d){var e,f,g,m,j,l;if(1===d.nodeType){if(K.hasData(b)&&(e=K.access(b),f=K.set(d,e),l=e.events))for(g in delete f.handle,f.events={},l){e=0;for(f=l[g].length;e<f;e++)p.event.add(d,g,l[g][e])}da.hasData(b)&&(m=da.access(b),j=p.extend({},m),da.set(d,j))}}function G(b,d,f,
g){d=Lb.apply([],d);var m,j,l,q,r=0,n=b.length,t=n-1,s=d[0],v=p.isFunction(s);if(v||1<n&&"string"==typeof s&&!V.checkClone&&Fc.test(s))return b.each(function(e){var m=b.eq(e);v&&(d[0]=s.call(this,e,m.html()));G(m,d,f,g)});if(n&&(m=H(d,b[0].ownerDocument,!1,b,g),j=m.firstChild,1===m.childNodes.length&&(m=j),j||g)){j=p.map(x(m,"script"),L);for(l=j.length;r<n;r++)q=m,r!==t&&(q=p.clone(q,!0,!0),l&&p.merge(j,x(q,"script"))),f.call(b[r],q,r);if(l){m=j[j.length-1].ownerDocument;p.map(j,O);for(r=0;r<l;r++)q=
j[r],Kb.test(q.type||"")&&!K.access(q,"globalEval")&&p.contains(m,q)&&(q.src?p._evalUrl&&p._evalUrl(q.src):e(q.textContent.replace(Hc,""),m))}}return b}function A(b,d,e){for(var f=d?p.filter(d,b):b,g=0;null!=(d=f[g]);g++)e||1!==d.nodeType||p.cleanData(x(d)),d.parentNode&&(e&&p.contains(d.ownerDocument,d)&&D(x(d,"script")),d.parentNode.removeChild(d));return b}function J(b,d,e){var f,g,m,j,l=b.style;return e=e||Wa(b),e&&(j=e.getPropertyValue(d)||e[d],""!==j||p.contains(b.ownerDocument,b)||(j=p.style(b,
d)),!V.pixelMarginRight()&&ob.test(j)&&Mb.test(d)&&(f=l.width,g=l.minWidth,m=l.maxWidth,l.minWidth=l.maxWidth=l.width=j,j=e.width,l.width=f,l.minWidth=g,l.maxWidth=m)),void 0!==j?j+"":j}function wa(b,d){return{get:function(){return b()?void delete this.get:(this.get=d).apply(this,arguments)}}}function xa(b){var d=p.cssProps[b];if(!d){var d=p.cssProps,e;a:if(e=b,!(e in Nb)){for(var f=e[0].toUpperCase()+e.slice(1),g=Ob.length;g--;)if(e=Ob[g]+f,e in Nb)break a;e=void 0}d=d[b]=e||b}return d}function ya(b,
d,e){return(b=Oa.exec(d))?Math.max(0,b[2]-(e||0))+(b[3]||"px"):d}function aa(b,d,e,f,g){var m=0;for(d=e===(f?"border":"content")?4:"width"===d?1:0;4>d;d+=2)"margin"===e&&(m+=p.css(b,e+za[d],!0,g)),f?("content"===e&&(m-=p.css(b,"padding"+za[d],!0,g)),"margin"!==e&&(m-=p.css(b,"border"+za[d]+"Width",!0,g))):(m+=p.css(b,"padding"+za[d],!0,g),"padding"!==e&&(m+=p.css(b,"border"+za[d]+"Width",!0,g)));return m}function fa(b,d,e){var f,g=Wa(b),m=J(b,d,g),j="border-box"===p.css(b,"boxSizing",!1,g);return ob.test(m)?
m:(f=j&&(V.boxSizingReliable()||m===b.style[d]),"auto"===m&&(m=b["offset"+d[0].toUpperCase()+d.slice(1)]),m=parseFloat(m)||0,m+aa(b,d,e||(j?"border":"content"),f,g)+"px")}function X(b,d,e,f,g){return new X.prototype.init(b,d,e,f,g)}function B(){Xa&&(!1===R.hidden&&b.requestAnimationFrame?b.requestAnimationFrame(B):b.setTimeout(B,p.fx.interval),p.fx.tick())}function z(){return b.setTimeout(function(){Ia=void 0}),Ia=p.now()}function y(b,d){var e,f=0,g={height:b};for(d=d?1:0;4>f;f+=2-d)e=za[f],g["margin"+
e]=g["padding"+e]=b;return d&&(g.opacity=g.width=b),g}function C(b,d,e){for(var f,g=(ka.tweeners[d]||[]).concat(ka.tweeners["*"]),m=0,j=g.length;m<j;m++)if(f=g[m].call(e,d,b))return f}function ka(b,d,e){var f,g,m=0,j=ka.prefilters.length,l=p.Deferred().always(function(){delete q.elem}),q=function(){if(g)return!1;for(var d=Ia||z(),d=Math.max(0,r.startTime+r.duration-d),e=1-(d/r.duration||0),f=0,m=r.tweens.length;f<m;f++)r.tweens[f].run(e);return l.notifyWith(b,[r,e,d]),1>e&&m?d:(m||l.notifyWith(b,
[r,1,0]),l.resolveWith(b,[r]),!1)},r=l.promise({elem:b,props:p.extend({},d),opts:p.extend(!0,{specialEasing:{},easing:p.easing._default},e),originalProperties:d,originalOptions:e,startTime:Ia||z(),duration:e.duration,tweens:[],createTween:function(d,e){var f=p.Tween(b,r.opts,d,e,r.opts.specialEasing[d]||r.opts.easing);return r.tweens.push(f),f},stop:function(d){var e=0,f=d?r.tweens.length:0;if(g)return this;for(g=!0;e<f;e++)r.tweens[e].run(1);return d?(l.notifyWith(b,[r,1,0]),l.resolveWith(b,[r,d])):
l.rejectWith(b,[r,d]),this}});d=r.props;e=r.opts.specialEasing;var n,t,s,v;for(f in d)if(n=p.camelCase(f),t=e[n],s=d[f],Array.isArray(s)&&(t=s[1],s=d[f]=s[0]),f!==n&&(d[n]=s,delete d[f]),v=p.cssHooks[n],v&&"expand"in v)for(f in s=v.expand(s),delete d[n],s)f in d||(d[f]=s[f],e[f]=t);else e[n]=t;for(;m<j;m++)if(f=ka.prefilters[m].call(r,b,d,r.opts))return p.isFunction(f.stop)&&(p._queueHooks(r.elem,r.opts.queue).stop=p.proxy(f.stop,f)),f;return p.map(d,C,r),p.isFunction(r.opts.start)&&r.opts.start.call(b,
r),r.progress(r.opts.progress).done(r.opts.done,r.opts.complete).fail(r.opts.fail).always(r.opts.always),p.fx.timer(p.extend(q,{elem:b,anim:r,queue:r.opts.queue})),r}function Aa(b){return(b.match(ga)||[]).join(" ")}function Ba(b){return b.getAttribute&&b.getAttribute("class")||""}function pb(b,d,e,f){var g;if(Array.isArray(d))p.each(d,function(d,g){e||Ic.test(b)?f(b,g):pb(b+"["+("object"==typeof g&&null!=g?d:"")+"]",g,e,f)});else if(e||"object"!==p.type(d))f(b,d);else for(g in d)pb(b+"["+g+"]",d[g],
e,f)}function Pb(b){return function(d,e){"string"!=typeof d&&(e=d,d="*");var f,g=0,m=d.toLowerCase().match(ga)||[];if(p.isFunction(e))for(;f=m[g++];)"+"===f[0]?(f=f.slice(1)||"*",(b[f]=b[f]||[]).unshift(e)):(b[f]=b[f]||[]).push(e)}}function Qb(b,d,e,f){function g(l){var r;return m[l]=!0,p.each(b[l]||[],function(b,Z){var l=Z(d,e,f);return"string"!=typeof l||j||m[l]?j?!(r=l):void 0:(d.dataTypes.unshift(l),g(l),!1)}),r}var m={},j=b===qb;return g(d.dataTypes[0])||!m["*"]&&g("*")}function rb(b,d){var e,
f,g=p.ajaxSettings.flatOptions||{};for(e in d)void 0!==d[e]&&((g[e]?b:f||(f={}))[e]=d[e]);return f&&p.extend(!0,b,f),b}var Ca=[],R=b.document,Jc=Object.getPrototypeOf,Da=Ca.slice,Lb=Ca.concat,sb=Ca.push,Na=Ca.indexOf,Ya={},Rb=Ya.toString,Za=Ya.hasOwnProperty,Sb=Za.toString,Kc=Sb.call(Object),V={},p=function(b,d){return new p.fn.init(b,d)},Lc=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Mc=/^-ms-/,Nc=/-([a-z])/g,Oc=function(b,d){return d.toUpperCase()};p.fn=p.prototype={jquery:"3.2.1",constructor:p,length:0,
toArray:function(){return Da.call(this)},get:function(b){return null==b?Da.call(this):0>b?this[b+this.length]:this[b]},pushStack:function(b){b=p.merge(this.constructor(),b);return b.prevObject=this,b},each:function(b){return p.each(this,b)},map:function(b){return this.pushStack(p.map(this,function(d,e){return b.call(d,e,d)}))},slice:function(){return this.pushStack(Da.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(b){var d=this.length;b=
+b+(0>b?d:0);return this.pushStack(0<=b&&b<d?[this[b]]:[])},end:function(){return this.prevObject||this.constructor()},push:sb,sort:Ca.sort,splice:Ca.splice};p.extend=p.fn.extend=function(){var b,d,e,f,g,m,j=arguments[0]||{},l=1,r=arguments.length,q=!1;"boolean"==typeof j&&(q=j,j=arguments[l]||{},l++);"object"==typeof j||p.isFunction(j)||(j={});for(l===r&&(j=this,l--);l<r;l++)if(null!=(b=arguments[l]))for(d in b)e=j[d],f=b[d],j!==f&&(q&&f&&(p.isPlainObject(f)||(g=Array.isArray(f)))?(g?(g=!1,m=e&&
Array.isArray(e)?e:[]):m=e&&p.isPlainObject(e)?e:{},j[d]=p.extend(q,m,f)):void 0!==f&&(j[d]=f));return j};p.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw Error(b);},noop:function(){},isFunction:function(b){return"function"===p.type(b)},isWindow:function(b){return null!=b&&b===b.window},isNumeric:function(b){var d=p.type(b);return("number"===d||"string"===d)&&!isNaN(b-parseFloat(b))},isPlainObject:function(b){var d,e;return!(!b||"[object Object]"!==
Rb.call(b))&&(!(d=Jc(b))||(e=Za.call(d,"constructor")&&d.constructor,"function"==typeof e&&Sb.call(e)===Kc))},isEmptyObject:function(b){for(var d in b)return!1;return!0},type:function(b){return null==b?b+"":"object"==typeof b||"function"==typeof b?Ya[Rb.call(b)]||"object":typeof b},globalEval:function(b){e(b)},camelCase:function(b){return b.replace(Mc,"ms-").replace(Nc,Oc)},each:function(b,d){var e,g=0;if(f(b))for(e=b.length;g<e&&!1!==d.call(b[g],g,b[g]);g++);else for(g in b)if(!1===d.call(b[g],g,
b[g]))break;return b},trim:function(b){return null==b?"":(b+"").replace(Lc,"")},makeArray:function(b,d){var e=d||[];return null!=b&&(f(Object(b))?p.merge(e,"string"==typeof b?[b]:b):sb.call(e,b)),e},inArray:function(b,d,e){return null==d?-1:Na.call(d,b,e)},merge:function(b,d){for(var e=+d.length,f=0,g=b.length;f<e;f++)b[g++]=d[f];return b.length=g,b},grep:function(b,d,e){for(var f=[],g=0,m=b.length,j=!e;g<m;g++)e=!d(b[g],g),e!==j&&f.push(b[g]);return f},map:function(b,d,e){var g,m,j=0,l=[];if(f(b))for(g=
b.length;j<g;j++)m=d(b[j],j,e),null!=m&&l.push(m);else for(j in b)m=d(b[j],j,e),null!=m&&l.push(m);return Lb.apply([],l)},guid:1,proxy:function(b,d){var e,f,g;if("string"==typeof d&&(e=b[d],d=b,b=e),p.isFunction(b))return f=Da.call(arguments,2),g=function(){return b.apply(d||this,f.concat(Da.call(arguments)))},g.guid=b.guid=b.guid||p.guid++,g},now:Date.now,support:V});"function"==typeof Symbol&&(p.fn[Symbol.iterator]=Ca[Symbol.iterator]);p.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),
function(b,d){Ya["[object "+d+"]"]=d.toLowerCase()});var sa,tb=b,U=function(b,d,e,f){var g,m,j,l,r,q=d&&d.ownerDocument,n=d?d.nodeType:9;if(e=e||[],"string"!=typeof b||!b||1!==n&&9!==n&&11!==n)return e;if(!f&&((d?d.ownerDocument||d:ha)!==T&&ta(d),d=d||T,ia)){if(11!==n&&(l=Pc.exec(b)))if(g=l[1])if(9===n){if(!(m=d.getElementById(g)))return e;if(m.id===g)return e.push(m),e}else{if(q&&(m=q.getElementById(g))&&Pa(d,m)&&m.id===g)return e.push(m),e}else{if(l[2])return ua.apply(e,d.getElementsByTagName(b)),
e;if((g=l[3])&&Y.getElementsByClassName&&d.getElementsByClassName)return ua.apply(e,d.getElementsByClassName(g)),e}if(Y.qsa&&!$a[b+" "]&&(!ba||!ba.test(b))){if(1!==n)q=d,r=b;else if("object"!==d.nodeName.toLowerCase()){(j=d.getAttribute("id"))?j=j.replace(Tb,Ub):d.setAttribute("id",j=W);m=Qa(b);for(g=m.length;g--;)m[g]="#"+j+" "+ab(m[g]);r=m.join(",");q=ub.test(b)&&vb(d.parentNode)||d}if(r)try{return ua.apply(e,q.querySelectorAll(r)),e}catch(t){}finally{j===W&&d.removeAttribute("id")}}}return Vb(b.replace(bb,
"$1"),d,e,f)},wb=function(){function b(e,f){return d.push(e+" ")>Q.cacheLength&&delete b[d.shift()],b[e+" "]=f}var d=[];return b},la=function(b){return b[W]=!0,b},na=function(b){var d=T.createElement("fieldset");try{return!!b(d)}catch(e){return!1}finally{d.parentNode&&d.parentNode.removeChild(d)}},xb=function(b,d){for(var e=b.split("|"),f=e.length;f--;)Q.attrHandle[e[f]]=d},Wb=function(b,d){var e=d&&b,f=e&&1===b.nodeType&&1===d.nodeType&&b.sourceIndex-d.sourceIndex;if(f)return f;if(e)for(;e=e.nextSibling;)if(e===
d)return-1;return b?1:-1},Qc=function(b){return function(d){return"input"===d.nodeName.toLowerCase()&&d.type===b}},Rc=function(b){return function(d){var e=d.nodeName.toLowerCase();return("input"===e||"button"===e)&&d.type===b}},Xb=function(b){return function(d){return"form"in d?d.parentNode&&!1===d.disabled?"label"in d?"label"in d.parentNode?d.parentNode.disabled===b:d.disabled===b:d.isDisabled===b||d.isDisabled!==!b&&Sc(d)===b:d.disabled===b:"label"in d&&d.disabled===b}},Ea=function(b){return la(function(d){return d=
+d,la(function(e,f){for(var g,m=b([],e.length,d),j=m.length;j--;)e[g=m[j]]&&(e[g]=!(f[g]=e[g]))})})},vb=function(b){return b&&"undefined"!=typeof b.getElementsByTagName&&b},Yb=function(){},ab=function(b){for(var d=0,e=b.length,f="";d<e;d++)f+=b[d].value;return f},cb=function(b,d,e){var f=d.dir,g=d.next,m=g||f,j=e&&"parentNode"===m,l=Tc++;return d.first?function(d,e,g){for(;d=d[f];)if(1===d.nodeType||j)return b(d,e,g);return!1}:function(d,e,r){var q,n,N,t=[oa,l];if(r)for(;d=d[f];){if((1===d.nodeType||
j)&&b(d,e,r))return!0}else for(;d=d[f];)if(1===d.nodeType||j)if(N=d[W]||(d[W]={}),n=N[d.uniqueID]||(N[d.uniqueID]={}),g&&g===d.nodeName.toLowerCase())d=d[f]||d;else{if((q=n[m])&&q[0]===oa&&q[1]===l)return t[2]=q[2];if(n[m]=t,t[2]=b(d,e,r))return!0}return!1}},yb=function(b){return 1<b.length?function(d,e,f){for(var g=b.length;g--;)if(!b[g](d,e,f))return!1;return!0}:b[0]},db=function(b,d,e,f,g){for(var m,j=[],l=0,r=b.length,q=null!=d;l<r;l++)(m=b[l])&&(e&&!e(m,f,g)||(j.push(m),q&&d.push(l)));return j},
zb=function(b,d,e,f,g,m){return f&&!f[W]&&(f=zb(f)),g&&!g[W]&&(g=zb(g,m)),la(function(m,j,l,r){var q,n,t=[],s=[],p=j.length,v;if(!(v=m)){v=d||"*";for(var u=l.nodeType?[l]:l,Hb=[],E=0,x=u.length;E<x;E++)U(v,u[E],Hb);v=Hb}v=!b||!m&&d?v:db(v,t,b,l,r);u=e?g||(m?b:p||f)?[]:j:v;if(e&&e(v,u,l,r),f){q=db(u,s);f(q,[],l,r);for(l=q.length;l--;)(n=q[l])&&(u[s[l]]=!(v[s[l]]=n))}if(m){if(g||b){if(g){q=[];for(l=u.length;l--;)(n=u[l])&&q.push(v[l]=n);g(null,u=[],q,r)}for(l=u.length;l--;)(n=u[l])&&-1<(q=g?Fa(m,n):
t[l])&&(m[q]=!(j[q]=n))}}else u=db(u===j?u.splice(p,u.length):u),g?g(null,j,u,r):ua.apply(j,u)})},Ab=function(b){var d,e,f,g=b.length,m=Q.relative[b[0].type];e=m||Q.relative[" "];for(var j=m?1:0,l=cb(function(b){return b===d},e,!0),r=cb(function(b){return-1<Fa(d,b)},e,!0),q=[function(b,e,f){b=!m&&(f||e!==eb)||((d=e).nodeType?l(b,e,f):r(b,e,f));return d=null,b}];j<g;j++)if(e=Q.relative[b[j].type])q=[cb(yb(q),e)];else{if(e=Q.filter[b[j].type].apply(null,b[j].matches),e[W]){for(f=++j;f<g&&!Q.relative[b[f].type];f++);
return zb(1<j&&yb(q),1<j&&ab(b.slice(0,j-1).concat({value:" "===b[j-2].type?"*":""})).replace(bb,"$1"),e,j<f&&Ab(b.slice(j,f)),f<g&&Ab(b=b.slice(f)),f<g&&ab(b))}q.push(e)}return yb(q)},Ja,Y,Q,fb,Zb,Qa,Bb,Vb,eb,va,Ka,ta,T,ja,ia,ba,Ga,gb,Pa,W="sizzle"+1*new Date,ha=tb.document,oa=0,Tc=0,$b=wb(),ac=wb(),$a=wb(),Cb=function(b,d){return b===d&&(Ka=!0),0},Uc={}.hasOwnProperty,Ha=[],Vc=Ha.pop,Wc=Ha.push,ua=Ha.push,bc=Ha.slice,Fa=function(b,d){for(var e=0,f=b.length;e<f;e++)if(b[e]===d)return e;return-1},
Xc=/[\x20\t\r\n\f]+/g,bb=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Yc=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Zc=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,$c=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,ad=RegExp(":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
bd=/^(?:\\.|[\w-]|[^\x00-\xa0])+$/,hb={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\x00-\xa0])+|[*])/,ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\]"),PSEUDO:RegExp("^:((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},cd=/^(?:input|select|textarea|button)$/i,dd=/^h\d$/i,Ra=/^[^{]+\{\s*\[native \w/,Pc=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ub=/[+~]/,pa=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,qa=function(b,d,e){b="0x"+d-65536;return b!==b||e?d:0>b?String.fromCharCode(b+65536):String.fromCharCode(b>>10|55296,1023&b|56320)},Tb=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ub=function(b,d){return d?"\x00"===b?"\ufffd":b.slice(0,-1)+"\\"+b.charCodeAt(b.length-1).toString(16)+" ":"\\"+b},cc=function(){ta()},
Sc=cb(function(b){return!0===b.disabled&&("form"in b||"label"in b)},{dir:"parentNode",next:"legend"});try{ua.apply(Ha=bc.call(ha.childNodes),ha.childNodes),Ha[ha.childNodes.length].nodeType}catch(Gd){ua={apply:Ha.length?function(b,d){Wc.apply(b,bc.call(d))}:function(b,d){for(var e=b.length,f=0;b[e++]=d[f++];);b.length=e-1}}}Y=U.support={};Zb=U.isXML=function(b){b=b&&(b.ownerDocument||b).documentElement;return!!b&&"HTML"!==b.nodeName};ta=U.setDocument=function(b){var d,e;b=b?b.ownerDocument||b:ha;
return b!==T&&9===b.nodeType&&b.documentElement?(T=b,ja=T.documentElement,ia=!Zb(T),ha!==T&&(e=T.defaultView)&&e.top!==e&&(e.addEventListener?e.addEventListener("unload",cc,!1):e.attachEvent&&e.attachEvent("onunload",cc)),Y.attributes=na(function(b){return b.className="i",!b.getAttribute("className")}),Y.getElementsByTagName=na(function(b){return b.appendChild(T.createComment("")),!b.getElementsByTagName("*").length}),Y.getElementsByClassName=Ra.test(T.getElementsByClassName),Y.getById=na(function(b){return ja.appendChild(b).id=
W,!T.getElementsByName||!T.getElementsByName(W).length}),Y.getById?(Q.filter.ID=function(b){var d=b.replace(pa,qa);return function(b){return b.getAttribute("id")===d}},Q.find.ID=function(b,d){if("undefined"!=typeof d.getElementById&&ia){var e=d.getElementById(b);return e?[e]:[]}}):(Q.filter.ID=function(b){var d=b.replace(pa,qa);return function(b){return(b="undefined"!=typeof b.getAttributeNode&&b.getAttributeNode("id"))&&b.value===d}},Q.find.ID=function(b,d){if("undefined"!=typeof d.getElementById&&
ia){var e,f,g,m=d.getElementById(b);if(m){if(e=m.getAttributeNode("id"),e&&e.value===b)return[m];g=d.getElementsByName(b);for(f=0;m=g[f++];)if(e=m.getAttributeNode("id"),e&&e.value===b)return[m]}return[]}}),Q.find.TAG=Y.getElementsByTagName?function(b,d){return"undefined"!=typeof d.getElementsByTagName?d.getElementsByTagName(b):Y.qsa?d.querySelectorAll(b):void 0}:function(b,d){var e,f=[],g=0,m=d.getElementsByTagName(b);if("*"===b){for(;e=m[g++];)1===e.nodeType&&f.push(e);return f}return m},Q.find.CLASS=
Y.getElementsByClassName&&function(b,d){if("undefined"!=typeof d.getElementsByClassName&&ia)return d.getElementsByClassName(b)},Ga=[],ba=[],(Y.qsa=Ra.test(T.querySelectorAll))&&(na(function(b){ja.appendChild(b).innerHTML="<a id='"+W+"'></a><select id='"+W+"-\r\\' msallowcapture=''><option selected=''></option></select>";b.querySelectorAll("[msallowcapture^='']").length&&ba.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");b.querySelectorAll("[selected]").length||ba.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");
b.querySelectorAll("[id~="+W+"-]").length||ba.push("~=");b.querySelectorAll(":checked").length||ba.push(":checked");b.querySelectorAll("a#"+W+"+*").length||ba.push(".#.+[+~]")}),na(function(b){b.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var d=T.createElement("input");d.setAttribute("type","hidden");b.appendChild(d).setAttribute("name","D");b.querySelectorAll("[name=d]").length&&ba.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==b.querySelectorAll(":enabled").length&&
ba.push(":enabled",":disabled");ja.appendChild(b).disabled=!0;2!==b.querySelectorAll(":disabled").length&&ba.push(":enabled",":disabled");b.querySelectorAll("*,:x");ba.push(",.*:")})),(Y.matchesSelector=Ra.test(gb=ja.matches||ja.webkitMatchesSelector||ja.mozMatchesSelector||ja.oMatchesSelector||ja.msMatchesSelector))&&na(function(b){Y.disconnectedMatch=gb.call(b,"*");gb.call(b,"[s!='']:x");Ga.push("!=",":((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\x00-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\x00-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
ba=ba.length&&RegExp(ba.join("|")),Ga=Ga.length&&RegExp(Ga.join("|")),d=Ra.test(ja.compareDocumentPosition),Pa=d||Ra.test(ja.contains)?function(b,d){var e=9===b.nodeType?b.documentElement:b,f=d&&d.parentNode;return b===f||!(!f||1!==f.nodeType||!(e.contains?e.contains(f):b.compareDocumentPosition&&16&b.compareDocumentPosition(f)))}:function(b,d){if(d)for(;d=d.parentNode;)if(d===b)return!0;return!1},Cb=d?function(b,d){if(b===d)return Ka=!0,0;var e=!b.compareDocumentPosition-!d.compareDocumentPosition;
return e?e:(e=(b.ownerDocument||b)===(d.ownerDocument||d)?b.compareDocumentPosition(d):1,1&e||!Y.sortDetached&&d.compareDocumentPosition(b)===e?b===T||b.ownerDocument===ha&&Pa(ha,b)?-1:d===T||d.ownerDocument===ha&&Pa(ha,d)?1:va?Fa(va,b)-Fa(va,d):0:4&e?-1:1)}:function(b,d){if(b===d)return Ka=!0,0;var e,f=0;e=b.parentNode;var g=d.parentNode,m=[b],j=[d];if(!e||!g)return b===T?-1:d===T?1:e?-1:g?1:va?Fa(va,b)-Fa(va,d):0;if(e===g)return Wb(b,d);for(e=b;e=e.parentNode;)m.unshift(e);for(e=d;e=e.parentNode;)j.unshift(e);
for(;m[f]===j[f];)f++;return f?Wb(m[f],j[f]):m[f]===ha?-1:j[f]===ha?1:0},T):T};U.matches=function(b,d){return U(b,null,null,d)};U.matchesSelector=function(b,d){if((b.ownerDocument||b)!==T&&ta(b),d=d.replace($c,"='$1']"),Y.matchesSelector&&ia&&!$a[d+" "]&&(!Ga||!Ga.test(d))&&(!ba||!ba.test(d)))try{var e=gb.call(b,d);if(e||Y.disconnectedMatch||b.document&&11!==b.document.nodeType)return e}catch(f){}return 0<U(d,T,null,[b]).length};U.contains=function(b,d){return(b.ownerDocument||b)!==T&&ta(b),Pa(b,
d)};U.attr=function(b,d){(b.ownerDocument||b)!==T&&ta(b);var e=Q.attrHandle[d.toLowerCase()],e=e&&Uc.call(Q.attrHandle,d.toLowerCase())?e(b,d,!ia):void 0;return void 0!==e?e:Y.attributes||!ia?b.getAttribute(d):(e=b.getAttributeNode(d))&&e.specified?e.value:null};U.escape=function(b){return(b+"").replace(Tb,Ub)};U.error=function(b){throw Error("Syntax error, unrecognized expression: "+b);};U.uniqueSort=function(b){var d,e=[],f=0,g=0;if(Ka=!Y.detectDuplicates,va=!Y.sortStable&&b.slice(0),b.sort(Cb),
Ka){for(;d=b[g++];)d===b[g]&&(f=e.push(g));for(;f--;)b.splice(e[f],1)}return va=null,b};fb=U.getText=function(b){var d,e="",f=0;if(d=b.nodeType)if(1===d||9===d||11===d){if("string"==typeof b.textContent)return b.textContent;for(b=b.firstChild;b;b=b.nextSibling)e+=fb(b)}else{if(3===d||4===d)return b.nodeValue}else for(;d=b[f++];)e+=fb(d);return e};Q=U.selectors={cacheLength:50,createPseudo:la,match:hb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",
first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){return b[1]=b[1].replace(pa,qa),b[3]=(b[3]||b[4]||b[5]||"").replace(pa,qa),"~="===b[2]&&(b[3]=" "+b[3]+" "),b.slice(0,4)},CHILD:function(b){return b[1]=b[1].toLowerCase(),"nth"===b[1].slice(0,3)?(b[3]||U.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*("even"===b[3]||"odd"===b[3])),b[5]=+(b[7]+b[8]||"odd"===b[3])):b[3]&&U.error(b[0]),b},PSEUDO:function(b){var d,e=!b[6]&&b[2];return hb.CHILD.test(b[0])?null:(b[3]?b[2]=b[4]||b[5]||"":e&&ad.test(e)&&
(d=Qa(e,!0))&&(d=e.indexOf(")",e.length-d)-e.length)&&(b[0]=b[0].slice(0,d),b[2]=e.slice(0,d)),b.slice(0,3))}},filter:{TAG:function(b){var d=b.replace(pa,qa).toLowerCase();return"*"===b?function(){return!0}:function(b){return b.nodeName&&b.nodeName.toLowerCase()===d}},CLASS:function(b){var d=$b[b+" "];return d||(d=RegExp("(^|[\\x20\\t\\r\\n\\f])"+b+"([\\x20\\t\\r\\n\\f]|$)"))&&$b(b,function(b){return d.test("string"==typeof b.className&&b.className||"undefined"!=typeof b.getAttribute&&b.getAttribute("class")||
"")})},ATTR:function(b,d,e){return function(f){f=U.attr(f,b);return null==f?"!="===d:!d||(f+="","="===d?f===e:"!="===d?f!==e:"^="===d?e&&0===f.indexOf(e):"*="===d?e&&-1<f.indexOf(e):"$="===d?e&&f.slice(-e.length)===e:"~="===d?-1<(" "+f.replace(Xc," ")+" ").indexOf(e):"|="===d&&(f===e||f.slice(0,e.length+1)===e+"-"))}},CHILD:function(b,d,e,f,g){var m="nth"!==b.slice(0,3),j="last"!==b.slice(-4),l="of-type"===d;return 1===f&&0===g?function(b){return!!b.parentNode}:function(d,e,q){var r,n,N,t,s,p;e=m!==
j?"nextSibling":"previousSibling";var v=d.parentNode,ca=l&&d.nodeName.toLowerCase();q=!q&&!l;var u=!1;if(v){if(m){for(;e;){for(t=d;t=t[e];)if(l?t.nodeName.toLowerCase()===ca:1===t.nodeType)return!1;p=e="only"===b&&!p&&"nextSibling"}return!0}if(p=[j?v.firstChild:v.lastChild],j&&q){t=v;N=t[W]||(t[W]={});n=N[t.uniqueID]||(N[t.uniqueID]={});r=n[b]||[];u=(s=r[0]===oa&&r[1])&&r[2];for(t=s&&v.childNodes[s];t=++s&&t&&t[e]||(u=s=0)||p.pop();)if(1===t.nodeType&&++u&&t===d){n[b]=[oa,s,u];break}}else if(q&&(t=
d,N=t[W]||(t[W]={}),n=N[t.uniqueID]||(N[t.uniqueID]={}),r=n[b]||[],s=r[0]===oa&&r[1],u=s),!1===u)for(;(t=++s&&t&&t[e]||(u=s=0)||p.pop())&&(!(l?t.nodeName.toLowerCase()===ca:1===t.nodeType)||!++u||!(q&&(N=t[W]||(t[W]={}),n=N[t.uniqueID]||(N[t.uniqueID]={}),n[b]=[oa,u]),t===d)););return u-=g,u===f||0===u%f&&0<=u/f}}},PSEUDO:function(b,d){var e,f=Q.pseudos[b]||Q.setFilters[b.toLowerCase()]||U.error("unsupported pseudo: "+b);return f[W]?f(d):1<f.length?(e=[b,b,"",d],Q.setFilters.hasOwnProperty(b.toLowerCase())?
la(function(b,e){for(var g,m=f(b,d),j=m.length;j--;)g=Fa(b,m[j]),b[g]=!(e[g]=m[j])}):function(b){return f(b,0,e)}):f}},pseudos:{not:la(function(b){var d=[],e=[],f=Bb(b.replace(bb,"$1"));return f[W]?la(function(b,d,e,g){var m;e=f(b,null,g,[]);for(g=b.length;g--;)(m=e[g])&&(b[g]=!(d[g]=m))}):function(b,g,m){return d[0]=b,f(d,null,m,e),d[0]=null,!e.pop()}}),has:la(function(b){return function(d){return 0<U(b,d).length}}),contains:la(function(b){return b=b.replace(pa,qa),function(d){return-1<(d.textContent||
d.innerText||fb(d)).indexOf(b)}}),lang:la(function(b){return bd.test(b||"")||U.error("unsupported lang: "+b),b=b.replace(pa,qa).toLowerCase(),function(d){var e;do if(e=ia?d.lang:d.getAttribute("xml:lang")||d.getAttribute("lang"))return e=e.toLowerCase(),e===b||0===e.indexOf(b+"-");while((d=d.parentNode)&&1===d.nodeType);return!1}}),target:function(b){var d=tb.location&&tb.location.hash;return d&&d.slice(1)===b.id},root:function(b){return b===ja},focus:function(b){return b===T.activeElement&&(!T.hasFocus||
T.hasFocus())&&!(!b.type&&!b.href&&!~b.tabIndex)},enabled:Xb(!1),disabled:Xb(!0),checked:function(b){var d=b.nodeName.toLowerCase();return"input"===d&&!!b.checked||"option"===d&&!!b.selected},selected:function(b){return b.parentNode&&b.parentNode.selectedIndex,!0===b.selected},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(6>b.nodeType)return!1;return!0},parent:function(b){return!Q.pseudos.empty(b)},header:function(b){return dd.test(b.nodeName)},input:function(b){return cd.test(b.nodeName)},
button:function(b){var d=b.nodeName.toLowerCase();return"input"===d&&"button"===b.type||"button"===d},text:function(b){var d;return"input"===b.nodeName.toLowerCase()&&"text"===b.type&&(null==(d=b.getAttribute("type"))||"text"===d.toLowerCase())},first:Ea(function(){return[0]}),last:Ea(function(b,d){return[d-1]}),eq:Ea(function(b,d,e){return[0>e?e+d:e]}),even:Ea(function(b,d){for(var e=0;e<d;e+=2)b.push(e);return b}),odd:Ea(function(b,d){for(var e=1;e<d;e+=2)b.push(e);return b}),lt:Ea(function(b,d,
e){for(d=0>e?e+d:e;0<=--d;)b.push(d);return b}),gt:Ea(function(b,d,e){for(e=0>e?e+d:e;++e<d;)b.push(e);return b})}};Q.pseudos.nth=Q.pseudos.eq;for(Ja in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Q.pseudos[Ja]=Qc(Ja);for(Ja in{submit:!0,reset:!0})Q.pseudos[Ja]=Rc(Ja);Yb.prototype=Q.filters=Q.pseudos;Q.setFilters=new Yb;Qa=U.tokenize=function(b,d){var e,f,g,m,j,l,q;if(j=ac[b+" "])return d?0:j.slice(0);j=b;l=[];for(q=Q.preFilter;j;){e&&!(f=Yc.exec(j))||(f&&(j=j.slice(f[0].length)||j),l.push(g=
[]));e=!1;(f=Zc.exec(j))&&(e=f.shift(),g.push({value:e,type:f[0].replace(bb," ")}),j=j.slice(e.length));for(m in Q.filter)!(f=hb[m].exec(j))||q[m]&&!(f=q[m](f))||(e=f.shift(),g.push({value:e,type:m,matches:f}),j=j.slice(e.length));if(!e)break}return d?j.length:j?U.error(b):ac(b,l).slice(0)};sa=(Bb=U.compile=function(b,d){var e,f=[],g=[],m=$a[b+" "];if(!m){d||(d=Qa(b));for(e=d.length;e--;)m=Ab(d[e]),m[W]?f.push(m):g.push(m);e=$a;var j=0<f.length,l=0<g.length,m=function(b,d,e,m,Z){var q,r,n,t=0,N="0",
s=b&&[],p=[],v=eb,u=b||l&&Q.find.TAG("*",Z),ca=oa+=null==v?1:Math.random()||0.1,E=u.length;for(Z&&(eb=d===T||d||Z);N!==E&&null!=(q=u[N]);N++){if(l&&q){r=0;for(d||q.ownerDocument===T||(ta(q),e=!ia);n=g[r++];)if(n(q,d||T,e)){m.push(q);break}Z&&(oa=ca)}j&&((q=!n&&q)&&t--,b&&s.push(q))}if(t+=N,j&&N!==t){for(r=0;n=f[r++];)n(s,p,d,e);if(b){if(0<t)for(;N--;)s[N]||p[N]||(p[N]=Vc.call(m));p=db(p)}ua.apply(m,p);Z&&!b&&0<p.length&&1<t+f.length&&U.uniqueSort(m)}return Z&&(oa=ca,eb=v),s},m=j?la(m):m,m=e(b,m);
m.selector=b}return m},Vb=U.select=function(b,d,e,f){var g,m,j,l,q,r="function"==typeof b&&b,n=!f&&Qa(b=r.selector||b);if(e=e||[],1===n.length){if(m=n[0]=n[0].slice(0),2<m.length&&"ID"===(j=m[0]).type&&9===d.nodeType&&ia&&Q.relative[m[1].type]){if(d=(Q.find.ID(j.matches[0].replace(pa,qa),d)||[])[0],!d)return e;r&&(d=d.parentNode);b=b.slice(m.shift().value.length)}for(g=hb.needsContext.test(b)?0:m.length;g--&&!(j=m[g],Q.relative[l=j.type]);)if((q=Q.find[l])&&(f=q(j.matches[0].replace(pa,qa),ub.test(m[0].type)&&
vb(d.parentNode)||d))){if(m.splice(g,1),b=f.length&&ab(m),!b)return ua.apply(e,f),e;break}}return(r||Bb(b,n))(f,d,!ia,e,!d||ub.test(b)&&vb(d.parentNode)||d),e},Y.sortStable=W.split("").sort(Cb).join("")===W,Y.detectDuplicates=!!Ka,ta(),Y.sortDetached=na(function(b){return 1&b.compareDocumentPosition(T.createElement("fieldset"))}),na(function(b){return b.innerHTML="<a href='#'></a>","#"===b.firstChild.getAttribute("href")})||xb("type|href|height|width",function(b,d,e){if(!e)return b.getAttribute(d,
"type"===d.toLowerCase()?1:2)}),Y.attributes&&na(function(b){return b.innerHTML="<input/>",b.firstChild.setAttribute("value",""),""===b.firstChild.getAttribute("value")})||xb("value",function(b,d,e){if(!e&&"input"===b.nodeName.toLowerCase())return b.defaultValue}),na(function(b){return null==b.getAttribute("disabled")})||xb("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(b,d,e){var f;if(!e)return!0===b[d]?d.toLowerCase():
(f=b.getAttributeNode(d))&&f.specified?f.value:null}),U);p.find=sa;p.expr=sa.selectors;p.expr[":"]=p.expr.pseudos;p.uniqueSort=p.unique=sa.uniqueSort;p.text=sa.getText;p.isXMLDoc=sa.isXML;p.contains=sa.contains;p.escapeSelector=sa.escape;var La=function(b,d,e){for(var f=[],g=void 0!==e;(b=b[d])&&9!==b.nodeType;)if(1===b.nodeType){if(g&&p(b).is(e))break;f.push(b)}return f},dc=function(b,d){for(var e=[];b;b=b.nextSibling)1===b.nodeType&&b!==d&&e.push(b);return e},ec=p.expr.match.needsContext,fc=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,
Ac=/^.[^:#\[\.,]*$/;p.filter=function(b,d,e){var f=d[0];return e&&(b=":not("+b+")"),1===d.length&&1===f.nodeType?p.find.matchesSelector(f,b)?[f]:[]:p.find.matches(b,p.grep(d,function(b){return 1===b.nodeType}))};p.fn.extend({find:function(b){var d,e,f=this.length,g=this;if("string"!=typeof b)return this.pushStack(p(b).filter(function(){for(d=0;d<f;d++)if(p.contains(g[d],this))return!0}));e=this.pushStack([]);for(d=0;d<f;d++)p.find(b,g[d],e);return 1<f?p.uniqueSort(e):e},filter:function(b){return this.pushStack(j(this,
b||[],!1))},not:function(b){return this.pushStack(j(this,b||[],!0))},is:function(b){return!!j(this,"string"==typeof b&&ec.test(b)?p(b):b||[],!1).length}});var gc,ed=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(p.fn.init=function(b,d,e){var f,g;if(!b)return this;if(e=e||gc,"string"==typeof b){if(f="<"===b[0]&&">"===b[b.length-1]&&3<=b.length?[null,b,null]:ed.exec(b),!f||!f[1]&&d)return!d||d.jquery?(d||e).find(b):this.constructor(d).find(b);if(f[1]){if(d=d instanceof p?d[0]:d,p.merge(this,p.parseHTML(f[1],
d&&d.nodeType?d.ownerDocument||d:R,!0)),fc.test(f[1])&&p.isPlainObject(d))for(f in d)p.isFunction(this[f])?this[f](d[f]):this.attr(f,d[f]);return this}return g=R.getElementById(f[2]),g&&(this[0]=g,this.length=1),this}return b.nodeType?(this[0]=b,this.length=1,this):p.isFunction(b)?void 0!==e.ready?e.ready(b):b(p):p.makeArray(b,this)}).prototype=p.fn;gc=p(R);var fd=/^(?:parents|prev(?:Until|All))/,gd={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({has:function(b){var d=p(b,this),e=d.length;
return this.filter(function(){for(var b=0;b<e;b++)if(p.contains(this,d[b]))return!0})},closest:function(b,d){var e,f=0,g=this.length,m=[],j="string"!=typeof b&&p(b);if(!ec.test(b))for(;f<g;f++)for(e=this[f];e&&e!==d;e=e.parentNode)if(11>e.nodeType&&(j?-1<j.index(e):1===e.nodeType&&p.find.matchesSelector(e,b))){m.push(e);break}return this.pushStack(1<m.length?p.uniqueSort(m):m)},index:function(b){return b?"string"==typeof b?Na.call(p(b),this[0]):Na.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?
this.first().prevAll().length:-1},add:function(b,d){return this.pushStack(p.uniqueSort(p.merge(this.get(),p(b,d))))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});p.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return La(b,"parentNode")},parentsUntil:function(b,d,e){return La(b,"parentNode",e)},next:function(b){return l(b,"nextSibling")},prev:function(b){return l(b,"previousSibling")},nextAll:function(b){return La(b,
"nextSibling")},prevAll:function(b){return La(b,"previousSibling")},nextUntil:function(b,d,e){return La(b,"nextSibling",e)},prevUntil:function(b,d,e){return La(b,"previousSibling",e)},siblings:function(b){return dc((b.parentNode||{}).firstChild,b)},children:function(b){return dc(b.firstChild)},contents:function(b){return g(b,"iframe")?b.contentDocument:(g(b,"template")&&(b=b.content||b),p.merge([],b.childNodes))}},function(b,d){p.fn[b]=function(e,f){var g=p.map(this,d,e);return"Until"!==b.slice(-5)&&
(f=e),f&&"string"==typeof f&&(g=p.filter(f,g)),1<this.length&&(gd[b]||p.uniqueSort(g),fd.test(b)&&g.reverse()),this.pushStack(g)}});var ga=/[^\x20\t\r\n\f]+/g;p.Callbacks=function(b){var d;if("string"==typeof b){var e={};d=(p.each(b.match(ga)||[],function(b,d){e[d]=!0}),e)}else d=p.extend({},b);b=d;var f,g,m,j,l=[],q=[],r=-1,n=function(){j=j||b.once;for(m=f=!0;q.length;r=-1)for(g=q.shift();++r<l.length;)!1===l[r].apply(g[0],g[1])&&b.stopOnFalse&&(r=l.length,g=!1);b.memory||(g=!1);f=!1;j&&(l=g?[]:
"")},t={add:function(){return l&&(g&&!f&&(r=l.length-1,q.push(g)),function Gc(d){p.each(d,function(d,e){p.isFunction(e)?b.unique&&t.has(e)||l.push(e):e&&e.length&&"string"!==p.type(e)&&Gc(e)})}(arguments),g&&!f&&n()),this},remove:function(){return p.each(arguments,function(b,d){for(var e;-1<(e=p.inArray(d,l,e));)l.splice(e,1),e<=r&&r--}),this},has:function(b){return b?-1<p.inArray(b,l):0<l.length},empty:function(){return l&&(l=[]),this},disable:function(){return j=q=[],l=g="",this},disabled:function(){return!l},
lock:function(){return j=q=[],g||f||(l=g=""),this},locked:function(){return!!j},fireWith:function(b,d){return j||(d=d||[],d=[b,d.slice?d.slice():d],q.push(d),f||n()),this},fire:function(){return t.fireWith(this,arguments),this},fired:function(){return!!m}};return t};p.extend({Deferred:function(d){var e=[["notify","progress",p.Callbacks("memory"),p.Callbacks("memory"),2],["resolve","done",p.Callbacks("once memory"),p.Callbacks("once memory"),0,"resolved"],["reject","fail",p.Callbacks("once memory"),
p.Callbacks("once memory"),1,"rejected"]],f="pending",g={state:function(){return f},always:function(){return j.done(arguments).fail(arguments),this},"catch":function(b){return g.then(null,b)},pipe:function(){var b=arguments;return p.Deferred(function(d){p.each(e,function(e,f){var g=p.isFunction(b[f[4]])&&b[f[4]];j[f[1]](function(){var b=g&&g.apply(this,arguments);b&&p.isFunction(b.promise)?b.promise().progress(d.notify).done(d.resolve).fail(d.reject):d[f[0]+"With"](this,g?[b]:arguments)})});b=null}).promise()},
then:function(d,f,g){function j(d,e,f,g){return function(){var q=this,r=arguments,Z=function(){var b,Z;if(!(d<l)){if(b=f.apply(q,r),b===e.promise())throw new TypeError("Thenable self-resolution");Z=b&&("object"==typeof b||"function"==typeof b)&&b.then;p.isFunction(Z)?g?Z.call(b,j(l,e,n,g),j(l,e,m,g)):(l++,Z.call(b,j(l,e,n,g),j(l,e,m,g),j(l,e,n,e.notifyWith))):(f!==n&&(q=void 0,r=[b]),(g||e.resolveWith)(q,r))}},t=g?Z:function(){try{Z()}catch(b){p.Deferred.exceptionHook&&p.Deferred.exceptionHook(b,
t.stackTrace),d+1>=l&&(f!==m&&(q=void 0,r=[b]),e.rejectWith(q,r))}};d?t():(p.Deferred.getStackHook&&(t.stackTrace=p.Deferred.getStackHook()),b.setTimeout(t))}}var l=0;return p.Deferred(function(b){e[0][3].add(j(0,b,p.isFunction(g)?g:n,b.notifyWith));e[1][3].add(j(0,b,p.isFunction(d)?d:n));e[2][3].add(j(0,b,p.isFunction(f)?f:m))}).promise()},promise:function(b){return null!=b?p.extend(b,g):g}},j={};return p.each(e,function(b,d){var m=d[2],l=d[5];g[d[1]]=m.add;l&&m.add(function(){f=l},e[3-b][2].disable,
e[0][2].lock);m.add(d[3].fire);j[d[0]]=function(){return j[d[0]+"With"](this===j?void 0:this,arguments),this};j[d[0]+"With"]=m.fireWith}),g.promise(j),d&&d.call(j,j),j},when:function(b){var d=arguments.length,e=d,f=Array(e),g=Da.call(arguments),m=p.Deferred(),j=function(b){return function(e){f[b]=this;g[b]=1<arguments.length?Da.call(arguments):e;--d||m.resolveWith(f,g)}};if(1>=d&&(r(b,m.done(j(e)).resolve,m.reject,!d),"pending"===m.state()||p.isFunction(g[e]&&g[e].then)))return m.then();for(;e--;)r(g[e],
j(e),m.reject);return m.promise()}});var hd=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;p.Deferred.exceptionHook=function(d,e){b.console&&b.console.warn&&d&&hd.test(d.name)&&b.console.warn("jQuery.Deferred exception: "+d.message,d.stack,e)};p.readyException=function(d){b.setTimeout(function(){throw d;})};var Db=p.Deferred();p.fn.ready=function(b){return Db.then(b)["catch"](function(b){p.readyException(b)}),this};p.extend({isReady:!1,readyWait:1,ready:function(b){(!0===b?--p.readyWait:
p.isReady)||(p.isReady=!0,!0!==b&&0<--p.readyWait||Db.resolveWith(R,[p]))}});p.ready.then=Db.then;"complete"===R.readyState||"loading"!==R.readyState&&!R.documentElement.doScroll?b.setTimeout(p.ready):(R.addEventListener("DOMContentLoaded",q),b.addEventListener("load",q));var ra=function(b,d,e,f,g,m,j){var l=0,q=b.length,r=null==e;if("object"===p.type(e))for(l in g=!0,e)ra(b,d,l,e[l],!0,m,j);else if(void 0!==f&&(g=!0,p.isFunction(f)||(j=!0),r&&(j?(d.call(b,f),d=null):(r=d,d=function(b,d,e){return r.call(p(b),
e)})),d))for(;l<q;l++)d(b[l],e,j?f:f.call(b[l],l,d(b[l],e)));return g?b:r?d.call(b):q?d(b[0],e):m},ib=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};s.uid=1;s.prototype={cache:function(b){var d=b[this.expando];return d||(d={},ib(b)&&(b.nodeType?b[this.expando]=d:Object.defineProperty(b,this.expando,{value:d,configurable:!0}))),d},set:function(b,d,e){var f;b=this.cache(b);if("string"==typeof d)b[p.camelCase(d)]=e;else for(f in d)b[p.camelCase(f)]=d[f];return b},get:function(b,d){return void 0===
d?this.cache(b):b[this.expando]&&b[this.expando][p.camelCase(d)]},access:function(b,d,e){return void 0===d||d&&"string"==typeof d&&void 0===e?this.get(b,d):(this.set(b,d,e),void 0!==e?e:d)},remove:function(b,d){var e,f=b[this.expando];if(void 0!==f){if(void 0!==d){Array.isArray(d)?d=d.map(p.camelCase):(d=p.camelCase(d),d=d in f?[d]:d.match(ga)||[]);for(e=d.length;e--;)delete f[d[e]]}(void 0===d||p.isEmptyObject(f))&&(b.nodeType?b[this.expando]=void 0:delete b[this.expando])}},hasData:function(b){b=
b[this.expando];return void 0!==b&&!p.isEmptyObject(b)}};var K=new s,da=new s,Cc=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Bc=/[A-Z]/g;p.extend({hasData:function(b){return da.hasData(b)||K.hasData(b)},data:function(b,d,e){return da.access(b,d,e)},removeData:function(b,d){da.remove(b,d)},_data:function(b,d,e){return K.access(b,d,e)},_removeData:function(b,d){K.remove(b,d)}});p.fn.extend({data:function(b,d){var e,f,g,m=this[0],j=m&&m.attributes;if(void 0===b){if(this.length&&(g=da.get(m),1===m.nodeType&&!K.get(m,
"hasDataAttrs"))){for(e=j.length;e--;)j[e]&&(f=j[e].name,0===f.indexOf("data-")&&(f=p.camelCase(f.slice(5)),t(m,f,g[f])));K.set(m,"hasDataAttrs",!0)}return g}return"object"==typeof b?this.each(function(){da.set(this,b)}):ra(this,function(d){var e;if(m&&void 0===d){if((e=da.get(m,b),void 0!==e)||(e=t(m,b),void 0!==e))return e}else this.each(function(){da.set(this,b,d)})},null,d,1<arguments.length,null,!0)},removeData:function(b){return this.each(function(){da.remove(this,b)})}});p.extend({queue:function(b,
d,e){var f;if(b)return d=(d||"fx")+"queue",f=K.get(b,d),e&&(!f||Array.isArray(e)?f=K.access(b,d,p.makeArray(e)):f.push(e)),f||[]},dequeue:function(b,d){d=d||"fx";var e=p.queue(b,d),f=e.length,g=e.shift(),m=p._queueHooks(b,d),j=function(){p.dequeue(b,d)};"inprogress"===g&&(g=e.shift(),f--);g&&("fx"===d&&e.unshift("inprogress"),delete m.stop,g.call(b,j,m));!f&&m&&m.empty.fire()},_queueHooks:function(b,d){var e=d+"queueHooks";return K.get(b,e)||K.access(b,e,{empty:p.Callbacks("once memory").add(function(){K.remove(b,
[d+"queue",e])})})}});p.fn.extend({queue:function(b,d){var e=2;return"string"!=typeof b&&(d=b,b="fx",e--),arguments.length<e?p.queue(this[0],b):void 0===d?this:this.each(function(){var e=p.queue(this,b,d);p._queueHooks(this,b);"fx"===b&&"inprogress"!==e[0]&&p.dequeue(this,b)})},dequeue:function(b){return this.each(function(){p.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,d){var e,f=1,g=p.Deferred(),m=this,j=this.length,l=function(){--f||g.resolveWith(m,
[m])};"string"!=typeof b&&(d=b,b=void 0);for(b=b||"fx";j--;)(e=K.get(m[j],b+"queueHooks"))&&e.empty&&(f++,e.empty.add(l));return l(),g.promise(d)}});var hc=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Oa=RegExp("^(?:([+-])=|)("+hc+")([a-z%]*)$","i"),za=["Top","Right","Bottom","Left"],Va=function(b,d){return b=d||b,"none"===b.style.display||""===b.style.display&&p.contains(b.ownerDocument,b)&&"none"===p.css(b,"display")},ic=function(b,d,e,f){var g,m={};for(g in d)m[g]=b.style[g],b.style[g]=d[g];e=
e.apply(b,f||[]);for(g in d)b.style[g]=m[g];return e},Ib={};p.fn.extend({show:function(){return u(this,!0)},hide:function(){return u(this)},toggle:function(b){return"boolean"==typeof b?b?this.show():this.hide():this.each(function(){Va(this)?p(this).show():p(this).hide()})}});var jc=/^(?:checkbox|radio)$/i,Jb=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Kb=/^$|\/(?:java|ecma)script/i,ea={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ea.optgroup=ea.option;ea.tbody=ea.tfoot=ea.colgroup=ea.caption=ea.thead;ea.th=ea.td;var Dc=/<|&#?\w+;/,jb=R.createDocumentFragment().appendChild(R.createElement("div")),kb=R.createElement("input");kb.setAttribute("type","radio");kb.setAttribute("checked","checked");kb.setAttribute("name","t");jb.appendChild(kb);V.checkClone=jb.cloneNode(!0).cloneNode(!0).lastChild.checked;jb.innerHTML=
"<textarea>x</textarea>";V.noCloneChecked=!!jb.cloneNode(!0).lastChild.defaultValue;!0;var lb=R.documentElement,id=/^key/,jd=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,kc=/^([^.]*)(?:\.(.+)|)/;p.event={global:{},add:function(b,d,e,f,g){var m,j,l,q,r,n,t,s,v,u;if(r=K.get(b)){e.handler&&(m=e,e=m.handler,g=m.selector);g&&p.find.matchesSelector(lb,g);e.guid||(e.guid=p.guid++);(q=r.events)||(q=r.events={});(j=r.handle)||(j=r.handle=function(d){return"undefined"!=typeof p&&p.event.triggered!==d.type?
p.event.dispatch.apply(b,arguments):void 0});d=(d||"").match(ga)||[""];for(r=d.length;r--;)l=kc.exec(d[r])||[],v=u=l[1],l=(l[2]||"").split(".").sort(),v&&(t=p.event.special[v]||{},v=(g?t.delegateType:t.bindType)||v,t=p.event.special[v]||{},n=p.extend({type:v,origType:u,data:f,handler:e,guid:e.guid,selector:g,needsContext:g&&p.expr.match.needsContext.test(g),namespace:l.join(".")},m),(s=q[v])||(s=q[v]=[],s.delegateCount=0,t.setup&&!1!==t.setup.call(b,f,l,j)||b.addEventListener&&b.addEventListener(v,
j)),t.add&&(t.add.call(b,n),n.handler.guid||(n.handler.guid=e.guid)),g?s.splice(s.delegateCount++,0,n):s.push(n),p.event.global[v]=!0)}},remove:function(b,d,e,f,g){var m,j,l,q,r,n,t,s,v,u,E,x=K.hasData(b)&&K.get(b);if(x&&(q=x.events)){d=(d||"").match(ga)||[""];for(r=d.length;r--;)if(l=kc.exec(d[r])||[],v=E=l[1],u=(l[2]||"").split(".").sort(),v){t=p.event.special[v]||{};v=(f?t.delegateType:t.bindType)||v;s=q[v]||[];l=l[2]&&RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)");for(j=m=s.length;m--;)n=
s[m],!g&&E!==n.origType||e&&e.guid!==n.guid||l&&!l.test(n.namespace)||f&&f!==n.selector&&("**"!==f||!n.selector)||(s.splice(m,1),n.selector&&s.delegateCount--,t.remove&&t.remove.call(b,n));j&&!s.length&&(t.teardown&&!1!==t.teardown.call(b,u,x.handle)||p.removeEvent(b,v,x.handle),delete q[v])}else for(v in q)p.event.remove(b,v+d[r],e,f,!0);p.isEmptyObject(q)&&K.remove(b,"handle events")}},dispatch:function(b){var d=p.event.fix(b),e,f,g,m,j,l,q=Array(arguments.length);f=(K.get(this,"events")||{})[d.type]||
[];var r=p.event.special[d.type]||{};q[0]=d;for(e=1;e<arguments.length;e++)q[e]=arguments[e];if(d.delegateTarget=this,!r.preDispatch||!1!==r.preDispatch.call(this,d)){l=p.event.handlers.call(this,d,f);for(e=0;(m=l[e++])&&!d.isPropagationStopped();){d.currentTarget=m.elem;for(f=0;(j=m.handlers[f++])&&!d.isImmediatePropagationStopped();)d.rnamespace&&!d.rnamespace.test(j.namespace)||(d.handleObj=j,d.data=j.data,g=((p.event.special[j.origType]||{}).handle||j.handler).apply(m.elem,q),void 0!==g&&!1===
(d.result=g)&&(d.preventDefault(),d.stopPropagation()))}return r.postDispatch&&r.postDispatch.call(this,d),d.result}},handlers:function(b,d){var e,f,g,m,j,l=[],q=d.delegateCount,r=b.target;if(q&&r.nodeType&&!("click"===b.type&&1<=b.button))for(;r!==this;r=r.parentNode||this)if(1===r.nodeType&&("click"!==b.type||!0!==r.disabled)){m=[];j={};for(e=0;e<q;e++)f=d[e],g=f.selector+" ",void 0===j[g]&&(j[g]=f.needsContext?-1<p(g,this).index(r):p.find(g,this,null,[r]).length),j[g]&&m.push(f);m.length&&l.push({elem:r,
handlers:m})}return r=this,q<d.length&&l.push({elem:r,handlers:d.slice(q)}),l},addProp:function(b,d){Object.defineProperty(p.Event.prototype,b,{enumerable:!0,configurable:!0,get:p.isFunction(d)?function(){if(this.originalEvent)return d(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[b]},set:function(d){Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:d})}})},fix:function(b){return b[p.expando]?b:new p.Event(b)},special:{load:{noBubble:!0},
focus:{trigger:function(){if(this!==F()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===F()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&g(this,"input"))return this.click(),!1},_default:function(b){return g(b.target,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&b.originalEvent&&(b.originalEvent.returnValue=b.result)}}}};p.removeEvent=function(b,d,e){b.removeEventListener&&
b.removeEventListener(d,e)};p.Event=function(b,d){return this instanceof p.Event?(b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||void 0===b.defaultPrevented&&!1===b.returnValue?M:E,this.target=b.target&&3===b.target.nodeType?b.target.parentNode:b.target,this.currentTarget=b.currentTarget,this.relatedTarget=b.relatedTarget):this.type=b,d&&p.extend(this,d),this.timeStamp=b&&b.timeStamp||p.now(),void(this[p.expando]=!0)):new p.Event(b,d)};p.Event.prototype=
{constructor:p.Event,isDefaultPrevented:E,isPropagationStopped:E,isImmediatePropagationStopped:E,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=M;b&&!this.isSimulated&&b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=M;b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=M;b&&!this.isSimulated&&b.stopImmediatePropagation();
this.stopPropagation()}};p.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(b){var d=b.button;return null==b.which&&id.test(b.type)?null!=b.charCode?b.charCode:b.keyCode:!b.which&&void 0!==d&&jd.test(b.type)?
1&d?1:2&d?3:4&d?2:0:b.which}},p.event.addProp);p.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,d){p.event.special[b]={delegateType:d,bindType:d,handle:function(b){var e,f=b.relatedTarget,g=b.handleObj;return f&&(f===this||p.contains(this,f))||(b.type=g.origType,e=g.handler.apply(this,arguments),b.type=d),e}}});p.fn.extend({on:function(b,d,e,f){return S(this,b,d,e,f)},one:function(b,d,e,f){return S(this,b,d,e,f,1)},off:function(b,
d,e){var f,g;if(b&&b.preventDefault&&b.handleObj)return f=b.handleObj,p(b.delegateTarget).off(f.namespace?f.origType+"."+f.namespace:f.origType,f.selector,f.handler),this;if("object"==typeof b){for(g in b)this.off(g,d,b[g]);return this}return!1!==d&&"function"!=typeof d||(e=d,d=void 0),!1===e&&(e=E),this.each(function(){p.event.remove(this,b,e,d)})}});var kd=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,ld=/<script|<style|<link/i,Fc=/checked\s*(?:[^=]|=\s*.checked.)/i,
Ec=/^true\/(.*)/,Hc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;p.extend({htmlPrefilter:function(b){return b.replace(kd,"<$1></$2>")},clone:function(b,d,e){var f,g,m,j,l=b.cloneNode(!0),r=p.contains(b.ownerDocument,b);if(!V.noCloneChecked&&!(1!==b.nodeType&&11!==b.nodeType||p.isXMLDoc(b))){j=x(l);m=x(b);f=0;for(g=m.length;f<g;f++){var q=m[f],n=j[f],t=n.nodeName.toLowerCase();"input"===t&&jc.test(q.type)?n.checked=q.checked:"input"!==t&&"textarea"!==t||(n.defaultValue=q.defaultValue)}}if(d)if(e){m=
m||x(b);j=j||x(l);f=0;for(g=m.length;f<g;f++)P(m[f],j[f])}else P(b,l);return j=x(l,"script"),0<j.length&&D(j,!r&&x(b,"script")),l},cleanData:function(b){for(var d,e,f,g=p.event.special,m=0;void 0!==(e=b[m]);m++)if(ib(e)){if(d=e[K.expando]){if(d.events)for(f in d.events)g[f]?p.event.remove(e,f):p.removeEvent(e,f,d.handle);e[K.expando]=void 0}e[da.expando]&&(e[da.expando]=void 0)}}});p.fn.extend({detach:function(b){return A(this,b,!0)},remove:function(b){return A(this,b)},text:function(b){return ra(this,
function(b){return void 0===b?p.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=b)})},null,b,arguments.length)},append:function(){return G(this,arguments,function(b){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&I(this,b).appendChild(b)})},prepend:function(){return G(this,arguments,function(b){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var d=I(this,b);d.insertBefore(b,d.firstChild)}})},before:function(){return G(this,
arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return G(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var b,d=0;null!=(b=this[d]);d++)1===b.nodeType&&(p.cleanData(x(b,!1)),b.textContent="");return this},clone:function(b,d){return b=null!=b&&b,d=null==d?b:d,this.map(function(){return p.clone(this,b,d)})},html:function(b){return ra(this,function(b){var d=this[0]||{},e=0,f=this.length;
if(void 0===b&&1===d.nodeType)return d.innerHTML;if("string"==typeof b&&!ld.test(b)&&!ea[(Jb.exec(b)||["",""])[1].toLowerCase()]){b=p.htmlPrefilter(b);try{for(;e<f;e++)d=this[e]||{},1===d.nodeType&&(p.cleanData(x(d,!1)),d.innerHTML=b);d=0}catch(g){}}d&&this.empty().append(b)},null,b,arguments.length)},replaceWith:function(){var b=[];return G(this,arguments,function(d){var e=this.parentNode;0>p.inArray(this,b)&&(p.cleanData(x(this)),e&&e.replaceChild(d,this))},b)}});p.each({appendTo:"append",prependTo:"prepend",
insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,d){p.fn[b]=function(b){for(var e=[],f=p(b),g=f.length-1,m=0;m<=g;m++)b=m===g?this:this.clone(!0),p(f[m])[d](b),sb.apply(e,b.get());return this.pushStack(e)}});var Mb=/^margin/,ob=RegExp("^("+hc+")(?!px)[a-z%]+$","i"),Wa=function(d){var e=d.ownerDocument.defaultView;return e&&e.opener||(e=b),e.getComputedStyle(d)},nb=function(){if(ma){ma.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%";
ma.innerHTML="";lb.appendChild(mb);var d=b.getComputedStyle(ma);lc="1%"!==d.top;mc="2px"===d.marginLeft;nc="4px"===d.width;ma.style.marginRight="50%";oc="4px"===d.marginRight;lb.removeChild(mb);ma=null}},lc,nc,oc,mc,mb=R.createElement("div"),ma=R.createElement("div");ma.style&&(ma.style.backgroundClip="content-box",ma.cloneNode(!0).style.backgroundClip="",V.clearCloneStyle="content-box"===ma.style.backgroundClip,mb.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",
mb.appendChild(ma),p.extend(V,{pixelPosition:function(){return nb(),lc},boxSizingReliable:function(){return nb(),nc},pixelMarginRight:function(){return nb(),oc},reliableMarginLeft:function(){return nb(),mc}}));!0;var md=/^(none|table(?!-c[ea]).+)/,pc=/^--/,nd={position:"absolute",visibility:"hidden",display:"block"},qc={letterSpacing:"0",fontWeight:"400"},Ob=["Webkit","Moz","ms"],Nb=R.createElement("div").style;p.extend({cssHooks:{opacity:{get:function(b,d){if(d){var e=J(b,"opacity");return""===e?
"1":e}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(b,d,e,f){if(b&&3!==b.nodeType&&8!==b.nodeType&&b.style){var g,m,j,l=p.camelCase(d),r=pc.test(d),q=b.style;return r||(d=xa(l)),j=p.cssHooks[d]||p.cssHooks[l],void 0===e?j&&"get"in j&&void 0!==(g=j.get(b,!1,f))?g:q[d]:(m=typeof e,"string"===m&&(g=Oa.exec(e))&&g[1]&&
(e=v(b,d,g),m="number"),null!=e&&e===e&&("number"===m&&(e+=g&&g[3]||(p.cssNumber[l]?"":"px")),V.clearCloneStyle||""!==e||0!==d.indexOf("background")||(q[d]="inherit"),j&&"set"in j&&void 0===(e=j.set(b,e,f))||(r?q.setProperty(d,e):q[d]=e)),void 0)}},css:function(b,d,e,f){var g,m,j,l=p.camelCase(d);return pc.test(d)||(d=xa(l)),j=p.cssHooks[d]||p.cssHooks[l],j&&"get"in j&&(g=j.get(b,!0,e)),void 0===g&&(g=J(b,d,f)),"normal"===g&&d in qc&&(g=qc[d]),""===e||e?(m=parseFloat(g),!0===e||isFinite(m)?m||0:g):
g}});p.each(["height","width"],function(b,d){p.cssHooks[d]={get:function(b,e,f){if(e)return!md.test(p.css(b,"display"))||b.getClientRects().length&&b.getBoundingClientRect().width?fa(b,d,f):ic(b,nd,function(){return fa(b,d,f)})},set:function(b,e,f){var g,m=f&&Wa(b);f=f&&aa(b,d,f,"border-box"===p.css(b,"boxSizing",!1,m),m);return f&&(g=Oa.exec(e))&&"px"!==(g[3]||"px")&&(b.style[d]=e,e=p.css(b,d)),ya(b,e,f)}}});p.cssHooks.marginLeft=wa(V.reliableMarginLeft,function(b,d){if(d)return(parseFloat(J(b,"marginLeft"))||
b.getBoundingClientRect().left-ic(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"});p.each({margin:"",padding:"",border:"Width"},function(b,d){p.cssHooks[b+d]={expand:function(e){var f=0,g={};for(e="string"==typeof e?e.split(" "):[e];4>f;f++)g[b+za[f]+d]=e[f]||e[f-2]||e[0];return g}};Mb.test(b)||(p.cssHooks[b+d].set=ya)});p.fn.extend({css:function(b,d){return ra(this,function(b,d,e){var f,g={},m=0;if(Array.isArray(d)){e=Wa(b);for(f=d.length;m<f;m++)g[d[m]]=p.css(b,d[m],!1,
e);return g}return void 0!==e?p.style(b,d,e):p.css(b,d)},b,d,1<arguments.length)}});p.Tween=X;X.prototype={constructor:X,init:function(b,d,e,f,g,m){this.elem=b;this.prop=e;this.easing=g||p.easing._default;this.options=d;this.start=this.now=this.cur();this.end=f;this.unit=m||(p.cssNumber[e]?"":"px")},cur:function(){var b=X.propHooks[this.prop];return b&&b.get?b.get(this):X.propHooks._default.get(this)},run:function(b){var d,e=X.propHooks[this.prop];return this.options.duration?this.pos=d=p.easing[this.easing](b,
this.options.duration*b,0,1,this.options.duration):this.pos=d=b,this.now=(this.end-this.start)*d+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),e&&e.set?e.set(this):X.propHooks._default.set(this),this}};X.prototype.init.prototype=X.prototype;X.propHooks={_default:{get:function(b){var d;return 1!==b.elem.nodeType||null!=b.elem[b.prop]&&null==b.elem.style[b.prop]?b.elem[b.prop]:(d=p.css(b.elem,b.prop,""),d&&"auto"!==d?d:0)},set:function(b){p.fx.step[b.prop]?p.fx.step[b.prop](b):
1!==b.elem.nodeType||null==b.elem.style[p.cssProps[b.prop]]&&!p.cssHooks[b.prop]?b.elem[b.prop]=b.now:p.style(b.elem,b.prop,b.now+b.unit)}}};X.propHooks.scrollTop=X.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&b.elem.parentNode&&(b.elem[b.prop]=b.now)}};p.easing={linear:function(b){return b},swing:function(b){return 0.5-Math.cos(b*Math.PI)/2},_default:"swing"};p.fx=X.prototype.init;p.fx.step={};var Ia,Xa,od=/^(?:toggle|show|hide)$/,pd=/queueHooks$/;p.Animation=p.extend(ka,{tweeners:{"*":[function(b,
d){var e=this.createTween(b,d);return v(e.elem,b,Oa.exec(d),e),e}]},tweener:function(b,d){p.isFunction(b)?(d=b,b=["*"]):b=b.match(ga);for(var e,f=0,g=b.length;f<g;f++)e=b[f],ka.tweeners[e]=ka.tweeners[e]||[],ka.tweeners[e].unshift(d)},prefilters:[function(b,d,e){var f,g,m,j,l,r,q,n,t="width"in d||"height"in d,s=this,v={},E=b.style,x=b.nodeType&&Va(b),D=K.get(b,"fxshow");e.queue||(j=p._queueHooks(b,"fx"),null==j.unqueued&&(j.unqueued=0,l=j.empty.fire,j.empty.fire=function(){j.unqueued||l()}),j.unqueued++,
s.always(function(){s.always(function(){j.unqueued--;p.queue(b,"fx").length||j.empty.fire()})}));for(f in d)if(g=d[f],od.test(g)){if(delete d[f],m=m||"toggle"===g,g===(x?"hide":"show")){if("show"!==g||!D||void 0===D[f])continue;x=!0}v[f]=D&&D[f]||p.style(b,f)}if(r=!p.isEmptyObject(d),r||!p.isEmptyObject(v))for(f in t&&1===b.nodeType&&(e.overflow=[E.overflow,E.overflowX,E.overflowY],q=D&&D.display,null==q&&(q=K.get(b,"display")),n=p.css(b,"display"),"none"===n&&(q?n=q:(u([b],!0),q=b.style.display||
q,n=p.css(b,"display"),u([b]))),("inline"===n||"inline-block"===n&&null!=q)&&"none"===p.css(b,"float")&&(r||(s.done(function(){E.display=q}),null==q&&(n=E.display,q="none"===n?"":n)),E.display="inline-block")),e.overflow&&(E.overflow="hidden",s.always(function(){E.overflow=e.overflow[0];E.overflowX=e.overflow[1];E.overflowY=e.overflow[2]})),r=!1,v)r||(D?"hidden"in D&&(x=D.hidden):D=K.access(b,"fxshow",{display:q}),m&&(D.hidden=!x),x&&u([b],!0),s.done(function(){x||u([b]);K.remove(b,"fxshow");for(f in v)p.style(b,
f,v[f])})),r=C(x?D[f]:0,f,s),f in D||(D[f]=r.start,x&&(r.end=r.start,r.start=0))}],prefilter:function(b,d){d?ka.prefilters.unshift(b):ka.prefilters.push(b)}});p.speed=function(b,d,e){var f=b&&"object"==typeof b?p.extend({},b):{complete:e||!e&&d||p.isFunction(b)&&b,duration:b,easing:e&&d||d&&!p.isFunction(d)&&d};return p.fx.off?f.duration=0:"number"!=typeof f.duration&&(f.duration in p.fx.speeds?f.duration=p.fx.speeds[f.duration]:f.duration=p.fx.speeds._default),null!=f.queue&&!0!==f.queue||(f.queue=
"fx"),f.old=f.complete,f.complete=function(){p.isFunction(f.old)&&f.old.call(this);f.queue&&p.dequeue(this,f.queue)},f};p.fn.extend({fadeTo:function(b,d,e,f){return this.filter(Va).css("opacity",0).show().end().animate({opacity:d},b,e,f)},animate:function(b,d,e,f){var g=p.isEmptyObject(b),m=p.speed(d,e,f);d=function(){var d=ka(this,p.extend({},b),m);(g||K.get(this,"finish"))&&d.stop(!0)};return d.finish=d,g||!1===m.queue?this.each(d):this.queue(m.queue,d)},stop:function(b,d,e){var f=function(b){var d=
b.stop;delete b.stop;d(e)};return"string"!=typeof b&&(e=d,d=b,b=void 0),d&&!1!==b&&this.queue(b||"fx",[]),this.each(function(){var d=!0,g=null!=b&&b+"queueHooks",m=p.timers,j=K.get(this);if(g)j[g]&&j[g].stop&&f(j[g]);else for(g in j)j[g]&&j[g].stop&&pd.test(g)&&f(j[g]);for(g=m.length;g--;)m[g].elem!==this||null!=b&&m[g].queue!==b||(m[g].anim.stop(e),d=!1,m.splice(g,1));!d&&e||p.dequeue(this,b)})},finish:function(b){return!1!==b&&(b=b||"fx"),this.each(function(){var d,e=K.get(this),f=e[b+"queue"];
d=e[b+"queueHooks"];var g=p.timers,m=f?f.length:0;e.finish=!0;p.queue(this,b,[]);d&&d.stop&&d.stop.call(this,!0);for(d=g.length;d--;)g[d].elem===this&&g[d].queue===b&&(g[d].anim.stop(!0),g.splice(d,1));for(d=0;d<m;d++)f[d]&&f[d].finish&&f[d].finish.call(this);delete e.finish})}});p.each(["toggle","show","hide"],function(b,d){var e=p.fn[d];p.fn[d]=function(b,f,g){return null==b||"boolean"==typeof b?e.apply(this,arguments):this.animate(y(d,!0),b,f,g)}});p.each({slideDown:y("show"),slideUp:y("hide"),
slideToggle:y("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,d){p.fn[b]=function(b,e,f){return this.animate(d,b,e,f)}});p.timers=[];p.fx.tick=function(){var b,d=0,e=p.timers;for(Ia=p.now();d<e.length;d++)b=e[d],b()||e[d]!==b||e.splice(d--,1);e.length||p.fx.stop();Ia=void 0};p.fx.timer=function(b){p.timers.push(b);p.fx.start()};p.fx.interval=13;p.fx.start=function(){Xa||(Xa=!0,B())};p.fx.stop=function(){Xa=null};p.fx.speeds={slow:600,fast:200,_default:400};
p.fn.delay=function(d,e){return d=p.fx?p.fx.speeds[d]||d:d,e=e||"fx",this.queue(e,function(e,f){var g=b.setTimeout(e,d);f.stop=function(){b.clearTimeout(g)}})};var Ma=R.createElement("input"),qd=R.createElement("select").appendChild(R.createElement("option"));Ma.type="checkbox";V.checkOn=""!==Ma.value;V.optSelected=qd.selected;Ma=R.createElement("input");Ma.value="t";Ma.type="radio";V.radioValue="t"===Ma.value;var rc,Sa=p.expr.attrHandle;p.fn.extend({attr:function(b,d){return ra(this,p.attr,b,d,1<
arguments.length)},removeAttr:function(b){return this.each(function(){p.removeAttr(this,b)})}});p.extend({attr:function(b,d,e){var f,g,m=b.nodeType;if(3!==m&&8!==m&&2!==m)return"undefined"==typeof b.getAttribute?p.prop(b,d,e):(1===m&&p.isXMLDoc(b)||(g=p.attrHooks[d.toLowerCase()]||(p.expr.match.bool.test(d)?rc:void 0)),void 0!==e?null===e?void p.removeAttr(b,d):g&&"set"in g&&void 0!==(f=g.set(b,e,d))?f:(b.setAttribute(d,e+""),e):g&&"get"in g&&null!==(f=g.get(b,d))?f:(f=p.find.attr(b,d),null==f?void 0:
f))},attrHooks:{type:{set:function(b,d){if(!V.radioValue&&"radio"===d&&g(b,"input")){var e=b.value;return b.setAttribute("type",d),e&&(b.value=e),d}}}},removeAttr:function(b,d){var e,f=0,g=d&&d.match(ga);if(g&&1===b.nodeType)for(;e=g[f++];)b.removeAttribute(e)}});rc={set:function(b,d,e){return!1===d?p.removeAttr(b,e):b.setAttribute(e,e),e}};p.each(p.expr.match.bool.source.match(/\w+/g),function(b,d){var e=Sa[d]||p.find.attr;Sa[d]=function(b,d,f){var g,m,j=d.toLowerCase();return f||(m=Sa[j],Sa[j]=
g,g=null!=e(b,d,f)?j:null,Sa[j]=m),g}});var rd=/^(?:input|select|textarea|button)$/i,sd=/^(?:a|area)$/i;p.fn.extend({prop:function(b,d){return ra(this,p.prop,b,d,1<arguments.length)},removeProp:function(b){return this.each(function(){delete this[p.propFix[b]||b]})}});p.extend({prop:function(b,d,e){var f,g,m=b.nodeType;if(3!==m&&8!==m&&2!==m)return 1===m&&p.isXMLDoc(b)||(d=p.propFix[d]||d,g=p.propHooks[d]),void 0!==e?g&&"set"in g&&void 0!==(f=g.set(b,e,d))?f:b[d]=e:g&&"get"in g&&null!==(f=g.get(b,
d))?f:b[d]},propHooks:{tabIndex:{get:function(b){var d=p.find.attr(b,"tabindex");return d?parseInt(d,10):rd.test(b.nodeName)||sd.test(b.nodeName)&&b.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}});V.optSelected||(p.propHooks.selected={get:function(b){b=b.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(b){b=b.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}});p.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),
function(){p.propFix[this.toLowerCase()]=this});p.fn.extend({addClass:function(b){var d,e,f,g,m,j,l=0;if(p.isFunction(b))return this.each(function(d){p(this).addClass(b.call(this,d,Ba(this)))});if("string"==typeof b&&b)for(d=b.match(ga)||[];e=this[l++];)if(g=Ba(e),f=1===e.nodeType&&" "+Aa(g)+" "){for(j=0;m=d[j++];)0>f.indexOf(" "+m+" ")&&(f+=m+" ");f=Aa(f);g!==f&&e.setAttribute("class",f)}return this},removeClass:function(b){var d,e,f,g,m,j,l=0;if(p.isFunction(b))return this.each(function(d){p(this).removeClass(b.call(this,
d,Ba(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof b&&b)for(d=b.match(ga)||[];e=this[l++];)if(g=Ba(e),f=1===e.nodeType&&" "+Aa(g)+" "){for(j=0;m=d[j++];)for(;-1<f.indexOf(" "+m+" ");)f=f.replace(" "+m+" "," ");f=Aa(f);g!==f&&e.setAttribute("class",f)}return this},toggleClass:function(b,d){var e=typeof b;return"boolean"==typeof d&&"string"===e?d?this.addClass(b):this.removeClass(b):p.isFunction(b)?this.each(function(e){p(this).toggleClass(b.call(this,e,Ba(this),d),
d)}):this.each(function(){var d,f,g,m;if("string"===e){f=0;g=p(this);for(m=b.match(ga)||[];d=m[f++];)g.hasClass(d)?g.removeClass(d):g.addClass(d)}else void 0!==b&&"boolean"!==e||(d=Ba(this),d&&K.set(this,"__className__",d),this.setAttribute&&this.setAttribute("class",d||!1===b?"":K.get(this,"__className__")||""))})},hasClass:function(b){var d,e=0;for(b=" "+b+" ";d=this[e++];)if(1===d.nodeType&&-1<(" "+Aa(Ba(d))+" ").indexOf(b))return!0;return!1}});var td=/\r/g;p.fn.extend({val:function(b){var d,e,
f,g=this[0];if(arguments.length)return f=p.isFunction(b),this.each(function(e){var g;1===this.nodeType&&(g=f?b.call(this,e,p(this).val()):b,null==g?g="":"number"==typeof g?g+="":Array.isArray(g)&&(g=p.map(g,function(b){return null==b?"":b+""})),d=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&void 0!==d.set(this,g,"value")||(this.value=g))});if(g)return d=p.valHooks[g.type]||p.valHooks[g.nodeName.toLowerCase()],d&&"get"in d&&void 0!==(e=d.get(g,"value"))?e:(e=g.value,
"string"==typeof e?e.replace(td,""):null==e?"":e)}});p.extend({valHooks:{option:{get:function(b){var d=p.find.attr(b,"value");return null!=d?d:Aa(p.text(b))}},select:{get:function(b){var d,e,f=b.options,m=b.selectedIndex,j="select-one"===b.type,l=j?null:[],q=j?m+1:f.length;for(e=0>m?q:j?m:0;e<q;e++)if(d=f[e],(d.selected||e===m)&&!d.disabled&&(!d.parentNode.disabled||!g(d.parentNode,"optgroup"))){if(b=p(d).val(),j)return b;l.push(b)}return l},set:function(b,d){for(var e,f,g=b.options,m=p.makeArray(d),
j=g.length;j--;)f=g[j],(f.selected=-1<p.inArray(p.valHooks.option.get(f),m))&&(e=!0);return e||(b.selectedIndex=-1),m}}}});p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(b,d){if(Array.isArray(d))return b.checked=-1<p.inArray(p(b).val(),d)}};V.checkOn||(p.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});var sc=/^(?:focusinfocus|focusoutblur)$/;p.extend(p.event,{trigger:function(d,e,f,g){var m,j,l,q,r,n,t,s=[f||R],v=Za.call(d,"type")?d.type:
d;m=Za.call(d,"namespace")?d.namespace.split("."):[];if(j=l=f=f||R,3!==f.nodeType&&8!==f.nodeType&&!sc.test(v+p.event.triggered)&&(-1<v.indexOf(".")&&(m=v.split("."),v=m.shift(),m.sort()),r=0>v.indexOf(":")&&"on"+v,d=d[p.expando]?d:new p.Event(v,"object"==typeof d&&d),d.isTrigger=g?2:3,d.namespace=m.join("."),d.rnamespace=d.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=f),e=null==e?[d]:p.makeArray(e,[d]),t=p.event.special[v]||{},g||!t.trigger||
!1!==t.trigger.apply(f,e))){if(!g&&!t.noBubble&&!p.isWindow(f)){q=t.delegateType||v;for(sc.test(q+v)||(j=j.parentNode);j;j=j.parentNode)s.push(j),l=j;l===(f.ownerDocument||R)&&s.push(l.defaultView||l.parentWindow||b)}for(m=0;(j=s[m++])&&!d.isPropagationStopped();)d.type=1<m?q:t.bindType||v,(n=(K.get(j,"events")||{})[d.type]&&K.get(j,"handle"))&&n.apply(j,e),(n=r&&j[r])&&n.apply&&ib(j)&&(d.result=n.apply(j,e),!1===d.result&&d.preventDefault());return d.type=v,g||d.isDefaultPrevented()||t._default&&
!1!==t._default.apply(s.pop(),e)||!ib(f)||r&&p.isFunction(f[v])&&!p.isWindow(f)&&(l=f[r],l&&(f[r]=null),p.event.triggered=v,f[v](),p.event.triggered=void 0,l&&(f[r]=l)),d.result}},simulate:function(b,d,e){b=p.extend(new p.Event,e,{type:b,isSimulated:!0});p.event.trigger(b,null,d)}});p.fn.extend({trigger:function(b,d){return this.each(function(){p.event.trigger(b,d,this)})},triggerHandler:function(b,d){var e=this[0];if(e)return p.event.trigger(b,d,e,!0)}});p.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),
function(b,d){p.fn[d]=function(b,e){return 0<arguments.length?this.on(d,null,b,e):this.trigger(d)}});p.fn.extend({hover:function(b,d){return this.mouseenter(b).mouseleave(d||b)}});V.focusin="onfocusin"in b;V.focusin||p.each({focus:"focusin",blur:"focusout"},function(b,d){var e=function(b){p.event.simulate(d,b.target,p.event.fix(b))};p.event.special[d]={setup:function(){var f=this.ownerDocument||this,g=K.access(f,d);g||f.addEventListener(b,e,!0);K.access(f,d,(g||0)+1)},teardown:function(){var f=this.ownerDocument||
this,g=K.access(f,d)-1;g?K.access(f,d,g):(f.removeEventListener(b,e,!0),K.remove(f,d))}}});var Ta=b.location,tc=p.now(),Eb=/\?/;p.parseXML=function(d){var e;if(!d||"string"!=typeof d)return null;try{e=(new b.DOMParser).parseFromString(d,"text/xml")}catch(f){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||p.error("Invalid XML: "+d),e};var Ic=/\[\]$/,uc=/\r?\n/g,ud=/^(?:submit|button|image|reset|file)$/i,vd=/^(?:input|select|textarea|keygen)/i;p.param=function(b,d){var e,f=[],g=function(b,
d){var e=p.isFunction(d)?d():d;f[f.length]=encodeURIComponent(b)+"="+encodeURIComponent(null==e?"":e)};if(Array.isArray(b)||b.jquery&&!p.isPlainObject(b))p.each(b,function(){g(this.name,this.value)});else for(e in b)pb(e,b[e],d,g);return f.join("&")};p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=p.prop(this,"elements");return b?p.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!p(this).is(":disabled")&&
vd.test(this.nodeName)&&!ud.test(b)&&(this.checked||!jc.test(b))}).map(function(b,d){var e=p(this).val();return null==e?null:Array.isArray(e)?p.map(e,function(b){return{name:d.name,value:b.replace(uc,"\r\n")}}):{name:d.name,value:e.replace(uc,"\r\n")}}).get()}});var wd=/%20/g,xd=/#.*$/,yd=/([?&])_=[^&]*/,zd=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ad=/^(?:GET|HEAD)$/,Bd=/^\/\//,vc={},qb={},wc="*/".concat("*"),Fb=R.createElement("a");Fb.href=Ta.href;p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ta.href,
type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ta.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":wc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,
"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,d){return d?rb(rb(b,p.ajaxSettings),d):rb(p.ajaxSettings,b)},ajaxPrefilter:Pb(vc),ajaxTransport:Pb(qb),ajax:function(d,e){function f(d,e,l,q){var s,v,F,H,I=e;if(!n){n=!0;r&&b.clearTimeout(r);g=void 0;j=q||"";y.readyState=0<d?4:0;q=200<=d&&300>d||304===d;if(l){F=u;for(var Z=y,N,B,A,z,C=F.contents,L=F.dataTypes;"*"===L[0];)L.shift(),void 0===N&&(N=F.mimeType||Z.getResponseHeader("Content-Type"));if(N)for(B in C)if(C[B]&&C[B].test(N)){L.unshift(B);
break}if(L[0]in l)A=L[0];else{for(B in l){if(!L[0]||F.converters[B+" "+L[0]]){A=B;break}z||(z=B)}A=A||z}l=A?(A!==L[0]&&L.unshift(A),l[A]):void 0;F=l}var J;a:{l=u;N=F;B=y;A=q;var G,P,ca;F={};Z=l.dataTypes.slice();if(Z[1])for(G in l.converters)F[G.toLowerCase()]=l.converters[G];for(z=Z.shift();z;)if(l.responseFields[z]&&(B[l.responseFields[z]]=N),!ca&&A&&l.dataFilter&&(N=l.dataFilter(N,l.dataType)),ca=z,z=Z.shift())if("*"===z)z=ca;else if("*"!==ca&&ca!==z){if(G=F[ca+" "+z]||F["* "+z],!G)for(J in F)if(P=
J.split(" "),P[1]===z&&(G=F[ca+" "+P[0]]||F["* "+P[0]])){!0===G?G=F[J]:!0!==F[J]&&(z=P[0],Z.unshift(P[1]));break}if(!0!==G)if(G&&l["throws"])N=G(N);else try{N=G(N)}catch(O){J={state:"parsererror",error:G?O:"No conversion from "+ca+" to "+z};break a}}J={state:"success",data:N}}F=J;q?(u.ifModified&&(H=y.getResponseHeader("Last-Modified"),H&&(p.lastModified[m]=H),H=y.getResponseHeader("etag"),H&&(p.etag[m]=H)),204===d||"HEAD"===u.type?I="nocontent":304===d?I="notmodified":(I=F.state,s=F.data,v=F.error,
q=!v)):(v=I,!d&&I||(I="error",0>d&&(d=0)));y.status=d;y.statusText=(e||I)+"";q?D.resolveWith(E,[s,I,y]):D.rejectWith(E,[y,I,v]);y.statusCode(S);S=void 0;t&&x.trigger(q?"ajaxSuccess":"ajaxError",[y,u,q?s:v]);M.fireWith(E,[y,I]);t&&(x.trigger("ajaxComplete",[y,u]),--p.active||p.event.trigger("ajaxStop"))}}"object"==typeof d&&(e=d,d=void 0);e=e||{};var g,m,j,l,r,q,n,t,s,v,u=p.ajaxSetup({},e),E=u.context||u,x=u.context&&(E.nodeType||E.jquery)?p(E):p.event,D=p.Deferred(),M=p.Callbacks("once memory"),S=
u.statusCode||{},F={},H={},I="canceled",y={readyState:0,getResponseHeader:function(b){var d;if(n){if(!l)for(l={};d=zd.exec(j);)l[d[1].toLowerCase()]=d[2];d=l[b.toLowerCase()]}return null==d?null:d},getAllResponseHeaders:function(){return n?j:null},setRequestHeader:function(b,d){return null==n&&(b=H[b.toLowerCase()]=H[b.toLowerCase()]||b,F[b]=d),this},overrideMimeType:function(b){return null==n&&(u.mimeType=b),this},statusCode:function(b){var d;if(b)if(n)y.always(b[y.status]);else for(d in b)S[d]=
[S[d],b[d]];return this},abort:function(b){b=b||I;return g&&g.abort(b),f(0,b),this}};if(D.promise(y),u.url=((d||u.url||Ta.href)+"").replace(Bd,Ta.protocol+"//"),u.type=e.method||e.type||u.method||u.type,u.dataTypes=(u.dataType||"*").toLowerCase().match(ga)||[""],null==u.crossDomain){q=R.createElement("a");try{q.href=u.url,q.href=q.href,u.crossDomain=Fb.protocol+"//"+Fb.host!=q.protocol+"//"+q.host}catch(B){u.crossDomain=!0}}if(u.data&&u.processData&&"string"!=typeof u.data&&(u.data=p.param(u.data,
u.traditional)),Qb(vc,u,e,y),n)return y;(t=p.event&&u.global)&&0===p.active++&&p.event.trigger("ajaxStart");u.type=u.type.toUpperCase();u.hasContent=!Ad.test(u.type);m=u.url.replace(xd,"");u.hasContent?u.data&&u.processData&&0===(u.contentType||"").indexOf("application/x-www-form-urlencoded")&&(u.data=u.data.replace(wd,"+")):(v=u.url.slice(m.length),u.data&&(m+=(Eb.test(m)?"&":"?")+u.data,delete u.data),!1===u.cache&&(m=m.replace(yd,"$1"),v=(Eb.test(m)?"&":"?")+"_="+tc++ +v),u.url=m+v);u.ifModified&&
(p.lastModified[m]&&y.setRequestHeader("If-Modified-Since",p.lastModified[m]),p.etag[m]&&y.setRequestHeader("If-None-Match",p.etag[m]));(u.data&&u.hasContent&&!1!==u.contentType||e.contentType)&&y.setRequestHeader("Content-Type",u.contentType);y.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+wc+"; q=0.01":""):u.accepts["*"]);for(s in u.headers)y.setRequestHeader(s,u.headers[s]);if(u.beforeSend&&(!1===u.beforeSend.call(E,y,u)||
n))return y.abort();if(I="abort",M.add(u.complete),y.done(u.success),y.fail(u.error),g=Qb(qb,u,e,y)){if(y.readyState=1,t&&x.trigger("ajaxSend",[y,u]),n)return y;u.async&&0<u.timeout&&(r=b.setTimeout(function(){y.abort("timeout")},u.timeout));try{n=!1,g.send(F,f)}catch(A){if(n)throw A;f(-1,A)}}else f(-1,"No Transport");return y},getJSON:function(b,d,e){return p.get(b,d,e,"json")},getScript:function(b,d){return p.get(b,void 0,d,"script")}});p.each(["get","post"],function(b,d){p[d]=function(b,e,f,g){return p.isFunction(e)&&
(g=g||f,f=e,e=void 0),p.ajax(p.extend({url:b,type:d,dataType:g,data:e,success:f},p.isPlainObject(b)&&b))}});p._evalUrl=function(b){return p.ajax({url:b,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,"throws":!0})};p.fn.extend({wrapAll:function(b){var d;return this[0]&&(p.isFunction(b)&&(b=b.call(this[0])),d=p(b,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&d.insertBefore(this[0]),d.map(function(){for(var b=this;b.firstElementChild;)b=b.firstElementChild;return b}).append(this)),
this},wrapInner:function(b){return p.isFunction(b)?this.each(function(d){p(this).wrapInner(b.call(this,d))}):this.each(function(){var d=p(this),e=d.contents();e.length?e.wrapAll(b):d.append(b)})},wrap:function(b){var d=p.isFunction(b);return this.each(function(e){p(this).wrapAll(d?b.call(this,e):b)})},unwrap:function(b){return this.parent(b).not("body").each(function(){p(this).replaceWith(this.childNodes)}),this}});p.expr.pseudos.hidden=function(b){return!p.expr.pseudos.visible(b)};p.expr.pseudos.visible=
function(b){return!(!b.offsetWidth&&!b.offsetHeight&&!b.getClientRects().length)};p.ajaxSettings.xhr=function(){try{return new b.XMLHttpRequest}catch(d){}};var Cd={"0":200,1223:204},Ua=p.ajaxSettings.xhr();V.cors=!!Ua&&"withCredentials"in Ua;V.ajax=Ua=!!Ua;p.ajaxTransport(function(d){var e,f;if(V.cors||Ua&&!d.crossDomain)return{send:function(g,m){var j,l=d.xhr();if(l.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(j in d.xhrFields)l[j]=d.xhrFields[j];d.mimeType&&l.overrideMimeType&&
l.overrideMimeType(d.mimeType);d.crossDomain||g["X-Requested-With"]||(g["X-Requested-With"]="XMLHttpRequest");for(j in g)l.setRequestHeader(j,g[j]);e=function(b){return function(){e&&(e=f=l.onload=l.onerror=l.onabort=l.onreadystatechange=null,"abort"===b?l.abort():"error"===b?"number"!=typeof l.status?m(0,"error"):m(l.status,l.statusText):m(Cd[l.status]||l.status,l.statusText,"text"!==(l.responseType||"text")||"string"!=typeof l.responseText?{binary:l.response}:{text:l.responseText},l.getAllResponseHeaders()))}};
l.onload=e();f=l.onerror=e("error");void 0!==l.onabort?l.onabort=f:l.onreadystatechange=function(){4===l.readyState&&b.setTimeout(function(){e&&f()})};e=e("abort");try{l.send(d.hasContent&&d.data||null)}catch(q){if(e)throw q;}},abort:function(){e&&e()}}});p.ajaxPrefilter(function(b){b.crossDomain&&(b.contents.script=!1)});p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(b){return p.globalEval(b),
b}}});p.ajaxPrefilter("script",function(b){void 0===b.cache&&(b.cache=!1);b.crossDomain&&(b.type="GET")});p.ajaxTransport("script",function(b){if(b.crossDomain){var d,e;return{send:function(f,g){d=p("<script>").prop({charset:b.scriptCharset,src:b.url}).on("load error",e=function(b){d.remove();e=null;b&&g("error"===b.type?404:200,b.type)});R.head.appendChild(d[0])},abort:function(){e&&e()}}}});var xc=[],Gb=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=xc.pop()||p.expando+
"_"+tc++;return this[b]=!0,b}});p.ajaxPrefilter("json jsonp",function(d,e,f){var g,m,j,l=!1!==d.jsonp&&(Gb.test(d.url)?"url":"string"==typeof d.data&&0===(d.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gb.test(d.data)&&"data");if(l||"jsonp"===d.dataTypes[0])return g=d.jsonpCallback=p.isFunction(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,l?d[l]=d[l].replace(Gb,"$1"+g):!1!==d.jsonp&&(d.url+=(Eb.test(d.url)?"&":"?")+d.jsonp+"="+g),d.converters["script json"]=function(){return j||
p.error(g+" was not called"),j[0]},d.dataTypes[0]="json",m=b[g],b[g]=function(){j=arguments},f.always(function(){void 0===m?p(b).removeProp(g):b[g]=m;d[g]&&(d.jsonpCallback=e.jsonpCallback,xc.push(g));j&&p.isFunction(m)&&m(j[0]);j=m=void 0}),"script"});var Dd=V,yc,zc=R.implementation.createHTMLDocument("").body;yc=(zc.innerHTML="<form></form><form></form>",2===zc.childNodes.length);Dd.createHTMLDocument=yc;p.parseHTML=function(b,d,e){if("string"!=typeof b)return[];"boolean"==typeof d&&(e=d,d=!1);
var f,g,m;return d||(V.createHTMLDocument?(d=R.implementation.createHTMLDocument(""),f=d.createElement("base"),f.href=R.location.href,d.head.appendChild(f)):d=R),g=fc.exec(b),m=!e&&[],g?[d.createElement(g[1])]:(g=H([b],d,m),m&&m.length&&p(m).remove(),p.merge([],g.childNodes))};p.fn.load=function(b,d,e){var f,g,m,j=this,l=b.indexOf(" ");return-1<l&&(f=Aa(b.slice(l)),b=b.slice(0,l)),p.isFunction(d)?(e=d,d=void 0):d&&"object"==typeof d&&(g="POST"),0<j.length&&p.ajax({url:b,type:g||"GET",dataType:"html",
data:d}).done(function(b){m=arguments;j.html(f?p("<div>").append(p.parseHTML(b)).find(f):b)}).always(e&&function(b,d){j.each(function(){e.apply(this,m||[b.responseText,d,b])})}),this};p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(b,d){p.fn[d]=function(b){return this.on(d,b)}});p.expr.pseudos.animated=function(b){return p.grep(p.timers,function(d){return b===d.elem}).length};p.offset={setOffset:function(b,d,e){var f,g,m,j,l,q,r=p.css(b,"position"),n=p(b),
t={};"static"===r&&(b.style.position="relative");l=n.offset();m=p.css(b,"top");q=p.css(b,"left");("absolute"===r||"fixed"===r)&&-1<(m+q).indexOf("auto")?(f=n.position(),j=f.top,g=f.left):(j=parseFloat(m)||0,g=parseFloat(q)||0);p.isFunction(d)&&(d=d.call(b,e,p.extend({},l)));null!=d.top&&(t.top=d.top-l.top+j);null!=d.left&&(t.left=d.left-l.left+g);"using"in d?d.using.call(b,t):n.css(t)}};p.fn.extend({offset:function(b){if(arguments.length)return void 0===b?this:this.each(function(d){p.offset.setOffset(this,
b,d)});var d,e,f,g,m=this[0];if(m)return m.getClientRects().length?(f=m.getBoundingClientRect(),d=m.ownerDocument,e=d.documentElement,g=d.defaultView,{top:f.top+g.pageYOffset-e.clientTop,left:f.left+g.pageXOffset-e.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var b,d,e=this[0],f={top:0,left:0};return"fixed"===p.css(e,"position")?d=e.getBoundingClientRect():(b=this.offsetParent(),d=this.offset(),g(b[0],"html")||(f=b.offset()),f={top:f.top+p.css(b[0],"borderTopWidth",!0),left:f.left+
p.css(b[0],"borderLeftWidth",!0)}),{top:d.top-f.top-p.css(e,"marginTop",!0),left:d.left-f.left-p.css(e,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&"static"===p.css(b,"position");)b=b.offsetParent;return b||lb})}});p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,d){var e="pageYOffset"===d;p.fn[b]=function(f){return ra(this,function(b,f,g){var m;return p.isWindow(b)?m=b:9===b.nodeType&&(m=b.defaultView),void 0===g?m?m[d]:
b[f]:void(m?m.scrollTo(e?m.pageXOffset:g,e?g:m.pageYOffset):b[f]=g)},b,f,arguments.length)}});p.each(["top","left"],function(b,d){p.cssHooks[d]=wa(V.pixelPosition,function(b,e){if(e)return e=J(b,d),ob.test(e)?p(b).position()[d]+"px":e})});p.each({Height:"height",Width:"width"},function(b,d){p.each({padding:"inner"+b,content:d,"":"outer"+b},function(e,f){p.fn[f]=function(g,m){var j=arguments.length&&(e||"boolean"!=typeof g),l=e||(!0===g||!0===m?"margin":"border");return ra(this,function(d,e,g){var m;
return p.isWindow(d)?0===f.indexOf("outer")?d["inner"+b]:d.document.documentElement["client"+b]:9===d.nodeType?(m=d.documentElement,Math.max(d.body["scroll"+b],m["scroll"+b],d.body["offset"+b],m["offset"+b],m["client"+b])):void 0===g?p.css(d,e,l):p.style(d,e,g,l)},d,j?g:void 0,j)}})});p.fn.extend({bind:function(b,d,e){return this.on(b,null,d,e)},unbind:function(b,d){return this.off(b,null,d)},delegate:function(b,d,e,f){return this.on(d,b,e,f)},undelegate:function(b,d,e){return 1===arguments.length?
this.off(b,"**"):this.off(d,b||"**",e)}});p.holdReady=function(b){b?p.readyWait++:p.ready(!0)};p.isArray=Array.isArray;p.parseJSON=JSON.parse;p.nodeName=g;"function"==typeof define&&define.amd&&define("jquery",[],function(){return p});var Ed=b.jQuery,Fd=b.$;return p.noConflict=function(d){return b.$===p&&(b.$=Fd),d&&b.jQuery===p&&(b.jQuery=Ed),p},d||(b.jQuery=b.$=p),p});function getInternetExplorerVersion(){var b=-1;"Microsoft Internet Explorer"==navigator.appName&&null!=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)&&(b=parseFloat(RegExp.$1));return b}var ie=getInternetExplorerVersion();function getQueryVariable(b){for(var d=window.location.search.substring(1).split("&"),e=0;e<d.length;e++){var f=d[e].match(/([^=]+?)=(.+)/);if(f&&decodeURIComponent(f[1])==b)return decodeURIComponent(f[2])}};(function(){var b=function(){this.init()};b.prototype={init:function(){var b=this||d;b._counter=1E3;b._html5AudioPool=[];b.html5PoolSize=10;b._codecs={};b._howls=[];b._muted=!1;b._volume=1;b._canPlayEvent="canplaythrough";b._navigator="undefined"!==typeof window&&window.navigator?window.navigator:null;b.masterGain=null;b.noAudio=!1;b.usingWebAudio=!0;b.autoSuspend=!0;b.ctx=null;b.autoUnlock=!0;b._setup();return b},volume:function(b){var e=this||d;b=parseFloat(b);e.ctx||n();if("undefined"!==typeof b&&
0<=b&&1>=b){e._volume=b;if(e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(b,d.ctx.currentTime);for(var f=0;f<e._howls.length;f++)if(!e._howls[f]._webAudio)for(var g=e._howls[f]._getSoundIds(),j=0;j<g.length;j++){var l=e._howls[f]._soundById(g[j]);l&&l._node&&(l._node.volume=l._volume*b)}return e}return e._volume},mute:function(b){var e=this||d;e.ctx||n();e._muted=b;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(b?0:e._volume,d.ctx.currentTime);for(var f=0;f<e._howls.length;f++)if(!e._howls[f]._webAudio)for(var g=
e._howls[f]._getSoundIds(),j=0;j<g.length;j++){var l=e._howls[f]._soundById(g[j]);l&&l._node&&(l._node.muted=b?!0:l._muted)}return e},stop:function(){for(var b=this||d,e=0;e<b._howls.length;e++)b._howls[e].stop();return b},unload:function(){for(var b=this||d,e=b._howls.length-1;0<=e;e--)b._howls[e].unload();b.usingWebAudio&&(b.ctx&&"undefined"!==typeof b.ctx.close)&&(b.ctx.close(),b.ctx=null,n());return b},codecs:function(b){return(this||d)._codecs[b.replace(/^x-/,"")]},_setup:function(){var b=this||
d;b.state=b.ctx?b.ctx.state||"suspended":"suspended";b._autoSuspend();if(!b.usingWebAudio)if("undefined"!==typeof Audio)try{var e=new Audio;"undefined"===typeof e.oncanplaythrough&&(b._canPlayEvent="canplay")}catch(f){b.noAudio=!0}else b.noAudio=!0;try{e=new Audio,e.muted&&(b.noAudio=!0)}catch(g){}b.noAudio||b._setupCodecs();return b},_setupCodecs:function(){var b=this||d,e=null;try{e="undefined"!==typeof Audio?new Audio:null}catch(f){return b}if(!e||"function"!==typeof e.canPlayType)return b;var g=
e.canPlayType("audio/mpeg;").replace(/^no$/,""),j=b._navigator?b._navigator.userAgent:"",l=j.match(/OPR\/([0-6].)/g),l=l&&33>parseInt(l[0].split("/")[1],10),n=-1!==j.indexOf("Safari")&&-1===j.indexOf("Chrome"),j=j.match(/Version\/(.*?) /),j=n&&j&&15>parseInt(j[1],10);b._codecs={mp3:!(l||!g&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!g,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,
""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||
e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(j||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(j||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")};return b},_unlockAudio:function(){var b=this||d;if(!b._audioUnlocked&&b.ctx){b._audioUnlocked=!1;b.autoUnlock=!1;!b._mobileUnloaded&&44100!==b.ctx.sampleRate&&
(b._mobileUnloaded=!0,b.unload());b._scratchBuffer=b.ctx.createBuffer(1,1,22050);var e=function(){for(;b._html5AudioPool.length<b.html5PoolSize;)try{var d=new Audio;d._unlocked=!0;b._releaseHtml5Audio(d)}catch(f){b.noAudio=!0;break}for(d=0;d<b._howls.length;d++)if(!b._howls[d]._webAudio)for(var g=b._howls[d]._getSoundIds(),j=0;j<g.length;j++){var l=b._howls[d]._soundById(g[j]);l&&(l._node&&!l._node._unlocked)&&(l._node._unlocked=!0,l._node.load())}b._autoResume();var n=b.ctx.createBufferSource();
n.buffer=b._scratchBuffer;n.connect(b.ctx.destination);"undefined"===typeof n.start?n.noteOn(0):n.start(0);"function"===typeof b.ctx.resume&&b.ctx.resume();n.onended=function(){n.disconnect(0);b._audioUnlocked=!0;document.removeEventListener("touchstart",e,!0);document.removeEventListener("touchend",e,!0);document.removeEventListener("click",e,!0);document.removeEventListener("keydown",e,!0);for(var d=0;d<b._howls.length;d++)b._howls[d]._emit("unlock")}};document.addEventListener("touchstart",e,!0);
document.addEventListener("touchend",e,!0);document.addEventListener("click",e,!0);document.addEventListener("keydown",e,!0);return b}},_obtainHtml5Audio:function(){var b=this||d;if(b._html5AudioPool.length)return b._html5AudioPool.pop();(b=(new Audio).play())&&("undefined"!==typeof Promise&&(b instanceof Promise||"function"===typeof b.then))&&b.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")});return new Audio},_releaseHtml5Audio:function(b){var e=
this||d;b._unlocked&&e._html5AudioPool.push(b);return e},_autoSuspend:function(){var b=this;if(b.autoSuspend&&b.ctx&&"undefined"!==typeof b.ctx.suspend&&d.usingWebAudio){for(var e=0;e<b._howls.length;e++)if(b._howls[e]._webAudio)for(var f=0;f<b._howls[e]._sounds.length;f++)if(!b._howls[e]._sounds[f]._paused)return b;b._suspendTimer&&clearTimeout(b._suspendTimer);b._suspendTimer=setTimeout(function(){if(b.autoSuspend){b._suspendTimer=null;b.state="suspending";var d=function(){b.state="suspended";b._resumeAfterSuspend&&
(delete b._resumeAfterSuspend,b._autoResume())};b.ctx.suspend().then(d,d)}},3E4);return b}},_autoResume:function(){var b=this;if(b.ctx&&"undefined"!==typeof b.ctx.resume&&d.usingWebAudio)return"running"===b.state&&"interrupted"!==b.ctx.state&&b._suspendTimer?(clearTimeout(b._suspendTimer),b._suspendTimer=null):"suspended"===b.state||"running"===b.state&&"interrupted"===b.ctx.state?(b.ctx.resume().then(function(){b.state="running";for(var d=0;d<b._howls.length;d++)b._howls[d]._emit("resume")}),b._suspendTimer&&
(clearTimeout(b._suspendTimer),b._suspendTimer=null)):"suspending"===b.state&&(b._resumeAfterSuspend=!0),b}};var d=new b,e=function(b){!b.src||0===b.src.length?console.error("An array of source files must be passed with any new Howl."):this.init(b)};e.prototype={init:function(b){var e=this;d.ctx||n();e._autoplay=b.autoplay||!1;e._format="string"!==typeof b.format?b.format:[b.format];e._html5=b.html5||!1;e._muted=b.mute||!1;e._loop=b.loop||!1;e._pool=b.pool||5;e._preload="boolean"===typeof b.preload||
"metadata"===b.preload?b.preload:!0;e._rate=b.rate||1;e._sprite=b.sprite||{};e._src="string"!==typeof b.src?b.src:[b.src];e._volume=void 0!==b.volume?b.volume:1;e._xhr={method:b.xhr&&b.xhr.method?b.xhr.method:"GET",headers:b.xhr&&b.xhr.headers?b.xhr.headers:null,withCredentials:b.xhr&&b.xhr.withCredentials?b.xhr.withCredentials:!1};e._duration=0;e._state="unloaded";e._sounds=[];e._endTimers={};e._queue=[];e._playLock=!1;e._onend=b.onend?[{fn:b.onend}]:[];e._onfade=b.onfade?[{fn:b.onfade}]:[];e._onload=
b.onload?[{fn:b.onload}]:[];e._onloaderror=b.onloaderror?[{fn:b.onloaderror}]:[];e._onplayerror=b.onplayerror?[{fn:b.onplayerror}]:[];e._onpause=b.onpause?[{fn:b.onpause}]:[];e._onplay=b.onplay?[{fn:b.onplay}]:[];e._onstop=b.onstop?[{fn:b.onstop}]:[];e._onmute=b.onmute?[{fn:b.onmute}]:[];e._onvolume=b.onvolume?[{fn:b.onvolume}]:[];e._onrate=b.onrate?[{fn:b.onrate}]:[];e._onseek=b.onseek?[{fn:b.onseek}]:[];e._onunlock=b.onunlock?[{fn:b.onunlock}]:[];e._onresume=[];e._webAudio=d.usingWebAudio&&!e._html5;
"undefined"!==typeof d.ctx&&(d.ctx&&d.autoUnlock)&&d._unlockAudio();d._howls.push(e);e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}});e._preload&&"none"!==e._preload&&e.load();return e},load:function(){var b=null;if(d.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"===typeof this._src&&(this._src=[this._src]);for(var e=0;e<this._src.length;e++){var q,n;if(this._format&&this._format[e])q=this._format[e];else{n=this._src[e];if("string"!==typeof n){this._emit("loaderror",
null,"Non-string found in selected audio sources - ignoring.");continue}(q=/^data:audio\/([^;,]+);/i.exec(n))||(q=/\.([^.]+)$/.exec(n.split("?",1)[0]));q&&(q=q[1].toLowerCase())}q||console.warn('No file extension was found. Consider using the "format" property or specify an extension.');if(q&&d.codecs(q)){b=this._src[e];break}}if(b){this._src=b;this._state="loading";"https:"===window.location.protocol&&"http:"===b.slice(0,5)&&(this._html5=!0,this._webAudio=!1);new f(this);if(this._webAudio){var t=
this,v=t._src;if(g[v])t._duration=g[v].duration,l(t);else if(/^data:[^;]+;base64,/.test(v)){b=atob(v.split(",")[1]);e=new Uint8Array(b.length);for(q=0;q<b.length;++q)e[q]=b.charCodeAt(q);j(e.buffer,t)}else{var u=new XMLHttpRequest;u.open(t._xhr.method,v,!0);u.withCredentials=t._xhr.withCredentials;u.responseType="arraybuffer";t._xhr.headers&&Object.keys(t._xhr.headers).forEach(function(b){u.setRequestHeader(b,t._xhr.headers[b])});u.onload=function(){var b=(u.status+"")[0];"0"!==b&&"2"!==b&&"3"!==
b?t._emit("loaderror",null,"Failed loading audio file with status: "+u.status+"."):j(u.response,t)};u.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete g[v],t.load())};try{u.send()}catch(x){u.onerror()}}}return this}this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(b,e){var f=this,g=null;if("number"===typeof b)g=b,b=null;else{if("string"===typeof b&&"loaded"===f._state&&!f._sprite[b])return null;if("undefined"===typeof b&&(b=
"__default",!f._playLock)){for(var j=0,l=0;l<f._sounds.length;l++)f._sounds[l]._paused&&!f._sounds[l]._ended&&(j++,g=f._sounds[l]._id);1===j?b=null:g=null}}var n=g?f._soundById(g):f._inactiveSound();if(!n)return null;g&&!b&&(b=n._sprite||"__default");if("loaded"!==f._state){n._sprite=b;n._ended=!1;var x=n._id;f._queue.push({event:"play",action:function(){f.play(x)}});return x}if(g&&!n._paused)return e||f._loadQueue("play"),n._id;f._webAudio&&d._autoResume();var D=Math.max(0,0<n._seek?n._seek:f._sprite[b][0]/
1E3),H=Math.max(0,(f._sprite[b][0]+f._sprite[b][1])/1E3-D),M=1E3*H/Math.abs(n._rate),E=f._sprite[b][0]/1E3,F=(f._sprite[b][0]+f._sprite[b][1])/1E3;n._sprite=b;n._ended=!1;var S=function(){n._paused=!1;n._seek=D;n._start=E;n._stop=F;n._loop=!(!n._loop&&!f._sprite[b][2])};if(D>=F)f._ended(n);else{var I=n._node;if(f._webAudio)g=function(){f._playLock=!1;S();f._refreshBuffer(n);I.gain.setValueAtTime(n._muted||f._muted?0:n._volume,d.ctx.currentTime);n._playStart=d.ctx.currentTime;"undefined"===typeof I.bufferSource.start?
n._loop?I.bufferSource.noteGrainOn(0,D,86400):I.bufferSource.noteGrainOn(0,D,H):n._loop?I.bufferSource.start(0,D,86400):I.bufferSource.start(0,D,H);Infinity!==M&&(f._endTimers[n._id]=setTimeout(f._ended.bind(f,n),M));e||setTimeout(function(){f._emit("play",n._id);f._loadQueue()},0)},"running"===d.state&&"interrupted"!==d.ctx.state?g():(f._playLock=!0,f.once("resume",g),f._clearTimer(n._id));else{var L=function(){I.currentTime=D;I.muted=n._muted||f._muted||d._muted||I.muted;I.volume=n._volume*d.volume();
I.playbackRate=n._rate;try{var g=I.play();g&&"undefined"!==typeof Promise&&(g instanceof Promise||"function"===typeof g.then)?(f._playLock=!0,S(),g.then(function(){f._playLock=!1;I._unlocked=!0;e?f._loadQueue():f._emit("play",n._id)}).catch(function(){f._playLock=!1;f._emit("playerror",n._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");n._ended=!0;n._paused=!0})):e||(f._playLock=!1,S(),f._emit("play",
n._id));I.playbackRate=n._rate;I.paused?f._emit("playerror",n._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."):"__default"!==b||n._loop?f._endTimers[n._id]=setTimeout(f._ended.bind(f,n),M):(f._endTimers[n._id]=function(){f._ended(n);I.removeEventListener("ended",f._endTimers[n._id],!1)},I.addEventListener("ended",f._endTimers[n._id],!1))}catch(j){f._emit("playerror",n._id,j)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===
I.src&&(I.src=f._src,I.load());g=window&&window.ejecta||!I.readyState&&d._navigator.isCocoonJS;if(3<=I.readyState||g)L();else{f._playLock=!0;f._state="loading";var O=function(){f._state="loaded";L();I.removeEventListener(d._canPlayEvent,O,!1)};I.addEventListener(d._canPlayEvent,O,!1);f._clearTimer(n._id)}}return n._id}},pause:function(b,d){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(b)}}),e;for(var f=e._getSoundIds(b),g=0;g<f.length;g++){e._clearTimer(f[g]);
var j=e._soundById(f[g]);if(j&&!j._paused&&(j._seek=e.seek(f[g]),j._rateSeek=0,j._paused=!0,e._stopFade(f[g]),j._node))if(e._webAudio){if(!j._node.bufferSource)continue;"undefined"===typeof j._node.bufferSource.stop?j._node.bufferSource.noteOff(0):j._node.bufferSource.stop(0);e._cleanBuffer(j._node)}else(!isNaN(j._node.duration)||Infinity===j._node.duration)&&j._node.pause();d||e._emit("pause",j?j._id:null)}return e},stop:function(b,d){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"stop",
action:function(){e.stop(b)}}),e;for(var f=e._getSoundIds(b),g=0;g<f.length;g++){e._clearTimer(f[g]);var j=e._soundById(f[g]);if(j){j._seek=j._start||0;j._rateSeek=0;j._paused=!0;j._ended=!0;e._stopFade(f[g]);if(j._node)if(e._webAudio)j._node.bufferSource&&("undefined"===typeof j._node.bufferSource.stop?j._node.bufferSource.noteOff(0):j._node.bufferSource.stop(0),e._cleanBuffer(j._node));else if(!isNaN(j._node.duration)||Infinity===j._node.duration)j._node.currentTime=j._start||0,j._node.pause(),
Infinity===j._node.duration&&e._clearSound(j._node);d||e._emit("stop",j._id)}}return e},mute:function(b,e){var f=this;if("loaded"!==f._state||f._playLock)return f._queue.push({event:"mute",action:function(){f.mute(b,e)}}),f;if("undefined"===typeof e)if("boolean"===typeof b)f._muted=b;else return f._muted;for(var g=f._getSoundIds(e),j=0;j<g.length;j++){var l=f._soundById(g[j]);l&&(l._muted=b,l._interval&&f._stopFade(l._id),f._webAudio&&l._node?l._node.gain.setValueAtTime(b?0:l._volume,d.ctx.currentTime):
l._node&&(l._node.muted=d._muted?!0:b),f._emit("mute",l._id))}return f},volume:function(){var b=this,e=arguments,f,g;if(0===e.length)return b._volume;1===e.length||2===e.length&&"undefined"===typeof e[1]?0<=b._getSoundIds().indexOf(e[0])?g=parseInt(e[0],10):f=parseFloat(e[0]):2<=e.length&&(f=parseFloat(e[0]),g=parseInt(e[1],10));var j;if("undefined"!==typeof f&&0<=f&&1>=f){if("loaded"!==b._state||b._playLock)return b._queue.push({event:"volume",action:function(){b.volume.apply(b,e)}}),b;"undefined"===
typeof g&&(b._volume=f);g=b._getSoundIds(g);for(var l=0;l<g.length;l++)if(j=b._soundById(g[l]))j._volume=f,e[2]||b._stopFade(g[l]),b._webAudio&&j._node&&!j._muted?j._node.gain.setValueAtTime(f,d.ctx.currentTime):j._node&&!j._muted&&(j._node.volume=f*d.volume()),b._emit("volume",j._id)}else return(j=g?b._soundById(g):b._sounds[0])?j._volume:0;return b},fade:function(b,e,f,g){var j=this;if("loaded"!==j._state||j._playLock)return j._queue.push({event:"fade",action:function(){j.fade(b,e,f,g)}}),j;b=Math.min(Math.max(0,
parseFloat(b)),1);e=Math.min(Math.max(0,parseFloat(e)),1);f=parseFloat(f);j.volume(b,g);for(var l=j._getSoundIds(g),n=0;n<l.length;n++){var x=j._soundById(l[n]);if(x){g||j._stopFade(l[n]);if(j._webAudio&&!x._muted){var D=d.ctx.currentTime,H=D+f/1E3;x._volume=b;x._node.gain.setValueAtTime(b,D);x._node.gain.linearRampToValueAtTime(e,H)}j._startFadeInterval(x,b,e,f,l[n],"undefined"===typeof g)}}return j},_startFadeInterval:function(b,d,e,f,g,j){var l=this,n=d,D=e-d;g=Math.abs(D/0.01);g=Math.max(4,0<
g?f/g:f);var H=Date.now();b._fadeTo=e;b._interval=setInterval(function(){var g=(Date.now()-H)/f;H=Date.now();n+=D*g;n=Math.round(100*n)/100;n=0>D?Math.max(e,n):Math.min(e,n);l._webAudio?b._volume=n:l.volume(n,b._id,!0);j&&(l._volume=n);if(e<d&&n<=e||e>d&&n>=e)clearInterval(b._interval),b._interval=null,b._fadeTo=null,l.volume(e,b._id),l._emit("fade",b._id)},g)},_stopFade:function(b){var e=this._soundById(b);e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(d.ctx.currentTime),clearInterval(e._interval),
e._interval=null,this.volume(e._fadeTo,b),e._fadeTo=null,this._emit("fade",b));return this},loop:function(){var b=arguments,d,e;if(0===b.length)return this._loop;if(1===b.length)if("boolean"===typeof b[0])this._loop=d=b[0];else return(b=this._soundById(parseInt(b[0],10)))?b._loop:!1;else 2===b.length&&(d=b[0],e=parseInt(b[1],10));e=this._getSoundIds(e);for(var f=0;f<e.length;f++)if(b=this._soundById(e[f]))if(b._loop=d,this._webAudio&&(b._node&&b._node.bufferSource)&&(b._node.bufferSource.loop=d))b._node.bufferSource.loopStart=
b._start||0,b._node.bufferSource.loopEnd=b._stop,this.playing(e[f])&&(this.pause(e[f],!0),this.play(e[f],!0));return this},rate:function(){var b=this,e=arguments,f,g;0===e.length?g=b._sounds[0]._id:1===e.length?0<=b._getSoundIds().indexOf(e[0])?g=parseInt(e[0],10):f=parseFloat(e[0]):2===e.length&&(f=parseFloat(e[0]),g=parseInt(e[1],10));var j;if("number"===typeof f){if("loaded"!==b._state||b._playLock)return b._queue.push({event:"rate",action:function(){b.rate.apply(b,e)}}),b;"undefined"===typeof g&&
(b._rate=f);g=b._getSoundIds(g);for(var l=0;l<g.length;l++)if(j=b._soundById(g[l])){b.playing(g[l])&&(j._rateSeek=b.seek(g[l]),j._playStart=b._webAudio?d.ctx.currentTime:j._playStart);j._rate=f;b._webAudio&&j._node&&j._node.bufferSource?j._node.bufferSource.playbackRate.setValueAtTime(f,d.ctx.currentTime):j._node&&(j._node.playbackRate=f);var n=b.seek(g[l]),n=1E3*((b._sprite[j._sprite][0]+b._sprite[j._sprite][1])/1E3-n)/Math.abs(j._rate);if(b._endTimers[g[l]]||!j._paused)b._clearTimer(g[l]),b._endTimers[g[l]]=
setTimeout(b._ended.bind(b,j),n);b._emit("rate",j._id)}}else return(j=b._soundById(g))?j._rate:b._rate;return b},seek:function(){var b=this,e=arguments,f,g;0===e.length?b._sounds.length&&(g=b._sounds[0]._id):1===e.length?0<=b._getSoundIds().indexOf(e[0])?g=parseInt(e[0],10):b._sounds.length&&(g=b._sounds[0]._id,f=parseFloat(e[0])):2===e.length&&(f=parseFloat(e[0]),g=parseInt(e[1],10));if("undefined"===typeof g)return 0;if("number"===typeof f&&("loaded"!==b._state||b._playLock))return b._queue.push({event:"seek",
action:function(){b.seek.apply(b,e)}}),b;var j=b._soundById(g);if(j)if("number"===typeof f&&0<=f){var l=b.playing(g);l&&b.pause(g,!0);j._seek=f;j._ended=!1;b._clearTimer(g);!b._webAudio&&(j._node&&!isNaN(j._node.duration))&&(j._node.currentTime=f);var n=function(){l&&b.play(g,!0);b._emit("seek",g)};if(l&&!b._webAudio){var x=function(){b._playLock?setTimeout(x,0):n()};setTimeout(x,0)}else n()}else return b._webAudio?(f=b.playing(g)?d.ctx.currentTime-j._playStart:0,j._seek+((j._rateSeek?j._rateSeek-
j._seek:0)+f*Math.abs(j._rate))):j._node.currentTime;return b},playing:function(b){if("number"===typeof b)return(b=this._soundById(b))?!b._paused:!1;for(b=0;b<this._sounds.length;b++)if(!this._sounds[b]._paused)return!0;return!1},duration:function(b){var d=this._duration;(b=this._soundById(b))&&(d=this._sprite[b._sprite][1]/1E3);return d},state:function(){return this._state},unload:function(){for(var b=this._sounds,e=0;e<b.length;e++)b[e]._paused||this.stop(b[e]._id),this._webAudio||(this._clearSound(b[e]._node),
b[e]._node.removeEventListener("error",b[e]._errorFn,!1),b[e]._node.removeEventListener(d._canPlayEvent,b[e]._loadFn,!1),b[e]._node.removeEventListener("ended",b[e]._endFn,!1),d._releaseHtml5Audio(b[e]._node)),delete b[e]._node,this._clearTimer(b[e]._id);e=d._howls.indexOf(this);0<=e&&d._howls.splice(e,1);b=!0;for(e=0;e<d._howls.length;e++)if(d._howls[e]._src===this._src||0<=this._src.indexOf(d._howls[e]._src)){b=!1;break}g&&b&&delete g[this._src];d.noAudio=!1;this._state="unloaded";this._sounds=
[];return null},on:function(b,d,e,f){b=this["_on"+b];"function"===typeof d&&b.push(f?{id:e,fn:d,once:f}:{id:e,fn:d});return this},off:function(b,d,e){var f=this["_on"+b],g=0;"number"===typeof d&&(e=d,d=null);if(d||e)for(g=0;g<f.length;g++){if(b=e===f[g].id,d===f[g].fn&&b||!d&&b){f.splice(g,1);break}}else if(b)this["_on"+b]=[];else{d=Object.keys(this);for(g=0;g<d.length;g++)0===d[g].indexOf("_on")&&Array.isArray(this[d[g]])&&(this[d[g]]=[])}return this},once:function(b,d,e){this.on(b,d,e,1);return this},
_emit:function(b,d,e){for(var f=this["_on"+b],g=f.length-1;0<=g;g--)if(!f[g].id||f[g].id===d||"load"===b)setTimeout(function(b){b.call(this,d,e)}.bind(this,f[g].fn),0),f[g].once&&this.off(b,f[g].fn,f[g].id);this._loadQueue(b);return this},_loadQueue:function(b){if(0<this._queue.length){var d=this._queue[0];d.event===b&&(this._queue.shift(),this._loadQueue());b||d.action()}return this},_ended:function(b){var e=b._sprite;if(!this._webAudio&&b._node&&!b._node.paused&&!b._node.ended&&b._node.currentTime<
b._stop)return setTimeout(this._ended.bind(this,b),100),this;e=!(!b._loop&&!this._sprite[e][2]);this._emit("end",b._id);!this._webAudio&&e&&this.stop(b._id,!0).play(b._id);if(this._webAudio&&e){this._emit("play",b._id);b._seek=b._start||0;b._rateSeek=0;b._playStart=d.ctx.currentTime;var f=1E3*(b._stop-b._start)/Math.abs(b._rate);this._endTimers[b._id]=setTimeout(this._ended.bind(this,b),f)}this._webAudio&&!e&&(b._paused=!0,b._ended=!0,b._seek=b._start||0,b._rateSeek=0,this._clearTimer(b._id),this._cleanBuffer(b._node),
d._autoSuspend());!this._webAudio&&!e&&this.stop(b._id,!0);return this},_clearTimer:function(b){if(this._endTimers[b]){if("function"!==typeof this._endTimers[b])clearTimeout(this._endTimers[b]);else{var d=this._soundById(b);d&&d._node&&d._node.removeEventListener("ended",this._endTimers[b],!1)}delete this._endTimers[b]}return this},_soundById:function(b){for(var d=0;d<this._sounds.length;d++)if(b===this._sounds[d]._id)return this._sounds[d];return null},_inactiveSound:function(){this._drain();for(var b=
0;b<this._sounds.length;b++)if(this._sounds[b]._ended)return this._sounds[b].reset();return new f(this)},_drain:function(){var b=this._pool,d=0,e=0;if(!(this._sounds.length<b)){for(e=0;e<this._sounds.length;e++)this._sounds[e]._ended&&d++;for(e=this._sounds.length-1;0<=e&&!(d<=b);e--)this._sounds[e]._ended&&(this._webAudio&&this._sounds[e]._node&&this._sounds[e]._node.disconnect(0),this._sounds.splice(e,1),d--)}},_getSoundIds:function(b){if("undefined"===typeof b){b=[];for(var d=0;d<this._sounds.length;d++)b.push(this._sounds[d]._id);
return b}return[b]},_refreshBuffer:function(b){b._node.bufferSource=d.ctx.createBufferSource();b._node.bufferSource.buffer=g[this._src];b._panner?b._node.bufferSource.connect(b._panner):b._node.bufferSource.connect(b._node);if(b._node.bufferSource.loop=b._loop)b._node.bufferSource.loopStart=b._start||0,b._node.bufferSource.loopEnd=b._stop||0;b._node.bufferSource.playbackRate.setValueAtTime(b._rate,d.ctx.currentTime);return this},_cleanBuffer:function(b){var e=d._navigator&&0<=d._navigator.vendor.indexOf("Apple");
if(d._scratchBuffer&&b.bufferSource&&(b.bufferSource.onended=null,b.bufferSource.disconnect(0),e))try{b.bufferSource.buffer=d._scratchBuffer}catch(f){}b.bufferSource=null;return this},_clearSound:function(b){/MSIE |Trident\//.test(d._navigator&&d._navigator.userAgent)||(b.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var f=function(b){this._parent=b;this.init()};f.prototype={init:function(){var b=this._parent;this._muted=b._muted;this._loop=b._loop;
this._volume=b._volume;this._rate=b._rate;this._seek=0;this._ended=this._paused=!0;this._sprite="__default";this._id=++d._counter;b._sounds.push(this);this.create();return this},create:function(){var b=this._parent,e=d._muted||this._muted||this._parent._muted?0:this._volume;b._webAudio?(this._node="undefined"===typeof d.ctx.createGain?d.ctx.createGainNode():d.ctx.createGain(),this._node.gain.setValueAtTime(e,d.ctx.currentTime),this._node.paused=!0,this._node.connect(d.masterGain)):d.noAudio||(this._node=
d._obtainHtml5Audio(),this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(d._canPlayEvent,this._loadFn,!1),this._endFn=this._endListener.bind(this),this._node.addEventListener("ended",this._endFn,!1),this._node.src=b._src,this._node.preload=!0===b._preload?"auto":b._preload,this._node.volume=e*d.volume(),this._node.load());return this},reset:function(){var b=this._parent;this._muted=
b._muted;this._loop=b._loop;this._volume=b._volume;this._rate=b._rate;this._rateSeek=this._seek=0;this._ended=this._paused=!0;this._sprite="__default";this._id=++d._counter;return this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0);this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var b=this._parent;b._duration=Math.ceil(10*this._node.duration)/10;0===Object.keys(b._sprite).length&&(b._sprite={__default:[0,
1E3*b._duration]});"loaded"!==b._state&&(b._state="loaded",b._emit("load"),b._loadQueue());this._node.removeEventListener(d._canPlayEvent,this._loadFn,!1)},_endListener:function(){var b=this._parent;Infinity===b._duration&&(b._duration=Math.ceil(10*this._node.duration)/10,Infinity===b._sprite.__default[1]&&(b._sprite.__default[1]=1E3*b._duration),b._ended(this));this._node.removeEventListener("ended",this._endFn,!1)}};var g={},j=function(b,e){var f=function(){e._emit("loaderror",null,"Decoding audio data failed.")},
j=function(b){b&&0<e._sounds.length?(g[e._src]=b,l(e,b)):f()};"undefined"!==typeof Promise&&1===d.ctx.decodeAudioData.length?d.ctx.decodeAudioData(b).then(j).catch(f):d.ctx.decodeAudioData(b,j,f)},l=function(b,d){d&&!b._duration&&(b._duration=d.duration);0===Object.keys(b._sprite).length&&(b._sprite={__default:[0,1E3*b._duration]});"loaded"!==b._state&&(b._state="loaded",b._emit("load"),b._loadQueue())},n=function(){if(d.usingWebAudio){try{"undefined"!==typeof AudioContext?d.ctx=new AudioContext:
"undefined"!==typeof webkitAudioContext?d.ctx=new webkitAudioContext:d.usingWebAudio=!1}catch(b){d.usingWebAudio=!1}d.ctx||(d.usingWebAudio=!1);var e=/iP(hone|od|ad)/.test(d._navigator&&d._navigator.platform),f=d._navigator&&d._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),f=f?parseInt(f[1],10):null;e&&(f&&9>f)&&(e=/safari/.test(d._navigator&&d._navigator.userAgent.toLowerCase()),d._navigator&&!e&&(d.usingWebAudio=!1));d.usingWebAudio&&(d.masterGain="undefined"===typeof d.ctx.createGain?d.ctx.createGainNode():
d.ctx.createGain(),d.masterGain.gain.setValueAtTime(d._muted?0:d._volume,d.ctx.currentTime),d.masterGain.connect(d.ctx.destination));d._setup()}};"function"===typeof define&&define.amd&&define([],function(){return{Howler:d,Howl:e}});"undefined"!==typeof exports&&(exports.Howler=d,exports.Howl=e);"undefined"!==typeof global?(global.HowlerGlobal=b,global.Howler=d,global.Howl=e,global.Sound=f):"undefined"!==typeof window&&(window.HowlerGlobal=b,window.Howler=d,window.Howl=e,window.Sound=f)})();
(function(){HowlerGlobal.prototype._pos=[0,0,0];HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0];HowlerGlobal.prototype.stereo=function(b){if(!this.ctx||!this.ctx.listener)return this;for(var d=this._howls.length-1;0<=d;d--)this._howls[d].stereo(b);return this};HowlerGlobal.prototype.pos=function(b,d,e){if(!this.ctx||!this.ctx.listener)return this;d="number"!==typeof d?this._pos[1]:d;e="number"!==typeof e?this._pos[2]:e;if("number"===typeof b)this._pos=[b,d,e],"undefined"!==typeof this.ctx.listener.positionX?
(this.ctx.listener.positionX.setTargetAtTime(this._pos[0],Howler.ctx.currentTime,0.1),this.ctx.listener.positionY.setTargetAtTime(this._pos[1],Howler.ctx.currentTime,0.1),this.ctx.listener.positionZ.setTargetAtTime(this._pos[2],Howler.ctx.currentTime,0.1)):this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]);else return this._pos;return this};HowlerGlobal.prototype.orientation=function(b,d,e,f,m,r){if(!this.ctx||!this.ctx.listener)return this;var q=this._orientation;d="number"!==
typeof d?q[1]:d;e="number"!==typeof e?q[2]:e;f="number"!==typeof f?q[3]:f;m="number"!==typeof m?q[4]:m;r="number"!==typeof r?q[5]:r;if("number"===typeof b)this._orientation=[b,d,e,f,m,r],"undefined"!==typeof this.ctx.listener.forwardX?(this.ctx.listener.forwardX.setTargetAtTime(b,Howler.ctx.currentTime,0.1),this.ctx.listener.forwardY.setTargetAtTime(d,Howler.ctx.currentTime,0.1),this.ctx.listener.forwardZ.setTargetAtTime(e,Howler.ctx.currentTime,0.1),this.ctx.listener.upX.setTargetAtTime(f,Howler.ctx.currentTime,
0.1),this.ctx.listener.upY.setTargetAtTime(m,Howler.ctx.currentTime,0.1),this.ctx.listener.upZ.setTargetAtTime(r,Howler.ctx.currentTime,0.1)):this.ctx.listener.setOrientation(b,d,e,f,m,r);else return q;return this};var b=Howl.prototype.init;Howl.prototype.init=function(d){this._orientation=d.orientation||[1,0,0];this._stereo=d.stereo||null;this._pos=d.pos||null;this._pannerAttr={coneInnerAngle:"undefined"!==typeof d.coneInnerAngle?d.coneInnerAngle:360,coneOuterAngle:"undefined"!==typeof d.coneOuterAngle?
d.coneOuterAngle:360,coneOuterGain:"undefined"!==typeof d.coneOuterGain?d.coneOuterGain:0,distanceModel:"undefined"!==typeof d.distanceModel?d.distanceModel:"inverse",maxDistance:"undefined"!==typeof d.maxDistance?d.maxDistance:1E4,panningModel:"undefined"!==typeof d.panningModel?d.panningModel:"HRTF",refDistance:"undefined"!==typeof d.refDistance?d.refDistance:1,rolloffFactor:"undefined"!==typeof d.rolloffFactor?d.rolloffFactor:1};this._onstereo=d.onstereo?[{fn:d.onstereo}]:[];this._onpos=d.onpos?
[{fn:d.onpos}]:[];this._onorientation=d.onorientation?[{fn:d.onorientation}]:[];return b.call(this,d)};Howl.prototype.stereo=function(b,d){var e=this;if(!e._webAudio)return e;if("loaded"!==e._state)return e._queue.push({event:"stereo",action:function(){e.stereo(b,d)}}),e;var n="undefined"===typeof Howler.ctx.createStereoPanner?"spatial":"stereo";if("undefined"===typeof d)if("number"===typeof b)e._stereo=b,e._pos=[b,0,0];else return e._stereo;for(var m=e._getSoundIds(d),r=0;r<m.length;r++){var q=e._soundById(m[r]);
if(q)if("number"===typeof b)q._stereo=b,q._pos=[b,0,0],q._node&&(q._pannerAttr.panningModel="equalpower",(!q._panner||!q._panner.pan)&&f(q,n),"spatial"===n?"undefined"!==typeof q._panner.positionX?(q._panner.positionX.setValueAtTime(b,Howler.ctx.currentTime),q._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),q._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):q._panner.setPosition(b,0,0):q._panner.pan.setValueAtTime(b,Howler.ctx.currentTime)),e._emit("stereo",q._id);else return q._stereo}return e};
Howl.prototype.pos=function(b,d,e,n){var m=this;if(!m._webAudio)return m;if("loaded"!==m._state)return m._queue.push({event:"pos",action:function(){m.pos(b,d,e,n)}}),m;d="number"!==typeof d?0:d;e="number"!==typeof e?-0.5:e;if("undefined"===typeof n)if("number"===typeof b)m._pos=[b,d,e];else return m._pos;for(var r=m._getSoundIds(n),q=0;q<r.length;q++){var s=m._soundById(r[q]);if(s)if("number"===typeof b)s._pos=[b,d,e],s._node&&((!s._panner||s._panner.pan)&&f(s,"spatial"),"undefined"!==typeof s._panner.positionX?
(s._panner.positionX.setValueAtTime(b,Howler.ctx.currentTime),s._panner.positionY.setValueAtTime(d,Howler.ctx.currentTime),s._panner.positionZ.setValueAtTime(e,Howler.ctx.currentTime)):s._panner.setPosition(b,d,e)),m._emit("pos",s._id);else return s._pos}return m};Howl.prototype.orientation=function(b,d,e,n){var m=this;if(!m._webAudio)return m;if("loaded"!==m._state)return m._queue.push({event:"orientation",action:function(){m.orientation(b,d,e,n)}}),m;d="number"!==typeof d?m._orientation[1]:d;e=
"number"!==typeof e?m._orientation[2]:e;if("undefined"===typeof n)if("number"===typeof b)m._orientation=[b,d,e];else return m._orientation;for(var r=m._getSoundIds(n),q=0;q<r.length;q++){var s=m._soundById(r[q]);if(s)if("number"===typeof b)s._orientation=[b,d,e],s._node&&(s._panner||(s._pos||(s._pos=m._pos||[0,0,-0.5]),f(s,"spatial")),"undefined"!==typeof s._panner.orientationX?(s._panner.orientationX.setValueAtTime(b,Howler.ctx.currentTime),s._panner.orientationY.setValueAtTime(d,Howler.ctx.currentTime),
s._panner.orientationZ.setValueAtTime(e,Howler.ctx.currentTime)):s._panner.setOrientation(b,d,e)),m._emit("orientation",s._id);else return s._orientation}return m};Howl.prototype.pannerAttr=function(){var b=arguments,d,e;if(!this._webAudio)return this;if(0===b.length)return this._pannerAttr;if(1===b.length)if("object"===typeof b[0])d=b[0],"undefined"===typeof e&&(d.pannerAttr||(d.pannerAttr={coneInnerAngle:d.coneInnerAngle,coneOuterAngle:d.coneOuterAngle,coneOuterGain:d.coneOuterGain,distanceModel:d.distanceModel,
maxDistance:d.maxDistance,refDistance:d.refDistance,rolloffFactor:d.rolloffFactor,panningModel:d.panningModel}),this._pannerAttr={coneInnerAngle:"undefined"!==typeof d.pannerAttr.coneInnerAngle?d.pannerAttr.coneInnerAngle:this._coneInnerAngle,coneOuterAngle:"undefined"!==typeof d.pannerAttr.coneOuterAngle?d.pannerAttr.coneOuterAngle:this._coneOuterAngle,coneOuterGain:"undefined"!==typeof d.pannerAttr.coneOuterGain?d.pannerAttr.coneOuterGain:this._coneOuterGain,distanceModel:"undefined"!==typeof d.pannerAttr.distanceModel?
d.pannerAttr.distanceModel:this._distanceModel,maxDistance:"undefined"!==typeof d.pannerAttr.maxDistance?d.pannerAttr.maxDistance:this._maxDistance,refDistance:"undefined"!==typeof d.pannerAttr.refDistance?d.pannerAttr.refDistance:this._refDistance,rolloffFactor:"undefined"!==typeof d.pannerAttr.rolloffFactor?d.pannerAttr.rolloffFactor:this._rolloffFactor,panningModel:"undefined"!==typeof d.pannerAttr.panningModel?d.pannerAttr.panningModel:this._panningModel});else return(b=this._soundById(parseInt(b[0],
10)))?b._pannerAttr:this._pannerAttr;else 2===b.length&&(d=b[0],e=parseInt(b[1],10));e=this._getSoundIds(e);for(var n=0;n<e.length;n++)if(b=this._soundById(e[n])){var m=b._pannerAttr,m={coneInnerAngle:"undefined"!==typeof d.coneInnerAngle?d.coneInnerAngle:m.coneInnerAngle,coneOuterAngle:"undefined"!==typeof d.coneOuterAngle?d.coneOuterAngle:m.coneOuterAngle,coneOuterGain:"undefined"!==typeof d.coneOuterGain?d.coneOuterGain:m.coneOuterGain,distanceModel:"undefined"!==typeof d.distanceModel?d.distanceModel:
m.distanceModel,maxDistance:"undefined"!==typeof d.maxDistance?d.maxDistance:m.maxDistance,refDistance:"undefined"!==typeof d.refDistance?d.refDistance:m.refDistance,rolloffFactor:"undefined"!==typeof d.rolloffFactor?d.rolloffFactor:m.rolloffFactor,panningModel:"undefined"!==typeof d.panningModel?d.panningModel:m.panningModel},r=b._panner;r?(r.coneInnerAngle=m.coneInnerAngle,r.coneOuterAngle=m.coneOuterAngle,r.coneOuterGain=m.coneOuterGain,r.distanceModel=m.distanceModel,r.maxDistance=m.maxDistance,
r.refDistance=m.refDistance,r.rolloffFactor=m.rolloffFactor,r.panningModel=m.panningModel):(b._pos||(b._pos=this._pos||[0,0,-0.5]),f(b,"spatial"))}return this};var d=Sound.prototype.init;Sound.prototype.init=function(){var b=this._parent;this._orientation=b._orientation;this._stereo=b._stereo;this._pos=b._pos;this._pannerAttr=b._pannerAttr;d.call(this);this._stereo?b.stereo(this._stereo):this._pos&&b.pos(this._pos[0],this._pos[1],this._pos[2],this._id)};var e=Sound.prototype.reset;Sound.prototype.reset=
function(){var b=this._parent;this._orientation=b._orientation;this._stereo=b._stereo;this._pos=b._pos;this._pannerAttr=b._pannerAttr;this._stereo?b.stereo(this._stereo):this._pos?b.pos(this._pos[0],this._pos[1],this._pos[2],this._id):this._panner&&(this._panner.disconnect(0),this._panner=void 0,b._refreshBuffer(this));return e.call(this)};var f=function(b,d){"spatial"===(d||"spatial")?(b._panner=Howler.ctx.createPanner(),b._panner.coneInnerAngle=b._pannerAttr.coneInnerAngle,b._panner.coneOuterAngle=
b._pannerAttr.coneOuterAngle,b._panner.coneOuterGain=b._pannerAttr.coneOuterGain,b._panner.distanceModel=b._pannerAttr.distanceModel,b._panner.maxDistance=b._pannerAttr.maxDistance,b._panner.refDistance=b._pannerAttr.refDistance,b._panner.rolloffFactor=b._pannerAttr.rolloffFactor,b._panner.panningModel=b._pannerAttr.panningModel,"undefined"!==typeof b._panner.positionX?(b._panner.positionX.setValueAtTime(b._pos[0],Howler.ctx.currentTime),b._panner.positionY.setValueAtTime(b._pos[1],Howler.ctx.currentTime),
b._panner.positionZ.setValueAtTime(b._pos[2],Howler.ctx.currentTime)):b._panner.setPosition(b._pos[0],b._pos[1],b._pos[2]),"undefined"!==typeof b._panner.orientationX?(b._panner.orientationX.setValueAtTime(b._orientation[0],Howler.ctx.currentTime),b._panner.orientationY.setValueAtTime(b._orientation[1],Howler.ctx.currentTime),b._panner.orientationZ.setValueAtTime(b._orientation[2],Howler.ctx.currentTime)):b._panner.setOrientation(b._orientation[0],b._orientation[1],b._orientation[2])):(b._panner=
Howler.ctx.createStereoPanner(),b._panner.pan.setValueAtTime(b._stereo,Howler.ctx.currentTime));b._panner.connect(b._node);b._paused||b._parent.pause(b._id,!0).play(b._id,!0)}})();!function(b,d){"object"==typeof exports&&"undefined"!=typeof module?d():"function"==typeof define&&define.amd?define(d):d()}(0,function(){function b(b){var d=this.constructor;return this.then(function(e){return d.resolve(b()).then(function(){return e})},function(e){return d.resolve(b()).then(function(){return d.reject(e)})})}function d(){}function e(b){if(!(this instanceof e))throw new TypeError("Promises must be constructed via new");if("function"!=typeof b)throw new TypeError("not a function");
this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];n(b,this)}function f(b,d){for(;3===b._state;)b=b._value;0!==b._state?(b._handled=!0,e._immediateFn(function(){var e=1===b._state?d.onFulfilled:d.onRejected;if(null!==e){var f;try{f=e(b._value)}catch(l){return void j(d.promise,l)}g(d.promise,f)}else(1===b._state?g:j)(d.promise,b._value)})):b._deferreds.push(d)}function g(b,d){try{if(d===b)throw new TypeError("A promise cannot be resolved with itself.");if(d&&("object"==typeof d||
"function"==typeof d)){var f=d.then;if(d instanceof e)return b._state=3,b._value=d,void l(b);if("function"==typeof f)return void n(function(){f.apply(d,arguments)},b)}b._state=1;b._value=d;l(b)}catch(g){j(b,g)}}function j(b,d){b._state=2;b._value=d;l(b)}function l(b){2===b._state&&0===b._deferreds.length&&e._immediateFn(function(){b._handled||e._unhandledRejectionFn(b._value)});for(var d=0,g=b._deferreds.length;g>d;d++)f(b,b._deferreds[d]);b._deferreds=null}function n(b,d){var e=!1;try{b(function(b){e||
(e=!0,g(d,b))},function(b){e||(e=!0,j(d,b))})}catch(f){e||(e=!0,j(d,f))}}var m=setTimeout;e.prototype["catch"]=function(b){return this.then(null,b)};e.prototype.then=function(b,e){var g=new this.constructor(d);return f(this,new function(b,d,e){this.onFulfilled="function"==typeof b?b:null;this.onRejected="function"==typeof d?d:null;this.promise=e}(b,e,g)),g};e.prototype["finally"]=b;e.all=function(b){return new e(function(d,e){function f(b,l){try{if(l&&("object"==typeof l||"function"==typeof l)){var m=
l.then;if("function"==typeof m)return void m.call(l,function(d){f(b,d)},e)}g[b]=l;0==--j&&d(g)}catch(n){e(n)}}if(!b||"undefined"==typeof b.length)throw new TypeError("Promise.all accepts an array");var g=Array.prototype.slice.call(b);if(0===g.length)return d([]);for(var j=g.length,l=0;g.length>l;l++)f(l,g[l])})};e.resolve=function(b){return b&&"object"==typeof b&&b.constructor===e?b:new e(function(d){d(b)})};e.reject=function(b){return new e(function(d,e){e(b)})};e.race=function(b){return new e(function(d,
e){for(var f=0,g=b.length;g>f;f++)b[f].then(d,e)})};e._immediateFn="function"==typeof setImmediate&&function(b){setImmediate(b)}||function(b){m(b,0)};e._unhandledRejectionFn=function(b){void 0!==console&&console&&console.warn("Possible Unhandled Promise Rejection:",b)};var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object");}();"Promise"in r?r.Promise.prototype["finally"]||
(r.Promise.prototype["finally"]=b):r.Promise=e});(function(){function b(b,d){document.addEventListener?b.addEventListener("scroll",d,!1):b.attachEvent("scroll",d)}function d(b){this.a=document.createElement("div");this.a.setAttribute("aria-hidden","true");this.a.appendChild(document.createTextNode(b));this.b=document.createElement("span");this.c=document.createElement("span");this.h=document.createElement("span");this.f=document.createElement("span");this.g=-1;this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";
this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;";this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;";this.b.appendChild(this.h);this.c.appendChild(this.f);this.a.appendChild(this.b);this.a.appendChild(this.c)}function e(b,d){b.a.style.cssText=
"max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+d+";"}function f(b){var d=b.a.offsetWidth,e=d+100;b.f.style.width=e+"px";b.c.scrollLeft=e;b.b.scrollLeft=b.b.scrollWidth+100;return b.g!==d?(b.g=d,!0):!1}function g(d,e){function g(){var b=j;f(b)&&b.a.parentNode&&e(b.g)}var j=d;b(d.b,g);b(d.c,g);f(d)}function j(b,d){var e=d||{};this.family=b;this.style=e.style||
"normal";this.weight=e.weight||"normal";this.stretch=e.stretch||"normal"}function l(){null===t&&(t=!!document.fonts);return t}function n(){if(null===s){var b=document.createElement("div");try{b.style.font="condensed 100px sans-serif"}catch(d){}s=""!==b.style.font}return s}function m(b,d){return[b.style,b.weight,n()?b.stretch:"","100px",d].join(" ")}var r=null,q=null,s=null,t=null;j.prototype.load=function(b,f){var j=this,n=b||"BESbswy",t=0,s=f||3E3,E=(new Date).getTime();return new Promise(function(b,
f){var u;if(u=l())null===q&&(l()&&/Apple/.test(window.navigator.vendor)?(u=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent),q=!!u&&603>parseInt(u[1],10)):q=!1),u=!q;if(u){u=new Promise(function(b,d){function e(){(new Date).getTime()-E>=s?d(Error(""+s+"ms timeout exceeded")):document.fonts.load(m(j,'"'+j.family+'"'),n).then(function(d){1<=d.length?b():setTimeout(e,25)},d)}e()});var v=new Promise(function(b,d){t=setTimeout(function(){d(Error(""+s+"ms timeout exceeded"))},
s)});Promise.race([v,u]).then(function(){clearTimeout(t);b(j)},f)}else{var O=function(){function l(){var d;if(d=-1!=L&&-1!=O||-1!=L&&-1!=aa||-1!=O&&-1!=aa)(d=L!=O&&L!=aa&&O!=aa)||(null===r&&(d=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),r=!!d&&(536>parseInt(d[1],10)||536===parseInt(d[1],10)&&11>=parseInt(d[2],10))),d=r&&(L==fa&&O==fa&&aa==fa||L==X&&O==X&&aa==X||L==B&&O==B&&aa==B)),d=!d;d&&(z.parentNode&&z.parentNode.removeChild(z),clearTimeout(t),b(j))}function q(){if((new Date).getTime()-
E>=s)z.parentNode&&z.parentNode.removeChild(z),f(Error(""+s+"ms timeout exceeded"));else{var b=document.hidden;if(!0===b||void 0===b)L=u.a.offsetWidth,O=v.a.offsetWidth,aa=I.a.offsetWidth,l();t=setTimeout(q,50)}}var u=new d(n),v=new d(n),I=new d(n),L=-1,O=-1,aa=-1,fa=-1,X=-1,B=-1,z=document.createElement("div");z.dir="ltr";e(u,m(j,"sans-serif"));e(v,m(j,"serif"));e(I,m(j,"monospace"));z.appendChild(u.a);z.appendChild(v.a);z.appendChild(I.a);document.body.appendChild(z);fa=u.a.offsetWidth;X=v.a.offsetWidth;
B=I.a.offsetWidth;q();g(u,function(b){L=b;l()});e(u,m(j,'"'+j.family+'",sans-serif'));g(v,function(b){O=b;l()});e(v,m(j,'"'+j.family+'",serif'));g(I,function(b){aa=b;l()});e(I,m(j,'"'+j.family+'",monospace'))};document.body?O():document.addEventListener?document.addEventListener("DOMContentLoaded",function G(){document.removeEventListener("DOMContentLoaded",G);O()}):document.attachEvent("onreadystatechange",function A(){if("interactive"==document.readyState||"complete"==document.readyState)document.detachEvent("onreadystatechange",
A),O()})}})};"object"===typeof module?module.exports=j:(window.FontFaceObserver=j,window.FontFaceObserver.prototype.load=j.prototype.load)})();(function(b){Number.prototype.map=function(b,d,e,f){return e+(f-e)*((this-b)/(d-b))};Number.prototype.limit=function(b,d){return Math.min(d,Math.max(b,this))};Number.prototype.round=function(b){b=Math.pow(10,b||0);return Math.round(this*b)/b};Number.prototype.floor=function(){return Math.floor(this)};Number.prototype.ceil=function(){return Math.ceil(this)};Number.prototype.toInt=function(){return this|0};Number.prototype.toRad=function(){return this/180*Math.PI};Number.prototype.toDeg=function(){return 180*
this/Math.PI};Object.defineProperty(Array.prototype,"erase",{value:function(b){for(var d=this.length;d--;)this[d]===b&&this.splice(d,1);return this}});Object.defineProperty(Array.prototype,"random",{value:function(){return this[Math.floor(Math.random()*this.length)]}});Function.prototype.bind=Function.prototype.bind||function(b){if("function"!==typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var d=Array.prototype.slice.call(arguments,1),e=this,
f=function(){},g=function(){return e.apply(this instanceof f&&b?this:b,d.concat(Array.prototype.slice.call(arguments)))};f.prototype=this.prototype;g.prototype=new f;return g};b.ig={game:null,debug:null,version:"1.24",global:b,modules:{},resources:[],ready:!1,baked:!1,nocache:"",ua:{},prefix:b.ImpactPrefix||"",lib:"lib/",_current:null,_loadQueue:[],_waitForOnload:0,$:function(b){return"#"==b.charAt(0)?document.getElementById(b.substr(1)):document.getElementsByTagName(b)},$new:function(b){return document.createElement(b)},
copy:function(b){if(!b||"object"!=typeof b||b instanceof HTMLElement||b instanceof ig.Class)return b;if(b instanceof Array)for(var d=[],e=0,f=b.length;e<f;e++)d[e]=ig.copy(b[e]);else for(e in d={},b)d[e]=ig.copy(b[e]);return d},merge:function(b,d){for(var e in d){var f=d[e];if("object"!=typeof f||f instanceof HTMLElement||f instanceof ig.Class||null===f)b[e]=f;else{if(!b[e]||"object"!=typeof b[e])b[e]=f instanceof Array?[]:{};ig.merge(b[e],f)}}return b},ksort:function(b){if(!b||"object"!=typeof b)return[];
var d=[],e=[],f;for(f in b)d.push(f);d.sort();for(f=0;f<d.length;f++)e.push(b[d[f]]);return e},setVendorAttribute:function(b,d,e){var f=d.charAt(0).toUpperCase()+d.substr(1);b[d]=b["ms"+f]=b["moz"+f]=b["webkit"+f]=b["o"+f]=e},getVendorAttribute:function(b,d){var e=d.charAt(0).toUpperCase()+d.substr(1);return b[d]||b["ms"+e]||b["moz"+e]||b["webkit"+e]||b["o"+e]},normalizeVendorAttribute:function(b,d){var e=ig.getVendorAttribute(b,d);!b[d]&&e&&(b[d]=e)},getImagePixels:function(b,d,e,f,g){var j=ig.$new("canvas");
j.width=b.width;j.height=b.height;var l=j.getContext("2d");ig.System.SCALE.CRISP(j,l);var u=ig.getVendorAttribute(l,"backingStorePixelRatio")||1;ig.normalizeVendorAttribute(l,"getImageDataHD");var x=b.width/u,D=b.height/u;j.width=Math.ceil(x);j.height=Math.ceil(D);l.drawImage(b,0,0,x,D);return 1===u?l.getImageData(d,e,f,g):l.getImageDataHD(d,e,f,g)},module:function(b){if(ig._current)throw"Module '"+ig._current.name+"' defines nothing";if(ig.modules[b]&&ig.modules[b].body)throw"Module '"+b+"' is already defined";
ig._current={name:b,requires:[],loaded:!1,body:null};ig.modules[b]=ig._current;ig._loadQueue.push(ig._current);return ig},requires:function(){ig._current.requires=Array.prototype.slice.call(arguments);return ig},defines:function(b){ig._current.body=b;ig._current=null;ig._initDOMReady()},addResource:function(b){ig.resources.push(b)},setNocache:function(b){ig.nocache=b?"?"+Date.now():""},log:function(){},assert:function(){},show:function(){},mark:function(){},_loadScript:function(b,d){ig.modules[b]=
{name:b,requires:[],loaded:!1,body:null};ig._waitForOnload++;var e=ig.prefix+ig.lib+b.replace(/\./g,"/")+".js"+ig.nocache,f=ig.$new("script");f.type="text/javascript";f.src=e;f.onload=function(){ig._waitForOnload--;ig._execModules()};f.onerror=function(){throw"Failed to load module "+b+" at "+e+" required from "+d;};ig.$("head")[0].appendChild(f)},_execModules:function(){for(var b=!1,d=0;d<ig._loadQueue.length;d++){for(var e=ig._loadQueue[d],f=!0,g=0;g<e.requires.length;g++){var j=e.requires[g];ig.modules[j]?
ig.modules[j].loaded||(f=!1):(f=!1,ig._loadScript(j,e.name))}f&&e.body&&(ig._loadQueue.splice(d,1),e.loaded=!0,e.body(),b=!0,d--)}if(b)ig._execModules();else if(!ig.baked&&0==ig._waitForOnload&&0!=ig._loadQueue.length){b=[];for(d=0;d<ig._loadQueue.length;d++){f=[];j=ig._loadQueue[d].requires;for(g=0;g<j.length;g++)e=ig.modules[j[g]],(!e||!e.loaded)&&f.push(j[g]);b.push(ig._loadQueue[d].name+" (requires: "+f.join(", ")+")")}throw"Unresolved (or circular?) dependencies. Most likely there's a name/path mismatch for one of the listed modules or a previous syntax error prevents a module from loading:\n"+
b.join("\n");}},_DOMReady:function(){if(!ig.modules["dom.ready"].loaded){if(!document.body)return setTimeout(ig._DOMReady,13);ig.modules["dom.ready"].loaded=!0;ig._waitForOnload--;ig._execModules()}return 0},_boot:function(){document.location.href.match(/\?nocache/)&&ig.setNocache(!0);ig.ua.pixelRatio=b.devicePixelRatio||1;ig.ua.viewport={width:b.innerWidth,height:b.innerHeight};ig.ua.screen={width:b.screen.availWidth*ig.ua.pixelRatio,height:b.screen.availHeight*ig.ua.pixelRatio};ig.ua.iPhone=/iPhone|iPod/i.test(navigator.userAgent);
ig.ua.iPhone4=ig.ua.iPhone&&2==ig.ua.pixelRatio;ig.ua.iPad=/iPad/i.test(navigator.userAgent);ig.ua.android=/android/i.test(navigator.userAgent);ig.ua.winPhone=/Windows Phone/i.test(navigator.userAgent);ig.ua.iOS=ig.ua.iPhone||ig.ua.iPad;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.winPhone||/mobile/i.test(navigator.userAgent);ig.ua.touchDevice="ontouchstart"in b||b.navigator.msMaxTouchPoints},_initDOMReady:function(){ig.modules["dom.ready"]?ig._execModules():(ig._boot(),ig.modules["dom.ready"]={requires:[],
loaded:!1,body:null},ig._waitForOnload++,"complete"===document.readyState?ig._DOMReady():(document.addEventListener("DOMContentLoaded",ig._DOMReady,!1),b.addEventListener("load",ig._DOMReady,!1)))}};ig.normalizeVendorAttribute(b,"requestAnimationFrame");if(b.requestAnimationFrame){var d=1,e={};b.ig.setAnimation=function(f){var g=d++;e[g]=!0;var j=function(){e[g]&&(b.requestAnimationFrame(j),f())};b.requestAnimationFrame(j);return g};b.ig.clearAnimation=function(b){delete e[b]}}else b.ig.setAnimation=
function(d){return b.setInterval(d,1E3/60)},b.ig.clearAnimation=function(d){b.clearInterval(d)};var f=!1,g=/xyz/.test(function(){xyz})?/\bparent\b/:/.*/,j=0;b.ig.Class=function(){};var l=function(b){var d=this.prototype,e={},f;for(f in b)"function"==typeof b[f]&&"function"==typeof d[f]&&g.test(b[f])?(e[f]=d[f],d[f]=function(b,d){return function(){var f=this.parent;this.parent=e[b];var g=d.apply(this,arguments);this.parent=f;return g}}(f,b[f])):d[f]=b[f]};b.ig.Class.extend=function(d){function e(){if(!f){if(this.staticInstantiate){var b=
this.staticInstantiate.apply(this,arguments);if(b)return b}for(var d in this)"object"==typeof this[d]&&(this[d]=ig.copy(this[d]));this.init&&this.init.apply(this,arguments)}return this}var r=this.prototype;f=!0;var q=new this;f=!1;for(var s in d)q[s]="function"==typeof d[s]&&"function"==typeof r[s]&&g.test(d[s])?function(b,d){return function(){var e=this.parent;this.parent=r[b];var f=d.apply(this,arguments);this.parent=e;return f}}(s,d[s]):d[s];e.prototype=q;e.prototype.constructor=e;e.extend=b.ig.Class.extend;
e.inject=l;e.classId=q.classId=++j;return e};b.ImpactMixin&&ig.merge(ig,b.ImpactMixin)})(window);ig.baked=!0;
ig.module("impact.image").defines(function(){ig.Image=ig.Class.extend({data:null,width:0,height:0,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(b){return ig.Image.cache[b]||null},init:function(b){this.path=b;this.load()},load:function(b){this.loaded?b&&b(this.path,!0):(!this.loaded&&ig.ready?(this.loadCallback=b||null,this.data=new Image,this.data.onload=this.onload.bind(this),this.data.onerror=this.onerror.bind(this),this.data.src=ig.prefix+this.path+ig.nocache):ig.addResource(this),
ig.Image.cache[this.path]=this)},reload:function(){this.loaded=!1;this.data=new Image;this.data.onload=this.onload.bind(this);this.data.src=this.path+"?"+Date.now()},onload:function(){this.width=this.data.width;this.height=this.data.height;this.loaded=!0;1!=ig.system.scale&&this.resize(ig.system.scale);this.loadCallback&&this.loadCallback(this.path,!0);return!0},onerror:function(){this.failed=!0;this.loadCallback&&this.loadCallback(this.path,!1);return!1},resize:function(b){var d=ig.getImagePixels(this.data,
0,0,this.width,this.height),e=this.width*b,f=this.height*b,g=ig.$new("canvas");g.width=e;g.height=f;for(var j=g.getContext("2d"),l=j.getImageData(0,0,e,f),n=0;n<f;n++)for(var m=0;m<e;m++){var r=4*(Math.floor(n/b)*this.width+Math.floor(m/b)),q=4*(n*e+m);l.data[q]=d.data[r];l.data[q+1]=d.data[r+1];l.data[q+2]=d.data[r+2];l.data[q+3]=d.data[r+3]}j.putImageData(l,0,0);this.data=g},draw:function(b,d,e,f,g,j){if(this.loaded){var l=ig.system.scale;g=(g?g:this.width)*l;j=(j?j:this.height)*l;ig.system.context.drawImage(this.data,
e?e*l:0,f?f*l:0,g,j,ig.system.getDrawPos(b),ig.system.getDrawPos(d),g,j);ig.Image.drawCount++}},drawTile:function(b,d,e,f,g,j,l){g=g?g:f;if(this.loaded&&!(f>this.width||g>this.height)){var n=ig.system.scale,m=Math.floor(f*n),r=Math.floor(g*n),q=j?-1:1,s=l?-1:1;if(j||l)ig.system.context.save(),ig.system.context.scale(q,s);ig.system.context.drawImage(this.data,Math.floor(e*f)%this.width*n,Math.floor(e*f/this.width)*g*n,m,r,ig.system.getDrawPos(b)*q-(j?m:0),ig.system.getDrawPos(d)*s-(l?r:0),m,r);(j||
l)&&ig.system.context.restore();ig.Image.drawCount++}}});ig.Image.drawCount=0;ig.Image.cache={};ig.Image.reloadCache=function(){for(var b in ig.Image.cache)ig.Image.cache[b].reload()}});ig.baked=!0;
ig.module("impact.font").requires("impact.image").defines(function(){ig.Font=ig.Image.extend({widthMap:[],indices:[],firstChar:32,alpha:1,letterSpacing:1,lineSpacing:0,onload:function(b){this._loadMetrics(this.data);this.parent(b);this.height-=2},widthForString:function(b){if(-1!==b.indexOf("\n")){b=b.split("\n");for(var d=0,e=0;e<b.length;e++)d=Math.max(d,this._widthForLine(b[e]));return d}return this._widthForLine(b)},_widthForLine:function(b){for(var d=0,e=0;e<b.length;e++)d+=this.widthMap[b.charCodeAt(e)-
this.firstChar];0<b.length&&(d+=this.letterSpacing*(b.length-1));return d},heightForString:function(b){return b.split("\n").length*(this.height+this.lineSpacing)},draw:function(b,d,e,f){"string"!=typeof b&&(b=b.toString());if(-1!==b.indexOf("\n")){b=b.split("\n");for(var g=this.height+this.lineSpacing,j=0;j<b.length;j++)this.draw(b[j],d,e+j*g,f)}else{if(f==ig.Font.ALIGN.RIGHT||f==ig.Font.ALIGN.CENTER)j=this._widthForLine(b),d-=f==ig.Font.ALIGN.CENTER?j/2:j;1!==this.alpha&&(ig.system.context.globalAlpha=
this.alpha);for(j=0;j<b.length;j++)f=b.charCodeAt(j),d+=this._drawChar(f-this.firstChar,d,e);1!==this.alpha&&(ig.system.context.globalAlpha=1);ig.Image.drawCount+=b.length}},_drawChar:function(b,d,e){if(!this.loaded||0>b||b>=this.indices.length)return 0;var f=ig.system.scale,g=this.widthMap[b]*f,j=this.height*f;ig.system.context.drawImage(this.data,this.indices[b]*f,0,g,j,ig.system.getDrawPos(d),ig.system.getDrawPos(e),g,j);return this.widthMap[b]+this.letterSpacing},_loadMetrics:function(b){this.widthMap=
[];this.indices=[];for(var d=ig.getImagePixels(b,0,b.height-1,b.width,1),e=0,f=0;f<b.width;f++){var g=4*f+3;127<d.data[g]?e++:128>d.data[g]&&e&&(this.widthMap.push(e),this.indices.push(f-e),e=0)}this.widthMap.push(e);this.indices.push(f-e)}});ig.Font.ALIGN={LEFT:0,RIGHT:1,CENTER:2}});ig.baked=!0;
ig.module("impact.sound").defines(function(){ig.SoundManager=ig.Class.extend({clips:{},volume:1,format:null,init:function(){if(!ig.Sound.enabled||!window.Audio)ig.Sound.enabled=!1;else{for(var b=new Audio,d=0;d<ig.Sound.use.length;d++){var e=ig.Sound.use[d];if(b.canPlayType(e.mime)){this.format=e;break}}this.format||(ig.Sound.enabled=!1);ig.Sound.enabled&&ig.Sound.useWebAudio&&(this.audioContext=new AudioContext,this.boundWebAudioUnlock=this.unlockWebAudio.bind(this),ig.system.canvas.addEventListener("touchstart",
this.boundWebAudioUnlock,!1),ig.system.canvas.addEventListener("mousedown",this.boundWebAudioUnlock,!1))}},unlockWebAudio:function(){ig.system.canvas.removeEventListener("touchstart",this.boundWebAudioUnlock,!1);ig.system.canvas.removeEventListener("mousedown",this.boundWebAudioUnlock,!1);var b=this.audioContext.createBuffer(1,1,22050),d=this.audioContext.createBufferSource();d.buffer=b;d.connect(this.audioContext.destination);d.start(0)},load:function(b,d,e){return d&&ig.Sound.useWebAudio?this.loadWebAudio(b,
d,e):this.loadHTML5Audio(b,d,e)},loadWebAudio:function(b,d,e){d=ig.prefix+b.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[b])return this.clips[b];var f=new ig.Sound.WebAudioSource;this.clips[b]=f;var g=new XMLHttpRequest;g.open("GET",d,!0);g.responseType="arraybuffer";var j=this;g.onload=function(d){j.audioContext.decodeAudioData(g.response,function(g){f.buffer=g;e&&e(b,!0,d)},function(d){e&&e(b,!1,d)})};g.onerror=function(d){e&&e(b,!1,d)};g.send();return f},loadHTML5Audio:function(b,
d,e){var f=ig.prefix+b.replace(/[^\.]+$/,this.format.ext)+ig.nocache;if(this.clips[b]){if(this.clips[b]instanceof ig.Sound.WebAudioSource)return this.clips[b];if(d&&this.clips[b].length<ig.Sound.channels)for(d=this.clips[b].length;d<ig.Sound.channels;d++){var g=new Audio(f);g.load();this.clips[b].push(g)}return this.clips[b][0]}var j=new Audio(f);e&&(ig.ua.mobile?setTimeout(function(){e(b,!0,null)},0):(j.addEventListener("canplaythrough",function n(d){j.removeEventListener("canplaythrough",n,!1);
e(b,!0,d)},!1),j.addEventListener("error",function(d){e(b,!1,d)},!1)));j.preload="auto";j.load();this.clips[b]=[j];if(d)for(d=1;d<ig.Sound.channels;d++)g=new Audio(f),g.load(),this.clips[b].push(g);return j},get:function(b){if((b=this.clips[b])&&b instanceof ig.Sound.WebAudioSource)return b;for(var d=0,e;e=b[d++];)if(e.paused||e.ended)return e.ended&&(e.currentTime=0),e;b[0].pause();b[0].currentTime=0;return b[0]}});ig.Music=ig.Class.extend({tracks:[],namedTracks:{},currentTrack:null,currentIndex:0,
random:!1,_volume:1,_loop:!1,_fadeInterval:0,_fadeTimer:null,_endedCallbackBound:null,init:function(){this._endedCallbackBound=this._endedCallback.bind(this);Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)});Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)})},add:function(b,d){if(ig.Sound.enabled){var e=b instanceof ig.Sound?b.path:b,f=ig.soundManager.load(e,!1);if(f instanceof ig.Sound.WebAudioSource)throw ig.system.stopRunLoop(),
"Sound '"+e+"' loaded as Multichannel but used for Music. Set the multiChannel param to false when loading, e.g.: new ig.Sound(path, false)";f.loop=this._loop;f.volume=this._volume;f.addEventListener("ended",this._endedCallbackBound,!1);this.tracks.push(f);d&&(this.namedTracks[d]=f);this.currentTrack||(this.currentTrack=f)}},next:function(){this.tracks.length&&(this.stop(),this.currentIndex=this.random?Math.floor(Math.random()*this.tracks.length):(this.currentIndex+1)%this.tracks.length,this.currentTrack=
this.tracks[this.currentIndex],this.play())},pause:function(){this.currentTrack&&this.currentTrack.pause()},stop:function(){this.currentTrack&&(this.currentTrack.pause(),this.currentTrack.currentTime=0)},play:function(b){if(b&&this.namedTracks[b])b=this.namedTracks[b],b!=this.currentTrack&&(this.stop(),this.currentTrack=b);else if(!this.currentTrack)return;this.currentTrack.play()},getLooping:function(){return this._loop},setLooping:function(b){this._loop=b;for(var d in this.tracks)this.tracks[d].loop=
b},getVolume:function(){return this._volume},setVolume:function(b){this._volume=b.limit(0,1);for(var d in this.tracks)this.tracks[d].volume=this._volume},fadeOut:function(b){this.currentTrack&&(clearInterval(this._fadeInterval),this._fadeTimer=new ig.Timer(b),this._fadeInterval=setInterval(this._fadeStep.bind(this),50))},_fadeStep:function(){var b=this._fadeTimer.delta().map(-this._fadeTimer.target,0,1,0).limit(0,1)*this._volume;0.01>=b?(this.stop(),this.currentTrack.volume=this._volume,clearInterval(this._fadeInterval)):
this.currentTrack.volume=b},_endedCallback:function(){this._loop?this.play():this.next()}});ig.Sound=ig.Class.extend({path:"",volume:1,currentClip:null,multiChannel:!0,_loop:!1,init:function(b,d){this.path=b;this.multiChannel=!1!==d;Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});this.load()},getLooping:function(){return this._loop},setLooping:function(b){this._loop=b;this.currentClip&&(this.currentClip.loop=b)},load:function(b){ig.Sound.enabled?
ig.ready?ig.soundManager.load(this.path,this.multiChannel,b):ig.addResource(this):b&&b(this.path,!0)},play:function(){ig.Sound.enabled&&(this.currentClip=ig.soundManager.get(this.path),this.currentClip.loop=this._loop,this.currentClip.volume=ig.soundManager.volume*this.volume,this.currentClip.play())},stop:function(){this.currentClip&&(this.currentClip.pause(),this.currentClip.currentTime=0)}});ig.Sound.WebAudioSource=ig.Class.extend({sources:[],gain:null,buffer:null,_loop:!1,init:function(){this.gain=
ig.soundManager.audioContext.createGain();this.gain.connect(ig.soundManager.audioContext.destination);Object.defineProperty(this,"loop",{get:this.getLooping.bind(this),set:this.setLooping.bind(this)});Object.defineProperty(this,"volume",{get:this.getVolume.bind(this),set:this.setVolume.bind(this)})},play:function(){if(this.buffer){var b=ig.soundManager.audioContext.createBufferSource();b.buffer=this.buffer;b.connect(this.gain);b.loop=this._loop;var d=this;this.sources.push(b);b.onended=function(){d.sources.erase(b)};
b.start(0)}},pause:function(){for(var b=0;b<this.sources.length;b++)try{this.sources[b].stop()}catch(d){}},getLooping:function(){return this._loop},setLooping:function(b){this._loop=b;for(var d=0;d<this.sources.length;d++)this.sources[d].loop=b},getVolume:function(){return this.gain.gain.value},setVolume:function(b){this.gain.gain.value=b}});ig.Sound.FORMAT={MP3:{ext:"mp3",mime:"audio/mpeg"},M4A:{ext:"m4a",mime:"audio/mp4; codecs=mp4a.40.2"},OGG:{ext:"ogg",mime:"audio/ogg; codecs=vorbis"},WEBM:{ext:"webm",
mime:"audio/webm; codecs=vorbis"},CAF:{ext:"caf",mime:"audio/x-caf"}};ig.Sound.use=[ig.Sound.FORMAT.OGG,ig.Sound.FORMAT.MP3];ig.Sound.channels=4;ig.Sound.enabled=!0;ig.normalizeVendorAttribute(window,"AudioContext");ig.Sound.useWebAudio=!!window.AudioContext});ig.baked=!0;
ig.module("impact.loader").requires("impact.image","impact.font","impact.sound").defines(function(){ig.Loader=ig.Class.extend({resources:[],gameClass:null,status:0,done:!1,_unloaded:[],_drawStatus:0,_intervalId:0,_loadCallbackBound:null,init:function(b,d){this.gameClass=b;this.resources=d;this._loadCallbackBound=this._loadCallback.bind(this);for(var e=0;e<this.resources.length;e++)this._unloaded.push(this.resources[e].path)},load:function(){ig.system.clear("#000");if(this.resources.length){for(var b=
0;b<this.resources.length;b++)this.loadResource(this.resources[b]);this._intervalId=setInterval(this.draw.bind(this),16)}else this.end()},loadResource:function(b){b.load(this._loadCallbackBound)},end:function(){this.done||(this.done=!0,clearInterval(this._intervalId),ig.system.setGame(this.gameClass))},draw:function(){this._drawStatus+=(this.status-this._drawStatus)/5;var b=ig.system.scale,d=(0.6*ig.system.width).floor(),e=(0.1*ig.system.height).floor(),f=(0.5*ig.system.width-d/2).floor(),g=(0.5*
ig.system.height-e/2).floor();ig.system.context.fillStyle="#000";ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);ig.system.context.fillStyle="#fff";ig.system.context.fillRect(f*b,g*b,d*b,e*b);ig.system.context.fillStyle="#000";ig.system.context.fillRect(f*b+b,g*b+b,d*b-b-b,e*b-b-b);ig.system.context.fillStyle="#fff";ig.system.context.fillRect(f*b,g*b,d*b*this._drawStatus,e*b)},_loadCallback:function(b,d){if(d)this._unloaded.erase(b);else throw"Failed to load resource: "+b;this.status=
1-this._unloaded.length/this.resources.length;0==this._unloaded.length&&setTimeout(this.end.bind(this),250)}})});ig.baked=!0;
ig.module("impact.timer").defines(function(){ig.Timer=ig.Class.extend({target:0,base:0,last:0,pausedAt:0,init:function(b){this.last=this.base=ig.Timer.time;this.target=b||0},set:function(b){this.target=b||0;this.base=ig.Timer.time;this.pausedAt=0},reset:function(){this.base=ig.Timer.time;this.pausedAt=0},tick:function(){var b=ig.Timer.time-this.last;this.last=ig.Timer.time;return this.pausedAt?0:b},delta:function(){return(this.pausedAt||ig.Timer.time)-this.base-this.target},pause:function(){this.pausedAt||
(this.pausedAt=ig.Timer.time)},unpause:function(){this.pausedAt&&(this.base+=ig.Timer.time-this.pausedAt,this.pausedAt=0)}});ig.Timer._last=0;ig.Timer.time=Number.MIN_VALUE;ig.Timer.timeScale=1;ig.Timer.maxStep=0.05;ig.Timer.step=function(){var b=Date.now();ig.Timer.time+=Math.min((b-ig.Timer._last)/1E3,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=b}});ig.baked=!0;
ig.module("impact.system").requires("impact.timer","impact.image").defines(function(){ig.System=ig.Class.extend({fps:30,width:320,height:240,realWidth:320,realHeight:240,scale:1,tick:0,animationId:0,newGameClass:null,running:!1,delegate:null,clock:null,canvas:null,context:null,init:function(b,d,e,f,g){this.fps=d;this.clock=new ig.Timer;this.canvas=ig.$(b);this.resize(e,f,g);this.context=this.canvas.getContext("2d");this.getDrawPos=ig.System.drawMode;1!=this.scale&&(ig.System.scaleMode=ig.System.SCALE.CRISP);
ig.System.scaleMode(this.canvas,this.context)},resize:function(b,d,e){this.width=b;this.height=d;this.scale=e||this.scale;this.realWidth=this.width*this.scale;this.realHeight=this.height*this.scale;this.canvas.width=this.realWidth;this.canvas.height=this.realHeight},setGame:function(b){this.running?this.newGameClass=b:this.setGameNow(b)},setGameNow:function(b){ig.game=new b;ig.system.setDelegate(ig.game)},setDelegate:function(b){if("function"==typeof b.run)this.delegate=b,this.startRunLoop();else throw"System.setDelegate: No run() function in object";
},stopRunLoop:function(){ig.clearAnimation(this.animationId);this.running=!1},startRunLoop:function(){this.stopRunLoop();this.animationId=ig.setAnimation(this.run.bind(this));this.running=!0},clear:function(b){this.context.fillStyle=b;this.context.fillRect(0,0,this.realWidth,this.realHeight)},run:function(){ig.Timer.step();this.tick=this.clock.tick();this.delegate.run();ig.input.clearPressed();this.newGameClass&&(this.setGameNow(this.newGameClass),this.newGameClass=null)},getDrawPos:null});ig.System.DRAW=
{AUTHENTIC:function(b){return Math.round(b)*this.scale},SMOOTH:function(b){return Math.round(b*this.scale)},SUBPIXEL:function(b){return b*this.scale}};ig.System.drawMode=ig.System.DRAW.SMOOTH;ig.System.SCALE={CRISP:function(b,d){ig.setVendorAttribute(d,"imageSmoothingEnabled",!1);b.style.imageRendering="-moz-crisp-edges";b.style.imageRendering="-o-crisp-edges";b.style.imageRendering="-webkit-optimize-contrast";b.style.imageRendering="crisp-edges";b.style.msInterpolationMode="nearest-neighbor"},SMOOTH:function(b,
d){ig.setVendorAttribute(d,"imageSmoothingEnabled",!0);b.style.imageRendering="";b.style.msInterpolationMode=""}};ig.System.scaleMode=ig.System.SCALE.SMOOTH});ig.baked=!0;
ig.module("impact.input").defines(function(){ig.KEY={MOUSE1:-1,MOUSE2:-3,MWHEEL_UP:-4,MWHEEL_DOWN:-5,BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,
NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190};ig.Input=ig.Class.extend({bindings:{},actions:{},presses:{},locks:{},delayedKeyup:{},isUsingMouse:!1,isUsingKeyboard:!1,isUsingAccelerometer:!1,mouse:{x:0,y:0},accel:{x:0,y:0,z:0},isUpperCase:!1,initMouse:function(){this.isUsingMouse||
(this.isUsingMouse=!0,ig.system.canvas.addEventListener("wheel",this.mousewheel.bind(this),!1),ig.system.canvas.addEventListener("contextmenu",this.contextmenu.bind(this),!1),ig.system.canvas.addEventListener("mousedown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("mouseup",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("mousemove",this.mousemove.bind(this),!1),ig.ua.touchDevice&&(ig.system.canvas.addEventListener("touchstart",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("touchend",
this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchcancel",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.mousemove.bind(this),!1),ig.system.canvas.addEventListener("MSPointerDown",this.keydown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.keyup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",this.mousemove.bind(this),!1),ig.system.canvas.style.msTouchAction="none"))},initKeyboard:function(){this.isUsingKeyboard||
(this.isUsingKeyboard=!0,window.addEventListener("keydown",this.keydown.bind(this),!1),window.addEventListener("keyup",this.keyup.bind(this),!1))},initAccelerometer:function(){this.isUsingAccelerometer||(this.isUsingAccelerometer=!0,window.addEventListener("devicemotion",this.devicemotion.bind(this),!1))},mousewheel:function(b){var d=this.bindings[0>b.deltaY?ig.KEY.MWHEEL_UP:ig.KEY.MWHEEL_DOWN];d&&(this.actions[d]=!0,this.presses[d]=!0,this.delayedKeyup[d]=!0,b.stopPropagation(),b.preventDefault())},
mousemove:function(b){var d=ig.system.scale*((ig.system.canvas.offsetWidth||ig.system.realWidth)/ig.system.realWidth),e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(e=ig.system.canvas.getBoundingClientRect());b=b.touches?b.touches[0]:b;this.mouse.x=(b.clientX-e.left)/d;this.mouse.y=(b.clientY-e.top)/d},contextmenu:function(b){this.bindings[ig.KEY.MOUSE2]&&(b.stopPropagation(),b.preventDefault())},keydown:function(b){var d=b.target.tagName;if(!("INPUT"==d||"TEXTAREA"==d))if(d="keydown"==
b.type?b.keyCode:2==b.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,0>d&&!ig.ua.mobile&&window.focus(),("touchstart"==b.type||"mousedown"==b.type)&&this.mousemove(b),d=this.bindings[d])this.actions[d]=!0,this.locks[d]||(this.presses[d]=!0,this.locks[d]=!0),b.preventDefault()},keyup:function(b){!ig.ua.mobile&&"mouseup"==b.type&&(this.isUpperCase=b.getModifierState("CapsLock")?!0:!1);var d=b.target.tagName;if(!("INPUT"==d||"TEXTAREA"==d))if(d=this.bindings["keyup"==b.type?b.keyCode:2==b.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1])this.delayedKeyup[d]=
!0,b.preventDefault()},devicemotion:function(b){this.accel=b.accelerationIncludingGravity},bind:function(b,d){0>b?this.initMouse():0<b&&this.initKeyboard();this.bindings[b]=d},bindTouch:function(b,d){var e=ig.$(b),f=this;e.addEventListener("touchstart",function(b){f.touchStart(b,d)},!1);e.addEventListener("touchend",function(b){f.touchEnd(b,d)},!1);e.addEventListener("MSPointerDown",function(b){f.touchStart(b,d)},!1);e.addEventListener("MSPointerUp",function(b){f.touchEnd(b,d)},!1)},unbind:function(b){this.delayedKeyup[this.bindings[b]]=
!0;this.bindings[b]=null},unbindAll:function(){this.bindings={};this.actions={};this.presses={};this.locks={};this.delayedKeyup={}},state:function(b){return this.actions[b]},pressed:function(b){return this.presses[b]},released:function(b){return!!this.delayedKeyup[b]},clearPressed:function(){for(var b in this.delayedKeyup)this.actions[b]=!1,this.locks[b]=!1;this.delayedKeyup={};this.presses={}},touchStart:function(b,d){this.actions[d]=!0;this.presses[d]=!0;b.stopPropagation();b.preventDefault();return!1},
touchEnd:function(b,d){this.delayedKeyup[d]=!0;b.stopPropagation();b.preventDefault();return!1}})});ig.baked=!0;ig.module("impact.impact").requires("dom.ready","impact.loader","impact.system","impact.input","impact.sound").defines(function(){ig.main=function(b,d,e,f,g,j,l){ig.system=new ig.System(b,e,f,g,j||1);ig.input=new ig.Input;ig.soundManager=new ig.SoundManager;ig.music=new ig.Music;ig.ready=!0;(new (l||ig.Loader)(d,ig.resources)).load()}});ig.baked=!0;
ig.module("impact.animation").requires("impact.timer","impact.image").defines(function(){ig.AnimationSheet=ig.Class.extend({width:8,height:8,image:null,init:function(b,d,e){this.width=d;this.height=e;this.image=new ig.Image(b)}});ig.Animation=ig.Class.extend({sheet:null,timer:null,sequence:[],flip:{x:!1,y:!1},pivot:{x:0,y:0},frameTime:0,frame:0,tile:0,stop:!1,loopCount:0,alpha:1,angle:0,init:function(b,d,e,f){this.sheet=b;this.pivot={x:b.width/2,y:b.height/2};this.timer=new ig.Timer;this.frameTime=
d;this.sequence=e;this.stop=!!f;this.tile=this.sequence[0]},rewind:function(){this.timer.set();this.frame=this.loopCount=0;this.tile=this.sequence[0];return this},gotoFrame:function(b){this.timer.set(this.frameTime*-b-1E-4);this.update()},gotoRandomFrame:function(){this.gotoFrame(Math.floor(Math.random()*this.sequence.length))},update:function(){var b=Math.floor(this.timer.delta()/this.frameTime);this.loopCount=Math.floor(b/this.sequence.length);this.frame=this.stop&&0<this.loopCount?this.sequence.length-
1:b%this.sequence.length;this.tile=this.sequence[this.frame]},draw:function(b,d){var e=Math.max(this.sheet.width,this.sheet.height);b>ig.system.width||(d>ig.system.height||0>b+e||0>d+e)||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTile(b,d,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(b+this.pivot.x),ig.system.getDrawPos(d+this.pivot.y)),ig.system.context.rotate(this.angle),
this.sheet.image.drawTile(-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}})});ig.baked=!0;
ig.module("impact.entity").requires("impact.animation","impact.impact").defines(function(){ig.Entity=ig.Class.extend({id:0,settings:{},size:{x:16,y:16},offset:{x:0,y:0},pos:{x:0,y:0},last:{x:0,y:0},vel:{x:0,y:0},accel:{x:0,y:0},friction:{x:0,y:0},maxVel:{x:100,y:100},zIndex:0,gravityFactor:1,standing:!1,bounciness:0,minBounceVelocity:40,anims:{},animSheet:null,currentAnim:null,health:10,type:0,checkAgainst:0,collides:0,_killed:!1,slopeStanding:{min:(44).toRad(),max:(136).toRad()},init:function(b,
d,e){this.id=++ig.Entity._lastId;this.pos.x=this.last.x=b;this.pos.y=this.last.y=d;ig.merge(this,e)},reset:function(b,d,e){var f=this.constructor.prototype;this.pos.x=b;this.pos.y=d;this.last.x=b;this.last.y=d;this.vel.x=f.vel.x;this.vel.y=f.vel.y;this.accel.x=f.accel.x;this.accel.y=f.accel.y;this.health=f.health;this._killed=f._killed;this.standing=f.standing;this.type=f.type;this.checkAgainst=f.checkAgainst;this.collides=f.collides;ig.merge(this,e)},addAnim:function(b,d,e,f){if(!this.animSheet)throw"No animSheet to add the animation "+
b+" to.";d=new ig.Animation(this.animSheet,d,e,f);this.anims[b]=d;this.currentAnim||(this.currentAnim=d);return d},update:function(){this.last.x=this.pos.x;this.last.y=this.pos.y;this.vel.y+=ig.game.gravity*ig.system.tick*this.gravityFactor;this.vel.x=this.getNewVelocity(this.vel.x,this.accel.x,this.friction.x,this.maxVel.x);this.vel.y=this.getNewVelocity(this.vel.y,this.accel.y,this.friction.y,this.maxVel.y);var b=ig.game.collisionMap.trace(this.pos.x,this.pos.y,this.vel.x*ig.system.tick,this.vel.y*
ig.system.tick,this.size.x,this.size.y);this.handleMovementTrace(b);this.currentAnim&&this.currentAnim.update()},getNewVelocity:function(b,d,e,f){return d?(b+d*ig.system.tick).limit(-f,f):e?(d=e*ig.system.tick,0<b-d?b-d:0>b+d?b+d:0):b.limit(-f,f)},handleMovementTrace:function(b){this.standing=!1;b.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));b.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>
this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(b.collision.slope){var d=b.collision.slope;if(0<this.bounciness){var e=this.vel.x*d.nx+this.vel.y*d.ny;this.vel.x=(this.vel.x-2*d.nx*e)*this.bounciness;this.vel.y=(this.vel.y-2*d.ny*e)*this.bounciness}else e=(this.vel.x*d.x+this.vel.y*d.y)/(d.x*d.x+d.y*d.y),this.vel.x=d.x*e,this.vel.y=d.y*e,d=Math.atan2(d.x,d.y),d>this.slopeStanding.min&&d<this.slopeStanding.max&&(this.standing=!0)}this.pos=b.pos},draw:function(){this.currentAnim&&this.currentAnim.draw(this.pos.x-
this.offset.x-ig.game._rscreen.x,this.pos.y-this.offset.y-ig.game._rscreen.y)},kill:function(){ig.game.removeEntity(this)},receiveDamage:function(b){this.health-=b;0>=this.health&&this.kill()},touches:function(b){return!(this.pos.x>=b.pos.x+b.size.x||this.pos.x+this.size.x<=b.pos.x||this.pos.y>=b.pos.y+b.size.y||this.pos.y+this.size.y<=b.pos.y)},distanceTo:function(b){var d=this.pos.x+this.size.x/2-(b.pos.x+b.size.x/2);b=this.pos.y+this.size.y/2-(b.pos.y+b.size.y/2);return Math.sqrt(d*d+b*b)},angleTo:function(b){return Math.atan2(b.pos.y+
b.size.y/2-(this.pos.y+this.size.y/2),b.pos.x+b.size.x/2-(this.pos.x+this.size.x/2))},check:function(){},collideWith:function(){},ready:function(){},erase:function(){}});ig.Entity._lastId=0;ig.Entity.COLLIDES={NEVER:0,LITE:1,PASSIVE:2,ACTIVE:4,FIXED:8};ig.Entity.TYPE={NONE:0,A:1,B:2,BOTH:3};ig.Entity.checkPair=function(b,d){b.checkAgainst&d.type&&b.check(d);d.checkAgainst&b.type&&d.check(b);b.collides&&(d.collides&&b.collides+d.collides>ig.Entity.COLLIDES.ACTIVE)&&ig.Entity.solveCollision(b,d)};ig.Entity.solveCollision=
function(b,d){var e=null;if(b.collides==ig.Entity.COLLIDES.LITE||d.collides==ig.Entity.COLLIDES.FIXED)e=b;else if(d.collides==ig.Entity.COLLIDES.LITE||b.collides==ig.Entity.COLLIDES.FIXED)e=d;b.last.x+b.size.x>d.last.x&&b.last.x<d.last.x+d.size.x?(b.last.y<d.last.y?ig.Entity.seperateOnYAxis(b,d,e):ig.Entity.seperateOnYAxis(d,b,e),b.collideWith(d,"y"),d.collideWith(b,"y")):b.last.y+b.size.y>d.last.y&&b.last.y<d.last.y+d.size.y&&(b.last.x<d.last.x?ig.Entity.seperateOnXAxis(b,d,e):ig.Entity.seperateOnXAxis(d,
b,e),b.collideWith(d,"x"),d.collideWith(b,"x"))};ig.Entity.seperateOnXAxis=function(b,d,e){var f=b.pos.x+b.size.x-d.pos.x;e?(e.vel.x=-e.vel.x*e.bounciness+(b===e?d:b).vel.x,d=ig.game.collisionMap.trace(e.pos.x,e.pos.y,e==b?-f:f,0,e.size.x,e.size.y),e.pos.x=d.pos.x):(e=(b.vel.x-d.vel.x)/2,b.vel.x=-e,d.vel.x=e,e=ig.game.collisionMap.trace(b.pos.x,b.pos.y,-f/2,0,b.size.x,b.size.y),b.pos.x=Math.floor(e.pos.x),b=ig.game.collisionMap.trace(d.pos.x,d.pos.y,f/2,0,d.size.x,d.size.y),d.pos.x=Math.ceil(b.pos.x))};
ig.Entity.seperateOnYAxis=function(b,d,e){var f=b.pos.y+b.size.y-d.pos.y;if(e){d=b===e?d:b;e.vel.y=-e.vel.y*e.bounciness+d.vel.y;var g=0;e==b&&Math.abs(e.vel.y-d.vel.y)<e.minBounceVelocity&&(e.standing=!0,g=d.vel.x*ig.system.tick);b=ig.game.collisionMap.trace(e.pos.x,e.pos.y,g,e==b?-f:f,e.size.x,e.size.y);e.pos.y=b.pos.y;e.pos.x=b.pos.x}else ig.game.gravity&&(d.standing||0<b.vel.y)?(e=ig.game.collisionMap.trace(b.pos.x,b.pos.y,0,-(b.pos.y+b.size.y-d.pos.y),b.size.x,b.size.y),b.pos.y=e.pos.y,0<b.bounciness&&
b.vel.y>b.minBounceVelocity?b.vel.y*=-b.bounciness:(b.standing=!0,b.vel.y=0)):(e=(b.vel.y-d.vel.y)/2,b.vel.y=-e,d.vel.y=e,g=d.vel.x*ig.system.tick,e=ig.game.collisionMap.trace(b.pos.x,b.pos.y,g,-f/2,b.size.x,b.size.y),b.pos.y=e.pos.y,b=ig.game.collisionMap.trace(d.pos.x,d.pos.y,0,f/2,d.size.x,d.size.y),d.pos.y=b.pos.y)}});ig.baked=!0;
ig.module("impact.map").defines(function(){ig.Map=ig.Class.extend({tilesize:8,width:1,height:1,pxWidth:1,pxHeight:1,data:[[]],name:null,init:function(b,d){this.tilesize=b;this.data=d;this.height=d.length;this.width=d[0].length;this.pxWidth=this.width*this.tilesize;this.pxHeight=this.height*this.tilesize},getTile:function(b,d){var e=Math.floor(b/this.tilesize),f=Math.floor(d/this.tilesize);return 0<=e&&e<this.width&&0<=f&&f<this.height?this.data[f][e]:0},setTile:function(b,d,e){b=Math.floor(b/this.tilesize);
d=Math.floor(d/this.tilesize);0<=b&&b<this.width&&(0<=d&&d<this.height)&&(this.data[d][b]=e)}})});ig.baked=!0;
ig.module("impact.collision-map").requires("impact.map").defines(function(){ig.CollisionMap=ig.Map.extend({lastSlope:1,tiledef:null,init:function(b,d,g){this.parent(b,d);this.tiledef=g||ig.CollisionMap.defaultTileDef;for(var j in this.tiledef)j|0>this.lastSlope&&(this.lastSlope=j|0)},trace:function(b,d,g,j,l,n){var m={collision:{x:!1,y:!1,slope:!1},pos:{x:b,y:d},tile:{x:0,y:0}},r=Math.ceil((Math.max(Math.abs(g),Math.abs(j))+0.1)/this.tilesize);if(1<r)for(var q=g/r,s=j/r,t=0;t<r&&(q||s)&&!(this._traceStep(m,
b,d,q,s,l,n,g,j,t),b=m.pos.x,d=m.pos.y,m.collision.x&&(g=q=0),m.collision.y&&(j=s=0),m.collision.slope);t++);else this._traceStep(m,b,d,g,j,l,n,g,j,0);return m},_traceStep:function(b,d,g,j,l,n,m,r,q,s){b.pos.x+=j;b.pos.y+=l;var t=0;if(j){var v=0<j?n:0,u=0>j?this.tilesize:0,t=Math.max(Math.floor(g/this.tilesize),0),x=Math.min(Math.ceil((g+m)/this.tilesize),this.height);j=Math.floor((b.pos.x+v)/this.tilesize);var D=Math.floor((d+v)/this.tilesize);if(0<s||j==D||0>D||D>=this.width)D=-1;if(0<=j&&j<this.width)for(var H=
t;H<x&&!(-1!=D&&(t=this.data[H][D],1<t&&t<=this.lastSlope&&this._checkTileDef(b,t,d,g,r,q,n,m,D,H)));H++)if(t=this.data[H][j],1==t||t>this.lastSlope||1<t&&this._checkTileDef(b,t,d,g,r,q,n,m,j,H)){if(1<t&&t<=this.lastSlope&&b.collision.slope)break;b.collision.x=!0;b.tile.x=t;d=b.pos.x=j*this.tilesize-v+u;r=0;break}}if(l){v=0<l?m:0;l=0>l?this.tilesize:0;t=Math.max(Math.floor(b.pos.x/this.tilesize),0);u=Math.min(Math.ceil((b.pos.x+n)/this.tilesize),this.width);H=Math.floor((b.pos.y+v)/this.tilesize);
x=Math.floor((g+v)/this.tilesize);if(0<s||H==x||0>x||x>=this.height)x=-1;if(0<=H&&H<this.height)for(j=t;j<u&&!(-1!=x&&(t=this.data[x][j],1<t&&t<=this.lastSlope&&this._checkTileDef(b,t,d,g,r,q,n,m,j,x)));j++)if(t=this.data[H][j],1==t||t>this.lastSlope||1<t&&this._checkTileDef(b,t,d,g,r,q,n,m,j,H)){if(1<t&&t<=this.lastSlope&&b.collision.slope)break;b.collision.y=!0;b.tile.y=t;b.pos.y=H*this.tilesize-v+l;break}}},_checkTileDef:function(b,d,g,j,l,n,m,r,q,s){var t=this.tiledef[d];if(!t)return!1;d=(t[2]-
t[0])*this.tilesize;var v=(t[3]-t[1])*this.tilesize,u=t[4];m=g+l+(0>v?m:0)-(q+t[0])*this.tilesize;r=j+n+(0<d?r:0)-(s+t[1])*this.tilesize;if(0<d*r-v*m){if(0>l*-v+n*d)return u;q=Math.sqrt(d*d+v*v);s=v/q;q=-d/q;var x=m*s+r*q,t=s*x,x=q*x;if(t*t+x*x>=l*l+n*n)return u||0.5>d*(r-n)-v*(m-l);b.pos.x=g+l-t;b.pos.y=j+n-x;b.collision.slope={x:d,y:v,nx:s,ny:q};return!0}return!1}});var b=1/3,d=2/3;ig.CollisionMap.defaultTileDef={5:[0,1,1,d,!0],6:[0,d,1,b,!0],7:[0,b,1,0,!0],3:[0,1,1,0.5,!0],4:[0,0.5,1,0,!0],2:[0,
1,1,0,!0],10:[0.5,1,1,0,!0],21:[0,1,0.5,0,!0],32:[d,1,1,0,!0],43:[b,1,d,0,!0],54:[0,1,b,0,!0],27:[0,0,1,b,!0],28:[0,b,1,d,!0],29:[0,d,1,1,!0],25:[0,0,1,0.5,!0],26:[0,0.5,1,1,!0],24:[0,0,1,1,!0],11:[0,0,0.5,1,!0],22:[0.5,0,1,1,!0],33:[0,0,b,1,!0],44:[b,0,d,1,!0],55:[d,0,1,1,!0],16:[1,b,0,0,!0],17:[1,d,0,b,!0],18:[1,1,0,d,!0],14:[1,0.5,0,0,!0],15:[1,1,0,0.5,!0],13:[1,1,0,0,!0],8:[0.5,1,0,0,!0],19:[1,1,0.5,0,!0],30:[b,1,0,0,!0],41:[d,1,b,0,!0],52:[1,1,d,0,!0],38:[1,d,0,1,!0],39:[1,b,0,d,!0],40:[1,0,
0,b,!0],36:[1,0.5,0,1,!0],37:[1,0,0,0.5,!0],35:[1,0,0,1,!0],9:[1,0,0.5,1,!0],20:[0.5,0,0,1,!0],31:[1,0,d,1,!0],42:[d,0,b,1,!0],53:[b,0,0,1,!0],12:[0,0,1,0,!1],23:[1,1,0,1,!1],34:[1,0,1,1,!1],45:[0,1,0,0,!1]};ig.CollisionMap.staticNoCollision={trace:function(b,d,g,j){return{collision:{x:!1,y:!1,slope:!1},pos:{x:b+g,y:d+j},tile:{x:0,y:0}}}}});ig.baked=!0;
ig.module("impact.background-map").requires("impact.map","impact.image").defines(function(){ig.BackgroundMap=ig.Map.extend({tiles:null,scroll:{x:0,y:0},distance:1,repeat:!1,tilesetName:"",foreground:!1,enabled:!0,preRender:!1,preRenderedChunks:null,chunkSize:512,debugChunks:!1,anims:{},init:function(b,d,e){this.parent(b,d);this.setTileset(e)},setTileset:function(b){this.tilesetName=b instanceof ig.Image?b.path:b;this.tiles=new ig.Image(this.tilesetName);this.preRenderedChunks=null},setScreenPos:function(b,
d){this.scroll.x=b/this.distance;this.scroll.y=d/this.distance},preRenderMapToChunks:function(){var b=this.width*this.tilesize*ig.system.scale,d=this.height*this.tilesize*ig.system.scale;this.chunkSize=Math.min(Math.max(b,d),this.chunkSize);var e=Math.ceil(b/this.chunkSize),f=Math.ceil(d/this.chunkSize);this.preRenderedChunks=[];for(var g=0;g<f;g++){this.preRenderedChunks[g]=[];for(var j=0;j<e;j++)this.preRenderedChunks[g][j]=this.preRenderChunk(j,g,j==e-1?b-j*this.chunkSize:this.chunkSize,g==f-1?
d-g*this.chunkSize:this.chunkSize)}},preRenderChunk:function(b,d,e,f){var g=e/this.tilesize/ig.system.scale+1,j=f/this.tilesize/ig.system.scale+1,l=b*this.chunkSize/ig.system.scale%this.tilesize,n=d*this.chunkSize/ig.system.scale%this.tilesize;b=Math.floor(b*this.chunkSize/this.tilesize/ig.system.scale);var m=Math.floor(d*this.chunkSize/this.tilesize/ig.system.scale);d=ig.$new("canvas");d.width=e;d.height=f;d.retinaResolutionEnabled=!1;f=d.getContext("2d");ig.System.scaleMode(d,f);e=ig.system.context;
ig.system.context=f;for(f=0;f<g;f++)for(var r=0;r<j;r++)if(f+b<this.width&&r+m<this.height){var q=this.data[r+m][f+b];q&&this.tiles.drawTile(f*this.tilesize-l,r*this.tilesize-n,q-1,this.tilesize)}ig.system.context=e;g=new Image;g.src=d.toDataURL();g.width=d.width;g.height=d.height;return g},draw:function(){this.tiles.loaded&&this.enabled&&(this.preRender?this.drawPreRendered():this.drawTiled())},drawPreRendered:function(){this.preRenderedChunks||this.preRenderMapToChunks();var b=ig.system.getDrawPos(this.scroll.x),
d=ig.system.getDrawPos(this.scroll.y);if(this.repeat)var e=this.width*this.tilesize*ig.system.scale,b=(b%e+e)%e,e=this.height*this.tilesize*ig.system.scale,d=(d%e+e)%e;var e=Math.max(Math.floor(b/this.chunkSize),0),f=Math.max(Math.floor(d/this.chunkSize),0),g=Math.ceil((b+ig.system.realWidth)/this.chunkSize),j=Math.ceil((d+ig.system.realHeight)/this.chunkSize),l=this.preRenderedChunks[0].length,n=this.preRenderedChunks.length;this.repeat||(g=Math.min(g,l),j=Math.min(j,n));for(var m=0,r=f;r<j;r++){for(var q=
0,s=e;s<g;s++){var t=this.preRenderedChunks[r%n][s%l],v=-b+s*this.chunkSize-q,u=-d+r*this.chunkSize-m;ig.system.context.drawImage(t,v,u);ig.Image.drawCount++;this.debugChunks&&(ig.system.context.strokeStyle="#f0f",ig.system.context.strokeRect(v,u,this.chunkSize,this.chunkSize));this.repeat&&(t.width<this.chunkSize&&v+t.width<ig.system.realWidth)&&(q+=this.chunkSize-t.width,r==f&&g++)}this.repeat&&(t.height<this.chunkSize&&u+t.height<ig.system.realHeight)&&(m+=this.chunkSize-t.height,j++)}},drawTiled:function(){for(var b=
0,d=null,e=(this.scroll.x/this.tilesize).toInt(),f=(this.scroll.y/this.tilesize).toInt(),g=this.scroll.x%this.tilesize,j=this.scroll.y%this.tilesize,l=-g-this.tilesize,g=ig.system.width+this.tilesize-g,n=ig.system.height+this.tilesize-j,m=-1,j=-j-this.tilesize;j<n;m++,j+=this.tilesize){var r=m+f;if(r>=this.height||0>r){if(!this.repeat)continue;r=(r%this.height+this.height)%this.height}for(var q=-1,s=l;s<g;q++,s+=this.tilesize){b=q+e;if(b>=this.width||0>b){if(!this.repeat)continue;b=(b%this.width+
this.width)%this.width}if(b=this.data[r][b])(d=this.anims[b-1])?d.draw(s,j):this.tiles.drawTile(s,j,b-1,this.tilesize)}}}})});ig.baked=!0;
ig.module("impact.game").requires("impact.impact","impact.entity","impact.collision-map","impact.background-map").defines(function(){ig.Game=ig.Class.extend({clearColor:"#000000",gravity:0,screen:{x:0,y:0},_rscreen:{x:0,y:0},entities:[],namedEntities:{},collisionMap:ig.CollisionMap.staticNoCollision,backgroundMaps:[],backgroundAnims:{},autoSort:!1,sortBy:null,cellSize:64,_deferredKill:[],_levelToLoad:null,_doSortEntities:!1,staticInstantiate:function(){this.sortBy=this.sortBy||ig.Game.SORT.Z_INDEX;
ig.game=this;return null},loadLevel:function(b){this.entities=[];this.namedEntities={};for(var d=0;d<b.entities.length;d++){var e=b.entities[d];this.spawnEntity(e.type,e.x,e.y,e.settings)}this.sortEntities();this.collisionMap=ig.CollisionMap.staticNoCollision;this.backgroundMaps=[];for(d=0;d<b.layer.length;d++)if(e=b.layer[d],"collision"==e.name)this.collisionMap=new ig.CollisionMap(e.tilesize,e.data);else{var f=new ig.BackgroundMap(e.tilesize,e.data,e.tilesetName);f.anims=this.backgroundAnims[e.tilesetName]||
{};f.repeat=e.repeat;f.distance=e.distance;f.foreground=!!e.foreground;f.preRender=!!e.preRender;f.name=e.name;this.backgroundMaps.push(f)}for(d=0;d<this.entities.length;d++)this.entities[d].ready()},loadLevelDeferred:function(b){this._levelToLoad=b},getMapByName:function(b){if("collision"==b)return this.collisionMap;for(var d=0;d<this.backgroundMaps.length;d++)if(this.backgroundMaps[d].name==b)return this.backgroundMaps[d];return null},getEntityByName:function(b){return this.namedEntities[b]},getEntitiesByType:function(b){b=
"string"===typeof b?ig.global[b]:b;for(var d=[],e=0;e<this.entities.length;e++){var f=this.entities[e];f instanceof b&&!f._killed&&d.push(f)}return d},spawnEntity:function(b,d,e,f){var g="string"===typeof b?ig.global[b]:b;if(!g)throw"Can't spawn entity of type "+b;b=new g(d,e,f||{});this.entities.push(b);b.name&&(this.namedEntities[b.name]=b);return b},sortEntities:function(){this.entities.sort(this.sortBy)},sortEntitiesDeferred:function(){this._doSortEntities=!0},removeEntity:function(b){b.name&&
delete this.namedEntities[b.name];b._killed=!0;b.type=ig.Entity.TYPE.NONE;b.checkAgainst=ig.Entity.TYPE.NONE;b.collides=ig.Entity.COLLIDES.NEVER;this._deferredKill.push(b)},run:function(){this.update();this.draw()},update:function(){this._levelToLoad&&(this.loadLevel(this._levelToLoad),this._levelToLoad=null);this.updateEntities();this.checkEntities();for(var b=0;b<this._deferredKill.length;b++)this._deferredKill[b].erase(),this.entities.erase(this._deferredKill[b]);this._deferredKill=[];if(this._doSortEntities||
this.autoSort)this.sortEntities(),this._doSortEntities=!1;for(var d in this.backgroundAnims){var b=this.backgroundAnims[d],e;for(e in b)b[e].update()}},updateEntities:function(){for(var b=0;b<this.entities.length;b++){var d=this.entities[b];d._killed||d.update()}},draw:function(){this.clearColor&&ig.system.clear(this.clearColor);this._rscreen.x=ig.system.getDrawPos(this.screen.x)/ig.system.scale;this._rscreen.y=ig.system.getDrawPos(this.screen.y)/ig.system.scale;var b;for(b=0;b<this.backgroundMaps.length;b++){var d=
this.backgroundMaps[b];if(d.foreground)break;d.setScreenPos(this.screen.x,this.screen.y);d.draw()}this.drawEntities();for(b;b<this.backgroundMaps.length;b++)d=this.backgroundMaps[b],d.setScreenPos(this.screen.x,this.screen.y),d.draw()},drawEntities:function(){for(var b=0;b<this.entities.length;b++)this.entities[b].draw()},checkEntities:function(){for(var b={},d=0;d<this.entities.length;d++){var e=this.entities[d];if(!(e.type==ig.Entity.TYPE.NONE&&e.checkAgainst==ig.Entity.TYPE.NONE&&e.collides==ig.Entity.COLLIDES.NEVER))for(var f=
{},g=Math.floor(e.pos.y/this.cellSize),j=Math.floor((e.pos.x+e.size.x)/this.cellSize)+1,l=Math.floor((e.pos.y+e.size.y)/this.cellSize)+1,n=Math.floor(e.pos.x/this.cellSize);n<j;n++)for(var m=g;m<l;m++)if(b[n])if(b[n][m]){for(var r=b[n][m],q=0;q<r.length;q++)e.touches(r[q])&&!f[r[q].id]&&(f[r[q].id]=!0,ig.Entity.checkPair(e,r[q]));r.push(e)}else b[n][m]=[e];else b[n]={},b[n][m]=[e]}}});ig.Game.SORT={Z_INDEX:function(b,d){return b.zIndex-d.zIndex},POS_X:function(b,d){return b.pos.x+b.size.x-(d.pos.x+
d.size.x)},POS_Y:function(b,d){return b.pos.y+b.size.y-(d.pos.y+d.size.y)}}});ig.baked=!0;
ig.module("plugins.packer.packer-image-injector").requires("impact.image","impact.animation").defines(function(){ig.Image.inject({tintCache:{},load:function(b){ig.packer&&ig.packer.isImageInAtlas(this.path)?(this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,this.loaded=ig.packer.isImageLoadedForPath(this.path),b&&b(this.path,!0)):this.parent(b)},reload:function(){ig.packer.isImageInAtlas(this.path)||this.parent()},resize:function(b){ig.packer.isImageInAtlas(this.path)?
console.warn("PACKER PLUGIN WARNING! : image.scale is not supported, \nImage path:"+this.path):this.parent(b)},draw:function(b,d,e,f,g,j,l,n){if(ig.packer.isImageInAtlas(this.path)){if(!this.atlasImage&&(this.atlasImage=ig.packer.getAtlasImage(this.path),this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,!this.atlasImage))return;g=g?g:this.width;j=j?j:this.height;ig.system.context.drawImage(this.atlasImage,(e?e:0)+this.frameData.frame.x,
(f?f:0)+this.frameData.frame.y,g,j,ig.system.getDrawPos(b),ig.system.getDrawPos(d),l?l:g,n?n:j)}else e=e?e:0,f=f?f:0,g=g?g:this.width,j=j?j:this.height,l=l?l:g,n=n?n:j,ig.system.context.drawImage(this.data,e,f,g,j,ig.system.getDrawPos(b),ig.system.getDrawPos(d),l,n);ig.Image.drawCount++},drawImage:function(b,d,e,f,g,j,l,n){b=b?b:0;d=d?d:0;2>=arguments.length?this.draw(b,d):4>=arguments.length?(e=e?e:this.width,f=f?f:this.height,this.draw(b,d,0,0,this.width,this.height,e,f)):(e=e?e:this.width,f=f?
f:this.height,l=l?l:this.width,n=n?n:this.height,this.draw(g?g:0,j?j:0,b,d,e,f,l,n))},drawCtx:function(b,d,e,f,g,j,l,n,m){if(ig.packer.isImageInAtlas(this.path)){if(!this.atlasImage&&(this.atlasImage=ig.packer.getAtlasImage(this.path),this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,!this.atlasImage))return;j=j?j:this.width;l=l?l:this.height;b.drawImage(this.atlasImage,(f?f:0)+this.frameData.frame.x,(g?g:0)+this.frameData.frame.y,
j,l,ig.system.getDrawPos(d),ig.system.getDrawPos(e),n?n:j,m?m:l)}else f=f?f:0,g=g?g:0,j=j?j:this.width,l=l?l:this.height,n=n?n:j,m=m?m:l,b.drawImage(this.data,f,g,j,l,ig.system.getDrawPos(d),ig.system.getDrawPos(e),n,m);ig.Image.drawCount++},drawImageCtx:function(b,d,e,f,g,j,l,n,m){d=d?d:0;e=e?e:0;2>=arguments.length?this.drawCtx(b,d,e):5>=arguments.length?(f=f?f:this.width,g=g?g:this.height,this.drawCtx(b,d,e,0,0,this.width,this.height,f,g)):(f=f?f:this.width,g=g?g:this.height,n=n?n:this.width,m=
m?m:this.height,this.drawCtx(b,j?j:0,l?l:0,d,e,f,g,n,m))},drawTile:function(b,d,e,f,g,j,l){if(ig.packer.isImageInAtlas(this.path)){if(!this.atlasImage&&(this.atlasImage=ig.packer.getAtlasImage(this.path),this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,!this.atlasImage))return;g=g?g:f;var n=Math.floor(f),m=Math.floor(g),r=j?-1:1,q=l?-1:1;if(j||l)ig.system.context.save(),ig.system.context.scale(r,q);ig.system.context.drawImage(this.atlasImage,
Math.floor(e*f)%this.width+this.frameData.frame.x,Math.floor(e*f/this.width)*g+this.frameData.frame.y,n,m,ig.system.getDrawPos(b)*r-(j?n:0),ig.system.getDrawPos(d)*q-(l?m:0),n,m);(j||l)&&ig.system.context.restore();ig.Image.drawCount++}else this.parent(b,d,e,f,g,j,l)},drawTileTint:function(b,d,e,f,g,j,l,n,m){if(b=this.getTintedImageCanvas(b,d))if(l=l?l:j,this.loaded&&!(j>this.width||l>this.height)){d=ig.system.scale;var r=Math.floor(j*d),q=Math.floor(l*d),s=n?-1:1,t=m?-1:1;if(n||m)ig.system.context.save(),
ig.system.context.scale(s,t);ig.system.context.drawImage(b,Math.floor(g*j)%this.width*d,Math.floor(g*j/this.width)*l*d,r,q,ig.system.getDrawPos(e)*s-(n?r:0),ig.system.getDrawPos(f)*t-(m?q:0),r,q);(n||m)&&ig.system.context.restore();ig.Image.drawCount++}},drawTint:function(b,d,e,f,g,j,l,n,m,r){if(b=this.getTintedImageCanvas(b,d))l=l?l:this.width,n=n?n:this.height,ig.system.context.drawImage(b,g?g:0,j?j:0,l,n,ig.system.getDrawPos(e),ig.system.getDrawPos(f),m?m:l,r?r:n),ig.Image.drawCount++},getTintedImageCanvas:function(b,
d){if(!this.tintCache[b]){if(ig.packer.isImageInAtlas(this.path)&&!this.atlasImage&&(this.atlasImage=ig.packer.getAtlasImage(this.path),this.frameData=ig.packer.getFrameData(this.path),this.width=this.frameData.frame.w,this.height=this.frameData.frame.h,!this.atlasImage))return;var e=ig.$new("canvas");e.width=this.width;e.height=this.height;var f=e.getContext("2d");this.atlasImage?f.drawImage(this.atlasImage,this.frameData.frame.x,this.frameData.frame.y,this.width,this.height,0,0,this.width,this.height):
f.drawImage(this.data,0,0,this.width,this.height,0,0,this.width,this.height);f.globalCompositeOperation="source-atop";f.fillStyle=ig.game.hexToRGBA(b,null==d?1:d);f.fillRect(0,0,this.width,this.height);f.globalCompositeOperation="source-over";this.tintCache[b]=e}return this.tintCache[b]}})});ig.baked=!0;
ig.module("plugins.packer.packer-animation-injector").requires("impact.image","impact.animation").defines(function(){ig.Animation.inject({tint:null,alphaTint:null,draw:function(b,d){if(this.tint){var e=Math.max(this.sheet.width,this.sheet.height);b>ig.system.width||(d>ig.system.height||0>b+e||0>d+e)||(1!=this.alpha&&(ig.system.context.globalAlpha=this.alpha),0==this.angle?this.sheet.image.drawTileTint(this.tint,this.alphaTint,b,d,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y):
(ig.system.context.save(),ig.system.context.translate(ig.system.getDrawPos(b+this.pivot.x),ig.system.getDrawPos(d+this.pivot.y)),ig.system.context.rotate(this.angle),this.sheet.image.drawTileTint(this.tint,this.alphaTint,-this.pivot.x,-this.pivot.y,this.tile,this.sheet.width,this.sheet.height,this.flip.x,this.flip.y),ig.system.context.restore()),1!=this.alpha&&(ig.system.context.globalAlpha=1))}else this.parent(b,d)}})});ig.baked=!0;
ig.module("plugins.packer.packer-plugin").requires("plugins.packer.packer-image-injector","plugins.packer.packer-animation-injector").defines(function(){ig.AtlasImage=ig.Class.extend({init:function(b){this.path=b},load:function(b){this.loadCallback=b||null;this.data=new Image;this.data.onload=this.onload.bind(this);this.data.onerror=this.onerror.bind(this);this.data.src=ig.prefix+this.path+ig.nocache},onload:function(){this.loaded=!0;ig.packer.refreshImageLoadedStatus();this.loadCallback&&this.loadCallback(this.path,
!0)},onerror:function(){this.error=!0;this.loadCallback&&this.loadCallback(this.path,!1)}});ig.packer={textureJson:[],textureAtlas:[],jsonLoadStatus:[],atlasLoadStatus:[],textureExistStatus:[],pathMap:{},initCallback:null,initPacker:function(b){if(window.packerplugin&&0<packerplugin.textures.length){console.log("Packer Plugin 1.1.7 is enabled, loading "+packerplugin.textures.length+" texture atlases...");ig.packer.initCallback=b;for(b=0;b<packerplugin.textures.length;b++)this.textureExistStatus.push(1);
this.loadAllJson()}else console.log("Packer Plugin 1.1.7 is disabled, loading individual images..."),b()},loadAllJson:function(){for(var b=0;b<ig.packer.textureExistStatus.length;b++)1==ig.packer.textureExistStatus[b]&&(ig.packer.textureJson.push(null),ig.packer.textureAtlas.push(null),ig.packer.jsonLoadStatus.push(1),ig.packer.atlasLoadStatus.push(0),ig.packer.textureJson[b]=JSON.parse(window.packerplugin.json[packerplugin.textures[b]]));ig.packer.onLoadJsonComplete()},onLoadJsonComplete:function(){for(var b=
0;b<ig.packer.textureJson.length;b++){var d=ig.packer.textureJson[b],e;for(e in d.frames)ig.packer.pathMap[e]={path:e,textureIndex:b};d=_BASEPATH.media+"graphics/packed/"+packerplugin.textures[b]+".png";0<=packerplugin.textures[b].indexOf("big-jpg")&&(d=_BASEPATH.media+"graphics/packed/"+packerplugin.textures[b]+".jpg");d=new ig.AtlasImage(d);ig.packer.textureAtlas[b]=d;ig.addResource(d)}ig.packer.initCallback()},isImageInAtlas:function(b){return Object.hasOwnProperty.call(ig.packer.pathMap,b)?!0:
!1},refreshImageLoadedStatus:function(){for(var b in ig.Image.cache)if(Object.hasOwnProperty.call(ig.Image.cache,b)){var d=ig.Image.cache[b];ig.packer.isImageInAtlas(d.path)&&(d.loaded=ig.packer.isImageLoadedForPath(d.path))}},isImageLoadedForPath:function(b){return ig.packer.textureAtlas[ig.packer.pathMap[b].textureIndex].loaded?!0:!1},getAtlasImage:function(b){b=ig.packer.pathMap[b].textureIndex;return!ig.packer.textureAtlas[b].loaded?null:ig.packer.textureAtlas[b].data},getFrameData:function(b){return ig.packer.textureJson[ig.packer.pathMap[b].textureIndex].frames[b]}}});
ig.baked=!0;
ig.module("plugins.patches.fps-limit-patch").requires("impact.system","impact.impact").defines(function(){ig.System.inject({fps:60});ig.system&&(ig.system.fps=60);ig.normalizeVendorAttribute(window,"requestAnimationFrame");if(window.requestAnimationFrame){var b=1,d={};window.ig.setAnimation=function(e,f){var g=b++;d[g]=!0;var j=1E3/60,l=60,n=0,m=0,r=0,q=0,s=function(){d[g]&&(timestamp=Date.now(),m=n,n=timestamp,q=n-m,l=0.8*l+0.2*(1E3/q),60<l&&63<=l?(r=Math.min(Math.max(2*j+m-timestamp,0),j),setTimeout(function(){window.requestAnimationFrame(s,
f)},r),e(timestamp)):(window.requestAnimationFrame(s,f),e()))};window.requestAnimationFrame(s,f);return g};window.ig.clearAnimation=function(b){delete d[b]}}else window.ig.setAnimation=function(b){return window.setInterval(b,1E3/60)},window.ig.clearAnimation=function(b){window.clearInterval(b)}});ig.baked=!0;
ig.module("plugins.patches.timer-patch").requires("impact.timer").defines(function(){ig.Timer.step=function(){var b=Date.now(),d=(b-ig.Timer._last)/1E3;0>d&&(d=0);ig.Timer.time+=Math.min(d,ig.Timer.maxStep)*ig.Timer.timeScale;ig.Timer._last=b}});ig.baked=!0;
ig.module("plugins.patches.user-agent-patch").requires("impact.impact").defines(function(){ig.ua.is_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(navigator.userAgent);ig.ua.is_safari_or_uiwebview=/(iPhone|iPod|iPad).*AppleWebKit/i.test(navigator.userAgent);ig.ua.iOS6_tag=/OS 6_/i.test(navigator.userAgent);ig.ua.iOS6=(ig.ua.iPhone||ig.ua.iPad)&&ig.ua.iOS6_tag;ig.ua.iOSgt5=ig.ua.iOS&&5<parseInt(navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/)[1]);ig.ua.HTCONE=/HTC_One/i.test(navigator.userAgent);
ig.ua.Kindle=/Silk/i.test(navigator.userAgent);ig.ua.touchDevice="ontouchstart"in window||window.navigator.msMaxTouchPoints||window.navigator.maxTouchPoints;ig.ua.is_mac="MacIntel"===navigator.platform;ig.ua.iOS=ig.ua.touchDevice&&ig.ua.is_mac||ig.ua.iOS;ig.ua.mobile=ig.ua.iOS||ig.ua.android||ig.ua.iOS6||ig.ua.winPhone||ig.ua.Kindle||/mobile/i.test(navigator.userAgent)});ig.baked=!0;
ig.module("plugins.patches.webkit-image-smoothing-patch").defines(function(){ig.System&&(ig.System.SCALE={CRISP:function(b,d){d.imageSmoothingEnabled=d.msImageSmoothingEnabled=d.mozImageSmoothingEnabled=d.oImageSmoothingEnabled=!1;b.style.imageRendering="-moz-crisp-edges";b.style.imageRendering="-o-crisp-edges";b.style.imageRendering="-webkit-optimize-contrast";b.style.imageRendering="crisp-edges";b.style.msInterpolationMode="nearest-neighbor"},SMOOTH:function(b,d){d.imageSmoothingEnabled=d.msImageSmoothingEnabled=
d.oImageSmoothingEnabled=!0;b.style.imageRendering="";b.style.msInterpolationMode=""}},ig.System.scaleMode=ig.System.SCALE.SMOOTH)});ig.baked=!0;
ig.module("plugins.patches.windowfocus-onMouseDown-patch").requires("impact.input").defines(function(){var b=!1;try{b=window.self!==window.top,!1===b&&(b=0<window.frames.length)}catch(d){b=!0}ig.Input.inject({keydown:function(d){var f=d.target.tagName;if(!("INPUT"==f||"TEXTAREA"==f))if(f="keydown"==d.type?d.keyCode:2==d.button?ig.KEY.MOUSE2:ig.KEY.MOUSE1,b&&0>f&&window.focus(),("touchstart"==d.type||"mousedown"==d.type)&&this.mousemove(d),f=this.bindings[f])this.actions[f]=!0,this.locks[f]||(this.presses[f]=
!0,this.locks[f]=!0),d.stopPropagation(),d.preventDefault()}})});ig.baked=!0;
ig.module("plugins.patches.input-patch").requires("impact.input").defines(function(){ig.Input.inject({initMouse:function(){this.parent();ig.system.canvas.addEventListener("mouseleave",this.mouseleave.bind(this),!1)},mousemove:function(b){this.parent(b);try{ig.soundHandler.unlockWebAudio()}catch(d){}},mouseleave:function(){this.clearState("click")},keyup:function(b){this.parent(b);if(ig.visibilityHandler)ig.visibilityHandler.onChange("focus");try{ig.soundHandler.unlockWebAudio()}catch(d){}},clearState:function(b){this.actions[b]=
!1},clearAllState:function(){for(var b in this.actions)this.clearState(b)}})});ig.baked=!0;
ig.module("plugins.data.vector").defines(function(){Vector2=function(b,d){this.x=b||0;this.y=d||0};Vector2.prototype={valType:"number",neg:function(){this.x=-this.x;this.y=-this.y;return this},row:function(b){typeof b===this.valType&&(this.y=b);return this.y},col:function(b){typeof b===this.valType&&(this.x=b);return this.x},add:function(b){b instanceof Vector2?(this.x+=b.x,this.y+=b.y):(this.x+=b,this.y+=b);return this},sub:function(b){b instanceof Vector2?(this.x-=b.x,this.y-=b.y):(this.x-=b,this.y-=
b);return this},mul:function(b){b instanceof Vector2?(this.x*=b.x,this.y*=b.y):(this.x*=b,this.y*=b);return this},div:function(b){b instanceof Vector2?(0!=b.x&&(this.x/=b.x),0!=b.y&&(this.y/=b.y)):0!=b&&(this.x/=b,this.y/=b);return this},equals:function(b){return this.x==b.x&&this.y==b.y},dot:function(b){return this.x*b.x+this.y*b.y},cross:function(b){return this.x*b.y-this.y*b.x},length:function(){return Math.sqrt(this.dot(this))},norm:function(){return this.div(this.length())},min:function(){return Math.min(this.x,
this.y)},max:function(){return Math.max(this.x,this.y)},toAngles:function(){return-Math.atan2(-this.y,this.x)},angleTo:function(b){return Math.acos(this.dot(b)/(this.length()*b.length()))},toArray:function(b){return[this.x,this.y].slice(0,b||2)},clone:function(){return new Vector2(this.x,this.y)},set:function(b,d){this.x=b;this.y=d;return this},unit:function(){var b=this.length();if(0<b)return new Vector2(this.x/b,this.y/b);throw"Divide by 0 error in unitVector function of vector:"+this;},turnRight:function(){var b=
this.x;this.x=-this.y;this.y=b;return this},turnLeft:function(){var b=this.x;this.x=this.y;this.y=-b;return this},rotate:function(b){var d=this.clone();this.x=d.x*Math.cos(b)-d.y*Math.sin(b);this.y=d.x*Math.sin(b)+d.y*Math.cos(b);return this}};Vector2.negative=function(b){return new Vector2(-b.x,-b.y)};Vector2.add=function(b,d){return d instanceof Vector2?new Vector2(b.x+d.x,b.y+d.y):new Vector2(b.x+d,b.y+d)};Vector2.subtract=function(b,d){return d instanceof Vector2?new Vector2(b.x-d.x,b.y-d.y):
new Vector2(b.x-d,b.y-d)};Vector2.multiply=function(b,d){return d instanceof Vector2?new Vector2(b.x*d.x,b.y*d.y):new Vector2(b.x*d,b.y*d)};Vector2.divide=function(b,d){return d instanceof Vector2?new Vector2(b.x/d.x,b.y/d.y):new Vector2(b.x/d,b.y/d)};Vector2.equals=function(b,d){return b.x==d.x&&b.y==d.y};Vector2.dot=function(b,d){return b.x*d.x+b.y*d.y};Vector2.cross=function(b,d){return b.x*d.y-b.y*d.x}});ig.baked=!0;
ig.module("plugins.data.color-rgb").defines(function(){ColorRGB=function(b,d,e,f){this.r=b||0;this.g=d||0;this.b=e||0;this.a=f||0};ColorRGB.prototype={setRandomColor:function(){this.r=Math.round(255*Math.random());this.g=Math.round(255*Math.random());this.b=Math.round(255*Math.random())},getStyle:function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a+")"},getHex:function(){for(var b=this.r.toString(16),d=this.g.toString(16),e=this.b.toString(16);2>b.length;)b="0"+b;for(;2>d.length;)d="0"+
d;for(;2>e.length;)e="0"+e;return"#"+b+d+e},getInvertedColor:function(){return new ColorRGB(255-this.r,255-this.g,255-this.b,255-this.a)},clone:function(){return new ColorRGB(this.r,this.g,this.b,this.a)}}});ig.baked=!0;
ig.module("plugins.pointer").requires("impact.game","impact.entity").defines(function(){ig.Game.inject({update:function(){this.parent();if(ig.input.pressed("click")){for(var b=null,d=this.entities.length-1;-1<d;d--){var e=this.entities[d];if(e.isClickable&&e.underPointer()&&(!b||b.zIndex<e.zIndex))b=e}b&&"function"===typeof b.clicked&&b.clicked()}if(ig.input.released("click")){b=null;for(d=this.entities.length-1;-1<d;d--)if(e=this.entities[d],e.isClickable&&e.underPointer()&&(!b||b.zIndex<e.zIndex))b=
e;b&&"function"===typeof b.released&&b.released()}}});ig.Entity.inject({isClickable:!1,underPointer:function(){var b=ig.game.io.getClickPos();return this.containPoint({x:b.x+ig.game.screen.x,y:b.y+ig.game.screen.y})},containPoint:function(b){var d=this.pos.x,e=d+this.size.x,f=this.pos.y,g=f+this.size.y;return b.x>d&&b.x<e&&b.y>f&&b.y<g}})});ig.baked=!0;
ig.module("plugins.handlers.size-handler").requires("plugins.data.vector").defines(function(){ig.SizeHandler=ig.Class.extend({portraitMode:!0,isPortrait:!1,disableStretchToFitOnMobileFlag:!1,enableStretchToFitOnAntiPortraitModeFlag:!0,enableScalingLimitsOnMobileFlag:!1,minScalingOnMobile:0,maxScalingOnMobile:1,enableStretchToFitOnDesktopFlag:!1,enableScalingLimitsOnDesktopFlag:!1,minScalingOnDesktop:0,maxScalingOnDesktop:1,desktop:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(720,
1280)},mobile:{actualSize:new Vector2(window.innerWidth,window.innerHeight),actualResolution:new Vector2(720,1280)},windowSize:new Vector2(window.innerWidth,window.innerHeight),scaleRatioMultiplier:new Vector2(1,1),sizeRatio:new Vector2(1,1),scale:1,domHandler:null,dynamicClickableEntityDivs:{},coreDivsToResize:["#canvas","#play"],adsToResize:{MobileAdInGamePreroll:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd:{"box-width":_SETTINGS.Ad.Mobile.End.Width+
2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20},MobileAdInGamePreroll2:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd2:{"box-width":_SETTINGS.Ad.Mobile.End.Width+2,"box-height":_SETTINGS.Ad.Mobile.End.Height+20},MobileAdInGamePreroll3:{"box-width":_SETTINGS.Ad.Mobile.Preroll.Width+2,"box-height":_SETTINGS.Ad.Mobile.Preroll.Height+20},MobileAdInGameEnd3:{"box-width":_SETTINGS.Ad.Mobile.End.Width+2,"box-height":_SETTINGS.Ad.Mobile.End.Height+
20}},init:function(b){this.domHandler=b;if("undefined"===typeof b)throw"undefined Dom Handler for Size Handler";this.checkPortrait();this.sizeCalcs();this.eventListenerSetup();this.samsungFix()},sizeCalcs:function(){this.windowSize=new Vector2(window.innerWidth,window.innerHeight);if(ig.ua.mobile){this.mobile.actualSize=new Vector2(window.innerWidth,window.innerHeight);var b=new Vector2(this.mobile.actualResolution.x,this.mobile.actualResolution.y);this.scaleRatioMultiplier=new Vector2(this.mobile.actualSize.x/
b.x,this.mobile.actualSize.y/b.y);if(this.disableStretchToFitOnMobileFlag){var d=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y);this.enableScalingLimitsOnMobileFlag&&(d=d.limit(this.minScalingOnMobile,this.maxScalingOnMobile));this.mobile.actualSize.x=b.x*d;this.mobile.actualSize.y=b.y*d;this.scaleRatioMultiplier.x=d;this.scaleRatioMultiplier.y=d}else this.sizeRatio.x=this.scaleRatioMultiplier.x,this.sizeRatio.y=this.scaleRatioMultiplier.y,this.scaleRatioMultiplier.x=1,this.scaleRatioMultiplier.y=
1}else this.desktop.actualSize=new Vector2(window.innerWidth,window.innerHeight),b=new Vector2(this.desktop.actualResolution.x,this.desktop.actualResolution.y),this.scaleRatioMultiplier=new Vector2(this.desktop.actualSize.x/b.x,this.desktop.actualSize.y/b.y),this.enableStretchToFitOnDesktopFlag?(this.sizeRatio.x=this.scaleRatioMultiplier.x,this.sizeRatio.y=this.scaleRatioMultiplier.y,this.scaleRatioMultiplier.x=1,this.scaleRatioMultiplier.y=1):(d=Math.min(this.scaleRatioMultiplier.x,this.scaleRatioMultiplier.y),
this.enableScalingLimitsOnDesktopFlag&&(d=d.limit(this.minScalingOnDesktop,this.maxScalingOnDesktop)),this.desktop.actualSize.x=b.x*d,this.desktop.actualSize.y=b.y*d,this.scaleRatioMultiplier.x=d,this.scaleRatioMultiplier.y=d)},resizeLayers:function(){for(var b=0;b<this.coreDivsToResize.length;b++){var d=ig.domHandler.getElementById(this.coreDivsToResize[b]);if(ig.ua.mobile)if(this.disableStretchToFitOnMobileFlag){var e=Math.floor(ig.sizeHandler.windowSize.x/2-ig.sizeHandler.mobile.actualSize.x/2),
f=Math.floor(ig.sizeHandler.windowSize.y/2-ig.sizeHandler.mobile.actualSize.y/2);0>e&&(e=0);0>f&&(f=0);ig.domHandler.resizeOffset(d,Math.floor(ig.sizeHandler.mobile.actualSize.x),Math.floor(ig.sizeHandler.mobile.actualSize.y),e,f);var g=!1;if(g=this.portraitMode?window.innerHeight<window.innerWidth:window.innerHeight>window.innerWidth)if(this.enableStretchToFitOnAntiPortraitModeFlag)ig.domHandler.resizeOffset(d,Math.floor(window.innerWidth),Math.floor(window.innerHeight),0,0);else{var g=new Vector2(window.innerWidth/
this.mobile.actualResolution.y,window.innerHeight/this.mobile.actualResolution.x),e=Math.min(g.x,g.y),g=this.mobile.actualResolution.y*e,j=this.mobile.actualResolution.x*e,e=Math.floor(ig.sizeHandler.windowSize.x/2-g/2),f=Math.floor(ig.sizeHandler.windowSize.y/2-j/2);0>e&&(e=0);0>f&&(f=0);ig.domHandler.resizeOffset(d,Math.floor(g),Math.floor(j),e,f)}}else ig.domHandler.resize(d,Math.floor(ig.sizeHandler.mobile.actualSize.x),Math.floor(ig.sizeHandler.mobile.actualSize.y));else this.enableStretchToFitOnDesktopFlag?
ig.domHandler.resize(d,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y)):(e=Math.floor(ig.sizeHandler.windowSize.x/2-ig.sizeHandler.desktop.actualSize.x/2),f=Math.floor(ig.sizeHandler.windowSize.y/2-ig.sizeHandler.desktop.actualSize.y/2),0>e&&(e=0),0>f&&(f=0),ig.domHandler.resizeOffset(d,Math.floor(ig.sizeHandler.desktop.actualSize.x),Math.floor(ig.sizeHandler.desktop.actualSize.y),e,f))}for(var l in this.adsToResize)b=ig.domHandler.getElementById("#"+
l),d=ig.domHandler.getElementById("#"+l+"-Box"),g=(window.innerWidth-this.adsToResize[l]["box-width"])/2+"px",e=(window.innerHeight-this.adsToResize[l]["box-height"])/2+"px",b&&ig.domHandler.css(b,{width:window.innerWidth,height:window.innerHeight}),d&&ig.domHandler.css(d,{left:g,top:e});b=ig.domHandler.getElementById("#canvas");d=ig.domHandler.getOffsets(b);b=d.left;d=d.top;g=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);for(l in this.dynamicClickableEntityDivs)e=
ig.domHandler.getElementById("#"+l),ig.domHandler.css(e,{"float":"left",position:"absolute",left:Math.floor(b+this.dynamicClickableEntityDivs[l].entity_pos_x*this.scaleRatioMultiplier.x)+"px",top:Math.floor(d+this.dynamicClickableEntityDivs[l].entity_pos_y*this.scaleRatioMultiplier.y)+"px",width:Math.floor(this.dynamicClickableEntityDivs[l].width*this.scaleRatioMultiplier.x)+"px",height:Math.floor(this.dynamicClickableEntityDivs[l].height*this.scaleRatioMultiplier.y)+"px","z-index":3}),this.dynamicClickableEntityDivs[l]["font-size"]&&
ig.domHandler.css(e,{"font-size":this.dynamicClickableEntityDivs[l]["font-size"]*g+"px"});$("#ajaxbar").width(this.windowSize.x);$("#ajaxbar").height(this.windowSize.y)},checkPortrait:function(){this.isPortrait=window.innerWidth>window.innerHeight?!1:!0},resize:function(){this.checkPortrait();this.sizeCalcs();this.resizeLayers()},reorient:function(){this.resize();ig.ua.mobile&&this.resizeAds()},resizeAds:function(){for(var b in this.adsToResize){var d=ig.domHandler.getElementById("#"+b),e=ig.domHandler.getElementById("#"+
b+"-Box"),f=(window.innerWidth-this.adsToResize[b]["box-width"])/2+"px",g=(window.innerHeight-this.adsToResize[b]["box-height"])/2+"px";d&&ig.domHandler.css(d,{width:window.innerWidth,height:window.innerHeight});e&&ig.domHandler.css(e,{left:f,top:g})}},samsungFix:function(){ig.ua.android&&(!(4.2>parseFloat(navigator.userAgent.slice(navigator.userAgent.indexOf("Android")+8,navigator.userAgent.indexOf("Android")+11)))&&!(0>navigator.userAgent.indexOf("GT"))&&!(0<navigator.userAgent.indexOf("Chrome"))&&
!(0<navigator.userAgent.indexOf("Firefox")))&&(document.addEventListener("touchstart",function(b){b.preventDefault();return!1},!1),document.addEventListener("touchmove",function(b){b.preventDefault();return!1},!1),document.addEventListener("touchend",function(b){b.preventDefault();return!1},!1))},orientationInterval:null,orientationTimeout:null,orientationHandler:function(){this.reorient();window.scrollTo(0,1)},orientationDelayHandler:function(){null==this.orientationInterval&&(this.orientationInterval=
window.setInterval(this.orientationHandler.bind(this),100));null==this.orientationTimeout&&(this.orientationTimeout=window.setTimeout(function(){this.clearAllIntervals()}.bind(this),2E3))},clearAllIntervals:function(){window.clearInterval(this.orientationInterval);this.orientationInterval=null;window.clearTimeout(this.orientationTimeout);this.orientationTimeout=null},eventListenerSetup:function(){ig.ua.iOS?(window.addEventListener("orientationchange",this.orientationDelayHandler.bind(this)),window.addEventListener("resize",
this.orientationDelayHandler.bind(this))):(window.addEventListener("orientationchange",this.orientationHandler.bind(this)),window.addEventListener("resize",this.orientationHandler.bind(this)));document.ontouchmove=function(b){window.scrollTo(0,1);b.preventDefault()};this.chromePullDownRefreshFix()},chromePullDownRefreshFix:function(){var b=window.chrome||navigator.userAgent.match("CriOS"),d="ontouchstart"in document.documentElement;if(b&&d){var e=b=!1,f=0,g=!1;try{CSS.supports("overscroll-behavior-y",
"contain")&&(b=!0)}catch(j){}try{if(b)return document.body.style.overscrollBehaviorY="contain"}catch(l){}b=document.head||document.body;d=document.createElement("style");d.type="text/css";d.styleSheet?d.styleSheet.cssText="\n      ::-webkit-scrollbar {\n        width: 500x;\n      }\n      ::-webkit-scrollbar-thumb {\n        border-radius: 500px;\n        background-color: rgba(0, 0, 0, 0.2);\n      }\n      body {\n        -webkit-overflow-scrolling: auto!important;\n      }\n    ":d.appendChild(document.createTextNode("\n      ::-webkit-scrollbar {\n        width: 500px;\n      }\n      ::-webkit-scrollbar-thumb {\n        border-radius: 500px;\n        background-color: rgba(0, 0, 0, 0.2);\n      }\n      body {\n        -webkit-overflow-scrolling: auto!important;\n      }\n    "));
b.appendChild(d);try{addEventListener("test",null,{get passive(){e=!0}})}catch(n){}document.addEventListener("touchstart",function(b){1===b.touches.length&&(f=b.touches[0].clientY,g=0===window.pageYOffset)},!!e&&{passive:!0});document.addEventListener("touchmove",function(b){var d;if(d=g){g=!1;d=b.touches[0].clientY;var e=d-f;d=(f=d,0<e)}if(d)return b.preventDefault()},!!e&&{passive:!1})}}})});ig.baked=!0;
ig.module("plugins.responsive").requires("plugins.handlers.size-handler","impact.image").defines(function(){ig.SizeHandler.inject({minW:1080,minH:1920,scaleX:1,scaleY:1,fillScale:1,firstResize:!0,sizeCalcs:function(){var b=window.innerWidth,d=window.innerHeight,e,f;this.r0=this.minW/this.minH;var g=b/d;g<this.r0?(e=this.minW,f=Math.round(e/g)):(f=this.minH,e=Math.round(f*g));ig.system&&(this.dx=(ig.system.width-e)/2,this.dy=(ig.system.height-f)/2,ig.system.resize(e,f,this.scale));this.windowSize=
new Vector2(b,d);this.scaleRatioMultiplier=new Vector2(b/e,d/f);this.desktop.actualResolution=new Vector2(b,d);this.mobile.actualResolution=new Vector2(b,d);this.desktop.actualSize=new Vector2(b,d);this.mobile.actualSize=new Vector2(b,d);ig.game?(ig.game.midX=ig.system.width/2,ig.game.midY=ig.system.height/2,this.firstResize&&(this.firstResize=!1,this.dx=(this.minW-e)/2,this.dy=(this.minH-f)/2),ig.game.screen.x+=this.dx,ig.game.screen.y+=this.dy,ig.game.update(),this.repositionEntities(),ig.game.draw()):
ig.loader&&ig.loader.draw()},repositionEntities:function(){ig.game.entities.forEach(function(b){b&&"function"===typeof b.repos&&b.repos()})},reorient:function(){this.resize();ig.ua.mobile&&this.resizeAds()}});ig.Image.inject({drawScale:function(b,d,e,f){this.loaded&&(this.drawImage(0,0,this.width,this.height,b,d,e,f),ig.Image.drawCount++)}})});ig.baked=!0;
ig.module("plugins.font.font-info").requires("impact.impact").defines(function(){ig.FontInfo=ig.Class.extend({fonts:[{name:"script1",source:_BASEPATH.fonts+"inkfree"},{name:"script2",source:_BASEPATH.fonts+"hugmetight"},{name:"script3",source:_BASEPATH.fonts+"rage"},{name:"script4",source:_BASEPATH.fonts+"segoepr"},{name:"minecraft",source:_BASEPATH.fonts+"minecraft"},{name:"retrogaming",source:_BASEPATH.fonts+"retrogaming"},{name:"sans",source:_BASEPATH.fonts+"OpenSansCondensed-Regular"},{name:"sansbold",
source:_BASEPATH.fonts+"OpenSansCondensed-Bold"},{name:"arialmt",source:_BASEPATH.fonts+"arialmt"},{name:"arialmtbold",source:_BASEPATH.fonts+"arialmtbold"},{name:"montserrat",source:_BASEPATH.fonts+"montserrat"},{name:"metroblack",source:_BASEPATH.fonts+"metropolisblack"},{name:"metromed",source:_BASEPATH.fonts+"metropolismedium"},{name:"queensparkbold",source:_BASEPATH.fonts+"queensparkbold"},{name:"queenspark",source:_BASEPATH.fonts+"queenspark"},{name:"noirbold",source:_BASEPATH.fonts+"noir-pro-bold"},
{name:"noirsemi",source:_BASEPATH.fonts+"noir-pro-semibold"},{name:"calibri",source:_BASEPATH.fonts+"calibri"}],init:function(){this.registerCssFont()},registerCssFont:function(){if(0<this.fonts.length){var b=document.createElement("style");b.type="text/css";for(var d="",e=0;e<this.fonts.length;e++)var f=this.fonts[e],d=d+("@font-face {font-family: '"+f.name+"';src: url('"+f.source+".eot');src: url('"+f.source+".eot?#iefix') format('embedded-opentype'),url('"+f.source+".woff2') format('woff2'),url('"+
f.source+".woff') format('woff'),url('"+f.source+".ttf') format('truetype'),url('"+f.source+".svg#svgFontName') format('svg')}");b.appendChild(document.createTextNode(d));document.head.appendChild(b)}},isValid:function(){for(var b=0;b<this.fonts.length;b++)if(!this._isValidName(this.fonts[b].source))return!1;return!0},_isValidName:function(){return!0}})});ig.baked=!0;
ig.module("plugins.font.font-loader").requires("impact.impact","plugins.font.font-info","impact.loader").defines(function(){ig.FontLoader=ig.Class.extend({fontInfo:new ig.FontInfo,onload:!1,onerror:!1,init:function(b,d){this.onload=b;this.onerror=d},load:function(){this.fontInfo.isValid()?this._loadByLib():console.error("Only lowercased alphanumeric and dash are allowed for font file name!. Please check the font path")},_loadByLib:function(){for(var b=[],d=0;d<this.fontInfo.fonts.length;d++){var e=
new FontFaceObserver(this.fontInfo.fonts[d].name);b.push(e.load())}Promise.all(b).then(this.onload).catch(this.onerror)}});ig.Loader.inject({parentLoad:!1,load:function(){this.parentLoad=this.parent;(new ig.FontLoader(this.onFontLoad.bind(this),this.onFontError.bind(this))).load()},onFontLoad:function(){this.parentLoad()},onFontError:function(){console.error("Font is not loaded");this.parentLoad()}})});ig.baked=!0;
ig.module("plugins.handlers.dom-handler").defines(function(){ig.DomHandler=ig.Class.extend({version:"1.1.2",JQUERYAVAILABLE:!1,init:function(){this.JQUERYAVAILABLE=this._jqueryAvailable()},_jqueryAvailable:function(){return"undefined"!==typeof jQuery},addEvent:function(b,d,e,f){if(this.JQUERYAVAILABLE)b.on(d,e);else b.addEventListener(d,e,f)},create:function(b){return this.JQUERYAVAILABLE?$("<"+b+">"):ig.$new(b)},getElementByClass:function(b){return this.JQUERYAVAILABLE?$("."+b):document.getElementsByClassName(b)},
getElementById:function(b){return this.JQUERYAVAILABLE?0<$(b).length?$(b):null:ig.$(b)},appendChild:function(b,d){this.JQUERYAVAILABLE?b.append(d):b.appendChild(d)},appendToBody:function(b){this.JQUERYAVAILABLE?$("body").append(b):document.body.appendChild(b)},appendToHead:function(b){this.JQUERYAVAILABLE?$("head").append(b):document.head.appendChild(b)},removeChild:function(b,d){this.JQUERYAVAILABLE?b.remove(d):b.removeChild(d)},removeFromBody:function(b){this.JQUERYAVAILABLE?$(b).remove():document.body.removeChild(b)},
removeFromHead:function(b){this.JQUERYAVAILABLE?$(b).remove():document.head.removeChild(b)},text:function(b,d){this.JQUERYAVAILABLE?b.text(d):b.innerText=d},val:function(b,d){this.JQUERYAVAILABLE?b.val(d):b.value=d},getVal:function(b){return this.JQUERYAVAILABLE?b.val():b.value},getAttr:function(b,d){return this.JQUERYAVAILABLE?b.attr(d):b.getAttribute(d)},getText:function(b){return this.JQUERYAVAILABLE?b.text():b.innerText},html:function(b,d){this.JQUERYAVAILABLE?b.html(d):b.innerHTML=d},resize:function(b,
d,e){if(this.JQUERYAVAILABLE)b.width(d.toFixed(2)),b.height(e.toFixed(2));else{var f=b.style.visibility;d="width:"+d.toFixed(2)+"px; height:"+e.toFixed(2)+"px;";this.attr(b,"style",d);b.style.visibility=f}},resizeOffsetLeft:function(b,d,e,f){if(this.JQUERYAVAILABLE)b.width(d.toFixed(2)),b.height(e.toFixed(2)),b.css("left",f);else{var g=b.style.visibility;d="width:"+d.toFixed(2)+"px; height:"+e.toFixed(2)+"px; left: "+f.toFixed(2)+"px;";this.attr(b,"style",d);b.style.visibility=g}},resizeOffset:function(b,
d,e,f,g){if(this.JQUERYAVAILABLE)b.width(d.toFixed(2)),b.height(e.toFixed(2)),b.css("left",f),b.css("top",g);else{var j=b.style.visibility;d="width:"+d.toFixed(2)+"px; height:"+e.toFixed(2)+"px; left: "+f.toFixed(2)+"px; top: "+g.toFixed(2)+"px;";this.attr(b,"style",d);b.style.visibility=j}},css:function(b,d){if(this.JQUERYAVAILABLE)b.css(d);else{var e="",f;for(f in d)e+=f+":"+d[f]+";";this.attr(b,"style",e)}},getOffsets:function(b){return this.JQUERYAVAILABLE?(b=b.offset(),{left:b.left,top:b.top}):
{left:b.offsetLeft,top:b.offsetTop}},attr:function(b,d,e){if("undefined"===typeof e)return this.JQUERYAVAILABLE?b.attr(d):b.getAttribute(d);this.JQUERYAVAILABLE?b.attr(d,e):b.setAttribute(d,e)},show:function(b){b&&"undefined"!==typeof b&&(this.JQUERYAVAILABLE?(b.show(),b.css("visibility","visible")):b&&(b.style?b.style.visibility="visible":b[0]&&(b[0].style.visibility="visible")))},hide:function(b){b&&"undefined"!==typeof b&&(this.JQUERYAVAILABLE?(b.hide(),b.css("visibility","hidden")):b&&(b.style?
b.style.visibility="hidden":b[0]&&(b[0].style.visibility="hidden")))},getQueryVariable:function(b){for(var d=window.location.search.substring(1).split("&"),e=0;e<d.length;e++){var f=d[e].match(/([^=]+?)=(.+)/);if(f&&decodeURIComponent(f[1])==b)return decodeURIComponent(f[2])}},forcedDeviceDetection:function(){var b=this.getQueryVariable("device");if(b)switch(b){case "mobile":console.log("serving mobile version ...");ig.ua.mobile=!0;break;case "desktop":console.log("serving desktop version ...");ig.ua.mobile=
!1;break;default:console.log("serving universal version ...")}else console.log("serving universal version ...")},forcedDeviceRotation:function(){var b=this.getQueryVariable("force-rotate");if(b)switch(b){case "portrait":console.log("force rotate to portrait");window.orientation=0;break;case "landscape":console.log("force rotate to horizontal");window.orientation=90;break;default:alert("wrong command/type in param force-rotate. Defaulting value to portrait"),window.orientation=0}},setZIndex:function(b,
d){this.JQUERYAVAILABLE?b.css("zIndex",d):b&&(b.style?b.style.zIndex=d:b[0]&&(b[0].style.zIndex=d))}})});ig.baked=!0;
ig.module("plugins.handlers.api-handler").defines(function(){ig.ApiHandler=ig.Class.extend({apiAvailable:{MJSPreroll:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS&&_SETTINGS.Ad.Mobile.Preroll.Enabled&&MobileAdInGamePreroll.Initialize()},MJSHeader:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Header.Enabled&&MobileAdInGameHeader.Initialize()},MJSFooter:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.Footer.Enabled&&MobileAdInGameFooter.Initialize()},
MJSEnd:function(){ig.ua.mobile&&ig.domHandler.JQUERYAVAILABLE&&_SETTINGS.Ad.Mobile.End.Enabled&&MobileAdInGameEnd.Initialize()}},run:function(b,d){if(this.apiAvailable[b])this.apiAvailable[b](d)}})});ig.baked=!0;
ig.module("plugins.audio.howler-player").defines(function(){HowlerPlayer=ig.Class.extend({tagName:"HowlerPlayer",playerName:"",isMuted:!1,soundList:{},activeSoundList:{},init:function(b){var d=this,e;for(e in b)this.soundList[e]=new Howl({preload:null==b[e].preload?!1:!0,src:[b[e].path+".mp3"],loop:!!b[e].loop,onend:function(b){this._loop||d.unregisterActiveSound(this,b)}})},addAudioData:function(b,d){var e=this;this.soundList[d]=new Howl({preload:null==b.preload?!1:!0,src:[b.path+".mp3"],loop:!!b.loop,
onend:function(b){this._loop||e.unregisterActiveSound(this,b)}})},loadSound:function(b){if("object"===typeof b)return b.load(),b;if("string"===typeof b)return this.soundList[b].load(),b},onStopBGM:function(){for(var b in this.activeSoundList){var d=this.activeSoundList[b];this.stop(d,b);this.unregisterActiveSound(d,b)}},onSystemPause:function(){for(var b in this.activeSoundList)this.pause(this.activeSoundList[b],b)},onSystemResume:function(){for(var b in this.activeSoundList)this.resume(this.activeSoundList[b],
b)},play:function(b){if(!this.isMuted){if("bgm"==this.playerName.toLowerCase())this.onStopBGM();b="string"===typeof b?this.soundList[b]:b;b.mute(!1);var d=b.play();this.registerActiveSound(b,d)}},playSFX:function(b,d){if(!this.isMuted){var e="string"===typeof b?this.soundList[b]:b;null!=d&&(e._loop=d);e.mute(!1);var f=e.play();this.registerActiveSound(e,f);return{name:b,id:f}}},stopSFX:function(b,d){var e="string"===typeof b?this.soundList[b]:b;d=parseInt(d);e.playing(d)&&e.stop(d);this.unregisterActiveSound(e,
d)},pause:function(b,d){var e="string"===typeof b?this.soundList[b]:b;d=parseInt(d);e.playing(d)&&e.pause(d)},resume:function(b,d){if(!this.isMuted){var e="string"===typeof b?this.soundList[b]:b;d=parseInt(d);e.playing(d)||e.play(d)}},stop:function(b,d){var e="string"===typeof b?this.soundList[b]:b;d=parseInt(d);e.playing(d)&&e.stop(d);this.unregisterActiveSound(e,d)},seek:function(b){return("string"===typeof b?this.soundList[b]:b).seek()},mute:function(b){b||(this.isMuted=!0);for(var d in this.soundList)this.soundList[d].mute(!0)},
unmute:function(b){b||(this.isMuted=!1);if(!this.isMuted)for(var d in this.soundList)this.soundList[d].mute(!1)},volume:function(b,d){if("number"!==typeof b)console.warn("Argument needs to be a number!");else if(b=b.limit(0,1),d in this.soundList){var e=this.soundList[d];e.volume(b)}else for(d in this.soundList)e=this.soundList[d],e.volume(b)},getVolume:function(b){var d=Howler.volume()||1;if(b in this.soundList){var e=this.soundList[b];if(null!==e||"undefined"!==typeof e)d=e.volume()}else for(b in this.soundList)if(e=
this.soundList[b],null!==e||"undefined"!==typeof e){d=e.volume();break}return d},registerActiveSound:function(b,d){if(null===this.activeSoundList||"undefined"===typeof this.activeSoundList)this.activeSoundList={};null===b||"undefined"===typeof b||(this.activeSoundList[d]=b)},unregisterActiveSound:function(b,d){if(null===this.activeSoundList||"undefined"===typeof this.activeSoundList)this.activeSoundList=[];null===b||"undefined"===typeof b||(this.activeSoundList[d]=null,delete this.activeSoundList[d])}})});
ig.baked=!0;
ig.module("plugins.audio.sound-info").defines(function(){SoundInfo=ig.Class.extend({sfx:{logosplash1:{path:_BASEPATH.media+"audio/opening/logosplash1",preload:!0},logosplash2:{path:_BASEPATH.media+"audio/opening/logosplash2",preload:!0},click:{path:_BASEPATH.media+"audio/play/click",preload:!0},clickTieredRV:{path:_BASEPATH.media+"audio/tiered-rv/click",preload:!0},rewardTieredRV:{path:_BASEPATH.media+"audio/tiered-rv/reward",preload:!0},errorTieredRV:{path:_BASEPATH.media+"audio/tiered-rv/error",preload:!0},
freeze1:{path:_BASEPATH.media+"audio/play/freeze1",preload:!0},freeze2:{path:_BASEPATH.media+"audio/play/freeze2",preload:!0},notif:{path:_BASEPATH.media+"audio/play/notif",preload:!0},send:{path:_BASEPATH.media+"audio/play/send",preload:!0},equip:{path:_BASEPATH.media+"audio/play/equip",preload:!0},cashier:{path:_BASEPATH.media+"audio/play/cashier",preload:!0},flash:{path:_BASEPATH.media+"audio/play/flash"},camera:{path:_BASEPATH.media+"audio/play/camera"},pop:{path:_BASEPATH.media+"audio/play/pop"},
rewind:{path:_BASEPATH.media+"audio/play/rewind"}},bgm:{bgmdefault:{path:_BASEPATH.bgm+_RESOURCESINFO.bgm,loop:!0,preload:_DATAGAME.loadBackgroundMusic?!0:null}}})});ig.baked=!0;
ig.module("plugins.audio.sound-handler").requires("plugins.audio.howler-player","plugins.audio.sound-info").defines(function(){ig.SoundHandler=ig.Class.extend({bgmPlayer:null,sfxPlayer:null,soundInfo:new SoundInfo,init:function(){Howler.autoSuspend=!1;this.sfxPlayer=new HowlerPlayer(this.soundInfo.sfx);this.bgmPlayer=new HowlerPlayer(this.soundInfo.bgm);this.bgmPlayer.playerName="bgm"},unlockWebAudio:function(){Howler&&(Howler.ctx&&"running"!==Howler.ctx.state&&Howler.ctx.resume(),Howler._audioUnlocked||
"function"===typeof Howler._unlockAudio&&Howler._unlockAudio())},onSystemPause:function(b){null==b&&(b=!0);if(this.sfxPlayer)this.sfxPlayer.onSystemPause();if(this.bgmPlayer&&b)this.bgmPlayer.onSystemPause()},onSystemResume:function(){this.unlockWebAudio();if(this.sfxPlayer)this.sfxPlayer.onSystemResume();if(this.bgmPlayer)this.bgmPlayer.onSystemResume()},muteSFX:function(b){this.sfxPlayer&&this.sfxPlayer.mute(b)},muteBGM:function(b){this.bgmPlayer&&this.bgmPlayer.mute(b)},unmuteSFX:function(b){this.sfxPlayer&&
this.sfxPlayer.unmute(b)},unmuteBGM:function(b){this.bgmPlayer&&this.bgmPlayer.unmute(b)},muteAll:function(b){this.muteSFX(b);this.muteBGM(b)},unmuteAll:function(b){this.unlockWebAudio();this.unmuteSFX(b);this.unmuteBGM(b)},forceMuteAll:function(){this.muteAll(!0)},forceUnMuteAll:function(){this.unmuteAll(!0)},forceLoopBGM:function(){}})});ig.baked=!0;
ig.module("plugins.handlers.visibility-handler").requires("plugins.audio.sound-handler").defines(function(){ig.VisibilityHandler=ig.Class.extend({version:"1.2.1",config:{muteOnBlur:!0,pauseOnBlur:!0,clearInputStateOnBlur:!0,allowResumeWithoutFocus:{desktop:!0,mobile:{kaios:!1,"default":!0}},handlerDelay:{desktop:0,mobile:{kaios:0,"default":0}},autoFocusOnResume:{desktop:!0,mobile:{kaios:!1,"default":!0}},autoFocusAfterResume:{desktop:!0,mobile:{kaios:!1,"default":!0}}},browserPrefixes:["o","ms","moz",
"webkit"],activeOverlays:[],browserPrefix:null,hiddenPropertyName:null,visibilityEventName:null,visibilityStateName:null,isShowingOverlay:!1,isFocused:!1,isPaused:!1,init:function(){this.initVisibilityHandler();this.initFocusHandler();this.initPageTransitionHandler();ig.visibilityHandler=this},pauseHandler:function(){!0===this.config.clearInputStateOnBlur&&"undefined"!==typeof ig.input&&null!==ig.input&&"function"===typeof ig.input.clearAllState&&ig.input.clearAllState();!0===this.config.pauseOnBlur&&
("undefined"!==typeof wgl&&null!==wgl&&null!==wgl.system&&"undefined"!==typeof wgl.system&&"function"===typeof wgl.system.stopRender&&wgl.system.stopRender(),"undefined"!==typeof ig.game&&null!==ig.game&&"undefined"!==typeof ig.game.pauseGame&&ig.game.pauseGame());!0===this.config.muteOnBlur&&"undefined"!==typeof ig.soundHandler&&null!==ig.soundHandler&&"function"===typeof ig.soundHandler.forceMuteAll&&ig.soundHandler.forceMuteAll()},resumeHandler:function(){"undefined"!==typeof ig.input&&null!==
ig.input&&"function"===typeof ig.input.clearAllState&&ig.input.clearAllState();"undefined"!==typeof ig.game&&null!==ig.game&&("undefined"!==typeof ig.game.resumeGame&&ig.game.resumeGame(),"undefined"!==typeof wgl&&null!==wgl&&null!==wgl.system&&"undefined"!==typeof wgl.system&&"function"===typeof wgl.system.startRender&&wgl.system.startRender());"undefined"!==typeof ig.soundHandler&&null!==ig.soundHandler&&"function"===typeof ig.soundHandler.forceUnMuteAll&&ig.soundHandler.forceUnMuteAll()},initVisibilityHandler:function(){this.browserPrefix=
this.getBrowserPrefix();this.hiddenPropertyName=this.getHiddenPropertyName(this.browserPrefix);this.visibilityEventName=this.getVisibilityEventName(this.browserPrefix);this.visibilityStateName=this.getVisibilityStateName(this.browserPrefix);this.visibilityEventName&&document.addEventListener(this.visibilityEventName,this.onChange.bind(this),!0)},initFocusHandler:function(){window.addEventListener("blur",this.onChange.bind(this),!0);document.addEventListener("blur",this.onChange.bind(this),!0);document.addEventListener("focusout",
this.onChange.bind(this),!0);window.addEventListener("focus",this.onChange.bind(this),!0);document.addEventListener("focus",this.onChange.bind(this),!0);document.addEventListener("focusin",this.onChange.bind(this),!0)},initPageTransitionHandler:function(){window.addEventListener("pagehide",this.onChange.bind(this),!0);window.addEventListener("pageshow",this.onChange.bind(this),!0)},getBrowserPrefix:function(){var b=null;this.browserPrefixes.forEach(function(d){if(this.getHiddenPropertyName(d)in document)return b=
d}.bind(this));return b},getHiddenPropertyName:function(b){return b?b+"Hidden":"hidden"},getVisibilityEventName:function(b){return(b?b:"")+"visibilitychange"},getVisibilityStateName:function(b){return b?b+"VisibilityState":"visibilityState"},hasView:function(){return!(document[this.hiddenPropertyName]||"visible"!==document[this.visibilityStateName])},hasFocus:function(){return document.hasFocus()||this.isFocused},addActiveOverlay:function(b){if(null===this.activeOverlays||"undefined"===typeof this.activeOverlays)this.activeOverlays=
[];null===b||"undefined"===typeof b||!0!==this.activeOverlays.includes(b)&&this.activeOverlays.push(b)},removeActiveOverlay:function(b){if(null===this.activeOverlays||"undefined"===typeof this.activeOverlays)this.activeOverlays=[];0>=this.activeOverlays.length||null===b||"undefined"===typeof b||!0===this.activeOverlays.includes(b)&&this.activeOverlays.splice(this.activeOverlays.indexOf(b),1)},onOverlayShow:function(b){null!==b&&"undefined"!==typeof b&&this.addActiveOverlay(b);0<this.activeOverlays.length&&
(this.systemPaused(),this.isShowingOverlay=!0)},onOverlayHide:function(b){null!==b&&"undefined"!==typeof b&&this.removeActiveOverlay(b);0>=this.activeOverlays.length&&(this.isShowingOverlay=!1,this.systemResumed())},systemPaused:function(){if(this.isPaused)return!1;this.pauseHandler();return this.isPaused=!0},systemResumed:function(){if(!this.isPaused||!this.hasView()||this.isShowingOverlay)return!1;if(!this.hasFocus())if(ig.ua.mobile)if(this.isKaiOS()){if(!this.config.allowResumeWithoutFocus.mobile.kaios)return!1}else{if(!this.config.allowResumeWithoutFocus.mobile.default)return!1}else if(!this.config.allowResumeWithoutFocus.desktop)return!1;
this.focusOnResume();this.resumeHandler();this.focusAfterResume();this.isPaused=!1;return!0},isKaiOS:function(){return/KAIOS/.test(navigator.userAgent)||!1},focusOnResume:function(){var b=!1;return b=ig.ua.mobile?this.isKaiOS()?this.config.autoFocusOnResume.mobile.kaios:this.config.autoFocusOnResume.mobile.default:this.config.autoFocusOnResume.desktop},focusAfterResume:function(){var b=!1;return b=ig.ua.mobile?this.isKaiOS()?this.config.autoFocusAfterResume.mobile.kaios:this.config.autoFocusAfterResume.mobile.default:
this.config.autoFocusAfterResume.desktop},focus:function(b){window.focus&&b&&(document.activeElement&&"function"===typeof document.activeElement.blur&&document.activeElement.blur(),window.focus())},handleDelayedEvent:function(b){if(!this.hasView()||"pause"===b.type||"pageHide"===b.type||"blur"===b.type||"focusout"===b.type){if("blur"===b.type||"focusout"===b.type){var d=b.path||b.composedPath&&b.composedPath();if(d&&2<d.length||b.srcElement&&("INPUT"===b.srcElement.tagName||"TEXTAREA"===b.srcElement.tagName))return!1;
this.isFocused=!1}return this.systemPaused(b)}if("focus"===b.type||"focusin"===b.type)this.isFocused=!0;return this.systemResumed(b)},startDelayedEventHandler:function(b){ig.ua.mobile?this.isKaiOS()?0<this.config.handlerDelay.mobile.kaios?window.setTimeout(function(b){this.handleDelayedEvent(b)}.bind(this,b),this.config.handlerDelay.mobile):this.handleDelayedEvent(b):0<this.config.handlerDelay.mobile.default?window.setTimeout(function(b){this.handleDelayedEvent(b)}.bind(this,b),this.config.handlerDelay.mobile):
this.handleDelayedEvent(b):0<this.config.handlerDelay.desktop?window.setTimeout(function(b){this.handleDelayedEvent(b)}.bind(this,b),this.config.handlerDelay.desktop):this.handleDelayedEvent(b)},onChange:function(b){this.startDelayedEventHandler(b)}})});ig.baked=!0;
ig.module("plugins.io.storage").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(b){return null!==this.get(b)},initUnset:function(b,d){null===this.get(b)&&this.set(b,d)},get:function(b){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(b))}catch(d){return window.localStorage.getItem(b)}},
getInt:function(b){return~~this.get(b)},getFloat:function(b){return parseFloat(this.get(b))},getBool:function(b){return!!this.get(b)},key:function(b){return this.isCapable()?window.localStorage.key(b):null},set:function(b,d){if(!this.isCapable())return null;try{window.localStorage.setItem(b,JSON.stringify(d))}catch(e){console.log(e)}},setHighest:function(b,d){d>this.getFloat(b)&&this.set(b,d)},remove:function(b){if(!this.isCapable())return null;window.localStorage.removeItem(b)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;
ig.module("plugins.io.mouse").requires("plugins.data.vector").defines(function(){Mouse=ig.Class.extend({pos:new Vector2(0,0),bindings:{click:[ig.KEY.MOUSE1]},init:function(){ig.input.initMouse();for(var b in this.bindings){this[b]=b;for(var d=0;d<this.bindings[b].length;d++)ig.input.bind(this.bindings[b][d],b)}},getLast:function(){return this.pos},getPos:function(){var b=ig.system.scale*((ig.system.canvas.offsetWidth||ig.system.realWidth)/ig.system.realWidth);this.pos.set(ig.input.mouse.x*b/ig.sizeHandler.sizeRatio.x/
ig.sizeHandler.scaleRatioMultiplier.x,ig.input.mouse.y*b/ig.sizeHandler.sizeRatio.y/ig.sizeHandler.scaleRatioMultiplier.y);return this.pos.clone()}})});ig.baked=!0;
ig.module("plugins.io.keyboard").defines(function(){Keyboard=ig.Class.extend({bindings:{PREVENT_PAGE_SCROLLING_OVER_IFRAME:[ig.KEY.UP_ARROW,ig.KEY.DOWN_ARROW,ig.KEY.LEFT_ARROW,ig.KEY.RIGHT_ARROW,ig.KEY.PAGE_UP,ig.KEY.PAGE_DOWN],up:[ig.KEY.W,ig.KEY.UP_ARROW],right:[ig.KEY.D,ig.KEY.RIGHT_ARROW],left:[ig.KEY.A,ig.KEY.LEFT_ARROW],down:[ig.KEY.S,ig.KEY.DOWN_ARROW,ig.KEY.SPACE]},init:function(){for(var b in this.bindings){this[b]=b;for(var d=0;d<this.bindings[b].length;d++)ig.input.bind(this.bindings[b][d],
b)}}})});ig.baked=!0;
ig.module("plugins.io.gamepad-input").defines(function(){ig.PADKEY={BUTTON_0:0,PADBUTTON_1:1,BUTTON_2:2,BUTTON_3:3,BUTTON_LEFT_BUMPER:4,BUTTON_RIGHT_BUMPER:5,BUTTON_LEFT_TRIGGER:6,BUTTON_RIGHT_TRIGGER:7,BUTTON_LEFT_JOYSTICK:10,BUTTON_RIGHT_JOYSTICK:11,BUTTON_DPAD_UP:12,BUTTON_DPAD_DOWN:13,BUTTON_DPAD_LEFT:14,BUTTON_DPAD_RIGHT:15,BUTTON_MENU:16,AXIS_LEFT_JOYSTICK_X:0,AXIS_LEFT_JOYSTICK_Y:1,AXIS_RIGHT_JOYSTICK_X:2,AXIS_RIGHT_JOYSTICK_Y:3};ig.GamepadInput=ig.Class.extend({isInit:!1,isSupported:!1,list:[],
bindings:{},states:{},presses:{},releases:{},downLocks:{},upLocks:{},leftStick:{x:0,y:0},rightStick:{x:0,y:0},start:function(){if(!this.isInit){this.isInit=!0;var b=navigator.getGamepads||navigator.webkitGetGamepads;b&&(!navigator.getGamepads&&navigator.webkitGetGamepads&&(navigator.getGamepads=navigator.webkitGetGamepads),this.list=navigator.getGamepads());this.isSupported=b}},isAvailable:function(){return this.isInit&&this.isSupported},buttonPressed:function(b){return"object"==typeof b?b.pressed:
1==b},buttonDown:function(b){if(b=this.bindings[b])this.states[b]=!0,this.downLocks[b]||(this.presses[b]=!0,this.downLocks[b]=!0)},buttonUp:function(b){if((b=this.bindings[b])&&this.downLocks[b]&&!this.upLocks[b])this.states[b]=!1,this.releases[b]=!0,this.upLocks[b]=!0},clearPressed:function(){for(var b in this.releases)this.states[b]=!1,this.downLocks[b]=!1;this.releases={};this.presses={};this.upLocks={}},bind:function(b,d){this.bindings[b]=d},unbind:function(b){this.releases[this.bindings[b]]=
!0;this.bindings[b]=null},unbindAll:function(){this.bindings={};this.states={};this.presses={};this.releases={};this.downLocks={};this.upLocks={}},state:function(b){return this.states[b]},pressed:function(b){return this.presses[b]},released:function(b){return this.releases[b]},clamp:function(b,d,e){return b<d?d:b>e?e:b},pollGamepads:function(){if(this.isSupported){this.leftStick.x=0;this.leftStick.y=0;this.rightStick.x=0;this.rightStick.y=0;this.list=navigator.getGamepads();for(var b in this.bindings){for(var d=
!1,e=0;e<this.list.length;e++){var f=this.list[e];if(f&&f.buttons&&this.buttonPressed(f.buttons[b])){d=!0;break}}d?this.buttonDown(b):this.buttonUp(b)}for(e=0;e<this.list.length;e++)if((f=this.list[e])&&f.axes){b=f.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_X];var d=f.axes[ig.GAMEPADINPUT.AXIS_LEFT_JOYSTICK_Y],g=f.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_X],f=f.axes[ig.GAMEPADINPUT.AXIS_RIGHT_JOYSTICK_Y];this.leftStick.x+=isNaN(b)?0:b;this.leftStick.y+=isNaN(d)?0:d;this.rightStick.x+=isNaN(g)?0:g;this.rightStick.y+=
isNaN(f)?0:f}0<this.list.length&&(this.leftStick.x=this.clamp(this.leftStick.x,-1,1),this.leftStick.y=this.clamp(this.leftStick.y,-1,1),this.rightStick.x=this.clamp(this.rightStick.x,-1,1),this.rightStick.y=this.clamp(this.rightStick.y,-1,1))}}})});ig.baked=!0;
ig.module("plugins.io.gamepad").requires("plugins.io.gamepad-input").defines(function(){Gamepad=ig.Class.extend({bindings:{padJump:[ig.PADKEY.BUTTON_0]},init:function(){ig.gamepadInput.start();for(var b in this.bindings)for(var d=0;d<this.bindings[b].length;d++)ig.gamepadInput.bind(this.bindings[b][d],b)},press:function(){},held:function(){},release:function(){}})});ig.baked=!0;
ig.module("plugins.io.multitouch").defines(function(){Multitouch=ig.Class.extend({init:function(){ig.multitouchInput.start()},getTouchesPos:function(){if(ig.ua.mobile){if(0<ig.multitouchInput.touches.length){for(var b=[],d=0;d<ig.multitouchInput.touches.length;d++){var e=ig.multitouchInput.touches[d];b.push({x:e.x,y:e.y})}return b}return null}}})});ig.baked=!0;
ig.module("plugins.io.multitouch-input").defines(function(){ig.MultitouchInput=ig.Class.extend({isStart:!1,touches:[],multitouchCapable:!1,lastEventUp:null,start:function(){this.isStart||(this.isStart=!0,navigator.maxTouchPoints&&1<navigator.maxTouchPoints&&(this.multitouchCapable=!0),ig.ua.touchDevice&&(window.navigator.msPointerEnabled&&(ig.system.canvas.addEventListener("MSPointerDown",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("MSPointerUp",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("MSPointerMove",
this.touchmove.bind(this),!1),ig.system.canvas.style.msContentZooming="none",ig.system.canvas.style.msTouchAction="none"),ig.system.canvas.addEventListener("touchstart",this.touchdown.bind(this),!1),ig.system.canvas.addEventListener("touchend",this.touchup.bind(this),!1),ig.system.canvas.addEventListener("touchmove",this.touchmove.bind(this),!1)))},touchmove:function(b){if(ig.ua.touchDevice){var d=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,e=parseInt(ig.system.canvas.offsetHeight)||
ig.system.realHeight,d=ig.system.scale*(d/ig.system.realWidth),e=ig.system.scale*(e/ig.system.realHeight);if(b.touches){for(;0<this.touches.length;)this.touches.pop();!this.multitouchCapable&&1<b.touches.length&&(this.multitouchCapable=!0);var f={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(f=ig.system.canvas.getBoundingClientRect());for(var g=0;g<b.touches.length;g++){var j=b.touches[g];j&&this.touches.push({x:(j.clientX-f.left)/d,y:(j.clientY-f.top)/e})}}else this.windowMove(b)}try{ig.soundHandler.unlockWebAudio()}catch(l){}},
touchdown:function(b){var d=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,e=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,d=ig.system.scale*(d/ig.system.realWidth),e=ig.system.scale*(e/ig.system.realHeight);if(window.navigator.msPointerEnabled)this.windowKeyDown(b);else if(ig.ua.touchDevice&&b.touches){for(;0<this.touches.length;)this.touches.pop();!this.multitouchCapable&&1<b.touches.length&&(this.multitouchCapable=!0);var f={left:0,top:0};ig.system.canvas.getBoundingClientRect&&
(f=ig.system.canvas.getBoundingClientRect());for(var g=0;g<b.touches.length;g++){var j=b.touches[g];j&&this.touches.push({x:(j.clientX-f.left)/d,y:(j.clientY-f.top)/e})}}},touchup:function(b){var d=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth;parseInt(ig.system.canvas.offsetHeight);d=ig.system.scale*(d/ig.system.realWidth);if(window.navigator.msPointerEnabled)this.windowKeyUp(b);else{this.lastEventUp=b;var e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(e=ig.system.canvas.getBoundingClientRect());
if(ig.ua.touchDevice){b=(b.changedTouches[0].clientX-e.left)/d;for(d=0;d<this.touches.length;d++)this.touches[d].x>=b-40&&this.touches[d].x<=b+40&&this.touches.splice(d,1)}}if(ig.visibilityHandler)ig.visibilityHandler.onChange("focus");try{ig.soundHandler.unlockWebAudio()}catch(f){}},windowKeyDown:function(b){var d=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,e=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,d=ig.system.scale*(d/ig.system.realWidth),e=ig.system.scale*
(e/ig.system.realHeight);if(window.navigator.msPointerEnabled){var f={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(f=ig.system.canvas.getBoundingClientRect());b=b.changedTouches?b.changedTouches:[b];for(var g=0;g<b.length;++g){for(var j=b[g],l="undefined"!=typeof j.identifier?j.identifier:"undefined"!=typeof j.pointerId?j.pointerId:1,n=(j.clientX-f.left)/d,j=(j.clientY-f.top)/e,m=0;m<this.touches.length;++m)this.touches[m].identifier==l&&this.touches.splice(m,1);this.touches.push({x:n,y:j,
identifier:l})}for(d=0;d<this.touches.length;d++);}},windowKeyUp:function(b){b="undefined"!=typeof b.identifier?b.identifier:"undefined"!=typeof b.pointerId?b.pointerId:1;for(var d=0;d<this.touches.length;++d)this.touches[d].identifier==b&&this.touches.splice(d,1);for(;0<this.touches.length;)this.touches.pop();if(ig.visibilityHandler)ig.visibilityHandler.onChange("focus");try{ig.soundHandler.unlockWebAudio()}catch(e){}},windowMove:function(b){var d=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,
e=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight,d=ig.system.scale*(d/ig.system.realWidth),e=ig.system.scale*(e/ig.system.realHeight),f={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(f=ig.system.canvas.getBoundingClientRect());if(window.navigator.msPointerEnabled)for(var g="undefined"!=typeof b.identifier?b.identifier:"undefined"!=typeof b.pointerId?b.pointerId:1,j=0;j<this.touches.length;++j)if(this.touches[j].identifier==g){var l=(b.clientY-f.top)/e;this.touches[j].x=(b.clientX-
f.left)/d;this.touches[j].y=l}try{ig.soundHandler.unlockWebAudio()}catch(n){}},clear:function(){for(var b=0;b<this.released.length;++b)this.released[b]&&(this.released.splice(b,1),b--)},pollMultitouch:function(b){!this.multitouchCapable&&1<b&&(this.multitouchCapable=!0)},spliceFromArray:function(b,d){for(var e=0;e<d.length;e++)for(var f=0;f<b.length;f++)b[f].identifier===d[e].identifier&&(b.splice(f,1),f--)},updateSizeProperties:function(){var b=parseInt(ig.system.canvas.offsetWidth)||ig.system.realWidth,
d=parseInt(ig.system.canvas.offsetHeight)||ig.system.realHeight;this.scaleX=ig.system.scale*(b/ig.system.realWidth);this.scaleY=ig.system.scale*(d/ig.system.realHeight)},upgrade:function(b,d,e){var f={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(f=ig.system.canvas.getBoundingClientRect());for(var g=(e.clientX-f.left)/this.scaleX,f=(e.clientY-f.top)/this.scaleY,j=0;j<b.length;j++)if(void 0!==typeof b[j].identifier&&void 0!==typeof e.identifier&&e.identifier===b[j].identifier){b.splice(j,
1);d.push({identifier:e.identifier,x:g,y:f});break}},updateArray:function(b,d){var e={left:0,top:0};ig.system.canvas.getBoundingClientRect&&(e=ig.system.canvas.getBoundingClientRect());for(var f=(d.clientX-e.left)/this.scaleX,e=(d.clientY-e.top)/this.scaleY,g=0;g<b.length;g++)if(void 0!==typeof b[g].identifier&&void 0!==typeof d.identifier&&d.identifier===b[g].identifier){b[g].x=f;b[g].y=e;break}}})});ig.baked=!0;
ig.module("plugins.io.fake-storage").requires("impact.game").defines(function(){ig.FakeStorage=ig.Class.extend({tempData:{},init:function(){ig.FakeStorage.instance=this},initUnset:function(b,d){null===this.get(b)&&this.set(b,d)},set:function(b,d){this.tempData[b]=JSON.stringify(d)},setItem:function(b,d){this.tempData[b]=JSON.stringify(d)},setHighest:function(b,d){d>this.getFloat(b)&&this.set(b,d)},get:function(b){return"undefined"==typeof this.tempData[b]?null:JSON.parse(this.tempData[b])},getItem:function(b){return"undefined"==
typeof this.tempData[b]?null:JSON.parse(this.tempData[b])},getInt:function(b){return~~this.get(b)},getFloat:function(b){return parseFloat(this.get(b))},getBool:function(b){return!!this.get(b)},isSet:function(b){return null!==this.get(b)},remove:function(b){delete this.tempData[b]},removeItem:function(b){delete this.tempData[b]},clear:function(){this.tempData={}}})});ig.baked=!0;
ig.module("plugins.io.io-manager").requires("plugins.io.storage","plugins.io.mouse","plugins.io.keyboard","plugins.io.gamepad","plugins.io.multitouch","plugins.io.multitouch-input","plugins.io.gamepad-input","plugins.io.fake-storage").defines(function(){IoManager=ig.Class.extend({version:"1.0.0",storage:null,localStorageSupport:!1,mouse:null,keyboard:null,multitouch:null,gamepad:null,init:function(){ig.multitouchInput=new ig.MultitouchInput;ig.gamepadInput=new ig.GamepadInput;this.unbindAll();this.initStorage();
this.initMouse();this.initKeyboard()},unbindAll:function(){ig.input.unbindAll();ig.gamepadInput.unbindAll()},initStorage:function(){try{window.localStorage.setItem("test","test"),this.storage=new ig.Storage,window.localStorage.removeItem("test")}catch(b){console.log("using fake storage"),this.storage=new ig.FakeStorage}},initMouse:function(){this.mouse=new Mouse},initKeyboard:function(){this.keyboard=new Keyboard},initMultitouch:function(){this.multitouch=new Multitouch},initGamepad:function(){this.gamepad=
new Gamepad},press:function(b){return ig.input.pressed(b)||this.gamepad&&this.gamepad.press(b)?!0:!1},held:function(b){return ig.input.state(b)||this.gamepad&&this.gamepad.state(b)?!0:!1},release:function(b){return ig.input.released(b)||this.gamepad&&this.gamepad.released(b)?!0:!1},getClickPos:function(){return this.mouse.getPos()},getLastClickPos:function(){return this.mouse.getLast()},getTouchesPos:function(){return this.multitouch.getTouchesPos()},checkOverlap:function(b,d,e,f,g){return b.x>d+
f||b.x<d||b.y>e+g||b.y<e?!1:!0},clear:function(){ig.multitouchInput.clear()},_supportsLocalStorage:function(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),this.localStorageSupport="localStorage"in window&&null!==window.localStorage}catch(b){return this.localStorageSupport}},storageIsSet:function(b){return"function"===typeof this.storage.isSet?this.storage.isSet(b):null},storageGet:function(b){return"function"===typeof this.storage.get?this.storage.get(b):null},storageSet:function(b,
d){return"function"===typeof this.storage.set?this.storage.set(b,d):null},assert:function(b,d,e){if(d!==e)throw"actualValue:"+d+" not equal to testValue:"+e+" at "+b;}})});ig.baked=!0;
ig.module("plugins.secure-ls").requires("plugins.io.fake-storage").defines(function(){(function(){var b=function(){var b=[function(b,d,e){function f(b){return b&&b.__esModule?b:{"default":b}}Object.defineProperty(d,"__esModule",{value:!0});var m=e(1),r=f(m),m=e(2),q=f(m),m=e(8),s=f(m),m=e(9),t=f(m),m=e(10),v=f(m),m=e(11),u=f(m),m=e(16),x=f(m),m=e(17),D=f(m);e=e(18);var H=f(e),M=function(b){if(!(this instanceof M))throw new TypeError("Cannot call a class as a function");b=b||{};this._name="secure-ls";
this.utils=r["default"];this.constants=q["default"];this.Base64=t["default"];this.LZString=v["default"];this.AES=u["default"];this.DES=x["default"];this.RABBIT=D["default"];this.RC4=H["default"];this.enc=s["default"];this.config={isCompression:!0,encodingType:q["default"].EncrytionTypes.BASE64,encryptionSecret:b.encryptionSecret,encryptionNamespace:b.encryptionNamespace};this.config.isCompression="undefined"==typeof b.isCompression||b.isCompression;this.config.encodingType="undefined"!=typeof b.encodingType||
""===b.encodingType?b.encodingType.toLowerCase():q["default"].EncrytionTypes.BASE64;try{window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),this.ls=localStorage}catch(d){this.ls=new ig.FakeStorage}this.init()};e=[{key:"init",value:function(){var b=this.getMetaData();this.WarningEnum=this.constants.WarningEnum;this.WarningTypes=this.constants.WarningTypes;this.EncrytionTypes=this.constants.EncrytionTypes;this._isBase64=this._isBase64EncryptionType();this._isAES=this._isAESEncryptionType();
this._isDES=this._isDESEncryptionType();this._isRabbit=this._isRabbitEncryptionType();this._isRC4=this._isRC4EncryptionType();this._isCompression=this._isDataCompressionEnabled();this.utils.allKeys=b.keys||this.resetAllKeys()}},{key:"_isBase64EncryptionType",value:function(){return t["default"]&&("undefined"==typeof this.config.encodingType||this.config.encodingType===this.constants.EncrytionTypes.BASE64)}},{key:"_isAESEncryptionType",value:function(){return u["default"]&&this.config.encodingType===
this.constants.EncrytionTypes.AES}},{key:"_isDESEncryptionType",value:function(){return x["default"]&&this.config.encodingType===this.constants.EncrytionTypes.DES}},{key:"_isRabbitEncryptionType",value:function(){return D["default"]&&this.config.encodingType===this.constants.EncrytionTypes.RABBIT}},{key:"_isRC4EncryptionType",value:function(){return H["default"]&&this.config.encodingType===this.constants.EncrytionTypes.RC4}},{key:"_isDataCompressionEnabled",value:function(){return this.config.isCompression}},
{key:"getEncryptionSecret",value:function(b){var d=this.getMetaData();(b=this.utils.getObjectFromKey(d.keys,b))&&(this._isAES||this._isDES||this._isRabbit||this._isRC4)&&("undefined"==typeof this.config.encryptionSecret?(this.utils.encryptionSecret=b.s,this.utils.encryptionSecret||(this.utils.encryptionSecret=this.utils.generateSecretKey(),this.setMetaData())):this.utils.encryptionSecret=this.config.encryptionSecret||b.s||"")}},{key:"get",value:function(b,d){var e="",f="",g=void 0,j=void 0,e=void 0;
if(!this.utils.is(b))return this.utils.warn(this.WarningEnum.KEY_NOT_PROVIDED),f;if(e=this.getDataFromLocalStorage(b),!e)return f;g=e;(this._isCompression||d)&&(g=v["default"].decompressFromUTF16(e));e=g;this._isBase64||d?e=t["default"].decode(g):(this.getEncryptionSecret(b),this._isAES?j=u["default"].decrypt(g.toString(),this.utils.encryptionSecret):this._isDES?j=x["default"].decrypt(g.toString(),this.utils.encryptionSecret):this._isRabbit?j=D["default"].decrypt(g.toString(),this.utils.encryptionSecret):
this._isRC4&&(j=H["default"].decrypt(g.toString(),this.utils.encryptionSecret)),j&&(e=j.toString(s["default"]._Utf8)));try{f=JSON.parse(e)}catch(l){throw Error("Could not parse JSON");}return f}},{key:"getDataFromLocalStorage",value:function(b){return this.ls.getItem(b,!0)}},{key:"getAllKeys",value:function(){var b=this.getMetaData();return this.utils.extractKeyNames(b)||[]}},{key:"set",value:function(b,d){var e="";return this.utils.is(b)?(this.getEncryptionSecret(b),String(b)!==String(this.utils.metaKey)&&
(this.utils.isKeyPresent(b)||(this.utils.addToKeysList(b),this.setMetaData())),e=this.processData(d),void this.setDataToLocalStorage(b,e)):void this.utils.warn(this.WarningEnum.KEY_NOT_PROVIDED)}},{key:"setDataToLocalStorage",value:function(b,d){this.ls.setItem(b,d)}},{key:"remove",value:function(b){return this.utils.is(b)?b===this.utils.metaKey&&this.getAllKeys().length?void this.utils.warn(this.WarningEnum.META_KEY_REMOVE):(this.utils.isKeyPresent(b)&&(this.utils.removeFromKeysList(b),this.setMetaData()),
void this.ls.removeItem(b)):void this.utils.warn(this.WarningEnum.KEY_NOT_PROVIDED)}},{key:"removeAll",value:function(){for(var b=void 0,d=void 0,b=this.getAllKeys(),d=0;d<b.length;d++)this.ls.removeItem(b[d]);this.ls.removeItem(this.utils.metaKey);this.resetAllKeys()}},{key:"clear",value:function(){this.ls.clear();this.resetAllKeys()}},{key:"resetAllKeys",value:function(){return this.utils.allKeys=[],[]}},{key:"processData",value:function(b,d){if(null===b||void 0===b||""===b)return"";var e=void 0,
f=void 0,g=void 0;try{e=JSON.stringify(b)}catch(j){throw Error("Could not stringify data.");}return f=e,this._isBase64||d?f=t["default"].encode(e):(this._isAES?f=u["default"].encrypt(e,this.utils.encryptionSecret):this._isDES?f=x["default"].encrypt(e,this.utils.encryptionSecret):this._isRabbit?f=D["default"].encrypt(e,this.utils.encryptionSecret):this._isRC4&&(f=H["default"].encrypt(e,this.utils.encryptionSecret)),f=f&&f.toString()),g=f,(this._isCompression||d)&&(g=v["default"].compressToUTF16(f)),
g}},{key:"setMetaData",value:function(){var b=this.processData({keys:this.utils.allKeys},!0);this.setDataToLocalStorage(this.getMetaKey(),b)}},{key:"getMetaData",value:function(){return this.get(this.getMetaKey(),!0)||{}}},{key:"getMetaKey",value:function(){return this.utils.metaKey+(this.config.encryptionNamespace?"__"+this.config.encryptionNamespace:"")}}];for(var m=M.prototype,E=0;E<e.length;E++){var F=e[E];F.enumerable=F.enumerable||!1;F.configurable=!0;"value"in F&&(F.writable=!0);Object.defineProperty(m,
F.key,F)}d["default"]=M;b.exports=d["default"]},function(b,d,e){function f(b){return b&&b.__esModule?b:{"default":b}}d=e(2);var m=f(d);d=e(3);var r=f(d);e=e(4);var q=f(e);b.exports={metaKey:"_secure__ls__metadata",encryptionSecret:"",secretPhrase:"s3cr3t$#@135^&*246",allKeys:[],is:function(b){return!!b},warn:function(b){b=b?b:m["default"].WarningEnum.DEFAULT_TEXT;console.warn(m["default"].WarningTypes[b])},generateSecretKey:function(){var b=r["default"].random(16);return(b=(0,q["default"])(this.secretPhrase,
b,{keySize:4}))&&b.toString()},getObjectFromKey:function(b,d){if(!b||!b.length)return{};for(var e=void 0,f={},e=0;e<b.length;e++)if(b[e].k===d){f=b[e];break}return f},extractKeyNames:function(b){return b&&b.keys&&b.keys.length?b.keys.map(function(b){return b.k}):[]},getAllKeys:function(){return this.allKeys},isKeyPresent:function(b){for(var d=!1,e=0;e<this.allKeys.length;e++)if(String(this.allKeys[e].k)===String(b)){d=!0;break}return d},addToKeysList:function(b){this.allKeys.push({k:b,s:this.encryptionSecret})},
removeFromKeysList:function(b){for(var d=void 0,e=-1,d=0;d<this.allKeys.length;d++)if(this.allKeys[d].k===b){e=d;break}return-1!==e&&this.allKeys.splice(e,1),e}}},function(b){var d={KEY_NOT_PROVIDED:"keyNotProvided",META_KEY_REMOVE:"metaKeyRemove",DEFAULT_TEXT:"defaultText"},e={};e[d.KEY_NOT_PROVIDED]="Secure LS: Key not provided. Aborting operation!";e[d.META_KEY_REMOVE]="Secure LS: Meta key can not be removed\nunless all keys created by Secure LS are removed!";e[d.DEFAULT_TEXT]="Unexpected output";
b.exports={WarningEnum:d,WarningTypes:e,EncrytionTypes:{BASE64:"base64",AES:"aes",DES:"des",RABBIT:"rabbit",RC4:"rc4"}}},function(b){b.exports={random:function(b){for(var d,e=[],f=function(b){var d=987654321;return function(){d=36969*(65535&d)+(d>>16)&4294967295;b=18E3*(65535&b)+(b>>16)&4294967295;var e=(d<<16)+b&4294967295;return e/=4294967296,e+=0.5,e*(0.5<Math.random()?1:-1)}},g=0;g<b;g+=4){var q=f(4294967296*(d||Math.random()));d=987654071*q();e.push(4294967296*q()|0)}return new this.Set(e,b)},
Set:function(b,d){b=this.words=b||[];void 0!==d?this.sigBytes=d:this.sigBytes=8*b.length}}},function(b,d,e){d=e(5);e(6);e(7);var f=d.lib;e=f.Base;var m=f.WordArray,f=d.algo,r=f.HMAC,q=f.PBKDF2=e.extend({cfg:e.extend({keySize:4,hasher:f.SHA1,iterations:1}),init:function(b){this.cfg=this.cfg.extend(b)},compute:function(b,d){for(var e=this.cfg,f=r.create(e.hasher,b),g=m.create(),j=m.create([1]),l=g.words,n=j.words,q=e.keySize,e=e.iterations;l.length<q;){var F=f.update(d).finalize(j);f.reset();for(var S=
F.words,I=S.length,L=F,O=1;O<e;O++){L=f.finalize(L);f.reset();for(var P=L.words,G=0;G<I;G++)S[G]^=P[G]}g.concat(F);n[0]++}return g.sigBytes=4*q,g}});d.PBKDF2=function(b,d,e){return q.create(e).compute(b,d)};b.exports=d.PBKDF2;!0},function(b){var d;if(!d){var e=Math;if(!(d=Object.create)){var f=function(){};d=function(b){var d;return f.prototype=b,d=new f,f.prototype=null,d}}var m=d;d={};var r=d.lib={},q=r.Base={extend:function(b){var d=m(this);return b&&d.mixIn(b),d.hasOwnProperty("init")&&this.init!==
d.init||(d.init=function(){d.$super.init.apply(this,arguments)}),d.init.prototype=d,d.$super=this,d},create:function(){var b=this.extend();return b.init.apply(b,arguments),b},init:function(){},mixIn:function(b){for(var d in b)b.hasOwnProperty(d)&&(this[d]=b[d]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=q.extend({init:function(b,d){b=this.words=b||[];void 0!=d?this.sigBytes=d:this.sigBytes=4*b.length},toString:function(b){return(b||
v).stringify(this)},concat:function(b){var d=this.words,e=b.words,f=this.sigBytes;b=b.sigBytes;if(this.clamp(),f%4)for(var g=0;g<b;g++)d[f+g>>>2]|=(e[g>>>2]>>>24-8*(g%4)&255)<<24-8*((f+g)%4);else for(g=0;g<b;g+=4)d[f+g>>>2]=e[g>>>2];return this.sigBytes+=b,this},clamp:function(){var b=this.words,d=this.sigBytes;b[d>>>2]&=4294967295<<32-8*(d%4);b.length=e.ceil(d/4)},clone:function(){var b=q.clone.call(this);return b.words=this.words.slice(0),b},random:function(b){for(var d,f=[],g=function(b){var d=
987654321;return function(){d=36969*(65535&d)+(d>>16)&4294967295;b=18E3*(65535&b)+(b>>16)&4294967295;var f=(d<<16)+b&4294967295;return f/=4294967296,f+=0.5,f*(0.5<e.random()?1:-1)}},j=0;j<b;j+=4){var m=g(4294967296*(d||e.random()));d=987654071*m();f.push(4294967296*m()|0)}return new s.init(f,b)}}),t=d.enc={},v=t.Hex={stringify:function(b){var d=b.words;b=b.sigBytes;for(var e=[],f=0;f<b;f++){var g=d[f>>>2]>>>24-8*(f%4)&255;e.push((g>>>4).toString(16));e.push((15&g).toString(16))}return e.join("")},
parse:function(b){for(var d=b.length,e=[],f=0;f<d;f+=2)e[f>>>3]|=parseInt(b.substr(f,2),16)<<24-4*(f%8);return new s.init(e,d/2)}},u=t.Latin1={stringify:function(b){var d=b.words;b=b.sigBytes;for(var e=[],f=0;f<b;f++)e.push(String.fromCharCode(d[f>>>2]>>>24-8*(f%4)&255));return e.join("")},parse:function(b){for(var d=b.length,e=[],f=0;f<d;f++)e[f>>>2]|=(255&b.charCodeAt(f))<<24-8*(f%4);return new s.init(e,d)}},x=t.Utf8={stringify:function(b){try{return decodeURIComponent(escape(u.stringify(b)))}catch(d){throw Error("Malformed UTF-8 data");
}},parse:function(b){return u.parse(unescape(encodeURIComponent(b)))}},D=r.BufferedBlockAlgorithm=q.extend({reset:function(){this._data=new s.init;this._nDataBytes=0},_append:function(b){"string"==typeof b&&(b=x.parse(b));this._data.concat(b);this._nDataBytes+=b.sigBytes},_process:function(b){var d=this._data,f=d.words,g=d.sigBytes,j=this.blockSize,m=g/(4*j),m=b?e.ceil(m):e.max((0|m)-this._minBufferSize,0);b=m*j;g=e.min(4*b,g);if(b){for(var n=0;n<b;n+=j)this._doProcessBlock(f,n);n=f.splice(0,b);d.sigBytes-=
g}return new s.init(n,g)},clone:function(){var b=q.clone.call(this);return b._data=this._data.clone(),b},_minBufferSize:0}),H=(r.Hasher=D.extend({cfg:q.extend(),init:function(b){this.cfg=this.cfg.extend(b);this.reset()},reset:function(){D.reset.call(this);this._doReset()},update:function(b){return this._append(b),this._process(),this},finalize:function(b){b&&this._append(b);return this._doFinalize()},blockSize:16,_createHelper:function(b){return function(d,e){return(new b.init(e)).finalize(d)}},_createHmacHelper:function(b){return function(d,
e){return(new H.HMAC.init(b,e)).finalize(d)}}}),d.algo={})}b.exports=d;!0},function(b,d,e){d=e(5);e=d.lib;var f=e.WordArray,m=e.Hasher,r=[];e=d.algo.SHA1=m.extend({_doReset:function(){this._hash=new f.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(b,d){for(var e=this._hash.words,f=e[0],g=e[1],j=e[2],l=e[3],m=e[4],n=0;80>n;n++){if(16>n)r[n]=0|b[d+n];else{var E=r[n-3]^r[n-8]^r[n-14]^r[n-16];r[n]=E<<1|E>>>31}E=(f<<5|f>>>27)+m+r[n];E+=20>n?(g&j|~g&l)+1518500249:
40>n?(g^j^l)+1859775393:60>n?(g&j|g&l|j&l)-1894007588:(g^j^l)-899497514;m=l;l=j;j=g<<30|g>>>2;g=f;f=E}e[0]=e[0]+f|0;e[1]=e[1]+g|0;e[2]=e[2]+j|0;e[3]=e[3]+l|0;e[4]=e[4]+m|0},_doFinalize:function(){var b=this._data,d=b.words,e=8*this._nDataBytes,f=8*b.sigBytes;return d[f>>>5]|=128<<24-f%32,d[(f+64>>>9<<4)+14]=Math.floor(e/4294967296),d[(f+64>>>9<<4)+15]=e,b.sigBytes=4*d.length,this._process(),this._hash},clone:function(){var b=m.clone.call(this);return b._hash=this._hash.clone(),b}});d.SHA1=m._createHelper(e);
d.HmacSHA1=m._createHmacHelper(e);b.exports=d.SHA1;!0},function(b,d,e){d=e(5);var f=d.enc.Utf8;d.algo.HMAC=d.lib.Base.extend({init:function(b,d){b=this._hasher=new b.init;"string"==typeof d&&(d=f.parse(d));var e=b.blockSize,g=4*e;d.sigBytes>g&&(d=b.finalize(d));d.clamp();for(var j=this._oKey=d.clone(),l=this._iKey=d.clone(),u=j.words,x=l.words,D=0;D<e;D++)u[D]^=1549556828,x[D]^=909522486;j.sigBytes=l.sigBytes=g;this.reset()},reset:function(){var b=this._hasher;b.reset();b.update(this._iKey)},update:function(b){return this._hasher.update(b),
this},finalize:function(b){var d=this._hasher;b=d.finalize(b);d.reset();return d.finalize(this._oKey.clone().concat(b))}});!0;b.exports=void 0;!0},function(b){var d={Latin1:{stringify:function(b){var d=b.words;b=b.sigBytes;for(var e=[],f=void 0,g=void 0,f=0;f<b;f++)g=d[f>>>2]>>>24-8*(f%4)&255,e.push(String.fromCharCode(g));return e.join("")}},_Utf8:{stringify:function(b){try{return decodeURIComponent(escape(d.Latin1.stringify(b)))}catch(e){throw Error("Malformed UTF-8 data");}}}};b.exports=d},function(b){var d=
{_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(b){var e="",f=void 0,g=void 0,q=void 0,s=void 0,t=f=void 0,v=void 0,u=0;for(b=d._utf8Encode(b);u<b.length;)f=b.charCodeAt(u++),g=b.charCodeAt(u++),q=b.charCodeAt(u++),s=f>>2,f=(3&f)<<4|g>>4,t=(15&g)<<2|q>>6,v=63&q,isNaN(g)?t=v=64:isNaN(q)&&(v=64),e=e+this._keyStr.charAt(s)+this._keyStr.charAt(f)+this._keyStr.charAt(t)+this._keyStr.charAt(v);return e},decode:function(b){var e="",f=void 0,g=void 0,q=void 0,
s=g=f=void 0,t=void 0,v=0;for(b=b.replace(/[^A-Za-z0-9\+\/\=]/g,"");v<b.length;)f=this._keyStr.indexOf(b.charAt(v++)),g=this._keyStr.indexOf(b.charAt(v++)),s=this._keyStr.indexOf(b.charAt(v++)),t=this._keyStr.indexOf(b.charAt(v++)),f=f<<2|g>>4,g=(15&g)<<4|s>>2,q=(3&s)<<6|t,e+=String.fromCharCode(f),64!==s&&(e+=String.fromCharCode(g)),64!==t&&(e+=String.fromCharCode(q));return d._utf8Decode(e)},_utf8Encode:function(b){b=b.replace(/\r\n/g,"\n");for(var d="",e=0;e<b.length;e++){var f=b.charCodeAt(e);
128>f?d+=String.fromCharCode(f):127<f&&2048>f?(d+=String.fromCharCode(f>>6|192),d+=String.fromCharCode(63&f|128)):(d+=String.fromCharCode(f>>12|224),d+=String.fromCharCode(f>>6&63|128),d+=String.fromCharCode(63&f|128))}return d},_utf8Decode:function(b){for(var d="",e=0,f=void 0,g=void 0,j=void 0,g=0;e<b.length;)f=b.charCodeAt(e),128>f?(d+=String.fromCharCode(f),e++):191<f&&224>f?(g=b.charCodeAt(e+1),d+=String.fromCharCode((31&f)<<6|63&g),e+=2):(g=b.charCodeAt(e+1),j=b.charCodeAt(e+2),d+=String.fromCharCode((15&
f)<<12|(63&g)<<6|63&j),e+=3);return d}};b.exports=d},function(b,d,e){var f,m=function(b,d){if(!q[b]){q[b]={};for(var e=0;e<b.length;e++)q[b][b.charAt(e)]=e}return q[b][d]},r=String.fromCharCode,q={},s={compressToBase64:function(b){if(null==b)return"";b=s._compress(b,6,function(b){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)});switch(b.length%4){default:case 0:return b;case 1:return b+"===";case 2:return b+"==";case 3:return b+"="}},decompressFromBase64:function(b){return null==
b?"":""==b?null:s._decompress(b.length,32,function(d){return m("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",b.charAt(d))})},compressToUTF16:function(b){return null==b?"":s._compress(b,15,function(b){return r(b+32)})+" "},decompressFromUTF16:function(b){return null==b?"":""==b?null:s._decompress(b.length,16384,function(d){return b.charCodeAt(d)-32})},compressToUint8Array:function(b){b=s.compress(b);for(var d=new Uint8Array(2*b.length),e=0,f=b.length;e<f;e++){var g=b.charCodeAt(e);
d[2*e]=g>>>8;d[2*e+1]=g%256}return d},decompressFromUint8Array:function(b){if(null===b||void 0===b)return s.decompress(b);for(var d=Array(b.length/2),e=0,f=d.length;e<f;e++)d[e]=256*b[2*e]+b[2*e+1];var g=[];return d.forEach(function(b){g.push(r(b))}),s.decompress(g.join(""))},compressToEncodedURIComponent:function(b){return null==b?"":s._compress(b,6,function(b){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(b)})},decompressFromEncodedURIComponent:function(b){return null==
b?"":""==b?null:(b=b.replace(/ /g,"+"),s._decompress(b.length,32,function(d){return m("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",b.charAt(d))}))},compress:function(b){return s._compress(b,16,function(b){return r(b)})},_compress:function(b,d,e){if(null==b)return"";var f,g,j,l={},m={},n="",q="",r="",s=2,O=3,P=2,G=[],A=0,J=0;for(j=0;j<b.length;j+=1)if(n=b.charAt(j),Object.prototype.hasOwnProperty.call(l,n)||(l[n]=O++,m[n]=!0),q=r+n,Object.prototype.hasOwnProperty.call(l,q))r=
q;else{if(Object.prototype.hasOwnProperty.call(m,r)){if(256>r.charCodeAt(0)){for(f=0;f<P;f++)A<<=1,J==d-1?(J=0,G.push(e(A)),A=0):J++;g=r.charCodeAt(0);for(f=0;8>f;f++)A=A<<1|1&g,J==d-1?(J=0,G.push(e(A)),A=0):J++,g>>=1}else{g=1;for(f=0;f<P;f++)A=A<<1|g,J==d-1?(J=0,G.push(e(A)),A=0):J++,g=0;g=r.charCodeAt(0);for(f=0;16>f;f++)A=A<<1|1&g,J==d-1?(J=0,G.push(e(A)),A=0):J++,g>>=1}s--;0==s&&(s=Math.pow(2,P),P++);delete m[r]}else{g=l[r];for(f=0;f<P;f++)A=A<<1|1&g,J==d-1?(J=0,G.push(e(A)),A=0):J++,g>>=1}s--;
0==s&&(s=Math.pow(2,P),P++);l[q]=O++;r=String(n)}if(""!==r){if(Object.prototype.hasOwnProperty.call(m,r)){if(256>r.charCodeAt(0)){for(f=0;f<P;f++)A<<=1,J==d-1?(J=0,G.push(e(A)),A=0):J++;g=r.charCodeAt(0);for(f=0;8>f;f++)A=A<<1|1&g,J==d-1?(J=0,G.push(e(A)),A=0):J++,g>>=1}else{g=1;for(f=0;f<P;f++)A=A<<1|g,J==d-1?(J=0,G.push(e(A)),A=0):J++,g=0;g=r.charCodeAt(0);for(f=0;16>f;f++)A=A<<1|1&g,J==d-1?(J=0,G.push(e(A)),A=0):J++,g>>=1}s--;0==s&&(s=Math.pow(2,P),P++);delete m[r]}else{g=l[r];for(f=0;f<P;f++)A=
A<<1|1&g,J==d-1?(J=0,G.push(e(A)),A=0):J++,g>>=1}s--;0==s&&(Math.pow(2,P),P++)}g=2;for(f=0;f<P;f++)A=A<<1|1&g,J==d-1?(J=0,G.push(e(A)),A=0):J++,g>>=1;for(;;){if(A<<=1,J==d-1){G.push(e(A));break}J++}return G.join("")},decompress:function(b){return null==b?"":""==b?null:s._decompress(b.length,32768,function(d){return b.charCodeAt(d)})},_decompress:function(b,d,e){var f,g,j,l,m,n,q=[],s=4,L=4,O=3;g="";var P=[],G=e(0),A=d,J=1;for(f=0;3>f;f+=1)q[f]=f;g=0;l=Math.pow(2,2);for(m=1;m!=l;)j=G&A,A>>=1,0==A&&
(A=d,G=e(J++)),g|=(0<j?1:0)*m,m<<=1;switch(g){case 0:g=0;l=Math.pow(2,8);for(m=1;m!=l;)j=G&A,A>>=1,0==A&&(A=d,G=e(J++)),g|=(0<j?1:0)*m,m<<=1;n=r(g);break;case 1:g=0;l=Math.pow(2,16);for(m=1;m!=l;)j=G&A,A>>=1,0==A&&(A=d,G=e(J++)),g|=(0<j?1:0)*m,m<<=1;n=r(g);break;case 2:return""}f=q[3]=n;for(P.push(n);;){if(J>b)return"";g=0;l=Math.pow(2,O);for(m=1;m!=l;)j=G&A,A>>=1,0==A&&(A=d,G=e(J++)),g|=(0<j?1:0)*m,m<<=1;switch(n=g){case 0:g=0;l=Math.pow(2,8);for(m=1;m!=l;)j=G&A,A>>=1,0==A&&(A=d,G=e(J++)),g|=(0<
j?1:0)*m,m<<=1;q[L++]=r(g);n=L-1;s--;break;case 1:g=0;l=Math.pow(2,16);for(m=1;m!=l;)j=G&A,A>>=1,0==A&&(A=d,G=e(J++)),g|=(0<j?1:0)*m,m<<=1;q[L++]=r(g);n=L-1;s--;break;case 2:return P.join("")}if(0==s&&(s=Math.pow(2,O),O++),q[n])g=q[n];else{if(n!==L)return null;g=f+f.charAt(0)}P.push(g);q[L++]=f+g.charAt(0);s--;f=g;0==s&&(s=Math.pow(2,O),O++)}}};f=s;d=function(){return f}.call(d,e,d,b);!(void 0!==d&&(b.exports=d))},function(b,d,e){d=e(5);e(12);e(13);e(14);e(15);e=d.lib.BlockCipher;for(var f=d.algo,
m=[],r=[],q=[],s=[],t=[],v=[],u=[],x=[],D=[],H=[],M=[],E=0;256>E;E++)128>E?M[E]=E<<1:M[E]=E<<1^283;for(var F=0,S=0,E=0;256>E;E++){var I=S^S<<1^S<<2^S<<3^S<<4,I=I>>>8^255&I^99;m[F]=I;r[I]=F;var L=M[F],O=M[L],P=M[O],G=257*M[I]^16843008*I;q[F]=G<<24|G>>>8;s[F]=G<<16|G>>>16;t[F]=G<<8|G>>>24;v[F]=G;G=16843009*P^65537*O^257*L^16843008*F;u[I]=G<<24|G>>>8;x[I]=G<<16|G>>>16;D[I]=G<<8|G>>>24;H[I]=G;F?(F=L^M[M[M[P^L]]],S^=M[M[S]]):F=S=1}!0;var A=[0,1,2,4,8,16,32,64,128,27,54],f=f.AES=e.extend({_doReset:function(){if(!this._nRounds||
this._keyPriorReset!==this._key){for(var b=this._keyPriorReset=this._key,d=b.words,e=b.sigBytes/4,b=4*((this._nRounds=e+6)+1),f=this._keySchedule=[],g=0;g<b;g++)if(g<e)f[g]=d[g];else{var j=f[g-1];g%e?6<e&&4==g%e&&(j=m[j>>>24]<<24|m[j>>>16&255]<<16|m[j>>>8&255]<<8|m[255&j]):(j=j<<8|j>>>24,j=m[j>>>24]<<24|m[j>>>16&255]<<16|m[j>>>8&255]<<8|m[255&j],j^=A[g/e|0]<<24);f[g]=f[g-e]^j}d=this._invKeySchedule=[];for(e=0;e<b;e++)g=b-e,j=e%4?f[g]:f[g-4],4>e||4>=g?d[e]=j:d[e]=u[m[j>>>24]]^x[m[j>>>16&255]]^D[m[j>>>
8&255]]^H[m[255&j]]}},encryptBlock:function(b,d){this._doCryptBlock(b,d,this._keySchedule,q,s,t,v,m)},decryptBlock:function(b,d){var e=b[d+1];b[d+1]=b[d+3];b[d+3]=e;this._doCryptBlock(b,d,this._invKeySchedule,u,x,D,H,r);e=b[d+1];b[d+1]=b[d+3];b[d+3]=e},_doCryptBlock:function(b,d,e,f,g,j,l,m){for(var n=this._nRounds,q=b[d]^e[0],r=b[d+1]^e[1],t=b[d+2]^e[2],s=b[d+3]^e[3],u=4,v=1;v<n;v++)var E=f[q>>>24]^g[r>>>16&255]^j[t>>>8&255]^l[255&s]^e[u++],x=f[r>>>24]^g[t>>>16&255]^j[s>>>8&255]^l[255&q]^e[u++],
F=f[t>>>24]^g[s>>>16&255]^j[q>>>8&255]^l[255&r]^e[u++],s=f[s>>>24]^g[q>>>16&255]^j[r>>>8&255]^l[255&t]^e[u++],q=E,r=x,t=F;E=(m[q>>>24]<<24|m[r>>>16&255]<<16|m[t>>>8&255]<<8|m[255&s])^e[u++];x=(m[r>>>24]<<24|m[t>>>16&255]<<16|m[s>>>8&255]<<8|m[255&q])^e[u++];F=(m[t>>>24]<<24|m[s>>>16&255]<<16|m[q>>>8&255]<<8|m[255&r])^e[u++];s=(m[s>>>24]<<24|m[q>>>16&255]<<16|m[r>>>8&255]<<8|m[255&t])^e[u++];b[d]=E;b[d+1]=x;b[d+2]=F;b[d+3]=s},keySize:8});d.AES=e._createHelper(f);b.exports=d.AES;!0},function(b,d,e){d=
e(5);var f=d.lib.WordArray;d.enc.Base64={stringify:function(b){var d=b.words,e=b.sigBytes,f=this._map;b.clamp();b=[];for(var g=0;g<e;g+=3)for(var j=(d[g>>>2]>>>24-8*(g%4)&255)<<16|(d[g+1>>>2]>>>24-8*((g+1)%4)&255)<<8|d[g+2>>>2]>>>24-8*((g+2)%4)&255,l=0;4>l&&g+0.75*l<e;l++)b.push(f.charAt(j>>>6*(3-l)&63));if(d=f.charAt(64))for(;b.length%4;)b.push(d);return b.join("")},parse:function(b){var d=b.length,e=this._map,g=this._reverseMap;if(!g)for(var g=this._reverseMap=[],j=0;j<e.length;j++)g[e.charCodeAt(j)]=
j;if(e=e.charAt(64))e=b.indexOf(e),-1!==e&&(d=e);for(var e=[],l=j=0;l<d;l++)if(l%4){var u=g[b.charCodeAt(l-1)]<<2*(l%4),x=g[b.charCodeAt(l)]>>>6-2*(l%4);e[j>>>2]|=(u|x)<<24-8*(j%4);j++}return f.create(e,j)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};b.exports=d.enc.Base64;!0},function(b,d,e){d=e(5);var f=Math,m=function(b,d,e,f,g,j,l){b=b+(d&e|~d&f)+g+l;return(b<<j|b>>>32-j)+d},r=function(b,d,e,f,g,j,l){b=b+(d&f|e&~f)+g+l;return(b<<j|b>>>32-j)+d},q=function(b,d,e,f,
g,j,l){b=b+(d^e^f)+g+l;return(b<<j|b>>>32-j)+d},s=function(b,d,e,f,g,j,l){b=b+(e^(d|~f))+g+l;return(b<<j|b>>>32-j)+d};e=d.lib;var t=e.WordArray,v=e.Hasher;e=d.algo;for(var u=[],x=0;64>x;x++)u[x]=4294967296*f.abs(f.sin(x+1))|0;!0;e=e.MD5=v.extend({_doReset:function(){this._hash=new t.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(b,d){for(var e=0;16>e;e++){var f=d+e,g=b[f];b[f]=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8)}var e=this._hash.words,f=b[d+0],g=b[d+1],j=
b[d+2],l=b[d+3],n=b[d+4],t=b[d+5],v=b[d+6],x=b[d+7],A=b[d+8],J=b[d+9],wa=b[d+10],xa=b[d+11],ya=b[d+12],aa=b[d+13],fa=b[d+14],X=b[d+15],B=e[0],z=e[1],y=e[2],C=e[3],B=m(B,z,y,C,f,7,u[0]),C=m(C,B,z,y,g,12,u[1]),y=m(y,C,B,z,j,17,u[2]),z=m(z,y,C,B,l,22,u[3]),B=m(B,z,y,C,n,7,u[4]),C=m(C,B,z,y,t,12,u[5]),y=m(y,C,B,z,v,17,u[6]),z=m(z,y,C,B,x,22,u[7]),B=m(B,z,y,C,A,7,u[8]),C=m(C,B,z,y,J,12,u[9]),y=m(y,C,B,z,wa,17,u[10]),z=m(z,y,C,B,xa,22,u[11]),B=m(B,z,y,C,ya,7,u[12]),C=m(C,B,z,y,aa,12,u[13]),y=m(y,C,B,z,
fa,17,u[14]),z=m(z,y,C,B,X,22,u[15]),B=r(B,z,y,C,g,5,u[16]),C=r(C,B,z,y,v,9,u[17]),y=r(y,C,B,z,xa,14,u[18]),z=r(z,y,C,B,f,20,u[19]),B=r(B,z,y,C,t,5,u[20]),C=r(C,B,z,y,wa,9,u[21]),y=r(y,C,B,z,X,14,u[22]),z=r(z,y,C,B,n,20,u[23]),B=r(B,z,y,C,J,5,u[24]),C=r(C,B,z,y,fa,9,u[25]),y=r(y,C,B,z,l,14,u[26]),z=r(z,y,C,B,A,20,u[27]),B=r(B,z,y,C,aa,5,u[28]),C=r(C,B,z,y,j,9,u[29]),y=r(y,C,B,z,x,14,u[30]),z=r(z,y,C,B,ya,20,u[31]),B=q(B,z,y,C,t,4,u[32]),C=q(C,B,z,y,A,11,u[33]),y=q(y,C,B,z,xa,16,u[34]),z=q(z,y,C,B,
fa,23,u[35]),B=q(B,z,y,C,g,4,u[36]),C=q(C,B,z,y,n,11,u[37]),y=q(y,C,B,z,x,16,u[38]),z=q(z,y,C,B,wa,23,u[39]),B=q(B,z,y,C,aa,4,u[40]),C=q(C,B,z,y,f,11,u[41]),y=q(y,C,B,z,l,16,u[42]),z=q(z,y,C,B,v,23,u[43]),B=q(B,z,y,C,J,4,u[44]),C=q(C,B,z,y,ya,11,u[45]),y=q(y,C,B,z,X,16,u[46]),z=q(z,y,C,B,j,23,u[47]),B=s(B,z,y,C,f,6,u[48]),C=s(C,B,z,y,x,10,u[49]),y=s(y,C,B,z,fa,15,u[50]),z=s(z,y,C,B,t,21,u[51]),B=s(B,z,y,C,ya,6,u[52]),C=s(C,B,z,y,l,10,u[53]),y=s(y,C,B,z,wa,15,u[54]),z=s(z,y,C,B,g,21,u[55]),B=s(B,z,
y,C,A,6,u[56]),C=s(C,B,z,y,X,10,u[57]),y=s(y,C,B,z,v,15,u[58]),z=s(z,y,C,B,aa,21,u[59]),B=s(B,z,y,C,n,6,u[60]),C=s(C,B,z,y,xa,10,u[61]),y=s(y,C,B,z,j,15,u[62]),z=s(z,y,C,B,J,21,u[63]);e[0]=e[0]+B|0;e[1]=e[1]+z|0;e[2]=e[2]+y|0;e[3]=e[3]+C|0},_doFinalize:function(){var b=this._data,d=b.words,e=8*this._nDataBytes,g=8*b.sigBytes;d[g>>>5]|=128<<24-g%32;var j=f.floor(e/4294967296);d[(g+64>>>9<<4)+15]=16711935&(j<<8|j>>>24)|4278255360&(j<<24|j>>>8);d[(g+64>>>9<<4)+14]=16711935&(e<<8|e>>>24)|4278255360&(e<<
24|e>>>8);b.sigBytes=4*(d.length+1);this._process();b=this._hash;d=b.words;for(e=0;4>e;e++)g=d[e],d[e]=16711935&(g<<8|g>>>24)|4278255360&(g<<24|g>>>8);return b},clone:function(){var b=v.clone.call(this);return b._hash=this._hash.clone(),b}});d.MD5=v._createHelper(e);d.HmacMD5=v._createHmacHelper(e);b.exports=d.MD5;!0},function(b,d,e){d=e(5);e(6);e(7);var f=d.lib;e=f.Base;var m=f.WordArray,f=d.algo,r=f.EvpKDF=e.extend({cfg:e.extend({keySize:4,hasher:f.MD5,iterations:1}),init:function(b){this.cfg=this.cfg.extend(b)},
compute:function(b,d){for(var e=this.cfg,f=e.hasher.create(),g=m.create(),j=g.words,l=e.keySize,e=e.iterations;j.length<l;){n&&f.update(n);var n=f.update(b).finalize(d);f.reset();for(var r=1;r<e;r++)n=f.finalize(n),f.reset();g.concat(n)}return g.sigBytes=4*l,g}});d.EvpKDF=function(b,d,e){return r.create(e).compute(b,d)};b.exports=d.EvpKDF;!0},function(b,d,e){e=e(5);if(!e.lib.Cipher){d=e.lib;var f=d.Base,m=d.WordArray,r=d.BufferedBlockAlgorithm,q=e.enc,s=(q.Utf8,q.Base64),t=e.algo.EvpKDF,v=d.Cipher=
r.extend({cfg:f.extend(),createEncryptor:function(b,d){return this.create(this._ENC_XFORM_MODE,b,d)},createDecryptor:function(b,d){return this.create(this._DEC_XFORM_MODE,b,d)},init:function(b,d,e){this.cfg=this.cfg.extend(e);this._xformMode=b;this._key=d;this.reset()},reset:function(){r.reset.call(this);this._doReset()},process:function(b){return this._append(b),this._process()},finalize:function(b){b&&this._append(b);return this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,
_createHelper:function(b){return{encrypt:function(d,e,f){return("string"==typeof e?M:H).encrypt(b,d,e,f)},decrypt:function(d,e,f){return("string"==typeof e?M:H).decrypt(b,d,e,f)}}}}),q=(d.StreamCipher=v.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),e.mode={}),u,x=function(b,d,e){var f=this._iv;f?this._iv=void 0:f=this._prevBlock;for(var g=0;g<e;g++)b[d+g]^=f[g]};u=(d.BlockCipherMode=f.extend({createEncryptor:function(b,d){return this.Encryptor.create(b,d)},createDecryptor:function(b,
d){return this.Decryptor.create(b,d)},init:function(b,d){this._cipher=b;this._iv=d}})).extend();u=(u.Encryptor=u.extend({processBlock:function(b,d){var e=this._cipher,f=e.blockSize;x.call(this,b,d,f);e.encryptBlock(b,d);this._prevBlock=b.slice(d,d+f)}}),u.Decryptor=u.extend({processBlock:function(b,d){var e=this._cipher,f=e.blockSize,g=b.slice(d,d+f);e.decryptBlock(b,d);x.call(this,b,d,f);this._prevBlock=g}}),u);q=q.CBC=u;u=(e.pad={}).Pkcs7={pad:function(b,d){for(var e=4*d,e=e-b.sigBytes%e,f=e<<24|
e<<16|e<<8|e,g=[],j=0;j<e;j+=4)g.push(f);e=m.create(g,e);b.concat(e)},unpad:function(b){b.sigBytes-=255&b.words[b.sigBytes-1>>>2]}};var D=(d.BlockCipher=v.extend({cfg:v.cfg.extend({mode:q,padding:u}),reset:function(){v.reset.call(this);var b=this.cfg,d=b.iv,b=b.mode;if(this._xformMode==this._ENC_XFORM_MODE)var e=b.createEncryptor;else e=b.createDecryptor,this._minBufferSize=1;this._mode=e.call(b,this,d&&d.words)},_doProcessBlock:function(b,d){this._mode.processBlock(b,d)},_doFinalize:function(){var b=
this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){b.pad(this._data,this.blockSize);var d=this._process(!0)}else d=this._process(!0),b.unpad(d);return d},blockSize:4}),d.CipherParams=f.extend({init:function(b){this.mixIn(b)},toString:function(b){return(b||this.formatter).stringify(this)}})),q=(e.format={}).OpenSSL={stringify:function(b){var d=b.ciphertext;b=b.salt;return(b?m.create([1398893684,1701076831]).concat(b).concat(d):d).toString(s)},parse:function(b){b=s.parse(b);var d=b.words;if(1398893684==
d[0]&&1701076831==d[1]){var e=m.create(d.slice(2,4));d.splice(0,4);b.sigBytes-=16}return D.create({ciphertext:b,salt:e})}},H=d.SerializableCipher=f.extend({cfg:f.extend({format:q}),encrypt:function(b,d,e,f){f=this.cfg.extend(f);var g=b.createEncryptor(e,f);d=g.finalize(d);g=g.cfg;return D.create({ciphertext:d,key:e,iv:g.iv,algorithm:b,mode:g.mode,padding:g.padding,blockSize:b.blockSize,formatter:f.format})},decrypt:function(b,d,e,f){f=this.cfg.extend(f);d=this._parse(d,f.format);return b.createDecryptor(e,
f).finalize(d.ciphertext)},_parse:function(b,d){return"string"==typeof b?d.parse(b,this):b}});e=(e.kdf={}).OpenSSL={execute:function(b,d,e,f){f||(f=m.random(8));b=t.create({keySize:d+e}).compute(b,f);e=m.create(b.words.slice(d),4*e);return b.sigBytes=4*d,D.create({key:b,iv:e,salt:f})}};var M=d.PasswordBasedCipher=H.extend({cfg:H.cfg.extend({kdf:e}),encrypt:function(b,d,e,f){f=this.cfg.extend(f);e=f.kdf.execute(e,b.keySize,b.ivSize);f.iv=e.iv;b=H.encrypt.call(this,b,d,e.key,f);return b.mixIn(e),b},
decrypt:function(b,d,e,f){f=this.cfg.extend(f);d=this._parse(d,f.format);e=f.kdf.execute(e,b.keySize,b.ivSize,d.salt);f.iv=e.iv;return H.decrypt.call(this,b,d,e.key,f)}})}b.exports=void 0;!0},function(b,d,e){d=e(5);e(12);e(13);e(14);e(15);var f=function(b,d){var e=(this._lBlock>>>b^this._rBlock)&d;this._rBlock^=e;this._lBlock^=e<<b},m=function(b,d){var e=(this._rBlock>>>b^this._lBlock)&d;this._lBlock^=e;this._rBlock^=e<<b};e=d.lib;var r=e.WordArray;e=e.BlockCipher;var q=d.algo,s=[57,49,41,33,25,17,
9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],t=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],v=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{"0":8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,
2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,
2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{"0":1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,
117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,
335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},
{"0":260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,
18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{"0":2151682048,65536:2147487808,
131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,
1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{"0":128,4096:17039360,8192:262144,
12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,
90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{"0":268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,
2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,
4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{"0":1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,
184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{"0":134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,
9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,
29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],x=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],D=q.DES=e.extend({_doReset:function(){for(var b=this._key.words,d=[],e=0;56>e;e++){var f=s[e]-1;d[e]=
b[f>>>5]>>>31-f%32&1}b=this._subKeys=[];for(f=0;16>f;f++){for(var g=b[f]=[],j=v[f],e=0;24>e;e++)g[e/6|0]|=d[(t[e]-1+j)%28]<<31-e%6,g[4+(e/6|0)]|=d[28+(t[e+24]-1+j)%28]<<31-e%6;g[0]=g[0]<<1|g[0]>>>31;for(e=1;7>e;e++)g[e]>>>=4*(e-1)+3;g[7]=g[7]<<5|g[7]>>>27}d=this._invSubKeys=[];for(e=0;16>e;e++)d[e]=b[15-e]},encryptBlock:function(b,d){this._doCryptBlock(b,d,this._subKeys)},decryptBlock:function(b,d){this._doCryptBlock(b,d,this._invSubKeys)},_doCryptBlock:function(b,d,e){this._lBlock=b[d];this._rBlock=
b[d+1];f.call(this,4,252645135);f.call(this,16,65535);m.call(this,2,858993459);m.call(this,8,16711935);f.call(this,1,1431655765);for(var g=0;16>g;g++){for(var j=e[g],l=this._lBlock,q=this._rBlock,r=0,t=0;8>t;t++)r|=u[t][((q^j[t])&x[t])>>>0];this._lBlock=q;this._rBlock=l^r}e=this._lBlock;this._lBlock=this._rBlock;this._rBlock=e;f.call(this,1,1431655765);m.call(this,8,16711935);m.call(this,2,858993459);f.call(this,16,65535);f.call(this,4,252645135);b[d]=this._lBlock;b[d+1]=this._rBlock},keySize:2,ivSize:2,
blockSize:2});d.DES=e._createHelper(D);q=q.TripleDES=e.extend({_doReset:function(){var b=this._key.words;this._des1=D.createEncryptor(r.create(b.slice(0,2)));this._des2=D.createEncryptor(r.create(b.slice(2,4)));this._des3=D.createEncryptor(r.create(b.slice(4,6)))},encryptBlock:function(b,d){this._des1.encryptBlock(b,d);this._des2.decryptBlock(b,d);this._des3.encryptBlock(b,d)},decryptBlock:function(b,d){this._des3.decryptBlock(b,d);this._des2.encryptBlock(b,d);this._des1.decryptBlock(b,d)},keySize:6,
ivSize:2,blockSize:2});d.TripleDES=e._createHelper(q);b.exports=d.TripleDES;!0},function(b,d,e){d=e(5);e(12);e(13);e(14);e(15);var f=function(){for(var b=this._X,d=this._C,e=0;8>e;e++)r[e]=d[e];d[0]=d[0]+1295307597+this._b|0;d[1]=d[1]+3545052371+(d[0]>>>0<r[0]>>>0?1:0)|0;d[2]=d[2]+886263092+(d[1]>>>0<r[1]>>>0?1:0)|0;d[3]=d[3]+1295307597+(d[2]>>>0<r[2]>>>0?1:0)|0;d[4]=d[4]+3545052371+(d[3]>>>0<r[3]>>>0?1:0)|0;d[5]=d[5]+886263092+(d[4]>>>0<r[4]>>>0?1:0)|0;d[6]=d[6]+1295307597+(d[5]>>>0<r[5]>>>0?1:0)|
0;d[7]=d[7]+3545052371+(d[6]>>>0<r[6]>>>0?1:0)|0;this._b=d[7]>>>0<r[7]>>>0?1:0;for(e=0;8>e;e++){var f=b[e]+d[e],g=65535&f,j=f>>>16;q[e]=((g*g>>>17)+g*j>>>15)+j*j^((4294901760&f)*f|0)+((65535&f)*f|0)}b[0]=q[0]+(q[7]<<16|q[7]>>>16)+(q[6]<<16|q[6]>>>16)|0;b[1]=q[1]+(q[0]<<8|q[0]>>>24)+q[7]|0;b[2]=q[2]+(q[1]<<16|q[1]>>>16)+(q[0]<<16|q[0]>>>16)|0;b[3]=q[3]+(q[2]<<8|q[2]>>>24)+q[1]|0;b[4]=q[4]+(q[3]<<16|q[3]>>>16)+(q[2]<<16|q[2]>>>16)|0;b[5]=q[5]+(q[4]<<8|q[4]>>>24)+q[3]|0;b[6]=q[6]+(q[5]<<16|q[5]>>>16)+
(q[4]<<16|q[4]>>>16)|0;b[7]=q[7]+(q[6]<<8|q[6]>>>24)+q[5]|0};e=d.lib.StreamCipher;var m=[],r=[],q=[],s=d.algo.Rabbit=e.extend({_doReset:function(){for(var b=this._key.words,d=this.cfg.iv,e=0;4>e;e++)b[e]=16711935&(b[e]<<8|b[e]>>>24)|4278255360&(b[e]<<24|b[e]>>>8);for(var g=this._X=[b[0],b[3]<<16|b[2]>>>16,b[1],b[0]<<16|b[3]>>>16,b[2],b[1]<<16|b[0]>>>16,b[3],b[2]<<16|b[1]>>>16],b=this._C=[b[2]<<16|b[2]>>>16,4294901760&b[0]|65535&b[1],b[3]<<16|b[3]>>>16,4294901760&b[1]|65535&b[2],b[0]<<16|b[0]>>>16,
4294901760&b[2]|65535&b[3],b[1]<<16|b[1]>>>16,4294901760&b[3]|65535&b[0]],e=this._b=0;4>e;e++)f.call(this);for(e=0;8>e;e++)b[e]^=g[e+4&7];if(d){var e=d.words,d=e[0],e=e[1],d=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),e=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8),g=d>>>16|4294901760&e,j=e<<16|65535&d;b[0]^=d;b[1]^=g;b[2]^=e;b[3]^=j;b[4]^=d;b[5]^=g;b[6]^=e;b[7]^=j;for(e=0;4>e;e++)f.call(this)}},_doProcessBlock:function(b,d){var e=this._X;f.call(this);m[0]=e[0]^e[5]>>>16^e[3]<<16;m[1]=e[2]^
e[7]>>>16^e[5]<<16;m[2]=e[4]^e[1]>>>16^e[7]<<16;m[3]=e[6]^e[3]>>>16^e[1]<<16;for(e=0;4>e;e++)m[e]=16711935&(m[e]<<8|m[e]>>>24)|4278255360&(m[e]<<24|m[e]>>>8),b[d+e]^=m[e]},blockSize:4,ivSize:2});d.Rabbit=e._createHelper(s);b.exports=d.Rabbit;!0},function(b,d,e){d=e(5);e(12);e(13);e(14);e(15);var f=function(){for(var b=this._S,d=this._i,e=this._j,f=0,g=0;4>g;g++){var d=(d+1)%256,e=(e+b[d])%256,j=b[d];b[d]=b[e];b[e]=j;f|=b[(b[d]+b[e])%256]<<24-8*g}return this._i=d,this._j=e,f};e=d.lib.StreamCipher;
var m=d.algo,r=m.RC4=e.extend({_doReset:function(){for(var b=this._key,d=b.words,b=b.sigBytes,e=this._S=[],f=0;256>f;f++)e[f]=f;for(var g=f=0;256>f;f++){var j=f%b,g=(g+e[f]+(d[j>>>2]>>>24-8*(j%4)&255))%256,j=e[f];e[f]=e[g];e[g]=j}this._i=this._j=0},_doProcessBlock:function(b,d){b[d]^=f.call(this)},keySize:8,ivSize:0});d.RC4=e._createHelper(r);m=m.RC4Drop=r.extend({cfg:r.cfg.extend({drop:192}),_doReset:function(){r._doReset.call(this);for(var b=this.cfg.drop;0<b;b--)f.call(this)}});d.RC4Drop=e._createHelper(m);
b.exports=d.RC4;!0}],e=function(g){if(f[g])return f[g].exports;var j=f[g]={exports:{},id:g,loaded:!1};return b[g].call(j.exports,j,j.exports,e),j.loaded=!0,j.exports},f={};return e.m=b,e.c=f,e.p="",e(0)};"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define("SecureLS",[],b):"object"==typeof exports?exports.SecureLS=b():this.SecureLS=b();!0})();null!==SecureLS&&"undefined"!==typeof SecureLS&&(ig.global.SecureLS=SecureLS,ig.SecureLS=SecureLS)});
ig.baked=!0;
ig.module("plugins.io.storage-manager").requires("impact.game","plugins.io.io-manager","plugins.secure-ls").defines(function(){ig.secure=new SecureLS({encodingType:"aes"});ig.Game.prototype.name=_GAMESETTING._LOCALSTORAGE_KEY;ig.Game.prototype.version="1.0.0";ig.Game.prototype.sessionData={};ig.Game.prototype.hash=function(b){var d=0,e,f;if(0===b.length)return d;for(e=0;e<b.length;e++)f=b.charCodeAt(e),d=(d<<5)-d+f,d|=0;return d.toString(36)};ig.Game.prototype.initData=function(){return this.sessionData={sfx:1,
bgm:1,level:1,score:0}};ig.Game.prototype.setupStorageManager=function(){"undefined"!==typeof this.name&&"undefined"!==typeof this.version&&(this.io||(this.io=new IoManager),this.storage=this.io.storage,this.storageName=this.hash(this.name+"-v"+this.version).replace("-","s"),this.loadAll())};ig.Game.prototype.loadAll=function(){var b=ig.secure.get(this.storageName);""==b?(this.initData(),this.saveAll()):this.sessionData=JSON.parse(b)};ig.Game.prototype.saveAll=function(){ig.secure.set(this.storageName,
JSON.stringify(this.sessionData))};ig.Game.prototype.load=function(b){return this.sessionData[b]};ig.Game.prototype.save=function(b,d){this.sessionData[b]=d;this.saveAll()}});ig.baked=!0;
ig.module("plugins.splash-loader").requires("impact.loader","impact.animation").defines(function(){ig.SplashLoader=ig.Loader.extend({tapToStartDivId:"tap-to-start",counterLoading:0,modLoading:10,numLoading:0,boolReloadBG:!0,bar:{},stageSize:{x:0,y:0},title:new ig.Image(_RESOURCESINFO.image.brand),init:function(b,d){this.parent(b,d);d.push(new ig.Image(_RESOURCESINFO.image.vc1));d.push(new ig.Image(_RESOURCESINFO.image.vc2));d.push(new ig.Image(_RESOURCESINFO.image.vc3));_DATAGAME.simplifiedUI||(d.push(new ig.Image(_RESOURCESINFO.image.bgChapter1)),
d.push(new ig.Image(_RESOURCESINFO.image.bgChapter2)),d.push(new ig.Image(_RESOURCESINFO.image.bgChapter3)));(!_DATAGAME.simplifiedUI||_DATAGAME.enableTitleLoader)&&d.push(new ig.Image(_RESOURCESINFO.image.title));_DATAGAME.enableTitleLoader&&(this.title=new ig.Image(_RESOURCESINFO.image.title));d.push(new ig.Image(_BASEPATH.backgroundMenu+_RESOURCESINFO.image.bgMenu));if(!_DATAGAME.isLinearChapter||_DATAGAME.isLinearChapter&&_DATAGAME.linearChapterWithThumbnail)try{$.ajax(_BASEPATH.text+"translate/chapter_list.en.js",
{success:this.handleSuccessChapterList.bind(this,d),error:this.handleErrorChapterList.bind(this)})}catch(e){}this.repos();ig.apiHandler.run("MJSPreroll")},handleSuccessChapterList:function(b,d){console.log("success");var e=JSON.parse(d.substring(28,d.length-1));if(null!=d)for(var f=0;f<e.length;f++)b.push(new ig.Image(_BASEPATH.thumbnail+e[f].thumbnail))},handleErrorChapterList:function(){console.log("error")},end:function(){this._endParent=this.parent;this._drawStatus=1;_SETTINGS.TapToStartAudioUnlock.Enabled?
this.tapToStartDiv(function(){this._endParent();("undefined"===typeof ig.game||null==ig.game)&&ig.system.setGame(this.gameClass)}.bind(this)):(this._endParent(),("undefined"===typeof ig.game||null==ig.game)&&ig.system.setGame(this.gameClass));this.draw()},tapToStartDiv:function(b){this.desktopCoverDIV=document.getElementById(this.tapToStartDivId);if(!this.desktopCoverDIV){this.desktopCoverDIV=document.createElement("div");this.desktopCoverDIV.id=this.tapToStartDivId;this.desktopCoverDIV.setAttribute("class",
"play");this.desktopCoverDIV.setAttribute("style","position: absolute; display: block; z-index: 999999; background-color: rgba(23, 32, 53, 0.7); visibility: visible; font-size: 10vmin; text-align: center; vertical-align: middle; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;");this.desktopCoverDIV.innerHTML="<div style='color:white;background-color: rgba(255, 255, 255, 0.3); border: 2px solid #fff; font-size:20px; border-radius: 5px; position: relative; float: left; top: 50%; left: 50%; transform: translate(-50%, -50%);'><div style='padding:20px 50px; font-family: montserrat;'>"+
_STRINGS.Splash.TapToStart+"</div></div>";(document.getElementById("play").parentNode||document.getElementById("ajaxbar")).appendChild(this.desktopCoverDIV);try{"undefined"!==typeof ig.sizeHandler?"undefined"!==typeof ig.sizeHandler.coreDivsToResize&&(ig.sizeHandler.coreDivsToResize.push("#"+this.tapToStartDivId),"function"===typeof ig.sizeHandler.reorient&&ig.sizeHandler.reorient()):"undefined"!==typeof coreDivsToResize&&(coreDivsToResize.push(this.tapToStartDivId),"function"===typeof sizeHandler&&
sizeHandler())}catch(d){console.log(d)}this.desktopCoverDIV.addEventListener("click",function(){ig.soundHandler.unlockWebAudio();this.setAttribute("style","visibility: hidden;");"function"===typeof b&&b()})}},repos:function(){this.bar.w=0.25*ig.system.width;this.bar.h=30*_DATAGAME.ratioRes;this.bar.x=(ig.system.width-this.bar.w)/2;this.bar.y=0.67*ig.system.height;this.stageSize.x=ig.system.width;this.stageSize.y=ig.system.height},drawCheck:0,bgLoad:0,draw:function(){(ig.system.width!=this.stageSize.x||
ig.system.height!=this.stageSize.y)&&this.repos();this._drawStatus+=(this.status-this._drawStatus)/5;1===this.drawCheck&&console.log("Font should be loaded before loader draw loop");2>this.drawCheck&&this.drawCheck++;ig.system.context.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].basebg;ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);if(0<this.title.width){var b=_DATAGAME.enableTitleLoader?this.title.width:_DATAGAME.brandWidth,d=this.title.height*(b/this.title.width),e=1;_DATAGAME.enableTitleLoader&&
(ig.system.width<this.title.width&&(e=ig.sizeHandler.minW/this.title.width),b=this.title.width,d=this.title.height);this.title.draw(0.5*(ig.system.width-b*e),0.35*ig.system.height-0.5*d*e,0,0,this.title.width,this.title.height,b*e,d*e)}d=ig.system.scale;ig.system.context.lineWidth=1.5*this.bar.h;ig.system.context.lineCap="round";ig.system.context.strokeStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].barStroke;ig.system.context.beginPath();ig.system.context.moveTo(this.bar.x,this.bar.y);ig.system.context.lineTo(this.bar.x+
this.bar.w,this.bar.y);ig.system.context.stroke();ig.system.context.closePath();ig.system.context.lineWidth=this.bar.h;ig.system.context.strokeStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].bar;ig.system.context.beginPath();ig.system.context.moveTo(this.bar.x,this.bar.y);ig.system.context.lineTo(this.bar.x+this.bar.w*this._drawStatus,this.bar.y);ig.system.context.stroke();ig.system.context.closePath();ig.system.context.fillStyle="#000";ig.system.context.font=16*_DATAGAME.ratioRes+"px montserrat";ig.system.context.fillStyle=
_DATAGAME.uiColor[_DATAGAME.uiTheme].barStroke;ig.system.context.font=25*_DATAGAME.ratioRes+"px metroblack";b=ig.system.width/2-ig.system.context.measureText("Loading engine . . .").width/2;d=this.bar.y*d-40*_DATAGAME.ratioRes;e="";0==this.numLoading?e="":1==this.numLoading?e=".":2==this.numLoading?e=". .":3==this.numLoading&&(e=". . .");ig.system.context.fillText("Loading engine "+e,b,d);this.counterLoading++;0==this.counterLoading%this.modLoading&&this.numLoading++;4<=this.numLoading&&(this.numLoading=
0);this.drawVersion()},drawVersion:function(){if("undefined"!==typeof _SETTINGS.Versioning&&null!==_SETTINGS.Versioning&&_SETTINGS.Versioning.DrawVersion){var b=ig.system.context;fontSize=_SETTINGS.Versioning.FontSize;fontFamily=_SETTINGS.Versioning.FontFamily;fillStyle=_SETTINGS.Versioning.FillStyle;b.save();b.textBaseline="bottom";b.textAlign="left";b.font=fontSize+" "+fontFamily||"10px Arial";b.fillStyle=fillStyle||"#ffffff";b.fillText("v"+_SETTINGS.Versioning.Version+"+build."+_SETTINGS.Versioning.Build,
10,ig.system.height-10);b.restore()}}})});ig.baked=!0;
ig.module("plugins.custom-loader").requires("impact.game").defines(function(){ig.Game.inject({statusLoad:[0],counterLoading:0,modLoading:10,numLoading:0,totalItems:0,totalLoaded:0,isDrawLoadingScreen:!1,bar:{},title:new ig.Image(_RESOURCESINFO.image.brand),isLoading:!1,loadAssets:function(){_CUSTOMLOAD.Chapter.map(function(b){return b.chapterID}).indexOf("Chapter"+ig.game.numChapter);null==_STRINGS["Chapter"+ig.game.numChapter]?(this.isLoading=!1,jQuery.getScript(_GAMESETTING._BASEPATH.text+"translate/chapter"+
ig.game.numChapter+".en.js",function(){ig.game.languageSelector.fnAssignLanguage();this.handleLoadAssets()}.bind(this))):this.handleLoadAssets()},handleLoadAssets:function(){this.isLoading=!0;this.numLoading=0;var b=[],d=[],e=[],f=_CUSTOMLOAD.Chapter.map(function(b){return b.chapterID}).indexOf("Chapter"+ig.game.numChapter);(!_DATAGAME.simplifiedUI||_DATAGAME.enableTitleLoader)&&b.push(new ig.Image(_RESOURCESINFO.image.title));_DATAGAME.enableTitleLoader&&(this.title=new ig.Image(_RESOURCESINFO.image.title));
if(_DATAGAME.enableVoiceOver&&null!=_CUSTOMLOAD.Chapter[f].voiceover&&0<_CUSTOMLOAD.Chapter[f].voiceover.length)for(var g=0;g<_CUSTOMLOAD.Chapter[f].voiceover.length;g++){var j=_CUSTOMLOAD.Chapter[f].voiceover[g],l="chapter"+ig.game.numChapter+"_"+j;0<=_DATAGAME.dynamic_name.indexOf(_STRINGS["Chapter"+ig.game.numChapter][j].charTalk)?(ig.soundHandler.soundInfo.sfx[l+"_boy"]={path:_BASEPATH.voiceover+l+"_boy"},ig.soundHandler.soundInfo.sfx[l+"_girl"]={path:_BASEPATH.voiceover+l+"_girl"},ig.soundHandler.sfxPlayer.addAudioData(ig.soundHandler.soundInfo.sfx[l+
"_boy"],l+"_boy"),ig.soundHandler.sfxPlayer.addAudioData(ig.soundHandler.soundInfo.sfx[l+"_girl"],l+"_girl"),d.push(ig.soundHandler.sfxPlayer.loadSound(l+"_boy")),d.push(ig.soundHandler.sfxPlayer.loadSound(l+"_girl"))):(ig.soundHandler.soundInfo.sfx[l]={path:_BASEPATH.voiceover+l},ig.soundHandler.sfxPlayer.addAudioData(ig.soundHandler.soundInfo.sfx[l],l),d.push(ig.soundHandler.sfxPlayer.loadSound(l)))}if(null!=_CUSTOMLOAD.Chapter[f].object&&0<_CUSTOMLOAD.Chapter[f].object.length)for(g=0;g<_CUSTOMLOAD.Chapter[f].object.length;g++)b.push(new ig.Image(_BASEPATH.object+
_CUSTOMLOAD.Chapter[f].object[g]+".png"));if(null!=_CUSTOMLOAD.Chapter[f].bg&&0<_CUSTOMLOAD.Chapter[f].bg.length)for(g=0;g<_CUSTOMLOAD.Chapter[f].bg.length;g++){j=_BASEPATH.background+_CUSTOMLOAD.Chapter[f].bg[g];l=_CUSTOMLOAD.Chapter[f].bg[g];try{$.ajax(j+".jpg",{success:this.handleSuccess.bind(this,l,b),error:this.handleError.bind(this,l,b)})}catch(n){}}if(null!=_CUSTOMLOAD.Chapter[f].sfx&&0<_CUSTOMLOAD.Chapter[f].sfx.length)for(g=0;g<_CUSTOMLOAD.Chapter[f].sfx.length;g++)j=_CUSTOMLOAD.Chapter[f].sfx[g],
ig.soundHandler.soundInfo.sfx[j]={path:_BASEPATH.sfx+j},ig.soundHandler.sfxPlayer.addAudioData(ig.soundHandler.soundInfo.sfx[j],j),d.push(ig.soundHandler.sfxPlayer.loadSound(j));if(null!=_CUSTOMLOAD.Chapter[f].bgm&&0<_CUSTOMLOAD.Chapter[f].bgm.length)for(g=0;g<_CUSTOMLOAD.Chapter[f].bgm.length;g++)j=_CUSTOMLOAD.Chapter[f].bgm[g].replaceAll("-",""),ig.soundHandler.soundInfo.bgm[j]={path:_BASEPATH.bgm+_CUSTOMLOAD.Chapter[f].bgm[g],loop:!0},ig.soundHandler.bgmPlayer.addAudioData(ig.soundHandler.soundInfo.bgm[j],
j),e.push(ig.soundHandler.bgmPlayer.loadSound(j));g=[];j=[];if(null!=_CUSTOMLOAD.Chapter[f].outfit&&0<_CUSTOMLOAD.Chapter[f].outfit.length)for(l=0;l<_CUSTOMLOAD.Chapter[f].outfit.length;l++){var m=_CUSTOMLOAD.Chapter[f].outfit[l].toLowerCase(),m=m.replaceAll(" ","");null!=_DATAGAME.spriterData[m].girl&&j.push(m);null!=_DATAGAME.spriterData[m].boy&&g.push(m)}if(null!=_CUSTOMLOAD.Chapter[f].character&&0<_CUSTOMLOAD.Chapter[f].character.length)for(l=0;l<_CUSTOMLOAD.Chapter[f].character.length;l++){var m=
_CUSTOMLOAD.Chapter[f].character[l],r=m.toLowerCase(),r=r.replaceAll(" ","");0<=_DATAGAME.dynamic_name.indexOf(m)?(j.push(m),g.push(m)):0<=_DATAGAME.neutral_girl.indexOf(m)?j.push(m):0<=_DATAGAME.neutral_boy.indexOf(m)&&g.push(m)}0<j.length&&this.loadBlank(j,b);null!=_CUSTOMLOAD.Chapter[f].duTheme&&0<_CUSTOMLOAD.Chapter[f].duTheme.length&&this.loadGirlSpriter(_CUSTOMLOAD.Chapter[f].duTheme,b);0<j.length&&this.loadGirlSpriter(j,b);0<g.length&&this.loadBoySpriter(g,b);this.resetLoadScreen(b,d,e)},handleSuccess:function(b,
d){d.push(new ig.Image(_BASEPATH.background+b+".jpg"));_DATAGAME.BGFileType[b]="jpg"},handleError:function(b,d){d.push(new ig.Image(_BASEPATH.background+b+".png"));_DATAGAME.BGFileType[b]="png"},loadBlank:function(){},loadBoySpriter:function(b,d){for(var e=0;e<b.length;e++)for(var f=b[e].toLowerCase(),f=f.replaceAll(" ",""),g=1;13>=g;g++){var j="skin";2==g?j="face":3==g?j="hair":4==g?j="top":5==g?j="bottom":6==g?j="shoes":7==g?j="glasses":8==g?j="earrings":9==g?j="hat":10==g?j="beard":11==g?j="anklet":
12==g?j="bracelet":13==g&&(j="necklace");if(!(7<=g&&null==_DATAGAME.spriterData[f].boy[j]))for(var l=0;l<_DATAGAME.boyPart[g].length;l++)5==g&&"0_leg-left-cross"==_DATAGAME.boyPart[g][l]||5==g&&"0_leg-right-cross"==_DATAGAME.boyPart[g][l]||d.push(new ig.Image(_BASEPATH.spriter+"boy/"+_DATAGAME.spriterData[f].boy[j]+"/"+_DATAGAME.boyPart[g][l]+".png"));if((1==g||2==g||10==g||8==g||7==g||3==g||9==g)&&null!=_DATAGAME.spriterData[f].boy[j])d.push(new ig.Image(_BASEPATH.spriter+"message/boy/"+_DATAGAME.spriterData[f].boy[j]+
".png")),(8==g||3==g)&&d.push(new ig.Image(_BASEPATH.spriter+"message/boy/"+_DATAGAME.spriterData[f].boy[j]+"-back.png"))}},loadGirlSpriter:function(b,d){for(var e=0;e<b.length;e++)for(var f=b[e].toLowerCase(),f=f.replaceAll(" ",""),g=1;13>=g;g++){var j="skin";2==g?j="face":3==g?j="hair":4==g?j="top":5==g?j="bottom":6==g?j="shoes":7==g?j="glasses":8==g?j="earrings":9==g?j="hat":10==g?j="beard":11==g?j="anklet":12==g?j="bracelet":13==g&&(j="necklace");if(!(7<=g&&null==_DATAGAME.spriterData[f].girl[j]))for(var l=
0;l<_DATAGAME.girlPart[g].length;l++)5==g&&"0_leg-left-cross"==_DATAGAME.girlPart[g][l]||5==g&&"0_leg-right-cross"==_DATAGAME.girlPart[g][l]||d.push(new ig.Image(_BASEPATH.spriter+"girl/"+_DATAGAME.spriterData[f].girl[j]+"/"+_DATAGAME.girlPart[g][l]+".png"));if((1==g||2==g||10==g||8==g||7==g||3==g||9==g)&&null!=_DATAGAME.spriterData[f].girl[j])d.push(new ig.Image(_BASEPATH.spriter+"message/girl/"+_DATAGAME.spriterData[f].girl[j]+".png")),(8==g||3==g)&&d.push(new ig.Image(_BASEPATH.spriter+"message/girl/"+
_DATAGAME.spriterData[f].girl[j]+"-back.png"))}},resizeLayerLoading:function(){try{"undefined"!==typeof ig.sizeHandler?"undefined"!==typeof ig.sizeHandler.coreDivsToResize&&(ig.sizeHandler.coreDivsToResize.push("#loadingScreen"),"function"===typeof ig.sizeHandler.reorient&&ig.sizeHandler.reorient()):"undefined"!==typeof coreDivsToResize&&(coreDivsToResize.push("loadingScreen"),"function"===typeof sizeHandler&&sizeHandler())}catch(b){console.log(b)}},resetLoadScreen:function(b,d,e){this.totalLoaded=
this.totalItems=this.statusLoad[ig.game.numChapter]=0;this.resourcesAudio=d;this.resourcesBGM=e;this.resourcesImages=b;this.totalItems=this.resourcesImages.length+this.resourcesAudio.length+this.resourcesImages.length},drawLoadingScreen:function(){ig.system.context.save();ig.system.context.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].basebg;ig.system.context.fillRect(0,0,ig.system.width,ig.system.height);ig.system.context.restore();if(0<this.title.width){var b=_DATAGAME.enableTitleLoader?this.title.width:
_DATAGAME.brandWidth,d=this.title.height*(b/this.title.width),e=1;_DATAGAME.enableTitleLoader&&(ig.system.width<this.title.width&&(e=ig.sizeHandler.minW/this.title.width),b=this.title.width,d=this.title.height);this.title.draw(0.5*(ig.system.width-b*e),0.35*ig.system.height-0.5*d*e,0,0,this.title.width,this.title.height,b*e,d*e)}this._drawStatus=this.totalLoaded/this.totalItems;this.bar.w=0.25*ig.system.width;this.bar.h=30*_DATAGAME.ratioRes;this.bar.x=(ig.system.width-this.bar.w)/2;this.bar.y=0.67*
ig.system.height;d=ig.system.scale;ig.system.context.lineWidth=1.5*this.bar.h;ig.system.context.lineCap="round";ig.system.context.strokeStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].barStroke;ig.system.context.beginPath();ig.system.context.moveTo(this.bar.x,this.bar.y);ig.system.context.lineTo(this.bar.x+this.bar.w,this.bar.y);ig.system.context.stroke();ig.system.context.closePath();ig.system.context.lineWidth=this.bar.h;ig.system.context.strokeStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].bar;ig.system.context.beginPath();
ig.system.context.moveTo(this.bar.x,this.bar.y);ig.system.context.lineTo(this.bar.x+this.bar.w*this._drawStatus,this.bar.y);ig.system.context.stroke();ig.system.context.closePath();ig.system.context.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].barStroke;ig.system.context.font=ig.game.fontNameWeight+" "+Math.round(0.45*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName;b=ig.system.width/2-ig.system.context.measureText(_STRINGS.Splash.LoadingCustom).width/2;d=this.bar.y*
d-40*_DATAGAME.ratioRes;e="";0==this.numLoading?e="":1==this.numLoading?e=".":2==this.numLoading?e=". .":3==this.numLoading&&(e=". . .");ig.system.context.fillText(_STRINGS.Splash.LoadingCustomText+e,b,d);this.counterLoading++;0==this.counterLoading%this.modLoading&&this.numLoading++;4<=this.numLoading&&(this.numLoading=0)},showLoadingScreen:function(b){this.callBackLoad=b;this.isDrawLoadingScreen=!0},hideLoadingScreen:function(){this.callBackLoad&&this.callBackLoad();this.isDrawLoadingScreen=!1},
draw:function(){this.parent();this.isDrawLoadingScreen&&this.drawLoadingScreen()},update:function(){this.parent();if(!1!=this.isLoading){if(this.totalLoaded<this.totalItems){for(var b=0;b<this.resourcesImages.length;b++)this.resourcesImages[b].loaded&&(this.resourcesImages.splice(b,1),this.totalLoaded++);for(b=0;b<this.resourcesAudio.length;b++)"loaded"==ig.soundHandler.sfxPlayer.soundList[this.resourcesAudio[b]].state()&&(this.resourcesAudio.splice(b,1),this.totalLoaded++);for(b=0;b<this.resourcesBGM.length;b++)"loaded"==
ig.soundHandler.bgmPlayer.soundList[this.resourcesBGM[b]].state()&&(this.resourcesBGM.splice(b,1),this.totalLoaded++)}this.isDrawLoadingScreen&&(0==this.resourcesAudio.length&&0==this.resourcesBGM.length&&0==this.resourcesImages.length)&&(ig.game.consoleLog("load chapter"+ig.game.numChapter),this.statusLoad[ig.game.numChapter]=1,this.hideLoadingScreen())}}})});ig.baked=!0;
ig.module("plugins.tweener").requires("impact.game").defines(function(){ig.Game.inject({update:function(){this.parent();for(var b=0;b<ig.Tweener.tweens.length;b++){var d=ig.Tweener.tweens[b];d._running&&d.update()}}});ig.Tweener={tweens:[],addTween:function(b){this.tweens.push(b)},clearTweens:function(){this.tweens=[]},removeTween:function(b){b=this.tweens.indexOf(b);this.tweens.splice(b,1)},pause:function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].pause()},resume:function(){for(var b=
0;b<this.tweens.length;b++)this.tweens[b].resume()},Easing:{Linear:{EaseNone:function(b){return b}},Quadratic:{EaseIn:function(b){return b*b},EaseOut:function(b){return-b*(b-2)},EaseInOut:function(b){return 1>(b*=2)?0.5*b*b:-0.5*(--b*(b-2)-1)}},Cubic:{EaseIn:function(b){return b*b*b},EaseOut:function(b){return--b*b*b+1},EaseInOut:function(b){return 1>(b*=2)?0.5*b*b*b:0.5*((b-=2)*b*b+2)}},Quartic:{EaseIn:function(b){return b*b*b*b},EaseOut:function(b){return-(--b*b*b*b-1)},EaseInOut:function(b){return 1>
(b*=2)?0.5*b*b*b*b:-0.5*((b-=2)*b*b*b-2)}},Quintic:{EaseIn:function(b){return b*b*b*b*b},EaseOut:function(b){return(b-=1)*b*b*b*b+1},EaseInOut:function(b){return 1>(b*=2)?0.5*b*b*b*b*b:0.5*((b-=2)*b*b*b*b+2)}},Sinusoidal:{EaseIn:function(b){return-Math.cos(b*Math.PI/2)+1},EaseOut:function(b){return Math.sin(b*Math.PI/2)},EaseInOut:function(b){return-0.5*(Math.cos(Math.PI*b)-1)}},Exponential:{EaseIn:function(b){return 0==b?0:Math.pow(2,10*(b-1))},EaseOut:function(b){return 1==b?1:-Math.pow(2,-10*b)+
1},EaseInOut:function(b){return 0==b?0:1==b?1:1>(b*=2)?0.5*Math.pow(2,10*(b-1)):0.5*(-Math.pow(2,-10*(b-1))+2)}},Circular:{EaseIn:function(b){return-(Math.sqrt(1-b*b)-1)},EaseOut:function(b){return Math.sqrt(1- --b*b)},EaseInOut:function(b){return 1>(b/=0.5)?-0.5*(Math.sqrt(1-b*b)-1):0.5*(Math.sqrt(1-(b-=2)*b)+1)}},Elastic:{EaseIn:function(b){var d,e=0.1,f=0.4;if(0==b)return 0;if(1==b)return 1;f||(f=0.3);!e||1>e?(e=1,d=f/4):d=f/(2*Math.PI)*Math.asin(1/e);return-(e*Math.pow(2,10*(b-=1))*Math.sin((b-
d)*2*Math.PI/f))},EaseOut:function(b){var d,e=0.1,f=0.4;if(0==b)return 0;if(1==b)return 1;f||(f=0.3);!e||1>e?(e=1,d=f/4):d=f/(2*Math.PI)*Math.asin(1/e);return e*Math.pow(2,-10*b)*Math.sin((b-d)*2*Math.PI/f)+1},EaseInOut:function(b){var d,e=0.1,f=0.4;if(0==b)return 0;if(1==b)return 1;f||(f=0.3);!e||1>e?(e=1,d=f/4):d=f/(2*Math.PI)*Math.asin(1/e);return 1>(b*=2)?-0.5*e*Math.pow(2,10*(b-=1))*Math.sin((b-d)*2*Math.PI/f):0.5*e*Math.pow(2,-10*(b-=1))*Math.sin((b-d)*2*Math.PI/f)+1}},Back:{EaseIn:function(b){return b*
b*(2.70158*b-1.70158)},EaseOut:function(b){return(b-=1)*b*(2.70158*b+1.70158)+1},EaseInOut:function(b){return 1>(b*=2)?0.5*b*b*(3.5949095*b-2.5949095):0.5*((b-=2)*b*(3.5949095*b+2.5949095)+2)}},Bounce:{EaseIn:function(b){return 1-ig.Tweener.Easing.Bounce.EaseOut(1-b)},EaseOut:function(b){return(b/=1)<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+0.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375},EaseInOut:function(b){return 0.5>b?0.5*ig.Tweener.Easing.Bounce.EaseIn(2*
b):0.5*ig.Tweener.Easing.Bounce.EaseOut(2*b-1)+0.5}}},Loop:{Revert:1,Reverse:2}};Tweener=ig.Class.extend({_running:!1,_obj:{},_objStart:{},_objEnd:{},_objDelta:{},_props:{},_started:!1,_paused:!1,_loopIndex:!1,_elapsed:!1,_timer:!1,_value:0,_startCallbackCalled:!1,_settings:{duration:!1,easing:ig.Tweener.Easing.Linear.EaseNone,delay:!1,onStart:!1,onComplete:!1,onUpdate:!1,onPause:!1,onResume:!1,loop:ig.Tweener.Loop.Revert,loopCount:0,chains:[]},init:function(b,d,e){this._obj=b;d&&ig.merge(this._props,
d);e&&ig.merge(this._settings,e)},start:function(){ig.Tweener.addTween(this);this._loopIndex=this._settings.loopCount;this._started=this._running=!0;this._elapsed=0;this._timer=new ig.Timer;this._value=0;for(var b in this._props)this._initEnd(b,this._props,this._objEnd);for(var d in this._objEnd)this._initStart(d,this._objEnd,this._obj,this._objStart),this._initDelta(d,this._objDelta,this._obj,this._objEnd);this._settings.onStart&&(this._startCallbackCalled=!0);return this},_isEmptyArray:function(b){return!(void 0!==
typeof b&&0<b.length)},_initEnd:function(b,d,e){if("object"!==typeof d[b])e[b]=d[b];else for(subprop in d[b])e[b]||(e[b]={}),this._initEnd(subprop,d[b],e[b])},_initStart:function(b,d,e,f){if("object"!==typeof e[b])"undefined"!==typeof d[b]&&(f[b]=e[b]);else for(var g in e[b])f[b]||(f[b]={}),"undefined"!==typeof d[b]&&this._initStart(g,d[b],e[b],f[b])},_initDelta:function(b,d,e,f){if("object"!==typeof f[b])d[b]=f[b]-e[b];else for(var g in f[b])d[b]||(d[b]={}),this._initDelta(g,d[b],e[b],f[b])},_propSet:function(b,
d,e){if("object"!==typeof d[b])e[b]=d[b];else for(var f in d[b])e[b]||(e[b]={}),this._propSet(f,d[b],e[b])},_propUpdate:function(b,d,e,f,g){if("object"!==typeof e[b])d[b]="undefined"!=typeof e[b]?e[b]+f[b]*g:d[b];else for(var j in e[b])this._propUpdate(j,d[b],e[b],f[b],g)},update:function(){if(!this._running)return!1;if(this._settings.delay){if(this._timer&&this._timer.delta()<this._settings.delay)return;this._settings.delay=0;this._timer.reset()}this._startCallbackCalled&&(this._settings.onStart(this._obj,
this._value),this._startCallbackCalled=!1);var b=(this._timer.delta()+this._elapsed)/this._settings.duration,b=1<b?1:b,d=this._settings.easing(b);this._value=d;for(var e in this._objDelta)this._propUpdate(e,this._obj,this._objStart,this._objDelta,d);if(this._settings.onUpdate)this._settings.onUpdate(this._obj,this._value);if(1<=b)if(0===this._loopIndex||!this._settings.loop){this._running=this._started=!1;this.value=0;if(this._settings.onComplete)this._settings.onComplete(this._obj,this._value);if(!this._isEmptyArray(this._settings.chains))for(var f=
0;f<this._settings.chains.length;f++)this._settings.chains[f].start();ig.Tweener.removeTween(this)}else if(this._settings.loop===ig.Tweener.Loop.Revert){for(var g in this._objStart)this._propSet(g,this._objStart,this._obj);this._elapsed=0;this._timer.reset();-1!=this._loopIndex&&this._loopIndex--}else if(this._settings.loop===ig.Tweener.Loop.Reverse){b={};d={};ig.merge(b,this._objEnd);ig.merge(d,this._objStart);ig.merge(this._objStart,b);ig.merge(this._objEnd,d);for(f in this._objEnd)this._initDelta(f,
this._objDelta,this._obj,this._objEnd);this._elapsed=0;this._timer.reset();-1!=this._loopIndex&&this._loopIndex--}},pause:function(){if(this._running&&(this._running=!1,this._timer&&this._timer.delta&&(this._elapsed+=this._timer.delta()),this._settings.onPause))this._settings.onPause(this._obj,this._value);return this},resume:function(){if(this._started&&!this._running&&(this._running=!0,this._timer&&this._timer.delta&&this._timer.reset(),this._settings.onResume))this._settings.onResume(this._obj,
this._value);return this},stop:function(b){b?(this._loopIndex=0,this._elapsed+=this._settings.duration,this._running=!0,this.update()):(this._running=this._started=!1,this.value=0,ig.Tweener.removeTween(this));return this},to:function(b,d){ig.merge(this._props,b);if(null!==d||void 0!==d)this._settings.duration=d;return this},delay:function(b){this._settings.delay=b;return this},speed:function(b){this._settings.duration=b;return this},easing:function(b){this._settings.easing=b;return this},yoyo:function(b){this._settings.loop=
b?ig.Tweener.Loop.Reverse:ig.Tweener.Loop.Revert;return this},repeat:function(b){this._settings.loopCount=b?b:0;return this},onStart:function(b){this._settings.onStart=b;return this},onUpdate:function(b){this._settings.onUpdate=b;return this},onPause:function(b){this._settings.onPause=b;return this},onResume:function(b){this._settings.onResume=b;return this},onComplete:function(b){this._settings.onComplete=b;return this},addChain:function(b){1>this._settings.chains.filter(function(d){return b===d}).length&&
this._settings.chains.push(b);return this},removeChain:function(b){b=this._settings.chains.indexOf(b);0<=b&&this._settings.chains.splice(b,1);return this},setChain:function(b){for(var d=0;d<b.length;d++)this.addChain(b[d]);return this},clearChain:function(){this._settings.chains=[];return this}})});ig.baked=!0;
ig.module("plugins.tween").requires("impact.entity").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(b){for(var d=0;d<this.length;++d)if(this[d]===b)return d;return-1});ig.Entity.prototype.tweens=[];ig.Entity.prototype._preTweenUpdate=ig.Entity.prototype.update;ig.Entity.prototype.update=function(){this._preTweenUpdate();if(0<this.tweens.length){for(var b=[],d=0;d<this.tweens.length;d++)this.tweens[d].update(),this.tweens[d].complete||b.push(this.tweens[d]);this.tweens=
b}};ig.Entity.prototype.tween=function(b,d,e){b=new ig.Tween(this,b,d,e);this.tweens.push(b);return b};ig.Entity.prototype.tweenBezier=function(b,d,e){this._bezierProgress=0;d=new ig.Tween(this,{_bezierProgress:1},d,ig.merge({easing:e.easing,onUpdate:function(){for(var d=this._bezierProgress,g=[],j=[],l=0;l<b.length;l++)g.push(b[l].x),j.push(b[l].y);g=ig.Tween.Interpolation.Bezier(g,d);d=ig.Tween.Interpolation.Bezier(j,d);e&&e.target?(e.target.xVar&&(this[e.target.xVar]=g),e.target.yVar&&(this[e.target.yVar]=
d)):(this.pos.x=g,this.pos.y=d)}.bind(this)},e||{}));this.tweens.push(d);return d};ig.Entity.prototype.pauseTweens=function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].pause()};ig.Entity.prototype.resumeTweens=function(){for(var b=0;b<this.tweens.length;b++)this.tweens[b].resume()};ig.Entity.prototype.stopTweens=function(b){for(var d=0;d<this.tweens.length;d++)this.tweens[d].stop(b)};ig.Tween=function(b,d,e,f){var g={},j={},l={},n=0,m=!1,r=!1,q=!1;this.duration=e;this.paused=this.complete=
!1;this.easing=ig.Tween.Easing.Linear.EaseNone;this.onComplete=!1;this.loop=this.delay=0;this.loopCount=-1;ig.merge(this,f);this.loopNum=this.loopCount;this.chain=function(b){q=b};this.initEnd=function(b,d,e){if("object"!==typeof d[b])e[b]=d[b];else for(subprop in d[b])e[b]||(e[b]={}),this.initEnd(subprop,d[b],e[b])};this.initStart=function(b,d,e,f){if("object"!==typeof e[b])"undefined"!==typeof d[b]&&(f[b]=e[b]);else for(subprop in e[b])f[b]||(f[b]={}),"undefined"!==typeof d[b]&&this.initStart(subprop,
d[b],e[b],f[b])};this.start=function(){this.paused=this.complete=!1;this.loopNum=this.loopCount;n=0;-1==b.tweens.indexOf(this)&&b.tweens.push(this);r=!0;m=new ig.Timer;for(var e in d)this.initEnd(e,d,j);for(e in j)this.initStart(e,j,b,g),this.initDelta(e,l,b,j)};this.initDelta=function(b,d,e,f){if("object"!==typeof f[b])d[b]=f[b]-e[b];else for(subprop in f[b])d[b]||(d[b]={}),this.initDelta(subprop,d[b],e[b],f[b])};this.propUpdate=function(b,d,e,f,g){if("object"!==typeof e[b])d[b]="undefined"!=typeof e[b]?
e[b]+f[b]*g:d[b];else for(subprop in e[b])this.propUpdate(subprop,d[b],e[b],f[b],g)};this.propSet=function(b,d,e){if("object"!==typeof d[b])e[b]=d[b];else for(subprop in d[b])e[b]||(e[b]={}),this.propSet(subprop,d[b],e[b])};this.update=function(){if(!r)return!1;if(this.delay){if(m.delta()<this.delay)return;this.delay=0;m.reset()}if(this.paused||this.complete)return!1;var d=(m.delta()+n)/this.duration,d=1<d?1:d,e=this.easing(d);for(property in l)this.propUpdate(property,b,g,l,e);if(this.onUpdate)this.onUpdate(e);
if(1<=d){if(0==this.loopNum||!this.loop){this.complete=!0;if(this.onComplete)this.onComplete();q&&q.start();return!1}if(this.loop==ig.Tween.Loop.Revert){for(property in g)this.propSet(property,g,b);n=0;m.reset();-1!=this.loopNum&&this.loopNum--}else if(this.loop==ig.Tween.Loop.Reverse){d={};e={};ig.merge(d,j);ig.merge(e,g);ig.merge(g,d);ig.merge(j,e);for(property in j)this.initDelta(property,l,b,j);n=0;m.reset();-1!=this.loopNum&&this.loopNum--}}};this.pause=function(){this.paused=!0;m&&m.delta&&
(n+=m.delta())};this.resume=function(){this.paused=!1;m&&m.reset&&m.reset()};this.stop=function(b){b&&(this.loop=this.complete=this.paused=!1,n+=e,this.update());this.complete=!0}};ig.Tween.Loop={Revert:1,Reverse:2};ig.Tween.Easing={Linear:{},Quadratic:{},Cubic:{},Quartic:{},Quintic:{},Sinusoidal:{},Exponential:{},Circular:{},Elastic:{},Back:{},Bounce:{}};ig.Tween.Easing.Linear.EaseNone=function(b){return b};ig.Tween.Easing.Quadratic.EaseIn=function(b){return b*b};ig.Tween.Easing.Quadratic.EaseOut=
function(b){return-b*(b-2)};ig.Tween.Easing.Quadratic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b:-0.5*(--b*(b-2)-1)};ig.Tween.Easing.Cubic.EaseIn=function(b){return b*b*b};ig.Tween.Easing.Cubic.EaseOut=function(b){return--b*b*b+1};ig.Tween.Easing.Cubic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b:0.5*((b-=2)*b*b+2)};ig.Tween.Easing.Quartic.EaseIn=function(b){return b*b*b*b};ig.Tween.Easing.Quartic.EaseOut=function(b){return-(--b*b*b*b-1)};ig.Tween.Easing.Quartic.EaseInOut=function(b){return 1>
(b*=2)?0.5*b*b*b*b:-0.5*((b-=2)*b*b*b-2)};ig.Tween.Easing.Quintic.EaseIn=function(b){return b*b*b*b*b};ig.Tween.Easing.Quintic.EaseOut=function(b){return(b-=1)*b*b*b*b+1};ig.Tween.Easing.Quintic.EaseInOut=function(b){return 1>(b*=2)?0.5*b*b*b*b*b:0.5*((b-=2)*b*b*b*b+2)};ig.Tween.Easing.Sinusoidal.EaseIn=function(b){return-Math.cos(b*Math.PI/2)+1};ig.Tween.Easing.Sinusoidal.EaseOut=function(b){return Math.sin(b*Math.PI/2)};ig.Tween.Easing.Sinusoidal.EaseInOut=function(b){return-0.5*(Math.cos(Math.PI*
b)-1)};ig.Tween.Easing.Exponential.EaseIn=function(b){return 0==b?0:Math.pow(2,10*(b-1))};ig.Tween.Easing.Exponential.EaseOut=function(b){return 1==b?1:-Math.pow(2,-10*b)+1};ig.Tween.Easing.Exponential.EaseInOut=function(b){return 0==b?0:1==b?1:1>(b*=2)?0.5*Math.pow(2,10*(b-1)):0.5*(-Math.pow(2,-10*(b-1))+2)};ig.Tween.Easing.Circular.EaseIn=function(b){return-(Math.sqrt(1-b*b)-1)};ig.Tween.Easing.Circular.EaseOut=function(b){return Math.sqrt(1- --b*b)};ig.Tween.Easing.Circular.EaseInOut=function(b){return 1>
(b/=0.5)?-0.5*(Math.sqrt(1-b*b)-1):0.5*(Math.sqrt(1-(b-=2)*b)+1)};ig.Tween.Easing.Elastic.EaseIn=function(b){var d,e=0.1,f=0.4;if(0==b)return 0;if(1==b)return 1;f||(f=0.3);!e||1>e?(e=1,d=f/4):d=f/(2*Math.PI)*Math.asin(1/e);return-(e*Math.pow(2,10*(b-=1))*Math.sin((b-d)*2*Math.PI/f))};ig.Tween.Easing.Elastic.EaseOut=function(b){var d,e=0.1,f=0.4;if(0==b)return 0;if(1==b)return 1;f||(f=0.3);!e||1>e?(e=1,d=f/4):d=f/(2*Math.PI)*Math.asin(1/e);return e*Math.pow(2,-10*b)*Math.sin((b-d)*2*Math.PI/f)+1};
ig.Tween.Easing.Elastic.EaseInOut=function(b){var d,e=0.1,f=0.4;if(0==b)return 0;if(1==b)return 1;f||(f=0.3);!e||1>e?(e=1,d=f/4):d=f/(2*Math.PI)*Math.asin(1/e);return 1>(b*=2)?-0.5*e*Math.pow(2,10*(b-=1))*Math.sin((b-d)*2*Math.PI/f):0.5*e*Math.pow(2,-10*(b-=1))*Math.sin((b-d)*2*Math.PI/f)+1};ig.Tween.Easing.Back.EaseIn=function(b){return b*b*(2.70158*b-1.70158)};ig.Tween.Easing.Back.EaseOut=function(b){return(b-=1)*b*(2.70158*b+1.70158)+1};ig.Tween.Easing.Back.EaseInOut=function(b){return 1>(b*=2)?
0.5*b*b*(3.5949095*b-2.5949095):0.5*((b-=2)*b*(3.5949095*b+2.5949095)+2)};ig.Tween.Easing.Bounce.EaseIn=function(b){return 1-ig.Tween.Easing.Bounce.EaseOut(1-b)};ig.Tween.Easing.Bounce.EaseOut=function(b){return(b/=1)<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b-=1.5/2.75)*b+0.75:b<2.5/2.75?7.5625*(b-=2.25/2.75)*b+0.9375:7.5625*(b-=2.625/2.75)*b+0.984375};ig.Tween.Easing.Bounce.EaseInOut=function(b){return 0.5>b?0.5*ig.Tween.Easing.Bounce.EaseIn(2*b):0.5*ig.Tween.Easing.Bounce.EaseOut(2*b-1)+0.5};ig.Tween.Interpolation=
{Linear:function(b,d){var e=b.length-1,f=e*d,g=Math.floor(f),j=TWEEN.Interpolation.Utils.Linear;return 0>d?j(b[0],b[1],f):1<d?j(b[e],b[e-1],e-f):j(b[g],b[g+1>e?e:g+1],f-g)}}});ig.baked=!0;
ig.module("plugins.patches.entity-patch").requires("impact.entity").defines(function(){ig.Entity.inject({handleMovementTrace:function(b){this.standing=!1;b.collision.y&&(0<this.bounciness&&Math.abs(this.vel.y)>this.minBounceVelocity?this.vel.y*=-this.bounciness:(0<this.vel.y&&(this.standing=!0),this.vel.y=0));b.collision.x&&(this.vel.x=0<this.bounciness&&Math.abs(this.vel.x)>this.minBounceVelocity?this.vel.x*-this.bounciness:0);if(b.collision.slope){var d=b.collision.slope;if(0<this.bounciness){var e=
this.vel.x*d.nx+this.vel.y*d.ny;this.vel.x=(this.vel.x-2*d.nx*e)*this.bounciness;this.vel.y=(this.vel.y-2*d.ny*e)*this.bounciness}else e=(this.vel.x*d.x+this.vel.y*d.y)/(d.x*d.x+d.y*d.y),this.vel.x=d.x*e,this.vel.y=d.y*e,d=Math.atan2(d.x,d.y),d>this.slopeStanding.min&&d<this.slopeStanding.max&&(this.standing=!0)}this.pos.x=b.pos.x;this.pos.y=b.pos.y},update:function(){this.parent();null!==this.clickableLayer&&"undefined"!==typeof this.clickableLayer&&null!==this.clickableLayer.update&&"function"===
typeof this.clickableLayer.update&&this.clickableLayer.update(this.pos.x,this.pos.y,this.size.x,this.size.y)}})});ig.baked=!0;
ig.module("plugins.tweens-handler").requires("impact.entity","plugins.tween","plugins.patches.entity-patch").defines(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(b){for(var e=0;e<this.length;++e)if(this[e]===b)return e;return-1});ig.TweensHandler=ig.Class.extend({_tweens:[],_systemPausedTweens:[],init:function(){},getAll:function(){return this._tweens},removeAll:function(){this._tweens=[]},add:function(b){this._tweens.push(b)},remove:function(b){b=this._tweens.indexOf(b);
-1!==b&&this._tweens.splice(b,1)},onSystemPause:function(){if(0===this._tweens.length)return!1;for(var b=null;0<this._tweens.length;)b=this._tweens[0],b._isPlaying&&(this._systemPausedTweens.push(b),b.pause());return!0},onSystemResume:function(){if(0===this._systemPausedTweens.length)return!1;for(var b=0;b<this._systemPausedTweens.length;)this._systemPausedTweens[b].resume(),b++;this._systemPausedTweens=[];return!0},update:function(b,e){if(0===this._tweens.length)return!1;var f=0;for(b=void 0!==b?
b:ig.game.tweens.now();f<this._tweens.length;)this._tweens[f].update(b)||e?f++:this._tweens.splice(f,1);return!0},now:function(){return Date.now()}});ig.TweenDef=ig.Class.extend({_ent:null,_valuesStart:{},_valuesEnd:{},_valuesStartRepeat:{},_duration:1E3,_repeat:0,_yoyo:!1,_isPlaying:!1,_reversed:!1,_delayTime:0,_startTime:null,_pauseTime:null,_easingFunction:ig.Tween.Easing.Linear.EaseNone,_interpolationFunction:ig.Tween.Interpolation.Linear,_chainedTweens:[],_onStartCallback:null,_onStartCallbackFired:!1,
_onUpdateCallback:null,_onCompleteCallback:null,_onStopCallback:null,_onPauseCallback:null,_onResumeCallback:null,_currentElapsed:0,init:function(b){this._object=b},to:function(b,e){this._valuesEnd=b;void 0!==e&&(this._duration=e);return this},start:function(b){if(this._isPlaying)return this;ig.game.tweens.add(this);this._isPlaying=!0;this._onStartCallbackFired=!1;this._startTime=void 0!==b?b:ig.game.tweens.now();this._startTime+=this._delayTime;for(var e in this._valuesEnd){if(this._valuesEnd[e]instanceof
Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],!1===this._valuesStart[e]instanceof Array&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){if(!this._isPlaying)return this;ig.game.tweens.remove(this);this._isPlaying=!1;null!==this._onStopCallback&&this._onStopCallback.call(this._object,this._object);this.stopChainedTweens();
return this},pause:function(){if(!this._isPlaying)return this;ig.game.tweens.remove(this);this._isPlaying=!1;this._pauseTime=ig.game.tweens.now();null!==this._onPauseCallback&&this._onPauseCallback.call(this._object,this._object);return this},resume:function(){if(this._isPlaying||!this._pauseTime)return this;var b=ig.game.tweens.now()-this._pauseTime;this._startTime+=b;ig.game.tweens.add(this);this._isPlaying=!0;null!==this._onResumeCallback&&this._onResumeCallback.call(this._object,this._object);
this._pauseTime=null;return this},end:function(){this.update(this._startTime+this._duration);return this},stopChainedTweens:function(){for(var b=0,e=this._chainedTweens.length;b<e;b++)this._chainedTweens[b].stop()},delay:function(b){this._delayTime=b;return this},repeat:function(b){this._repeat=b;return this},repeatDelay:function(b){this._repeatDelayTime=b;return this},yoyo:function(b){this._yoyo=b;return this},easing:function(b){this._easingFunction=b;return this},interpolation:function(b){this._interpolationFunction=
b;return this},chain:function(){this._chainedTweens=arguments;return this},onStart:function(b){this._onStartCallback=b;return this},onUpdate:function(b){this._onUpdateCallback=b;return this},onComplete:function(b){this._onCompleteCallback=b;return this},onStop:function(b){this._onStopCallback=b;return this},onPause:function(b){this._onPauseCallback=b;return this},onResume:function(b){this._onResumeCallback=b;return this},update:function(b){var e,f,g;if(b<this._startTime)return!0;!1===this._onStartCallbackFired&&
(null!==this._onStartCallback&&this._onStartCallback.call(this._object,this._object),this._onStartCallbackFired=!0);f=(b-this._startTime)/this._duration;this._currentElapsed=f=1<f?1:f;g=this._easingFunction(f);for(e in this._valuesEnd)if(void 0!==this._valuesStart[e]){var j=this._valuesStart[e]||0,l=this._valuesEnd[e];l instanceof Array?this._object[e]=this._interpolationFunction(l,g):("string"===typeof l&&(l="+"===l.charAt(0)||"-"===l.charAt(0)?j+parseFloat(l):parseFloat(l)),"number"===typeof l&&
(this._object[e]=j+(l-j)*g))}null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._object,this._object,g);if(1===f)if(0<this._repeat){isFinite(this._repeat)&&this._repeat--;for(e in this._valuesStartRepeat)"string"===typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=_valuesStartRepeat[e]+parseFloat(_valuesEnd[e])),this._yoyo&&(f=this._valuesStartRepeat[e],this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=f),this._valuesStart[e]=this._valuesStartRepeat[e];this._yoyo&&
(this._reversed=!this._reversed);this._startTime=void 0!==this._repeatDelayTime?b+this._repeatDelayTime:b+this._delayTime}else{null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object,this._object);b=0;for(e=this._chainedTweens.length;b<e;b++)this._chainedTweens[b].start(this._startTime+this._duration);return!1}return!0}});var b=[1];ig.Tween.Interpolation={Linear:function(b,e){var f=b.length-1,g=f*e,j=Math.floor(g),l=ig.Tween.Interpolation.Utils.Linear;return 0>e?l(b[0],b[1],g):
1<e?l(b[f],b[f-1],f-g):l(b[j],b[j+1>f?f:j+1],g-j)},Bezier:function(b,e){for(var f=0,g=b.length-1,j=Math.pow,l=ig.Tween.Interpolation.Utils.Bernstein,n=0;n<=g;n++)f+=j(1-e,g-n)*j(e,n)*b[n]*l(g,n);return f},CatmullRom:function(b,e){var f=b.length-1,g=f*e,j=Math.floor(g),l=ig.Tween.Interpolation.Utils.CatmullRom;return b[0]===b[f]?(0>e&&(j=Math.floor(g=f*(1+e))),l(b[(j-1+f)%f],b[j],b[(j+1)%f],b[(j+2)%f],g-j)):0>e?b[0]-(l(b[0],b[0],b[1],b[1],-g)-b[0]):1<e?b[f]-(l(b[f],b[f],b[f-1],b[f-1],g-f)-b[f]):l(b[j?
j-1:0],b[j],b[f<j+1?f:j+1],b[f<j+2?f:j+2],g-j)},Utils:{Linear:function(b,e,f){return(e-b)*f+b},Bernstein:function(b,e){var f=ig.Tween.Interpolation.Utils.Factorial;return f(b)/f(e)/f(b-e)},Factorial:function(d){var e=1;if(b[d])return b[d];for(var f=d;1<f;f--)e*=f;return b[d]=e},CatmullRom:function(b,e,f,g,j){b=0.5*(f-b);g=0.5*(g-e);var l=j*j;return(2*e-2*f+b+g)*j*l+(-3*e+3*f-2*b-g)*l+b*j+e}}}});ig.baked=!0;
ig.module("plugins.url-parameters").defines(function(){ig.UrlParameters=ig.Class.extend({init:function(){switch(getQueryVariable("iphone")){case "true":ig.ua.iPhone=!0,console.log("iPhone mode")}var b=getQueryVariable("webview");if(b)switch(b){case "true":ig.ua.is_uiwebview=!0,console.log("webview mode")}if(b=getQueryVariable("debug"))switch(b){case "true":ig.game.showDebugMenu(),console.log("debug mode")}switch(getQueryVariable("view")){case "stats":ig.game.resetPlayerStats(),ig.game.endGame()}getQueryVariable("ad")}})});
ig.baked=!0;
ig.module("plugins.director").requires("impact.impact").defines(function(){ig.Director=ig.Class.extend({init:function(b,d){this.game=b;this.levels=[];this.currentLevel=0;this.append(d)},loadLevel:function(b){for(var d in ig.sizeHandler.dynamicClickableEntityDivs){var e=ig.domHandler.getElementById("#"+d);ig.domHandler.hide(e)}this.currentLevel=b;this.game.loadLevel(this.levels[b]);return!0},loadLevelWithoutEntities:function(b){this.currentLevel=b;this.game.loadLevelWithoutEntities(this.levels[b]);return!0},
append:function(b){newLevels=[];return"object"===typeof b?(b.constructor===[].constructor?newLevels=b:newLevels[0]=b,this.levels=this.levels.concat(newLevels),!0):!1},nextLevel:function(){return this.currentLevel+1<this.levels.length?this.loadLevel(this.currentLevel+1):!1},previousLevel:function(){return 0<=this.currentLevel-1?this.loadLevel(this.currentLevel-1):!1},jumpTo:function(b){var d=null;for(i=0;i<this.levels.length;i++)this.levels[i]==b&&(d=i);return 0<=d?this.loadLevel(d):!1},firstLevel:function(){return this.loadLevel(0)},
lastLevel:function(){return this.loadLevel(this.levels.length-1)},reloadLevel:function(){return this.loadLevel(this.currentLevel)}})});ig.baked=!0;
ig.module("plugins.impact-storage").requires("impact.game").defines(function(){ig.Storage=ig.Class.extend({staticInstantiate:function(){return!ig.Storage.instance?null:ig.Storage.instance},init:function(){ig.Storage.instance=this},isCapable:function(){return"undefined"!==typeof window.localStorage},isSet:function(b){return null!==this.get(b)},initUnset:function(b,d){null===this.get(b)&&this.set(b,d)},get:function(b){if(!this.isCapable())return null;try{return JSON.parse(localStorage.getItem(b))}catch(d){return window.localStorage.getItem(b)}},
getInt:function(b){return~~this.get(b)},getFloat:function(b){return parseFloat(this.get(b))},getBool:function(b){return!!this.get(b)},key:function(b){return this.isCapable()?window.localStorage.key(b):null},set:function(b,d){if(!this.isCapable())return null;try{window.localStorage.setItem(b,JSON.stringify(d))}catch(e){console.log(e)}},setHighest:function(b,d){d>this.getFloat(b)&&this.set(b,d)},remove:function(b){if(!this.isCapable())return null;window.localStorage.removeItem(b)},clear:function(){if(!this.isCapable())return null;
window.localStorage.clear()}})});ig.baked=!0;
ig.module("plugins.fullscreen").requires("impact.entity","plugins.handlers.size-handler","plugins.director").defines(function(){ig.Fullscreen={enableFullscreenButton:!0,_isEnabled:"notChecked",isEnabled:function(){"notChecked"==this._isEnabled&&(this._isEnabled=document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||document.msFullscreenEnabled?!0:!1);return this._isEnabled},isFullscreen:function(){return ig.Fullscreen.isEnabled()&&(document.fullscreenElement||
document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)?!0:!1},toggleFullscreen:function(){ig.Fullscreen.enableFullscreenButton&&(ig.Fullscreen.isFullscreen()?ig.Fullscreen.exitFullscreen():ig.Fullscreen.requestFullscreen(),ig.sizeHandler.orientationDelayHandler())},requestFullscreen:function(){var b=document.documentElement;b.requestFullscreen?b.requestFullscreen():b.webkitRequestFullscreen?b.webkitRequestFullscreen():b.mozRequestFullScreen?b.mozRequestFullScreen():
b.msRequestFullscreen&&b.msRequestFullscreen()},exitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},divs:{}};ig.Director.inject({loadLevel:function(b){var d=ig.Fullscreen.divs,e;for(e in d)d=ig.domHandler.getElementById("#"+e),ig.domHandler.hide(d);return this.parent(b)}});ig.FullscreenButton=ig.Entity.extend({enterImage:new ig.Image(_RESOURCESINFO.image.btnExpand),
exitImage:new ig.Image(_RESOURCESINFO.image.btnShrink),isReady:!1,isShown:!0,zIndex:999999,identifier:null,prevPos:{x:0,y:0},gap:25,anchor:1,invisImagePath:_BASEPATH.media+"graphics/misc/invisible.png",init:function(b,d,e){this.parent(b,d,e);ig.Fullscreen.isEnabled()&&ig.Fullscreen.enableFullscreenButton?(this.enterImage.loaded?this.initSize():this.enterImage.loadCallback=function(){this.initSize()}.bind(this),ig.btFullscreen=this):(this.kill(),ig.btFullscreen=null)},kill:function(){this.parent();
var b=ig.domHandler.getElementById("#"+this.identifier);b&&ig.domHandler.hide(b)},show:function(){this.isShown=!0;var b=ig.domHandler.getElementById("#"+this.identifier);b&&ig.domHandler.show(b)},hide:function(){this.isShown=!1;var b=ig.domHandler.getElementById("#"+this.identifier);b&&ig.domHandler.hide(b)},initSize:function(){this.size.x=this.enterImage.width;this.size.y=this.enterImage.height;this.createClickableLayer();this.isReady=!0;this.repos();ig.sizeHandler.resizeLayers()},createClickableLayer:function(){this.identifier=
"fullscreen-button-layer";var b=ig.domHandler.getElementById("#"+this.identifier);b?(ig.domHandler.show(b),ig.domHandler.attr(b,"onclick","ig.Fullscreen.toggleFullscreen()")):this.createClickableOutboundLayer()},repos:function(){switch(this.anchor){case 2:this.pos.x=ig.system.width-this.size.x-this.gap;this.pos.y=this.gap;break;case 3:this.pos.x=ig.system.width-this.size.x-this.gap;this.pos.y=ig.system.height-this.size.y-this.gap;break;case 4:this.pos.x=this.gap;this.pos.y=ig.system.height-this.size.y-
this.gap;break;default:this.pos.x=this.gap,this.pos.y=this.gap}this.identifier&&(ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]={},ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].width=this.size.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].height=this.size.y,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_x=this.pos.x,ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_y=this.pos.y)},draw:function(){if(this.isReady&&this.isShown){var b=
ig.system.context;b.save();b.setTransform(1,0,0,1,0,0);ig.Fullscreen.isFullscreen()?this.exitImage.draw(this.pos.x,this.pos.y):this.enterImage.draw(this.pos.x,this.pos.y);b.restore()}},createClickableOutboundLayer:function(){var b=this.identifier,d=this.invisImagePath,e=ig.domHandler.create("div");ig.domHandler.attr(e,"id",b);ig.domHandler.attr(e,"onclick","ig.Fullscreen.toggleFullscreen()");var f=ig.domHandler.create("a"),g=ig.domHandler.create("img");ig.domHandler.css(g,{width:"100%",height:"100%"});
ig.domHandler.attr(g,"src",d);d=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);if(ig.ua.mobile){var j=ig.domHandler.getElementById("#canvas"),l=ig.domHandler.getOffsets(j),j=l.left,l=l.top;if(ig.sizeHandler.disableStretchToFitOnMobileFlag)var j=Math.floor(j+this.pos.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px",l=Math.floor(l+this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px",n=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px",d=Math.floor(this.size.y*
ig.sizeHandler.scaleRatioMultiplier.y)+"px";else j=Math.floor(this.pos.x*ig.sizeHandler.sizeRatio.x)+"px",l=Math.floor(this.pos.y*ig.sizeHandler.sizeRatio.y)+"px",n=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px",d=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px"}else j=ig.domHandler.getElementById("#canvas"),l=ig.domHandler.getOffsets(j),j=l.left,l=l.top,ig.sizeHandler.enableStretchToFitOnDesktopFlag?(j=Math.floor(j+this.pos.x*ig.sizeHandler.sizeRatio.x)+"px",l=Math.floor(l+this.pos.y*
ig.sizeHandler.sizeRatio.y)+"px",n=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px",d=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px"):(j=Math.floor(j+this.pos.x*d)+"px",l=Math.floor(l+this.pos.y*d)+"px",n=Math.floor(this.size.x*d)+"px",d=Math.floor(this.size.y*d)+"px");ig.domHandler.css(e,{"float":"left",position:"absolute",left:j,top:l,width:n,height:d,"z-index":3});ig.domHandler.appendChild(f,g);ig.domHandler.appendChild(e,f);ig.domHandler.appendToBody(e);ig.Fullscreen.divs[b]={};
ig.Fullscreen.divs[b].width=this.size.x;ig.Fullscreen.divs[b].height=this.size.y;ig.Fullscreen.divs[b].entity_pos_x=this.pos.x;ig.Fullscreen.divs[b].entity_pos_y=this.pos.y}})});ig.baked=!0;
ig.module("plugins.spriter.structure.animation").requires("impact.impact").defines(function(){SpriterAnimationLooping={NO_LOOPING:0,LOOPING:1};SpriterAnimation=ig.Class.extend({id:0,name:null,length:0,loopType:0,mainLineKeys:[],timelines:null,init:function(b,d,e,f){this.id=b;this.name=d;this.length=e;this.loopType=f;this.timelines=new SpriterIdNameMap},addMainLineKey:function(b){this.mainLineKeys.push(b)},addTimeline:function(b){this.timelines.add(b,b.id,b.name)},getTimelineById:function(b){return this.timelines.getById(b)},
getTimelineByName:function(b){return this.timelines.getByName(b)},updateCurve:function(){for(var b=0;b<this.mainLineKeys.length;b++){var d=this.mainLineKeys[b];if(d.curveType!=ig.SpriterCurveType.LINEAR){for(var e=0;e<d.boneRefs.length;e++){var f=d.boneRefs[e];this.timelines.getById(f.timeline).keys[f.key].setCurve(d.curveType,d.c1,d.c2,d.c3,d.c4)}for(e=0;e<d.objectRefs.length;e++)f=d.objectRefs[e],this.timelines.getById(f.timeline).keys[f.key].setCurve(d.curveType,d.c1,d.c2,d.c3,d.c4)}}}})});
ig.baked=!0;ig.module("plugins.spriter.structure.timeline-key").requires("impact.impact").defines(function(){SpriterTimelineKey=ig.Class.extend({id:0,time:0,spin:0,curveType:0,c1:0,c2:0,c3:0,c4:0,init:function(b,d,e){this.id=b;this.time=d;this.spin=e;this.setCurve(ig.SpriterCurveType.LINEAR)},setCurve:function(b,d,e,f,g){void 0===b&&(b=ig.SpriterCurveType.LINEAR);void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=0);void 0===g&&(g=0);this.curveType=b;this.c1=d;this.c2=e;this.c3=f;this.c4=g}})});
ig.baked=!0;ig.module("plugins.spriter.structure.spatial-timeline-key").requires("plugins.spriter.structure.timeline-key").defines(function(){SpriterSpatialTimelineKey=SpriterTimelineKey.extend({info:null,init:function(b,d,e){this.parent(b,d,e);this.info=new SpriterSpatialInfo}})});ig.baked=!0;
ig.module("plugins.spriter.structure.bone-timeline-key").requires("plugins.spriter.structure.spatial-timeline-key").defines(function(){SpriterBoneTimelineKey=SpriterSpatialTimelineKey.extend({init:function(b,d,e){this.parent(b,d,e)}})});ig.baked=!0;
ig.module("plugins.spriter.structure.curve-type").requires("impact.impact").defines(function(){ig.SpriterCurveType={LINEAR:0,INSTANT:1,QUADRATIC:2,CUBIC:3};ig.SpriterCurveType.getCurveTypeForName=function(b){if("linear"===b)return ig.SpriterCurveType.LINEAR;if("instant"===b)return ig.SpriterCurveType.INSTANT;if("quadratic"===b)return ig.SpriterCurveType.QUADRATIC;if("cubic"===b)return ig.SpriterCurveType.CUBIC;console.warn("Unknown curve type: "+b);return ig.SpriterCurveType.LINEAR}});ig.baked=!0;
ig.module("plugins.spriter.structure.entity").requires("impact.impact").defines(function(){SpriterEntity=ig.Class.extend({id:0,name:"",objectInfos:null,animations:null,init:function(b,d){this.id=b;this.name=d;this.objectInfos=new SpriterIdNameMap;this.animations=new SpriterIdNameMap},addObjectInfo:function(b){this.objectInfos.add(b,b.id,b.name)},getObjectInfoById:function(b){return this.objectInfos.getById(b)},getObjectInfoByName:function(b){return this.objectInfos.getByName(b)},addAnimation:function(b){this.animations.add(b,
b.id,b.name)},getAnimationById:function(b){return this.animations.getById(b)},getAnimationByName:function(b){return this.animations.getByName(b)},getAnimationsCount:function(){return this.animations.getLength()}})});ig.baked=!0;ig.module("plugins.spriter.structure.file").requires("impact.impact").defines(function(){SpriterFile=ig.Class.extend({id:0,name:"",anchorX:0,anchorY:0,init:function(b,d,e,f){this.id=b;this.name=d;this.anchorX=e;this.anchorY=f}})});ig.baked=!0;
ig.module("plugins.spriter.structure.folder").requires("impact.impact").defines(function(){SpriterFolder=ig.Class.extend({id:0,name:"",files:null,init:function(b,d){this.id=b;this.name=d;this.files=new SpriterIdNameMap},addFile:function(b){this.files.add(b,b.id,b.name)},getFileById:function(b){return this.files.getById(b)},getFileByName:function(b){return this.files.getByName(b)}})});ig.baked=!0;
ig.module("plugins.spriter.structure.main-line-key").requires("impact.impact").defines(function(){SpriterMainLineKey=ig.Class.extend({time:0,curveType:0,c1:0,c2:0,c3:0,c4:0,boneRefs:[],objectRefs:[],init:function(b){this.time=b;this.setCurve(ig.SpriterCurveType.LINEAR)},addBoneRef:function(b){this.boneRefs.push(b)},addObjectRef:function(b){this.objectRefs.push(b)},setCurve:function(b,d,e,f,g){void 0===b&&(b=ig.SpriterCurveType.LINEAR);void 0===d&&(d=0);void 0===e&&(e=0);void 0===f&&(f=0);void 0===
g&&(g=0);this.curveType=b;this.c1=d;this.c2=e;this.c3=f;this.c4=g}})});ig.baked=!0;ig.module("plugins.spriter.structure.object-info").requires("impact.impact").defines(function(){SpriterObjectInfo=ig.Class.extend({id:0,type:0,name:"",width:0,height:0,init:function(b,d,e,f,g){this.id=b;this.type=e;this.name=d;this.width=f;this.height=g}})});ig.baked=!0;
ig.module("plugins.spriter.structure.object-timeline-key").requires("plugins.spriter.structure.spatial-timeline-key").defines(function(){SpriterObjectTimelineKey=SpriterSpatialTimelineKey.extend({folder:0,file:0,init:function(b,d,e){this.parent(b,d,e)},setFolderAndFile:function(b,d){this.folder=b;this.file=d}})});ig.baked=!0;
ig.module("plugins.spriter.structure.object-type").requires("impact.impact").defines(function(){SpriterObjectType={SPRITE:0,BONE:1,getObjectTypeForName:function(b){if("sprite"===b)return SpriterObjectType.SPRITE;if("bone"===b)return SpriterObjectType.BONE}}});ig.baked=!0;
ig.module("plugins.spriter.structure.ref").requires("impact.impact").defines(function(){SpriterRef=ig.Class.extend({id:0,parentId:0,timeline:0,key:0,z:0,init:function(b,d,e,f,g){this.id=b;this.parentId=d;this.timeline=e;this.key=f;this.z=g}})});ig.baked=!0;ig.module("plugins.spriter.structure.spatial-info").requires("impact.impact").defines(function(){SpriterSpatialInfo=ig.Class.extend({x:0,y:0,scaleX:1,scaleY:1,pivotX:0,pivotY:0,alpha:1,angle:0})});ig.baked=!0;
ig.module("plugins.spriter.structure.timeline").requires("impact.impact").defines(function(){SpriterTimeline=ig.Class.extend({id:0,name:"",type:0,objectRef:0,keys:[],init:function(b,d,e,f){this.id=b;this.name=d;this.type=e;this.objectRef=f},addKey:function(b){this.keys.push(b)}})});ig.baked=!0;
ig.module("plugins.spriter.id-name-map").requires("impact.impact").defines(function(){SpriterIdNameMap=ig.Class.extend({items:[],itemNames:[],add:function(b,d,e){void 0===d&&(d=this.items.length);if(void 0===e||null===e)e="item_"+d;this.items[d]=b;this.itemNames[e]=d},getById:function(b){return this.items[b]},getByName:function(b){return this.getById(this.itemNames[b])},getLength:function(){return this.items.length}})});ig.baked=!0;
ig.module("plugins.spriter.loader").requires("impact.impact").defines(function(){SpriterLoader=ig.Class.extend({spriter:null,getFileNameWithoutExtension:function(b){return b.split("\\").pop().split("/").pop().split(".")[0]},getDirectoryPath:function(b){b=b.split("\\").pop().split("/");b.pop();return b.join("/")+"/"},parseInt:function(b,d,e){void 0===e&&(e=0);b=b.getAttribute(d);return null!==b?parseInt(b):e},parseFloat:function(b,d,e){void 0===e&&(e=0);b=b.getAttribute(d);return null!==b?parseFloat(b):
e},parseString:function(b,d,e){void 0===e&&(e="");b=b.getAttribute(d);return null!==b?b:e},load:function(b){ig.spriterHasPrint||(ig.spriterHasPrint=!0,console.log("Spriter plugin version 1.0.6"));var d=$.parseXML(b.data);this.spriter=new Spriter;this.spriter.path=this.getDirectoryPath(b.path);b=d.getElementsByTagName("folder");this.loadFolders(this.spriter,b);d=d.getElementsByTagName("entity");this.loadEntities(this.spriter,d);return this.spriter},loadFolders:function(b,d){for(var e=0;e<d.length;e++){var f=
d.item(e),g=new SpriterFolder(this.parseInt(f,"id"),f.getAttribute("name")),f=f.getElementsByTagName("file");this.loadFiles(g,f);b.addFolder(g)}},loadFiles:function(b,d){for(var e=0;e<d.length;e++){var f=d[e],f=new SpriterFile(this.parseInt(f,"id"),this.getFileNameWithoutExtension(f.getAttribute("name")),this.parseFloat(f,"pivot_x"),1-this.parseFloat(f,"pivot_y"));b.addFile(f);new ig.Image(this.spriter.path+b.name+"/"+f.name+".png")}},loadEntities:function(b,d){for(var e=0;e<d.length;e++){var f=d.item(e),
g=new SpriterEntity(this.parseInt(f,"id"),f.getAttribute("name")),j=f.getElementsByTagName("obj_info");this.loadBones(g,j);f=f.getElementsByTagName("animation");this.loadAnimations(g,f);b.addEntity(g)}},loadBones:function(b,d){for(var e=0;e<d.length;e++){var f=d.item(e),f=new SpriterObjectInfo(e,f.getAttribute("name"),SpriterObjectType.getObjectTypeForName(f.getAttribute("type")),this.parseFloat(f,"w"),this.parseFloat(f,"h"));b.addObjectInfo(f)}},loadAnimations:function(b,d){for(var e=0;e<d.length;e++){var f=
d.item(e),g=new SpriterAnimation(this.parseInt(f,"id"),f.getAttribute("name"),this.parseFloat(f,"length"),"true"===this.parseString(f,"looping","true")?SpriterAnimationLooping.LOOPING:SpriterAnimationLooping.NO_LOOPING),j=f.getElementsByTagName("mainline")[0].getElementsByTagName("key");this.loadMainLineKeys(g,j);f=f.getElementsByTagName("timeline");this.loadTimelines(g,f);g.updateCurve();b.addAnimation(g)}},loadMainLineKeys:function(b,d){for(var e=0;e<d.length;e++){var f=d.item(e),g=new SpriterMainLineKey(this.parseFloat(f,
"time")),j=this.parseString(f,"curve_type","linear");"linear"!==j&&g.setCurve(ig.SpriterCurveType.getCurveTypeForName(j),this.parseFloat(f,"c1",0),this.parseFloat(f,"c2",0),this.parseFloat(f,"c3",0),this.parseFloat(f,"c4",0));for(var j=f.getElementsByTagName("bone_ref"),l=0;l<j.length;l++)g.addBoneRef(this.loadRef(j.item(l)));f=f.getElementsByTagName("object_ref");for(j=0;j<f.length;j++)g.addObjectRef(this.loadRef(f.item(j)));b.addMainLineKey(g)}},loadRef:function(b){return new SpriterRef(this.parseInt(b,
"id"),this.parseInt(b,"parent",-1),this.parseInt(b,"timeline"),this.parseInt(b,"key"),this.parseInt(b,"z_index"))},loadTimelines:function(b,d){for(var e=0;e<d.length;e++){var f=d.item(e),g=new SpriterTimeline(this.parseInt(f,"id"),f.getAttribute("name"),"bone"===f.getAttribute("object_type")?SpriterObjectType.BONE:SpriterObjectType.SPRITE,this.parseInt(f,"obj",-1)),f=f.getElementsByTagName("key");this.loadTimelineKeys(g,f);b.addTimeline(g)}},loadTimelineKeys:function(b,d){for(var e=0;e<d.length;e++){var f=
d.item(e),g=null,j=f.firstElementChild,l=this.parseInt(f,"time"),n=this.parseInt(f,"spin",1),m=!1;"bone"===j.tagName?g=new SpriterBoneTimelineKey(e,l,n):"object"===j.tagName?(g=new SpriterObjectTimelineKey(e,l,n),m=!0):console.warn("Unknown key type: "+j.tagName);l=this.parseString(f,"curve_type","linear");"linear"!==l&&g.setCurve(ig.SpriterCurveType.getCurveTypeForName(l),this.parseFloat(f,"c1",0),this.parseFloat(f,"c2",0),this.parseFloat(f,"c3",0),this.parseFloat(f,"c4",0));f=g.info;f.x=this.parseFloat(j,
"x");f.y=-this.parseFloat(j,"y");f.scaleX=this.parseFloat(j,"scale_x",1);f.scaleY=this.parseFloat(j,"scale_y",1);f.angle=360-this.parseFloat(j,"angle");f.alpha=this.parseFloat(j,"a",1);m&&(m=this.parseInt(j,"folder"),l=this.parseInt(j,"file"),g.setFolderAndFile(m,l),m=this.spriter.getFolderById(m).getFileById(l),f.pivotX=this.parseFloat(j,"pivot_x",m.anchorX),f.pivotY=this.parseFloat(j,"pivot_y",m.anchorY));b.addKey(g)}}})});ig.baked=!0;
ig.module("plugins.spriter.scml").requires("impact.impact").defines(function(){SpriterScml=ig.Class.extend({data:null,spriter:null,loaded:!1,failed:!1,loadCallback:null,path:"",staticInstantiate:function(b){return SpriterScml.cache[b]||null},init:function(b){this.path=b;this.load()},load:function(b){this.loaded?b&&b(this.path,!0):(!this.loaded&&ig.ready?(this.loadCallback=b||null,$.ajax(ig.prefix+this.path+ig.nocache,{dataType:"text",success:function(d){this.loaded=!0;this.data=d;this.spriter=(new SpriterLoader).load(this);
this.loadCallback&&b(this.path,!0)}.bind(this),error:function(){this.failed=!0;this.loadCallback&&this.loadCallback(this.path,!1)}.bind(this)})):ig.addResource(this),SpriterScml.cache[this.path]=this)}});SpriterScml.cache={}});ig.baked=!0;
ig.module("plugins.spriter.spriter-bone").requires("impact.impact").defines(function(){SpriterBone=ig.Class.extend({UPDATE_X:1,UPDATE_Y:2,UPDATE_SCALE_X:4,UPDATE_SCALE_Y:8,UPDATE_PIVOT_X:16,UPDATE_PIVOT_Y:32,UPDATE_ANGLE:64,UPDATE_ALPHA:128,on:!1,parentId:0,timelineKey:-1,key:null,timeFrom:0,timeTo:0,from:null,to:null,transformed:null,updateMask:0,init:function(){this.transformed=new SpriterSpatialInfo},setOn:function(b){this.on=b},setKey:function(b,d,e){this.timelineKey=e;var f=b.getTimelineById(d).keys;
d=f[e];var g=(e+1)%f.length;0===g&&b.loopType===SpriterAnimationLooping.NO_LOOPING&&(g=e);e=f[g];this.key=d;this.timeFrom=d.time;this.timeTo=e.time;this.timeTo<this.timeFrom&&(this.timeTo=b.length);this.from=d.info;this.to=e.info;this.updateMask=0;1E-6<Math.abs(this.from.x-this.to.x)&&(this.updateMask+=this.UPDATE_X);1E-6<Math.abs(this.from.y-this.to.y)&&(this.updateMask+=this.UPDATE_Y);1E-6<Math.abs(this.from.scaleX-this.to.scaleX)&&(this.updateMask+=this.UPDATE_SCALE_X);1E-6<Math.abs(this.from.scaleY-
this.to.scaleY)&&(this.updateMask+=this.UPDATE_SCALE_Y);1E-6<Math.abs(this.from.pivotX-this.to.pivotX)&&(this.updateMask+=this.UPDATE_PIVOT_X);1E-6<Math.abs(this.from.pivotY-this.to.pivotY)&&(this.updateMask+=this.UPDATE_PIVOT_Y);1E-6<Math.abs(this.from.alpha-this.to.alpha)&&(this.updateMask+=this.UPDATE_ALPHA);1E-6<Math.abs(this.from.angle-this.to.angle)&&(this.updateMask+=this.UPDATE_ANGLE);this.transformed.x=this.from.x;this.transformed.y=this.from.y;this.transformed.scaleX=this.from.scaleX;this.transformed.scaleY=
this.from.scaleY;this.transformed.pivotX=this.from.pivotX;this.transformed.pivotY=this.from.pivotY;this.transformed.angle=this.from.angle;this.transformed.alpha=this.from.alpha},tween:function(b){b=0<this.updateMask?this.getTweenTime(b):0;this.transformed.x=0<(this.updateMask&this.UPDATE_X)?this.linear(this.from.x,this.to.x,b):this.from.x;this.transformed.y=0<(this.updateMask&this.UPDATE_Y)?this.linear(this.from.y,this.to.y,b):this.from.y;this.transformed.scaleX=0<(this.updateMask&this.UPDATE_SCALE_X)?
this.linear(this.from.scaleX,this.to.scaleX,b):this.from.scaleX;this.transformed.scaleY=0<(this.updateMask&this.UPDATE_SCALE_Y)?this.linear(this.from.scaleY,this.to.scaleY,b):this.from.scaleY;this.transformed.pivotX=0<(this.updateMask&this.UPDATE_PIVOT_X)?this.linear(this.from.pivotX,this.to.pivotX,b):this.from.pivotX;this.transformed.pivotY=0<(this.updateMask&this.UPDATE_PIVOT_Y)?this.linear(this.from.pivotY,this.to.pivotY,b):this.from.pivotY;this.transformed.alpha=0<(this.updateMask&this.UPDATE_ALPHA)?
this.linear(this.from.alpha,this.to.alpha,b):this.from.alpha;this.transformed.angle=0<(this.updateMask&this.UPDATE_ANGLE)?this.angleLinear(this.from.angle,this.to.angle,this.key.spin,b):this.from.angle},update:function(b){this.transformed.angle*=this.sign(b.scaleX)*this.sign(b.scaleY);this.transformed.angle+=b.angle;this.transformed.scaleX*=b.scaleX;this.transformed.scaleY*=b.scaleY;this.scalePosition(b.scaleX,b.scaleY);this.rotatePosition(b.angle);this.translatePosition(b.x,b.y);this.transformed.alpha*=
b.alpha},scalePosition:function(b,d){this.transformed.x*=b;this.transformed.y*=d},rotatePosition:function(b){var d=this.transformed.x,e=this.transformed.y;if(0!==d||0!==e){var f=b*(Math.PI/180);b=Math.cos(f);f=Math.sin(f);this.transformed.x=d*b-e*f;this.transformed.y=d*f+e*b}},translatePosition:function(b,d){this.transformed.x+=b;this.transformed.y+=d},getTweenTime:function(b){if(this.key.curveType===ig.SpriterCurveType.INSTANT)return 0;b=this.clamp((b-this.timeFrom)/(this.timeTo-this.timeFrom),0,
1);switch(this.key.curveType){case ig.SpriterCurveType.LINEAR:return b;case ig.SpriterCurveType.QUADRATIC:return this.quadratic(0,this.key.c1,1,b);case ig.SpriterCurveType.CUBIC:return this.cubic(0,this.key.c1,this.key.c2,1,b)}return 0},linear:function(b,d,e){return(d-b)*e+b},quadratic:function(b,d,e,f){return this.linear(this.linear(b,d,f),this.linear(d,e,f),f)},cubic:function(b,d,e,f,g){return this.linear(this.quadratic(b,d,e,g),this.quadratic(d,e,f,g),g)},angleLinear:function(b,d,e,f){if(0===e)return b;
0<e?d>b&&(d-=360):d<b&&(d+=360);return this.linear(b,d,f)},sign:function(b){return 0>b?-1:0<b?1:0},clamp:function(b,d,e){return b<d?d:e<b?e:b}})});ig.baked=!0;
ig.module("plugins.spriter.spriter-display").requires("impact.entity").defines(function(){SpriterDisplay=ig.Entity.extend({scml:null,spriter:null,tint:null,entityName:"",currentAnimationName:"",animation:null,animationSpeed:0,scale:{x:1,y:1},bones:[],objects:[],attachedImages:{},attachedAnimations:{},time:0,nextTime:0,keyIndex:0,root:null,pause:!1,finished:!1,init:function(b,d,e){this.parent(b,d,e);null==this.scml?console.error("scml is null, please provide one"):(this.spriter=this.scml.spriter,this.entityName=
this.spriter.getEntityById(0).name,this.root=new SpriterSpatialInfo,this.setAnimationSpeedPercent(100),this.setAnimationById(0))},attachImage:function(b,d,e,f,g,j,l,n,m){this.attachedImages[b]={image:d,x:e,y:f,hideOriginal:g,imageOriginal:j,angle:l,plusY:n,offsetPos:m};for(b=0;b<this.objects.length;b++)d=this.objects[b],d.attachedImages=this.attachedImages,d.tint=this.tint},detachImage:function(b){Object.hasOwnProperty.call(this.attachedImages,b)&&(this.attachedImages[b]=null)},attachAnimation:function(b,
d,e,f,g){this.attachedAnimations[b]={animation:d,x:e,y:f,hideOriginal:g};for(b=0;b<this.objects.length;b++)d=this.objects[b],d.attachedAnimations=this.attachedAnimations,d.tint=this.tint},detachAnimation:function(b){Object.hasOwnProperty.call(this.attachedAnimations,b)&&(this.attachedAnimations[b]=null)},getAnimationCount:function(){return this.spriter.getEntityByName(this.entityName).getAnimationsCount()},setAnimationSpeedPercent:function(b){void 0===b&&(b=100);this.animationSpeed=b/100},setAnimationById:function(b,
d){var e=this.spriter.getEntityByName(this.entityName).getAnimationById(b);void 0===e||null===e?console.warn("Animation "+b+" for entity "+this.entityName+" does not exist!"):this.setAnimation(e,d)},setAnimationByName:function(b,d){var e=this.spriter.getEntityByName(this.entityName).getAnimationByName(b);void 0===e||null===e?console.warn("Animation "+b+" for entity "+this.entityName+" does not exist!"):this.setAnimation(e,d)},setAnimationByIdWithProgress:function(b){var d=this.getCurrentAnimationProgress();
(b=this.spriter.getEntityByName(this.entityName).getAnimationById(b))&&this.setAnimationWithProgress(b,d)},setAnimationByNameWithProgress:function(b){var d=this.getCurrentAnimationProgress(),e=this.spriter.getEntityByName(this.entityName).getAnimationByName(b);void 0===e||null===e?console.warn("Animation "+b+" for entity "+this.entityName+" does not exist!"):this.setAnimationWithProgress(e,d)},setAnimation:function(b,d){void 0===d&&(d=!0);this.animation=b;this.finished=!1;if(d||this.currentAnimationName!=
b.name)this.clearTime(),this.currentAnimationName=b.name,this.loadKeys(0,!0)},setAnimationWithProgress:function(b,d){this.animation=b;this.clearTime();this.currentAnimationName=b.name;this.finished=!1;this.time=b.length*d;this.time>b.length&&(this.time=b.length)},getCurrentAnimationProgress:function(){return this.animation&&0<this.animation.length?this.time/this.animation.length:0},clearTime:function(){this.time=0;this.keyIndex=-1},getNextMainLineKeyTime:function(){var b=this.animation.mainLineKeys,
d=(this.keyIndex+1)%b.length;this.nextTime=0!==d?b[d].time:this.animation.length},setBones:function(b,d){void 0===d&&(d=!1);for(var e=0;e<this.bones.length;e++)void 0!==this.bones[e]&&this.bones[e].setOn(!1);for(e=0;e<b.length;e++){var f=b[e];void 0===this.bones[f.id]&&(this.bones[f.id]=new SpriterBone);var g=this.bones[f.id];g.setOn(!0);g.parentId=f.parentId;(g.timelineKey!=f.key||d)&&g.setKey(this.animation,f.timeline,f.key)}},setObjects:function(b,d){void 0===d&&(d=!1);for(var e=0;e<this.objects.length;e++)void 0!==
this.objects[e]&&this.objects[e].setOn(!1);for(e=0;e<b.length;e++){var f=b[e],g=null;void 0===this.objects[f.id]?(g=new SpriterObject(this.spriter),this.objects[f.id]=g):g=this.objects[f.id];g.setOn(!0);g.parentId=f.parentId;(g.timelineKey!=f.key||d)&&g.setKey(this.animation,f.timeline,f.key)}},loadKeys:function(b,d){void 0===d&&(d=!0);if(!this.animation||!this.animation.mainLineKeys)console.error("Animation or mainLineKeys is not defined.");else if(b>=this.animation.mainLineKeys.length)console.error("mainLineKeyIndex out of range for the current animation.");
else{var e=this.animation.mainLineKeys[b];e?(this.setBones(e.boneRefs,d),this.setObjects(e.objectRefs,d)):console.error("Key at mainLineKeyIndex does not exist.")}},update:function(){this.parent()},draw:function(){this.parent();var b=ig.system,d=b.context;d.save();this.clipCallback&&(this.clipCallback.apply(this.clipCallbackContext,[d]),d.clip());d.translate(b.getDrawPos(this.pos.x),b.getDrawPos(this.pos.y));this.scale?(1!=this.scale.x||1!=this.scale.y)&&d.scale(this.scale.x,this.scale.y):(this.scale=
{},this.scale.x=1,this.scale.y=1);this.updateAnimation();d.restore()},updateAnimation:function(){if(this.nextTime<this.animation.length||this.animation.loopType===SpriterAnimationLooping.LOOPING){if(-1===this.keyIndex||this.time>this.nextTime){this.keyIndex=(this.keyIndex+1)%this.animation.mainLineKeys.length;if(this.time>this.animation.length){if(this.animation.loopType===SpriterAnimationLooping.NO_LOOPING){for(;0!==this.keyIndex;)this.getNextMainLineKeyTime(this.time),this.loadKeys(this.keyIndex),
this.updateCharacter(),this.keyIndex=(this.keyIndex+1)%this.animation.mainLineKeys.length;this.finished=!0;return}this.keyIndex=this.time=0}this.getNextMainLineKeyTime(this.time);this.loadKeys(this.keyIndex)}this.updateCharacter();!this.pause&&!this.finished&&(this.time+=1E3*ig.system.tick*this.animationSpeed)}else this.time=this.animation.length,this.finished=!0,this.updateCharacter()},updateCharacter:function(){for(var b=0;b<this.bones.length;b++){var d=this.bones[b];if(d.on){var e=-1===d.parentId?
this.root:this.bones[d.parentId].transformed;d.tween(this.time);d.update(e)}}for(b=0;b<this.objects.length;b++)d=this.objects[b],d.on&&(e=-1===d.parentId?this.root:this.bones[d.parentId].transformed,d.tween(this.time),d.update(e))}})});ig.baked=!0;
ig.module("plugins.spriter.spriter-object").requires("plugins.spriter.spriter-bone").defines(function(){SpriterObject=SpriterBone.extend({spriter:null,sprite:null,image:null,degToRad:Math.PI/180,init:function(b){this.parent();this.spriter=b},setOn:function(b){this.parent(b)},setKey:function(b,d,e){this.parent(b,d,e);d=this.key;b=this.spriter.getFolderById(d.folder);d=b.getFileById(d.file);b=this.spriter.path+b.name+"/"+d.name+".png";if(null==this.image||this.image.path!=b)this.image=new ig.Image(b)},
update:function(b){this.parent(b);this.updateSprite();this.attachedAnimations&&this.attachedAnimations[this.imageKey]&&this.attachedAnimations[this.imageKey].animation.update()},updateSprite:function(){var b=this.transformed,d=this.image;if(this.on&&d){var e=ig.system.context,f=d.width,g=d.height;e.save();1>b.alpha&&(e.globalAlpha=b.alpha);e.translate(b.x,b.y);e.rotate(b.angle*this.degToRad);e.scale(b.scaleX,b.scaleY);d.path!=this.imageKeyPath&&(this.imageKey=null);this.imageKey||(this.imageKey=d.path.split("/").pop(),
this.imageKeyPath=d.path);if(this.attachedAnimations&&this.attachedAnimations[this.imageKey]){var j=this.attachedAnimations[this.imageKey],l=-f*b.pivotX,n=-g*b.pivotY;j.hideOriginal||(null==this.tint?d.draw(l,n,0,0,f,g):d.drawTint(this.tint,1,l,n,0,0,f,g));j.animation.draw(l+j.x,n+j.y)}else if(this.attachedImages&&this.attachedImages[this.imageKey]){j=this.attachedImages[this.imageKey];l=-f*b.pivotX;n=-g*b.pivotY;j.hideOriginal||(null==this.tint?d.draw(l,n,0,0,f,g):d.drawTint(this.tint,1,l,n,0,0,
f,g));if(null!=this.attachedImages[this.imageKey].angle&&0!=this.attachedImages[this.imageKey].angle){e.save();var d=null!=this.attachedImages[this.imageKey].plusY?this.attachedImages[this.imageKey].plusY:0,m=null!=this.attachedImages[this.imageKey].offsetPos?this.attachedImages[this.imageKey].offsetPos:{x:0,y:0};e.translate(29*_DATAGAME.ratioRes,49*_DATAGAME.ratioRes+d);e.rotate(this.attachedImages[this.imageKey].angle*this.degToRad);null==this.tint?j.image.draw(l+j.x-29*_DATAGAME.ratioRes+m.x*_DATAGAME.ratioRes,
n+j.y-(49*_DATAGAME.ratioRes+d+m.y*_DATAGAME.ratioRes)):j.image.drawTint(this.tint,1,l+j.x-29*_DATAGAME.ratioRes+m.x*_DATAGAME.ratioRes,n+j.y-(49*_DATAGAME.ratioRes+d+m.y*_DATAGAME.ratioRes));e.restore()}else null==this.tint?j.image.draw(l+j.x,n+j.y):j.image.drawTint(this.tint,1,l+j.x,n+j.y);j.imageOriginal&&(null==this.tint?j.imageOriginal.draw(l,n,0,0,f,g):j.imageOriginal.drawTint(this.tint,1,l,n,0,0,f,g))}else null==this.tint?d.draw(-f*b.pivotX,-g*b.pivotY,0,0,f,g):d.drawTint(this.tint,1,-f*b.pivotX,
-g*b.pivotY,0,0,f,g);e.restore();1>b.alpha&&(e.globalAlpha=1)}}})});ig.baked=!0;
ig.module("plugins.spriter.spriter").requires("impact.impact","plugins.spriter.structure.animation","plugins.spriter.structure.bone-timeline-key","plugins.spriter.structure.curve-type","plugins.spriter.structure.entity","plugins.spriter.structure.file","plugins.spriter.structure.folder","plugins.spriter.structure.main-line-key","plugins.spriter.structure.object-info","plugins.spriter.structure.object-timeline-key","plugins.spriter.structure.object-type","plugins.spriter.structure.ref","plugins.spriter.structure.spatial-info",
"plugins.spriter.structure.spatial-timeline-key","plugins.spriter.structure.timeline-key","plugins.spriter.structure.timeline","plugins.spriter.id-name-map","plugins.spriter.loader","plugins.spriter.scml","plugins.spriter.spriter-bone","plugins.spriter.spriter-display","plugins.spriter.spriter-object").defines(function(){Spriter=ig.Class.extend({folders:null,entities:null,path:"",init:function(){this.folders=new SpriterIdNameMap;this.entities=new SpriterIdNameMap},addFolder:function(b){this.folders.add(b,
b.id,b.name)},getFolderById:function(b){return this.folders.getById(b)},getFolderByName:function(b){return this.folders.getByName(b)},addEntity:function(b){this.entities.add(b,b.id,b.name)},getEntityById:function(b){return this.entities.getById(b)},getEntityByName:function(b){return this.entities.getByName(b)}})});ig.ChatBubble={};ig.ChatBubble.Factory={};ig.baked=!0;
ig.module("plugins.chat-bubble.factory.text").defines(function(){ig.ChatBubble.Factory.Text={generate:function(b){var d=document.createElement("canvas"),e=d.getContext("2d"),f=this.measure(b,e);"rectangle"==b.chatStyle&&(null==b.isReward||!1==b.isReward)?null!=ig.game.currentWindow.chatBubble&&(d.width=ig.game.currentWindow.chatBubble._chatBubbleCanvasConfigs.bubbleConfigs.box.width):d.width=f.x;"text"==b.textType&&d.width<=380*_DATAGAME.ratioRes&&(d.width=380*_DATAGAME.ratioRes);var g=0;null!=b.sizeTextName&&
null!=b.sizeTextName.y&&(g=b.sizeTextName.y);"rectangle"==b.chatStyle&&(null==b.isReward||!1==b.isReward)?null!=ig.game.currentWindow.chatBubble&&(d.height=f.y<_DATAGAME.dialogBox.height*_DATAGAME.ratioRes?_DATAGAME.dialogBox.height*_DATAGAME.ratioRes+g:f.y+g):d.height=f.y+g;this.draw(b,e);return{configs:b,canvas:d}},measureLine:function(b,d){for(var e=b.measureText(d[0]),f=1;f<d.length;f++){var g=b.measureText(d[f]);g.width>=e.width&&(e=g)}return e},measure:function(b,d){var e=b.text.toString().split("<br>"),
f=b.fullText.toString(),f=f.replaceAll("<>",""),f=f.split("<br>");d.save();d.font=b.fontSize+"px "+b.fontFamily;var g=this.measureLine(d,f);d.restore();b.textData={textLines:e,textLinesFull:f,textWidth:g.width,fontHeight:g.fontBoundingBoxAscent+g.fontBoundingBoxDescent};if(isNaN(b.textData.fontHeight)||null==b.textData.fontHeight)b.textData.fontHeight=b.fontSize;return{x:b.textData.textWidth,y:b.textData.fontHeight*b.textData.textLinesFull.length}},getTextDrawPos:function(b,d){var e={x:"text"==b.textType?
0:0.5*d.canvas.width,y:b.textData.fontHeight/2};switch(b.textAlign){case "start":case "left":"text"!=b.textType&&(e.x-=0.5*b.textData.textWidth);break;case "end":case "right":e.x+=0.5*b.textData.textWidth}if("rectangle"==b.chatStyle&&(null==b.isReward||!1==b.isReward))e={x:0,y:0};return e},draw:function(b,d){d.save();var e=0,f=0;null!=b.sizeTextName&&null!=b.sizeTextName.y&&(f=b.sizeTextName.y);if("rectangle"==b.chatStyle&&(null==b.isReward||!1==b.isReward))e=20*_DATAGAME.ratioRes;d.translate(0,f+
e);d.textAlign=b.textAlign;d.textBaseline="middle";"divider"==b.textType?(d.fillStyle="white",d.font="bold"+b.fontSize+"px "+b.fontFamily):(d.fillStyle=b.fillStyle,d.font=b.fontSize+"px "+b.fontFamily);for(var e=this.getTextDrawPos(b,d),g=f=0;g<b.textData.textLines.length;g++)for(var j=b.textData.textLines[g].split("<>"),l=0,n=0;n<j.length;n++){var m=!1;0<n&&(f++,l+=d.measureText(j[n-1]).width);if(n+1<j.length&&("."==j[n+1].substr(0,1)||","==j[n+1].substring(0,1)||"!"==j[n+1].substring(0,1)||"?"==
j[n+1].substring(0,1)))" "==j[n].substr(j[n].length-1,1)&&(j[n]=j[n].substr(0,j[n].length-1));0==f||0!=f&&!0==ig.game["formatText"+f].reset?(d.fillStyle=b.fillStyle,d.font=b.fontSize+"px "+b.fontFamily):(d.fillStyle=null==ig.game["formatText"+f].color?b.fillStyle:ig.game["formatText"+f].color,null!=ig.game["formatText"+f].format?!0==ig.ua.iOS?-1==ig.game["formatText"+f].format.search("bold")?d.font=ig.game["formatText"+f].format+" "+b.fontSize+"px "+b.fontFamily:(m=ig.game["formatText"+f].format.replaceAll("bold",
""),d.font=m+" "+b.fontSize+"px "+b.fontFamily,m=!0):d.font=ig.game["formatText"+f].format+" "+b.fontSize+"px "+b.fontFamily:d.font=b.fontSize+"px "+b.fontFamily);0!=f&&"game"==ig.game.windowName&&!ig.game.currentWindow.loadSentence&&null!=ig.game["formatText"+f].animEffect?"flash"==ig.game["formatText"+f].animEffect?(null==ig.game["formatText"+f].speed&&(ig.game["formatText"+f].speed=1),b["showFlash"+ig.game["formatText"+f].speed]&&d.fillText(j[n],e.x+l,e.y+g*b.textData.fontHeight)):"shake"==ig.game["formatText"+
f].animEffect&&(null==ig.game["formatText"+f].speed&&(ig.game["formatText"+f].speed=1),b["showShake"+ig.game["formatText"+f].speed]?d.fillText(j[n],e.x+l+1,e.y+g*b.textData.fontHeight):d.fillText(j[n],e.x+l-1,e.y+g*b.textData.fontHeight)):("divider"==b.textType&&(d.fillStyle="white",d.font=b.fontSize*ig.game.fontRatio+"px "+ig.game.fontBubbleThin),m&&(d.lineCap="round",d.lineJoin="round",d.strokeText(j[n],e.x+l,e.y+g*b.textData.fontHeight)),d.fillText(j[n],e.x+l,e.y+g*b.textData.fontHeight))}0!=b.counterAnim&&
(0==b.counterAnim%10&&(b.showFlash5=b.showFlash5?!1:!0),0==b.counterAnim%20&&(b.showFlash4=b.showFlash4?!1:!0),0==b.counterAnim%30&&(b.showFlash3=b.showFlash3?!1:!0),0==b.counterAnim%40&&(b.showFlash2=b.showFlash2?!1:!0),0==b.counterAnim%50&&(b.showFlash1=b.showFlash1?!1:!0),0==b.counterAnim%8&&(b.showShake1=b.showShake1?!1:!0),0==b.counterAnim%7&&(b.showShake2=b.showShake2?!1:!0),0==b.counterAnim%6&&(b.showShake3=b.showShake3?!1:!0),0==b.counterAnim%5&&(b.showShake4=b.showShake4?!1:!0),0==b.counterAnim%
4&&(b.showShake5=b.showShake5?!1:!0));b.counterAnim++;d.restore()}};ig.ChatBubble.Factory.Text.DEFAULT_CONFIGS={text:"",fillStyle:"black",textAlign:"center",fontSize:24,fontFamily:"Arial"}});ig.baked=!0;
ig.module("plugins.chat-bubble.factory.avatar").defines(function(){ig.ChatBubble.Factory.Avatar={generate:function(b,d){if(!b.image)return{configs:b,canvas:d};var e=document.createElement("canvas"),f=e.getContext("2d");e.width=b.size.x+2*b.padding.x;e.height=b.size.y+2*b.padding.y;d&&(e.width+=d.width+b.padding.x,d.height>e.height&&(e.height=d.height));this.draw(b,f);this.drawContentCanvas(b,f,d);return{configs:b,canvas:e}},draw:function(b,d){var e=b.size.y;d.drawImage(b.image.data,b.padding.x,0.5*
d.canvas.height-0.5*e,b.size.x,e)},drawContentCanvas:function(b,d,e){if(!e)return d;d.drawImage(e,b.size.x+2*b.padding.x,0.5*d.canvas.height-0.5*e.height)}};ig.ChatBubble.Factory.Avatar.DEFAULT_CONFIGS={image:null,size:{x:100,y:100},padding:{x:4,y:4}}});ig.baked=!0;
ig.module("plugins.chat-bubble.factory.bubble").defines(function(){ig.ChatBubble.Factory.Bubble={generate:function(b,d){var e=document.createElement("canvas"),f=e.getContext("2d");d?(e.width=d.width,e.height=d.height):(e.width=b.box.width,e.height=b.box.height);var g=this.updateCanvasSize(b,e);b.contentArea=g;this.draw(b,f);this.drawContentCanvas(b,f,d);return{configs:b,canvas:e}},updateCanvasSize:function(b,d){var e=d.width,f=d.height;e<b.box.width&&(e=b.box.width);f<b.box.height&&(f=b.box.height);
var g={x:0.5*e,y:0.5*f,w:e,h:f};g.x+=b.lineWidth;g.y+=b.lineWidth;g.w+=b.lineWidth;g.h+=b.lineWidth;e+=2*b.lineWidth;f+=2*b.lineWidth;g.x+=b.box.padding.x;g.y+=b.box.padding.y;g.w+=b.box.padding.x;g.h+=b.box.padding.y;e+=2*b.box.padding.x;f+=2*b.box.padding.y;this.handleTailOffset(b,g);0>=b.tail.offset.x&&(g.x+=Math.abs(b.tail.offset.x));0>=b.tail.offset.y&&(g.y+=Math.abs(b.tail.offset.y));e+=Math.abs(b.tail.offset.x);f+=Math.abs(b.tail.offset.y);g.x+=b.shadowOffsetX;g.y+=b.shadowOffsetY;e+=2*b.shadowOffsetX;
f+=2*b.shadowOffsetY;g.x+=b.shadowBlur;g.y+=b.shadowBlur;e+=2*b.shadowBlur;f+=2*b.shadowBlur;d.width=e;d.height=f;return g},handleTailOffset:function(b,d){0>b.tail.direction.x&&(b.tail.direction.x=0);1<b.tail.direction.x&&(b.tail.direction.x=1);0>b.tail.direction.y&&(b.tail.direction.y=0);1<b.tail.direction.y&&(b.tail.direction.y=1);b.tail.direction.xLock=0==b.tail.direction.x||1==b.tail.direction.x;b.tail.direction.yLock=0==b.tail.direction.y||1==b.tail.direction.y;if(!b.tail.direction.xLock&&!b.tail.direction.yLock){var e=
b.tail.direction.x-0.5,f=b.tail.direction.y-0.5;Math.abs(e)>Math.abs(f)?(b.tail.direction.x=0>e?0:1,b.tail.direction.xLock=!0):(b.tail.direction.y=0>f?0:1,b.tail.direction.yLock=!0)}else b.tail.direction.yLock&&b.tail.direction.xLock&&(d.w>d.h?b.tail.direction.xLock=!1:b.tail.direction.yLock=!1);b.tail.offset={x:b.tail.direction.xLock?Math.round(2*(b.tail.direction.x-0.5)*b.tail.length):0,y:b.tail.direction.yLock?Math.round(2*(b.tail.direction.y-0.5)*b.tail.length):0}},draw:function(b,d){var e=0;
null!=b.sizeTextName&&null!=b.sizeTextName.y&&(e=b.sizeTextName.y);var f=b.box.round,g=b.contentArea.x-0.5*b.contentArea.w,j=b.contentArea.y-0.5*b.contentArea.h,l=b.contentArea.w,n=b.contentArea.h-e,m=g+l,r=j+n,q=b.tail.width,s=g+l*b.tail.direction.x+b.tail.offset.x,t=j+n*b.tail.direction.y+b.tail.offset.y;if("think"==b.chatType||"none"==b.tail.position)q=0,s=g+l*b.tail.direction.x+0,t=j+n*b.tail.direction.y+0;t<j||t>r?(n=Math.min(Math.max(g+f,s-q),m-f-2*q),q=Math.min(Math.max(g+f+2*q,s+q),m-f)):
(n=Math.min(Math.max(j+f,t-q),r-f-2*q),q=Math.min(Math.max(j+f+2*q,t+q),r-f));var v;t<j&&(v="top");t>j&&(v="bottom");s<g&&(t>=j&&t<=r)&&(v="left");s>g&&(t>=j&&t<=r)&&(v="right");s>=g&&(s<=m&&t>=j&&t<=r)&&(v="center");var u=m*(b.tail.direction.stretchx-b.tail.direction.x);0>b.tail.direction.stretchx&&(u=0);if("think"==b.chatType||"none"==b.tail.position)u=0;var x="text"==b.chatType?30:0;"divider"!=b.textType&&("none"!=b.chatType&&(d.save(),d.translate(0,e),d.beginPath(),d.moveTo(g+f,j),"top"==v&&(d.lineTo(n,
j),d.lineTo(s+u,t),d.lineTo(q,j)),d.lineTo(m-f,j),d.quadraticCurveTo(m,j,m,j+f),"right"==v&&("text"==b.chatType?b.noTail||(d.lineTo(m,34),d.lineTo(s-10,47),d.lineTo(m,60)):(d.lineTo(m,n),d.lineTo(s,t+x),d.lineTo(m,q))),d.lineTo(m,r-f),d.quadraticCurveTo(m,r,m-f,r),"bottom"==v&&(d.lineTo(q,r),d.lineTo(s,t),d.lineTo(n,r)),d.lineTo(g+f,r),+d.quadraticCurveTo(g,r,g,r-f),"left"==v&&("text"==b.chatType?b.noTail||(d.lineTo(g,60),d.lineTo(s+10,47),d.lineTo(g,34)):(d.lineTo(g,q),d.lineTo(s,t+x),d.lineTo(g,
n))),d.lineTo(g,j+f),d.quadraticCurveTo(g,j,g+f,j),d.closePath()),d.save(),d.globalAlpha=b.fillOpacity,d.shadowColor=b.shadowColor,d.shadowBlur=b.shadowBlur,d.shadowOffsetX=b.shadowOffsetX,d.shadowOffsetY=b.shadowOffsetY,d.fillStyle=b.fillStyle,d.fill(),d.restore(),d.globalAlpha=1,d.lineWidth=b.lineWidth,d.strokeStyle=b.strokeStyle,d.stroke(),d.restore(),d.save(),d.translate(0,e),d.fillStyle=b.fillStyle,d.lineWidth=b.lineWidth+1,d.strokeStyle=b.strokeStyle,"think"==b.chatType&&("right"==b.tail.position?
(d.beginPath(),d.arc(m-45,j-18,9,0,2*Math.PI),d.closePath(),d.stroke(),d.fill(),d.beginPath(),d.arc(m-24,j-30,6,0,2*Math.PI),d.closePath(),d.stroke(),d.fill(),d.beginPath(),d.arc(m-10,j-40,3,0,2*Math.PI),d.closePath(),d.stroke(),d.fill()):"left"==b.tail.position?(d.beginPath(),d.arc(g+45,j-18,9,0,2*Math.PI),d.closePath(),d.stroke(),d.fill(),d.beginPath(),d.arc(g+24,j-30,6,0,2*Math.PI),d.closePath(),d.stroke(),d.fill(),d.beginPath(),d.arc(g+10,j-40,3,0,2*Math.PI),d.closePath(),d.stroke(),d.fill()):
"center"==b.tail.position&&(d.beginPath(),d.arc(g+l/2+45,j-18,9,0,2*Math.PI),d.closePath(),d.stroke(),d.fill(),d.beginPath(),d.arc(g+l/2+24,j-30,6,0,2*Math.PI),d.closePath(),d.stroke(),d.fill(),d.beginPath(),d.arc(g+l/2+10,j-40,3,0,2*Math.PI),d.closePath(),d.stroke(),d.fill())),d.restore());null!=b.textName&&(null!=b.realName&&"none"!=b.realName.toLowerCase())&&this.drawTextName(b,d)},drawTextName:function(b,d){d.save();var e=0;null!=b.sizeTextName&&null!=b.sizeTextName.y&&(e=b.sizeTextName.y);d.translate(0,
e);var f=b.contentArea.x-0.5*b.contentArea.w,g=b.contentArea.y-0.5*b.contentArea.h-e+10*_DATAGAME.ratioRes,j=10*_DATAGAME.ratioRes;"left"==b.tail.position?f=80*_DATAGAME.ratioRes:"right"==b.tail.position?f=420*_DATAGAME.ratioRes-b.sizeTextName.x:"none"==b.tail.position&&"rectangle"==b.chatStyle&&(f="center"==_DATAGAME.speakerName.align.toLowerCase()?f+(b.contentArea.w/2-b.sizeTextName.x/2):"right"==_DATAGAME.speakerName.align.toLowerCase()?f+(b.contentArea.w-b.sizeTextName.x-15*_DATAGAME.ratioRes):
f+15*_DATAGAME.ratioRes);d.beginPath();d.moveTo(f+j,g);d.lineTo(f+b.sizeTextName.x-j,g);d.quadraticCurveTo(f+b.sizeTextName.x,g,f+b.sizeTextName.x,g+j);d.lineTo(f+b.sizeTextName.x,g+e-j);d.quadraticCurveTo(f+b.sizeTextName.x,g+e,f+b.sizeTextName.x-j,g+e);d.lineTo(f+j,g+e);d.quadraticCurveTo(f,g+e,f,g+e-j);d.lineTo(f,g+j);d.quadraticCurveTo(f,g,f+j,g);d.closePath();j=b.textName.toLowerCase();j=j.replaceAll(" ","");d.globalAlpha=_DATAGAME.speakerName.bgOpacity;d.fillStyle=_DATAGAME.speakerName.bgColor;
"none"==j?null!=_DATAGAME.speakerName.bgColor&&"none"!=_DATAGAME.speakerName.bgColor.toLowerCase()&&(d.fillStyle=_DATAGAME.speakerName.bgColor,d.fill()):null==_DATAGAME.spriterData[j].bgName?null!=_DATAGAME.speakerName.bgColor&&"none"!=_DATAGAME.speakerName.bgColor.toLowerCase()&&(d.fillStyle=_DATAGAME.speakerName.bgColor,d.fill()):"none"!=_DATAGAME.spriterData[j].bgName.toLowerCase()&&(d.fillStyle=_DATAGAME.spriterData[j].bgName,d.fill());d.font=ig.game.fontBubbleWeight+" "+b.fontSizeName+"px "+
b.fontFamily;d.textAlign="center";"none"==j?(d.fillStyle="white",null!=_DATAGAME.speakerName.textColor&&"none"!=_DATAGAME.speakerName.textColor.toLowerCase()&&(d.fillStyle=_DATAGAME.speakerName.textColor)):(d.fillStyle="white",null==_DATAGAME.spriterData[j].textName?null!=_DATAGAME.speakerName.textColor&&"none"!=_DATAGAME.speakerName.textColor.toLowerCase()&&(d.fillStyle=_DATAGAME.speakerName.textColor):"none"!=_DATAGAME.spriterData[j].textName.toLowerCase()&&(d.fillStyle=_DATAGAME.spriterData[j].textName));
d.globalAlpha=1;d.lineWidth=4*_DATAGAME.ratioRes;"none"==j?null!=_DATAGAME.speakerName.strokeColor&&"none"!=_DATAGAME.speakerName.strokeColor.toLowerCase()&&(d.strokeStyle=_DATAGAME.speakerName.strokeColor,d.stroke()):null==_DATAGAME.spriterData[j].outlineName?null!=_DATAGAME.speakerName.strokeColor&&"none"!=_DATAGAME.speakerName.strokeColor.toLowerCase()&&(d.strokeStyle=_DATAGAME.speakerName.strokeColor,d.stroke()):"none"!=_DATAGAME.spriterData[j].outlineName.toLowerCase()&&(d.strokeStyle=_DATAGAME.spriterData[j].outlineName,
d.stroke());j=b.realName;"amy"==j.toLowerCase()&&(j=ig.game.sessionData.playerName);d.textAlign="center";d.textBaseline="middle";d.fillText(j,f+b.sizeTextName.x/2,g+e/2);d.restore()},drawContentCanvas:function(b,d,e){if(!e)return d;d.drawImage(e,b.contentArea.x-0.5*e.width,b.contentArea.y-0.5*e.height)}};ig.ChatBubble.Factory.Bubble.DEFAULT_CONFIGS={lineWidth:2,fillStyle:"lightblue",strokeStyle:"black",shadowColor:"black",shadowBlur:4,shadowOffsetX:4,shadowOffsetY:4,box:{width:200,height:100,round:10,
padding:{x:10,y:10}},tail:{length:30,width:15,direction:{x:0.5,y:0}}}});ig.baked=!0;
ig.module("plugins.chat-bubble.chat-bubble-factory").requires("plugins.chat-bubble.factory.text","plugins.chat-bubble.factory.avatar","plugins.chat-bubble.factory.bubble").defines(function(){ig.ChatBubble.FactoryManager={deepCopyAndMergerConfigs:function(b,d){var e=JSON.parse(JSON.stringify(b));ig.merge(e,d);return e},generateCanvas:function(b){b=this.generateText(b);b=this.generateAvatar(b.configs,b.canvas);return b=this.generateBubble(b.configs,b.canvas)},generateText:function(b){var d=this.deepCopyAndMergerConfigs(ig.ChatBubble.Factory.Text.DEFAULT_CONFIGS,
b.textConfigs),e=ig.ChatBubble.Factory.Text.generate(d);b.textConfigs=d;e.configs=b;return e},generateAvatar:function(b,d){var e=this.deepCopyAndMergerConfigs(ig.ChatBubble.Factory.Avatar.DEFAULT_CONFIGS,b.avatarConfigs),f=ig.ChatBubble.Factory.Avatar.generate(e,d);b.avatarConfigs=e;f.configs=b;return f},generateBubble:function(b,d){var e=this.deepCopyAndMergerConfigs(ig.ChatBubble.Factory.Bubble.DEFAULT_CONFIGS,b.bubbleConfigs),f=ig.ChatBubble.Factory.Bubble.generate(e,d);b.bubbleConfigs=e;f.configs=
b;return f}}});ig.baked=!0;
ig.module("plugins.chat-bubble.chat-bubble").requires("impact.entity","plugins.chat-bubble.chat-bubble-factory").defines(function(){ig.ChatBubble.Entity=ig.Entity.extend({parentPos:{x:0,y:0},chatStyle:"bubble",chatBubbleDrawConfigs:{},chatBubbleAppearTime:0.3,chatBubbleAliveTime:3,chatBubbleDisappearTime:0.2,chatBubbleParent:null,chatBubblePercent:{x:0,y:0},chatBubbleOffset:{x:0,y:0},chatBubbleAlpha:0.8,STATES:{DELAY:-1,TWEEN_IN:0,TWEEN_OUT:1,ALIVE:2,KILL:3},_currentState:0,_tweenProgress:0,_tweenFactor:0,
_currentTickTime:0,init:function(b,d,e){this.parent(b,d,e);this.chatBubbleDrawConfigs||(this.chatBubbleDrawConfigs={});b=ig.ChatBubble.FactoryManager.generateCanvas(this.chatBubbleDrawConfigs);this._chatBubbleCanvasConfigs=b.configs;this._chatBubbleCanvas=b.canvas;this._currentState=this.STATES.TWEEN_IN;this.size={x:this._chatBubbleCanvas.width,y:this._chatBubbleCanvas.height};this.repos()},closeChatBubble:function(){this.kill();this._currentState=this.STATES.KILL;this._currentTickTime=this._tweenProgress=
0},updateTick:function(b,d,e){b<d&&(b+=ig.system.tick,b>=d&&(b=d,"function"===typeof e&&e()));return b},update:function(){this.parent();this.updateState()},repos:function(){"rectangle"==this.chatStyle&&(this.size={x:this._chatBubbleCanvas.width,y:this._chatBubbleCanvas.height});this.updatePos()},checkSFXText:function(){null!=ig.game.sfxTextName&&""!=ig.game.sfxTextName&&(ig.game.dataSFXText=ig.soundHandler.sfxPlayer.playSFX(ig.game.sfxTextName,!0),ig.soundHandler.sfxPlayer.volume(ig.game.sessionData.sound/
ig.game.maxVolume))},updateState:function(){switch(this._currentState){case this.STATES.TWEEN_IN:if(0==this.chatBubbleAppearTime){this._currentState=this.STATES.ALIVE;if("game"==ig.game.windowName&&(!this.boolNotif||null==this.boolNotif||void 0===this.boolNotif))ig.game.currentWindow.loadSentence=!0,ig.game.currentWindow.isBubble=!0,this.checkSFXText();this._tweenProgress=1;this._currentTickTime=0;this._tweenFactor=this.updateTweenProgress(this._tweenProgress);"rectangle"==this.chatStyle&&(ig.game.currentWindow.calculatePosBubble(),
this.repos())}else this._currentTickTime=this.updateTick(this._currentTickTime,this.chatBubbleAppearTime,function(){this._currentState=this.STATES.ALIVE;if("game"==ig.game.windowName&&(!this.boolNotif||null==this.boolNotif||void 0===this.boolNotif))ig.game.currentWindow.loadSentence=!0,ig.game.currentWindow.isBubble=!0,this.checkSFXText()}.bind(this)),this._currentState==this.STATES.TWEEN_IN?(this._tweenProgress=this._currentTickTime/this.chatBubbleAppearTime,0<=this._tweenProgress&&0.3>=this._tweenProgress&&
"rectangle"==this.chatStyle&&(ig.game.currentWindow.calculatePosBubble(),this.repos())):(this._tweenProgress=1,this._currentTickTime=0),this._tweenFactor=this.updateTweenProgress(this._tweenProgress);break;case this.STATES.ALIVE:0<this.chatBubbleAliveTime&&(this._currentTickTime=this.updateTick(this._currentTickTime,this.chatBubbleAliveTime,function(){this._currentState=this.STATES.TWEEN_OUT;this.boolNotif&&this.chatBubbleParent.isShowBubble&&(this.chatBubbleParent.isShowBubble=!1,this.chatBubbleParent.showUI(!1))}.bind(this)),
this._currentState!=this.STATES.ALIVE&&(this._currentTickTime=0));break;case this.STATES.TWEEN_OUT:0==this.chatBubbleDisappearTime?(this.kill(),this.boolNotif||ig.game.currentWindow.checkChatBubble(),this._currentTickTime=this._tweenProgress=0):(this._currentTickTime=this.updateTick(this._currentTickTime,this.chatBubbleDisappearTime,function(){this.kill();this.boolNotif||ig.game.currentWindow.checkChatBubble()}.bind(this)),this._currentState==this.STATES.TWEEN_OUT?this._tweenProgress=1-this._currentTickTime/
this.chatBubbleDisappearTime:this._currentTickTime=this._tweenProgress=0),this._tweenFactor=this.updateTweenProgress(this._tweenProgress)}},updatePos:function(){this.pos={x:this.parentPos.x+this.chatBubbleParent.size.x*this.chatBubblePercent.x+this.chatBubbleOffset.x,y:this.parentPos.y+this.chatBubbleParent.size.y*this.chatBubblePercent.y+this.chatBubbleOffset.y};this.pos.x-=this.size.x*this._chatBubbleCanvasConfigs.bubbleConfigs.tail.direction.x;this.pos.y-=this.size.y*this._chatBubbleCanvasConfigs.bubbleConfigs.tail.direction.y},
updateTweenProgress:function(b){return(b-=1)*b*(2.70158*b+1.70158)+1},draw:function(b){var d=this.pos.x+0.5*this.size.x,e=this.pos.y+0.5*this.size.y,f=1*this._tweenFactor,g=1*this._tweenFactor;b=ig.system.context;b.save();b.globalAlpha=this.chatBubbleAlpha*this._tweenFactor;ig.game.showBubbleTextInGame||(b.globalAlpha=0);b.translate(0.5*this._chatBubbleCanvas.width*(-1+2*this._chatBubbleCanvasConfigs.bubbleConfigs.tail.direction.x)*(1-f)-ig.game.screen.x,0.5*this._chatBubbleCanvas.height*(-1+2*this._chatBubbleCanvasConfigs.bubbleConfigs.tail.direction.y)*
(1-g)-ig.game.screen.y);b.translate(d,e);b.scale(f,g);b.translate(-d,-e);b.drawImage(this._chatBubbleCanvas,d-0.5*this._chatBubbleCanvas.width,e-0.5*this._chatBubbleCanvas.height);b.restore();b=ig.ChatBubble.FactoryManager.generateCanvas(this.chatBubbleDrawConfigs);this._chatBubbleCanvasConfigs=b.configs;this._chatBubbleCanvas=b.canvas}})});ig.baked=!0;
ig.module("plugins.chat-bubble.chat-bubble-manager").requires("impact.game","plugins.chat-bubble.chat-bubble").defines(function(){ig.Game.inject({_spawnChatBubble:function(b){"undefined"===typeof b.zIndex&&(b.zIndex=b.chatBubbleParent.zIndex+1);var d=ig.game.spawnEntity(ig.ChatBubble.Entity,Number.MIN_VALUE,Number.MIN_VALUE,b);ig.game.sortEntitiesDeferred();return b.chatBubbleParent.currentChatBubble=d},spawnChatBubble:function(b,d){if(b)return"text"!=d.chatBubbleDrawConfigs.bubbleConfigs.chatType&&
b.currentChatBubble&&(b.currentChatBubble.closeChatBubble(),b.currentChatBubble=null),d||(d={}),d.chatBubbleParent=b,this._spawnChatBubble(d)}});ig.Entity.inject({currentChatBubble:null,kill:function(){this.currentChatBubble&&(this.currentChatBubble.closeChatBubble(),this.currentChatBubble=null);this.parent()}})});ig.baked=!0;
ig.module("game.entities.buttons.button").requires("impact.entity","plugins.data.vector").defines(function(){EntityButton=ig.Entity.extend({collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.A,size:new Vector2(48,48),fillColor:null,zIndex:_DATAGAME.zIndexData.buttonOnMenu,visible:!0,isClickable:!0,isHover:!1,isMouseOver:!1,init:function(b,d,e){this.parent(b,d,e);!ig.global.wm&&!isNaN(e.zIndex)&&(this.zIndex=e.zIndex);b=Math.floor(256*Math.random());d=Math.floor(256*Math.random());e=Math.floor(256*
Math.random());this.fillColor="rgba("+b+","+e+","+d+",1)"},hover:function(){},leave:function(){},update:function(){this.parent();this.underPointer()?this.hover():this.leave();!0==this.boolSinking&&(1==this.statSinking?5<=this.offset.y+1?(this.offset.y=5,this.statSinking=2):this.offset.y+=1:2==this.statSinking&&(0>=this.offset.y-1?(this.offset.y=0,this.statSinking=1,this.boolSinking=!1,this.funcComplete()):this.offset.y-=1))},clicked:function(){this.visible&&(ig.soundHandler.sfxPlayer.play("click"),
this.sinkingEffect())},clicking:function(){},released:function(){},funcComplete:function(){},sinkingEffect:function(){this.boolSinking=!0;this.statSinking=1},underPointer:function(){var b=ig.game.io.getClickPos();return this.containPoint(b)}});EntityButtonIcon=EntityButton.extend({collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.A,image:new ig.Image(_RESOURCESINFO.image.btnBlank2,253,75),size:{x:253,y:75},textButton:"",halfSize:null,fillColor:null,zIndex:_DATAGAME.zIndexData.buttonOnMenu,init:function(b,
d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};!ig.global.wm&&!isNaN(e.zIndex)&&(this.zIndex=e.zIndex);b=Math.floor(256*Math.random());d=Math.floor(256*Math.random());e=Math.floor(256*Math.random());this.fillColor="rgba("+b+","+e+","+d+",1)"},draw:function(){this.parent();if(this.visible){var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.image.draw(0,0);this.icon.draw(-this.icon.width/2,this.halfSize.y-this.icon.height/2);
b.font=ig.game.fontNameWeight+" "+Math.round(0.5*ig.game.fontNameSize*ig.game.fontRatio)+"px "+ig.game.fontName;b.textAlign="center";b.fillStyle="white";b.fillText(this.textButton,this.halfSize.x+12,this.halfSize.y+9);b.restore();this.drawObject()}},drawObject:function(){},update:function(){this.parent()},funcComplete:function(){},clicked:function(){this.visible&&this.isClickable&&(ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect(),("menu"==ig.game.windowName||"after photoshoot"==ig.game.windowName)&&
ig.game.currentWindow.enabledButton(!1))}});EntityButtonText=EntityButton.extend({collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.A,image:new ig.Image(_RESOURCESINFO.image.btnBlank2,253,75),size:{x:253,y:75},textButton:"",textSize:35,yText:11,halfSize:null,fillColor:null,zIndex:_DATAGAME.zIndexData.buttonOnMenu,init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};!ig.global.wm&&!isNaN(e.zIndex)&&(this.zIndex=e.zIndex);b=Math.floor(256*Math.random());d=Math.floor(256*
Math.random());e=Math.floor(256*Math.random());this.fillColor="rgba("+b+","+e+","+d+",1)"},draw:function(){this.parent();if(this.visible){var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.image.draw(0,0);b.font=ig.game.fontNameWeight+" "+Math.round(0.63*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName;b.textAlign="center";b.fillStyle="white";b.fillText(this.textButton,this.halfSize.x,this.halfSize.y+this.yText);b.restore()}},
update:function(){this.parent()},funcComplete:function(){},clicked:function(){this.visible&&(ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect())}})});ig.baked=!0;
ig.module("plugins.responsive-keyboard.keyboard-tile").requires("impact.entity","game.entities.buttons.button").defines(function(){ig.EntityKeyboardTile=EntityButton.extend({collides:ig.Entity.COLLIDES.NEVER,type:ig.Entity.TYPE.A,id:"","char":"",ctx:null,icon:null,iconSize:38*_DATAGAME.ratioRes,pressed:!1,scale:1,targetScale:1,oriSize:{x:0,y:0},fontStyle:28*_DATAGAME.ratioRes+"px arial,sans-serif",fontColor:"rgba(0,0,0,1)",backgroundColor:"rgba(1,1,1,1)",isUppercase:!0,refSizeVertical:{x:46,y:53},
refSizeHorizontal:{x:138,y:60},refSizeVertical2:{x:68,y:53},refSizeHorizontal2:{x:204,y:60},type:1,tileRounded:10,isFirstShow:!0,init:function(b,d,e){this.parent(b,d,e);ig.system.width>ig.system.height?1==this.type?(this.size.x=this.refSizeHorizontal.x,this.size.y=this.refSizeHorizontal.y,this.oriSize.x=this.refSizeHorizontal.x,this.oriSize.y=this.refSizeHorizontal.y):(this.size.x=this.refSizeHorizontal2.x,this.size.y=this.refSizeHorizontal2.y,this.oriSize.x=this.refSizeHorizontal2.x,this.oriSize.y=
this.refSizeHorizontal2.y):1==this.type?(this.size.x=this.refSizeVertical.x,this.size.y=this.refSizeVertical.y,this.oriSize.x=this.refSizeVertical.x,this.oriSize.y=this.refSizeVertical.y):(this.size.x=this.refSizeVertical2.x,this.size.y=this.refSizeVertical2.y,this.oriSize.x=this.refSizeVertical2.x,this.oriSize.y=this.refSizeVertical2.y);this.ctx=ig.system.context;this.zIndex=this.manager.zIndex+1;ig.game.sortEntitiesDeferred()},draw:function(){this.parent();if(!(0>this.zIndex))if(this.isFirstShow)this.isFirstShow=
!1;else{this.ctx.save();this.ctx.scale(this.scale,this.scale);this.ctx.fillStyle=this.backgroundColor;this.roundRect(this.ctx,(this.pos.x+0.5*this.size.x*(1-this.scale))/this.scale,(this.pos.y+0.5*this.size.y*(1-this.scale))/this.scale,this.size.x,this.size.y,this.tileRounded,!0,!1);if(null!=this.icon){var b=this.iconSize;ig&&ig.packer&&this.icon.drawImage?this.icon.drawImage(0,0,this.icon.width,this.icon.height,(this.pos.x+this.size.x/2-b/2+0.5*b*(1-this.scale))/this.scale,(this.pos.y+this.size.y/
2-b/2+0.5*b*(1-this.scale))/this.scale,b,b):this.ctx.drawImage(this.icon.data,0,0,this.icon.width,this.icon.height,(this.pos.x+this.size.x/2-b/2+0.5*b*(1-this.scale))/this.scale,(this.pos.y+this.size.y/2-b/2+0.5*b*(1-this.scale))/this.scale,b,b)}else this.ctx.fillStyle=this.fontColor,this.ctx.font=this.fontStyle,this.ctx.textAlign="center",this.ctx.textBaseline="middle",this.isUppercase?this.ctx.fillText(this.char.toUpperCase(),(this.pos.x+this.size.x/2)/this.scale,(this.pos.y+this.size.y/2+2)/this.scale):
this.ctx.fillText(this.char.toLowerCase(),(this.pos.x+this.size.x/2)/this.scale,(this.pos.y+this.size.y/2+2)/this.scale);this.ctx.restore()}},update:function(){this.parent();this.checkRelease();this.scale+=(this.targetScale-this.scale)/5;ig.system.width>ig.system.height?1==this.type?(this.oriSize.x=this.refSizeHorizontal.x,this.oriSize.y=this.refSizeHorizontal.y):(this.oriSize.x=this.refSizeHorizontal2.x,this.oriSize.y=this.refSizeHorizontal2.y):1==this.type?(this.oriSize.x=this.refSizeVertical.x,
this.oriSize.y=this.refSizeVertical.y):(this.oriSize.x=this.refSizeVertical2.x,this.oriSize.y=this.refSizeVertical2.y)},clicked:function(){this.targetScale=0.85;if(!this.pressed&&(this.pressed=!0,"function"===typeof this.manager.onButtonReleased))if(this.isUppercase)this.manager.onButtonReleased(this.id.toUpperCase());else this.manager.onButtonReleased(this.id.toLowerCase())},released:function(){this.pressed&&(this.pressed=!1,this.targetScale=1)},checkRelease:function(){ig.input.released("click")&&
(this.targetScale=1)},show:function(){this.isFirstShow=!0;this.zIndex=this.manager.zIndex+1;ig.game.sortEntitiesDeferred()},hide:function(){this.zIndex=-1;ig.game.sortEntitiesDeferred()},toggleShift:function(){this.isUppercase=!this.isUppercase},roundRect:function(b,d,e,f,g,j,l,n){j={tl:j,tr:j,br:j,bl:j};b.beginPath();b.moveTo(d+j.tl,e);b.lineTo(d+f-j.tr,e);b.quadraticCurveTo(d+f,e,d+f,e+j.tr);b.lineTo(d+f,e+g-j.br);b.quadraticCurveTo(d+f,e+g,d+f-j.br,e+g);b.lineTo(d+j.bl,e+g);b.quadraticCurveTo(d,
e+g,d,e+g-j.bl);b.lineTo(d,e+j.tl);b.quadraticCurveTo(d,e,d+j.tl,e);b.closePath();l&&b.fill();n&&b.stroke()}})});ig.baked=!0;
ig.module("plugins.responsive-keyboard.keyboard").requires("impact.entity","plugins.responsive-keyboard.keyboard-tile").defines(function(){ig.EntityKeyboard=ig.Entity.extend({fontStyle:"bold 34px arial,sans-serif",fontColor:"rgba(0,0,0,1)",backgroundColorRegular:"",backgroundColorSpecial:"",keyboardBackground:"",tileRounded:10,space:5,padding:{x:10,y:10},iconSize:38,shiftIcon:new ig.Image(_RESOURCESINFO.image.shift),enterIcon:new ig.Image(_RESOURCESINFO.image.enter),backspaceIcon:new ig.Image(_RESOURCESINFO.image.backspace),
tileSpace:{x:5,y:5},tiles:[],charTiles:[],symbolTiles:[],emojiTiles:[],specialTiles:[],bckSpace:null,space:null,anchor:"bottom",defaultZIndex:0,oldScreenSize:{x:0,y:0},isPortrait:!1,isSymbolActive:!1,isEmojiActive:!1,init:function(b,d,e){this.parent(b,d,e);this.defaultZIndex=this.zIndex;this.ctx=ig.system.context;this.tileSpace.x=this.space;this.tileSpace.y=this.space;b=["QWERTYUIOP".split(""),"ASDFGHJKL".split(""),"ZXCVBNM".split("")];d=["1234567890".split(""),"@#$_&-+()".split(""),"/*\"':!?".split("")];
e=["\ud83d\ude03 \ud83d\ude04 \ud83d\ude05 \ud83d\ude06 \ud83d\ude0a \ud83d\ude0e \ud83d\ude17 \ud83d\ude18 \ud83e\udd17 \ud83d\ude0d".split(" "),"\ud83d\ude1b \ud83e\udd73 \ud83d\ude25 \ud83d\ude2d \ud83d\ude29 \ud83e\udd22 \ud83e\udd2e \ud83d\ude37 \ud83e\udd75".split(" "),"\ud83e\udd76 \ud83d\ude31 \ud83d\ude12 \ud83d\ude20 \ud83d\ude21 \ud83d\ude2a \ud83d\ude34".split(" ")];for(var f=[],g=0;g<b.length;g++){for(var f=[],j=0;j<b[g].length;j++){var l=ig.game.spawnEntity(ig.EntityKeyboardTile,0,0,
{id:b[g][j],manager:this,type:1,backgroundColor:this.backgroundColorRegular,"char":b[g][j],fontStyle:this.fontStyle,fontColor:this.fontColor,tileRounded:this.tileRounded});f.push(l)}this.charTiles.push(f)}this.tiles=this.charTiles;for(g=0;g<d.length;g++){f=[];for(j=0;j<d[g].length;j++)l=ig.game.spawnEntity(ig.EntityKeyboardTile,0,0,{id:d[g][j],manager:this,type:1,backgroundColor:this.backgroundColorRegular,"char":d[g][j],fontStyle:this.fontStyle,fontColor:this.fontColor,tileRounded:this.tileRounded}),
l.hide(),f.push(l);this.symbolTiles.push(f)}for(g=0;g<e.length;g++){f=[];for(j=0;j<e[g].length;j++)l=ig.game.spawnEntity(ig.EntityKeyboardTile,0,0,{id:e[g][j],manager:this,type:1,backgroundColor:this.backgroundColorRegular,"char":e[g][j],fontStyle:this.fontStyle,fontColor:this.fontColor,tileRounded:this.tileRounded}),l.hide(),f.push(l);this.emojiTiles.push(f)}this.bckSpace=ig.game.spawnEntity(ig.EntityKeyboardTile,0,0,{manager:this,type:2,backgroundColor:this.backgroundColorSpecial,icon:this.backspaceIcon,
iconSize:this.iconSize,id:"BACKSPACE",fontStyle:this.fontStyle,fontColor:this.fontColor,tileRounded:this.tileRounded});this.specialTiles.push(this.bckSpace);this.space=ig.game.spawnEntity(ig.EntityKeyboardTile,0,0,{manager:this,type:1,backgroundColor:this.backgroundColorRegular,"char":"",id:" ",fontStyle:this.fontStyle,fontColor:this.fontColor,tileRounded:this.tileRounded});this.specialTiles.push(this.space);this.shift=ig.game.spawnEntity(ig.EntityKeyboardTile,0,0,{manager:this,type:2,backgroundColor:this.backgroundColorSpecial,
id:"SHIFT",icon:this.shiftIcon,iconSize:this.iconSize,fontStyle:this.fontStyle,fontColor:this.fontColor,tileRounded:this.tileRounded});this.specialTiles.push(this.shift)},draw:function(){this.parent();0>this.zIndex||(this.ctx.save(),this.ctx.fillStyle=this.keyboardBackground,this.ctx.fillRect(this.pos.x,this.pos.y,this.size.x,this.size.y),this.ctx.restore())},update:function(){var b;this.parent();this.size.x=0;this.size.y=0;if(!(0>this.zIndex)){if(this.oldScreenSize.x!=ig.system.width||this.oldScreenSize.y!=
ig.system.height)this.oldScreenSize.x=ig.system.width,this.oldScreenSize.y=ig.system.height,ig.system.height>ig.system.width&&(this.isPortrait=!0);var d=(ig.system.width-2*this.padding.x-9*this.tileSpace.x)/10,e=0;this.isPortrait?(b=0.3*ig.system.height,e=d/this.tiles[0][0].oriSize.x*this.tiles[0][0].oriSize.y,2*this.padding.y+3*this.tileSpace.y+4*e>b&&(e=(b-2*this.padding.y-3*this.tileSpace.y)/4),e<this.tiles[0][0].oriSize.y&&(e=this.tiles[0][0].oriSize.y)):e=this.tiles[0][0].oriSize.y;b=this.bckSpace.oriSize.x/
this.tiles[0][0].oriSize.x*d;this.bckSpace.size.x=b;this.bckSpace.size.y=e;this.space.size.x=7*d+6*this.tileSpace.x;this.space.size.y=e;this.shift.size.x=b;this.shift.size.y=e;this.size.x=ig.system.width;this.size.y=2*this.padding.y+4*e+3*this.tileSpace.y;this.pos={x:ig.system.width/2-this.size.x/2,y:ig.system.height-this.size.y};for(var f,g,j=0;j<this.tiles.length;j++){g=this.tiles[j].length*d+(this.tiles[j].length-1)*this.tileSpace.x;b=ig.system.width/2-g/2;f=this.pos.y+this.padding.y+j*(e+this.tileSpace.y);
for(var l=0;l<this.tiles[j].length;l++)this.tiles[j][l].pos.x=b+l*(d+this.tileSpace.x),this.tiles[j][l].pos.y=f,this.tiles[j][l].size.x=d,this.tiles[j][l].size.y=e}b=ig.system.width/2-g/2;f=this.pos.y+this.padding.y+3*(this.space.size.y+this.tileSpace.y);this.space.pos.x=b+this.tileSpace.x;this.space.pos.y=f;this.shift.pos.x=b-this.tileSpace.x-this.shift.size.x;this.shift.pos.y=f-this.tileSpace.y-this.shift.size.y;this.bckSpace.pos.x=this.space.pos.x+this.space.size.x+this.tileSpace.x;this.bckSpace.pos.y=
f-this.tileSpace.y-this.shift.size.y}},onButtonReleased:function(b){if("numpad"==b.toLowerCase()){this.isSymbolActive=!this.isSymbolActive;this.isEmojiActive=!1;for(b=0;b<this.tiles.length;b++)for(var d=0;d<this.tiles[b].length;d++)this.tiles[b][d].hide();if(this.isSymbolActive){for(b=0;b<this.symbolTiles.length;b++)for(d=0;d<this.symbolTiles[b].length;d++)this.symbolTiles[b][d].show();this.tiles=this.symbolTiles}else{for(b=0;b<this.charTiles.length;b++)for(d=0;d<this.charTiles[b].length;d++)this.charTiles[b][d].show();
this.tiles=this.charTiles}}else if("emoji"==b.toLowerCase()){this.isEmojiActive=!this.isEmojiActive;this.isSymbolActive=!1;for(b=0;b<this.tiles.length;b++)for(d=0;d<this.tiles[b].length;d++)this.tiles[b][d].hide();if(this.isEmojiActive){for(b=0;b<this.emojiTiles.length;b++)for(d=0;d<this.emojiTiles[b].length;d++)this.emojiTiles[b][d].show();this.tiles=this.emojiTiles}else{for(b=0;b<this.charTiles.length;b++)for(d=0;d<this.charTiles[b].length;d++)this.charTiles[b][d].show();this.tiles=this.charTiles}}else if("shift"==
b.toLowerCase()){if(!this.isSymbolActive&&!this.isEmojiActive)for(b=0;b<this.charTiles.length;b++)for(d=0;d<this.charTiles[b].length;d++)this.charTiles[b][d].toggleShift()}else if(this.onKeyboardPressed)this.onKeyboardPressed(b)},show:function(){this.zIndex=this.defaultZIndex;ig.game.sortEntitiesDeferred();for(var b=0;b<this.tiles.length;b++)for(var d=0;d<this.tiles[b].length;d++)this.tiles[b][d].show();for(b=0;b<this.specialTiles.length;b++)this.specialTiles[b].show()},hide:function(){this.zIndex=
-1;ig.game.sortEntitiesDeferred();for(var b=0;b<this.tiles.length;b++)for(var d=0;d<this.tiles[b].length;d++)this.tiles[b][d].hide();for(b=0;b<this.specialTiles.length;b++)this.specialTiles[b].hide()}})});ig.baked=!0;
ig.module("plugins.tiered-rv.tiered-rv-game-object").requires("impact.entity").defines(function(){ig.TieredRvGameObject=ig.Entity.extend({main:null,isBTN:!1,img:null,isClicking:!1,isEnabled:!0,isHidden:!1,isHover:!1,isShow:!0,btnDelay:0,interactable:!0,hasPressAnim:!1,size:{x:0,y:0},scale:{x:1,y:1},objAlpha:1,anchorObj:null,posOffset:null,init:function(b,d,e){this.parent(b,d,e)},update:function(){this.parent();this.anchorObj&&(this.pos={x:this.anchorObj.pos.x+this.posOffset.x,y:this.anchorObj.pos.y+
this.posOffset.y});this.isEnabled&&(!this.isHidden&&this.isShow)&&this.isBTN&&(ig.input.state("click")?(this.isHover=this.checkMousePos())?(this.isFirstPressed||(this.clicked(),this.isFirstPressed=!0),this.clicking()):(this.isFirstPressed=this.isClicking=!1,this.tween({scale:{x:1,y:1}},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start()):this.isClicking&&(this.released(),this.tween({scale:{x:1,y:1}},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start()),0<this.btnDelay&&this.btnDelay--)},
draw:function(){if(this.isShow){var b=ig.system.context;b.save();this.main&&this.main.objAlpha&&(this.objAlpha=this.main.objAlpha);b.globalAlpha=this.objAlpha;this.img&&this.img.drawImage(this.pos.x+this.size.x*(1-this.scale.x)/2,this.pos.y+this.size.y*(1-this.scale.y)/2,this.size.x*this.scale.x,this.size.y*this.scale.y);b.globalAlpha=1;b.restore()}},show:function(){this.isShow=!0},hide:function(){this.isShow=!1},checkMousePos:function(){var b=ig.game.io.getClickPos();return b.x>this.pos.x&&b.x<this.pos.x+
this.size.x&&b.y>this.pos.y&&b.y<this.pos.y+this.size.y},clicked:function(){ig.soundHandler.sfxPlayer.play(ig.soundHandler.sfxPlayer.soundList[ig.tieredRV.soundsID.click])},clicking:function(){!this.isClicking&&(this.isEnabled&&this.isShow&&0>=this.btnDelay)&&(this.isClicking=!0,this.tween({scale:{x:0.9,y:0.9}},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start())},released:function(){this.isClicking&&(this.isEnabled&&this.isShow)&&(this.isFirstPressed=this.isClicking=!1,this.interact(),this.btnDelay=
3)},interact:function(){}})});ig.baked=!0;
ig.module("plugins.tiered-rv.tiered-rv-window").requires("plugins.tiered-rv.tiered-rv-game-object").defines(function(){ig.TieredRvWindow=ig.TieredRvGameObject.extend({main:null,panels:[],objs:[],objAlpha:0,posOrig:{},responsive:!1,respTween:0,init:function(b,d,e){this.parent(b,d,e);this.zIndex=this.main.windowBox.zIndex;this.size.x=this.main.windowBox.img.width;this.size.y=this.main.windowBox.img.height;this.repos();this.btnClose=ig.game.spawnEntity(ig.TieredRvBtnClose,0,0,{main:this,anchorObj:this,
posOffset:this.main.windowBox.closeBtn_posOffset,zIndex:this.zIndex+1,img:this.main.windowBox.closeBtn_img,isShow:!1});this.objs.push(this.btnClose);for(b=0;b<this.main.tiersData_cur.length;b++)this.panels[b]=ig.game.spawnEntity(ig.TieredRvTierPanel,0,0,{main:this,index:b,icon:this.main.tierPanel.tierIcons[b],posOffset:0===b?this.main.tierPanel.posOffset_firstPanel:{x:this.main.tierPanel.posOffset_firstPanel.x+this.main.tierPanel.posOffset_nextPanels.x*b,y:this.main.tierPanel.posOffset_firstPanel.y+
this.main.tierPanel.posOffset_nextPanels.y*b},posOffset_icon:this.main.tierPanel.posOffset_icon,zIndex:this.zIndex+1,btn_posOffset:this.main.tierPanel_btn.posOffset,btn_size:this.main.tierPanel_btn.size,btn_img:this.main.tierPanel_btn.img}),this.objs.push(this.panels[b]);this.hide_window()},draw:function(){if(this.isShow){this.parent();var b=ig.system.context;b.save();b.fillStyle="#000000";b.globalAlpha=0.7*this.objAlpha;b.fillRect(0,0,ig.system.width,ig.system.height);b.globalAlpha=this.objAlpha;
this.main.windowBox.img.draw(this.pos.x,this.pos.y);b.font=this.main.windowBox.titleFont;b.fillStyle=this.main.windowBox.titleFillStyle;b.textAlign="center";b.fillText(this.main.windowBox.strTitle,this.pos.x+this.main.windowBox.title_posOffset.x,this.pos.y+this.main.windowBox.title_posOffset.y);b.font=this.main.windowBox.descFont;b.fillStyle=this.main.windowBox.descFillStyle;b.textAlign="center";b.fillText(this.main.windowBox.strDesc,this.pos.x+this.main.windowBox.desc_posOffset.x,this.pos.y+this.main.windowBox.desc_posOffset.y);
b.fillText(this.main.windowBox.strDesc2,this.pos.x+this.main.windowBox.desc2_posOffset.x,this.pos.y+this.main.windowBox.desc2_posOffset.y);b.globalAlpha=1;b.restore()}},show:function(){this.isShow=!0;for(var b=0;b<this.objs.length;b++)this.objs[b].show();this.objAlpha=0;this.tween({objAlpha:1},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start();this.responsive?(this.respTween=-50,this.tween({respTween:0},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start()):(b={x:this.posOrig.x,y:this.posOrig.y},
this.pos={x:this.posOrig.x-50,y:this.posOrig.y},this.tween({pos:b},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start());this.main.update_panel_buttons_status()},hide:function(){this.tween({objAlpha:0},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut,onComplete:function(){this.hide_window()}.bind(this)}).start();if(this.responsive)this.respTween=0,this.tween({respTween:50},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start();else{var b={x:this.posOrig.x+50,y:this.posOrig.y};this.pos={x:this.posOrig.x,
y:this.posOrig.y};this.tween({pos:b},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start()}},enable_buttons:function(b){this.btnClose.isEnabled=b;for(var d=0;d<this.panels.length;d++)this.panels[d].btn.isEnabled=b},hide_window:function(){this.isShow=!1;ig.game.currentWindow.enabledButton(!0);for(var b=0;b<this.objs.length;b++)this.objs[b].hide();this.popup&&this.popup.kill()},update_panel_buttons_status:function(){for(var b=0;b<this.panels.length;b++)this.main.tiersData_cur[b].active&&(this.panels[b].btn.img=
this.main.tierPanel_btn.imgActive,this.panels[b].btn.isEnabled=!1),0>=this.main.tiersData_cur[b].cd_cur&&(this.panels[b].btn.img=this.main.tierPanel_btn.img,this.panels[b].btn.isEnabled=!0),0<b&&!this.main.tiersData_cur[b-1].active&&(this.panels[b].btn.img=this.main.tierPanel_btn.imgOff,this.panels[b].btn.isEnabled=!1)},spawn_popup:function(b){this.popup=ig.game.spawnEntity(ig.TieredRvPopup,0,0,{txt:b})},repos:function(){this.pos.x=this.posOrig.x=ig.game.midX-this.size.x/2;this.pos.y=this.posOrig.y=
ig.game.midY-this.size.y/2}});ig.TieredRvBtnClose=ig.TieredRvGameObject.extend({main:null,isBTN:!0,init:function(b,d,e){this.parent(b,d,e);this.size.x=this.img.width;this.size.y=this.img.height},update:function(){this.parent()},interact:function(){this.main.hide()}})});ig.baked=!0;
ig.module("plugins.tiered-rv.tiered-rv-starter-window").requires("plugins.tiered-rv.tiered-rv-game-object").defines(function(){ig.TieredRvStarterWindow=ig.TieredRvGameObject.extend({main:null,panels:[],objs:[],objAlpha:0,posOrig:{},responsive:!1,respTween:0,bg:new ig.Image(_BASEPATH.media+"graphics/tiered-rv/bg-starter.png",604,750),icon:new ig.Image(_BASEPATH.media+"graphics/tiered-rv/starter-reward.png",258,358),init:function(b,d,e){this.parent(b,d,e);this.zIndex=this.main.windowBox.zIndex;this.size.x=
this.main.windowBox.img.width;this.size.y=this.main.windowBox.img.height;this.btnClose=ig.game.spawnEntity(ig.TieredRvBtnCloseStarter,0,0,{main:this,anchorObj:this,posOffset:this.main.windowBox.closeBtnStarter_posOffset,zIndex:this.zIndex+1,img:this.main.windowBox.closeBtn_img,isShow:!1});this.objs.push(this.btnClose);this.btnGet=ig.game.spawnEntity(ig.TieredRvBtnGet,0,0,{main:this,img:this.main.tierPanel_btn.img,size:this.main.tierPanel_btn.size,zIndex:this.zIndex+1});this.objs.push(this.btnGet);
this.repos();this.hide_window()},draw:function(){if(this.isShow){this.parent();var b=ig.system.context;b.save();b.fillStyle="#000000";b.globalAlpha=0.7*this.objAlpha;b.fillRect(0,0,ig.system.width,ig.system.height);b.globalAlpha=this.objAlpha;this.bg.draw(ig.game.midX-this.bg.width/2,ig.game.midY-this.bg.height/2);this.icon.draw(ig.game.midX-this.icon.width/2,ig.game.midY-this.icon.height/2-65);b.font=this.main.windowBox.titleFont;b.fillStyle=this.main.windowBox.titleFillStyle;b.textAlign="center";
b.fillText(this.main.windowBox.starterTitle,this.pos.x+this.main.windowBox.title_starter_posOffset.x,this.pos.y+this.main.windowBox.title_starter_posOffset.y);b.font=this.main.windowBox.descFont;b.fillStyle=this.main.windowBox.descFillStyle;b.textAlign="center";b.fillText(this.main.windowBox.starterDesc,this.pos.x+this.main.windowBox.desc_starter_posOffset.x,this.pos.y+this.main.windowBox.desc_starter_posOffset.y);b.fillText(this.main.windowBox.starterDesc2,this.pos.x+this.main.windowBox.desc2_starter_posOffset.x,
this.pos.y+this.main.windowBox.desc2_starter_posOffset.y);b.globalAlpha=1;b.restore()}},show:function(){this.isShow=!0;for(var b=0;b<this.objs.length;b++)this.objs[b].show();this.objAlpha=0;this.tween({objAlpha:1},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start();this.responsive?(this.respTween=-50,this.tween({respTween:0},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start()):(b={x:this.posOrig.x,y:this.posOrig.y},this.pos={x:this.posOrig.x-50,y:this.posOrig.y},this.tween({pos:b},0.5,
{easing:ig.Tween.Easing.Exponential.EaseOut}).start());this.main.update_panel_buttons_status()},hide:function(){this.tween({objAlpha:0},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut,onComplete:function(){this.hide_window()}.bind(this)}).start();if(this.responsive)this.respTween=0,this.tween({respTween:50},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start();else{var b={x:this.posOrig.x+50,y:this.posOrig.y};this.pos={x:this.posOrig.x,y:this.posOrig.y};this.tween({pos:b},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start()}},
enable_buttons:function(b){this.btnClose.isEnabled=b;for(var d=0;d<this.panels.length;d++)this.panels[d].btn.isEnabled=b},hide_window:function(){this.isShow=!1;ig.game.currentWindow.enabledButton(!0);for(var b=0;b<this.objs.length;b++)this.objs[b].hide();this.popup&&this.popup.kill()},update_panel_buttons_status:function(){for(var b=0;b<this.panels.length;b++)this.main.tiersData_cur[b].active&&(this.panels[b].btn.img=this.main.tierPanel_btn.imgActive,this.panels[b].btn.isEnabled=!1),0>=this.main.tiersData_cur[b].cd_cur&&
(this.panels[b].btn.img=this.main.tierPanel_btn.img,this.panels[b].btn.isEnabled=!0),0<b&&!this.main.tiersData_cur[b-1].active&&(this.panels[b].btn.img=this.main.tierPanel_btn.imgOff,this.panels[b].btn.isEnabled=!1)},spawn_popup:function(b){this.popup=ig.game.spawnEntity(ig.TieredRvPopup,0,0,{txt:b})},repos:function(){this.pos.x=this.posOrig.x=ig.game.midX-this.size.x/2;this.pos.y=this.posOrig.y=ig.game.midY-this.size.y/2;this.btnGet.pos={x:this.pos.x+this.bg.width/2-100,y:this.pos.y+this.bg.height}}});
ig.TieredRvBtnCloseStarter=ig.TieredRvGameObject.extend({main:null,isBTN:!0,init:function(b,d,e){this.parent(b,d,e);this.size.x=this.img.width;this.size.y=this.img.height},update:function(){this.parent()},interact:function(){this.main.hide()}});ig.TieredRvBtnGet=ig.TieredRvGameObject.extend({main:null,isBTN:!0,posOffset:null,status:"",draw:function(){if(this.main.isShow){this.parent();var b=ig.system.context;b.save();b.globalAlpha=this.objAlpha;var d=ig.tieredRV;b.font=35*this.scale.x+"px "+d.tierPanel_btn.txtFontType;
b.fillStyle=d.tierPanel_btn.txtFillStyle;b.textAlign="center";b.fillText(d.tierPanel_btn.str_get,this.pos.x+d.tierPanel_btn.txtStarter_posOffset.x,this.pos.y+d.tierPanel_btn.txtStarter_posOffset.y);b.globalAlpha=1;b.restore()}},interact:function(){this.main.isShow&&ig.tieredRV.rv_btn_pressed(5,this.main)}})});ig.baked=!0;
ig.module("plugins.tiered-rv.tiered-rv-tier-panel").requires("plugins.tiered-rv.tiered-rv-game-object").defines(function(){ig.TieredRvTierPanel=ig.TieredRvGameObject.extend({main:null,bg:null,icon:null,index:0,posOffset:{x:0,y:0},posOffset_icon:{x:0,y:0},btn:null,btn_posOffset:null,btn_size:null,btn_img:null,init:function(b,d,e){this.parent(b,d,e);this.size.x=ig.tieredRV.item.width;this.size.y=ig.tieredRV.item.height;this.btn=ig.game.spawnEntity(ig.TieredRvBtnWatchAd,0,0,{main:this,img:this.btn_img,
size:this.btn_size,zIndex:this.zIndex+1,anchorObj:this,posOffset:this.btn_posOffset})},update:function(){this.parent();this.pos={x:this.main.pos.x+this.posOffset.x,y:this.main.pos.y+this.posOffset.y}},draw:function(){if(this.main.isShow){this.parent();var b=ig.system.context;b.save();b.globalAlpha=this.objAlpha;b.save();b.translate(this.pos.x,this.pos.y);b.lineWidth=ig.tieredRV.item.stroke;b.strokeStyle=ig.tieredRV.item.strokeColor;b.strokeRect(0,0,ig.tieredRV.item.width,ig.tieredRV.item.height);
b.fillStyle=ig.tieredRV.item.color;b.fillRect(0,0,ig.tieredRV.item.width,ig.tieredRV.item.height);b.restore();this.icon.drawImage(this.pos.x+this.posOffset_icon.x,this.pos.y+this.posOffset_icon.y);var d=ig.tieredRV;b.font=d.tierPanel.titleFont;b.fillStyle=d.tierPanel.titleFillStyle;b.textAlign="left";b.fillText(d.tierPanel.str_tierTitles[this.index],this.pos.x+d.tierPanel.title_posOffset.x,this.pos.y+d.tierPanel.title_posOffset.y);b.font=d.tierPanel.descFont;b.fillStyle=d.tierPanel.descFillStyle;
b.textAlign="left";d.draw_text_wrapped(b,d.tierPanel.str_tierDesc[this.index],this.pos.x+d.tierPanel.desc_posOffset.x,this.pos.y+d.tierPanel.desc_posOffset.y,d.tierPanel.desc_wrapSize.x,d.tierPanel.desc_wrapSize.ySpacing);b.globalAlpha=1;b.restore()}}});ig.TieredRvBtnWatchAd=ig.TieredRvGameObject.extend({main:null,isBTN:!0,posOffset:null,status:"",draw:function(){if(this.main.main.isShow){this.parent();var b=ig.system.context;b.save();b.globalAlpha=this.objAlpha;var d=ig.tieredRV;b.font=d.tierPanel_btn.txtFontSize*
this.scale.x+"px "+d.tierPanel_btn.txtFontType;if("clickable"==this.status)b.fillStyle=d.tierPanel_btn.txtFillStyle,b.textAlign="center",b.fillText(d.tierPanel_btn.str_watchAd,this.pos.x+d.tierPanel_btn.txt_posOffset.x,this.pos.y+d.tierPanel_btn.txt_posOffset.y);else if("running"==this.status){var e=(new Date).getTime(),e=d.tiersData_cur[this.main.index].timeTarg-e;b.fillStyle=d.tierPanel_btn.txtTimeFillStyle;b.textAlign="center";b.fillText(d.convert_time_text(e),this.pos.x+d.tierPanel_btn.txt_posOffset.x+
9,this.pos.y+d.tierPanel_btn.txt_posOffset.y)}b.globalAlpha=1;b.restore()}},interact:function(){this.main.main.isShow&&"clickable"==this.status&&ig.tieredRV.rv_btn_pressed(this.main.index,this.main.main)}})});ig.baked=!0;
ig.module("plugins.tiered-rv.tiered-rv-popup").requires("plugins.tiered-rv.tiered-rv-game-object").defines(function(){ig.TieredRvPopup=ig.TieredRvGameObject.extend({main:null,img:null,icon:null,index:0,posOffset:{x:0,y:0},posOffset_orig:{},size:{x:0,y:0},objAlpha:0,txt:"",dur:0,init:function(b,d,e){this.parent(b,d,e);b=ig.tieredRV;this.dur=b.popup.dur;this.img=b.popup.img;this.size.x=this.img.width;this.size.y=this.img.height;this.posOffset=b.popup.posOffset;this.posOffset_orig={x:this.posOffset.x,
y:this.posOffset.y};this.tween_in()},tween_in:function(){this.posOffset={x:this.posOffset_orig.x,y:this.posOffset_orig.y};this.posOffset.x-=50;this.tween({posOffset:{x:this.posOffset_orig.x,y:this.posOffset_orig.y}},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start();this.tween({objAlpha:1},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start();var b=ig.game.getEntitiesByType(ig.TieredRvWindow)[0];"lootbox"==ig.game.windowName&&(b=ig.game.getEntitiesByType(ig.TieredRvStarterWindow)[0]);b.enable_buttons(!1)},
tween_out:function(){this.posOffset={x:this.posOffset_orig.x,y:this.posOffset_orig.y};this.tween({posOffset:{x:this.posOffset_orig.x+50,y:this.posOffset_orig.y}},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut,onComplete:function(){var b=ig.game.getEntitiesByType(ig.TieredRvWindow)[0];"lootbox"==ig.game.windowName&&(b=ig.game.getEntitiesByType(ig.TieredRvStarterWindow)[0]);b.enable_buttons(!0);b.update_panel_buttons_status();this.kill()}.bind(this)}).start();this.tween({objAlpha:0},0.5,{easing:ig.Tween.Easing.Exponential.EaseOut}).start()},
update:function(){this.parent();this.pos={x:ig.game.midX-this.size.x/2+this.posOffset.x,y:ig.game.midY-this.size.y/2+this.posOffset.y};this.dur-=ig.system.tick;0>=this.dur&&this.tween_out()},draw:function(){this.parent();var b=ig.system.context;b.save();b.globalAlpha=this.objAlpha;this.img.drawImage(this.pos.x,this.pos.y,this.size.x,this.size.y);var d=ig.tieredRV;b.font=d.popup.txtFont;b.fillStyle=d.popup.txtFillStyle;b.textAlign="center";b.fillText(this.txt,this.pos.x+d.popup.txtPosOffset.x,this.pos.y+
d.popup.txtPosOffset.y);b.globalAlpha=1;b.restore()}})});ig.baked=!0;
ig.module("plugins.tiered-rv.tiered-rv").requires("plugins.secure-ls","plugins.tiered-rv.tiered-rv-window","plugins.tiered-rv.tiered-rv-starter-window","plugins.tiered-rv.tiered-rv-game-object","plugins.tiered-rv.tiered-rv-tier-panel","plugins.tiered-rv.tiered-rv-popup").defines(function(){ig.TieredRv=ig.Class.extend({pluginVersion:"1.1.4",tierDataVersion:"1",tiersData:[{name:"tier1",cd:1440,timeOfWatch:0,timeTarg:0,active:!1},{name:"tier2",cd:1440,timeOfWatch:0,timeTarg:0,active:!1},{name:"tier3",
cd:1440,timeOfWatch:0,timeTarg:0,active:!1},{name:"tier4",cd:1440,timeOfWatch:0,timeTarg:0,active:!1},{name:"tier5",cd:1440,timeOfWatch:0,timeTarg:0,active:!1}],item:{width:530,height:111,stroke:6,strokeColor:"#ffffff",color:"#A350EE"},checkNotif:function(){for(var b=!1,d=0;d<ig.tieredRV.tiersData_cur.length-1;d++)if(!1==ig.tieredRV.tiersData_cur[d].active){b=!0;break}return b},rv_btn_pressed:function(b,d){this.curRVBtn=b;if(5!=b)for(var e=0;e<d.panels.length;e++)d.panels[e].btn.isEnabled=!1;5!=b?
(this.winBox=d,this.winBox.enable_buttons(!1)):ig.game.currentWindow.enabledButton(!1);ig.game.getEntitiesByType(EntityRvSampleControl)[0].sample_rv_start(this.rv_end_success.bind(this),this.rv_end_fail.bind(this))},rv_end_success:function(){if(5==this.curRVBtn)ig.game.currentWindow.enabledButton(!0),ig.game.currentWindow.afterRVSuccess();else{ig.game.sessionData.coin+=ig.tieredRV.tierPanel.rewards[this.curRVBtn];ig.game.saveAll();var b=(new Date).getTime(),d=6E4*this.tiersData_cur[this.curRVBtn].cd;
this.tiersData_cur[this.curRVBtn].timeOfWatch=b;this.tiersData_cur[this.curRVBtn].timeTarg=b+d;this.tiersData_cur[this.curRVBtn].active=!0;this.save_data();this.update_panel_buttons_status();this.winBox&&this.winBox.spawn_popup(this.popup.txtStr_success+ig.tieredRV.tierPanel.rewards[this.curRVBtn]+this.popup.txtStr_coins);ig.soundHandler.sfxPlayer.play(ig.soundHandler.sfxPlayer.soundList[this.soundsID.reward])}},rv_end_fail:function(){5==this.curRVBtn?(ig.game.currentWindow.enabledButton(!0),ig.game.currentWindow.afterRVFail()):
(this.update_panel_buttons_status(),this.winBox&&this.winBox.spawn_popup(this.popup.txtStr_fail));ig.soundHandler.sfxPlayer.play(ig.soundHandler.sfxPlayer.soundList[this.soundsID.error])},tier_dur_ends:function(b){this.tiersData_cur[b].timeOfWatch=0;this.tiersData_cur[b].timeTarg=0;this.tiersData_cur[b].active=!1;this.save_data();this.update_panel_buttons_status()},windowBox:{img:new ig.Image(_RESOURCESINFO.image.btnBlank2,604,1014),zIndex:_DATAGAME.zIndexData.RVWindow,titleFont:"50px metroblack",
titleFillStyle:"white",descFont:"30px metroblack",descFillStyle:"white",starterTitle:"Starter Pack",starterDesc:"Take someone to Date Night now!",starterDesc2:"Unlock this special date today",strTitle:"Get More Coins",strDesc:"Watch daily to get more coins!",strDesc2:"",title_posOffset:{x:300,y:90},desc_posOffset:{x:300,y:140},desc2_posOffset:{x:290,y:125},title_starter_posOffset:{x:300,y:225},desc_starter_posOffset:{x:300,y:680},desc2_starter_posOffset:{x:300,y:720},closeBtn_img:new ig.Image(_BASEPATH.media+
"graphics/tiered-rv/close.png",60,60),closeBtn_posOffset:{x:520,y:25},closeBtnStarter_posOffset:{x:517,y:159}},tierPanel:{tierIcons:[new ig.Image(_BASEPATH.media+"graphics/tiered-rv/icon-01.png"),new ig.Image(_BASEPATH.media+"graphics/tiered-rv/icon-01.png"),new ig.Image(_BASEPATH.media+"graphics/tiered-rv/icon-01.png"),new ig.Image(_BASEPATH.media+"graphics/tiered-rv/icon-01.png"),new ig.Image(_BASEPATH.media+"graphics/tiered-rv/icon-01.png")],str_tierTitles:["TIER 1","TIER 2","TIER 3","TIER 4",
"TIER 5"],str_tierDesc:["Get 10k coins","Get 20k coins","Get 35k coins","Get 60k coins","Get 120k coins"],rewards:[1E4,2E4,35E3,6E4,12E4],posOffset_firstPanel:{x:40,y:210},posOffset_nextPanels:{x:0,y:150},posOffset_icon:{x:11,y:9},titleFont:"35px metroblack",titleFillStyle:"white",descFont:"27px metroblack",descFillStyle:"white",title_posOffset:{x:110,y:47},desc_posOffset:{x:110,y:89},desc_wrapSize:{x:220,ySpacing:22}},tierPanel_btn:{img:new ig.Image(_BASEPATH.media+"graphics/tiered-rv/btn-watch-ad.png"),
imgOff:new ig.Image(_BASEPATH.media+"graphics/tiered-rv/btn-watch-ad-disabled.png"),imgActive:new ig.Image(_BASEPATH.media+"graphics/tiered-rv/btn-watch-ad-active.png"),size:{x:200,y:80},posOffset:{x:315,y:15},str_get:"Get it",str_watchAd:"Watch Ad",txtFontSize:"25",txtFontType:"metroblack",txtFillStyle:"white",txtTimeFillStyle:"white",txt_posOffset:{x:120,y:50},txtStarter_posOffset:{x:120,y:53}},popup:{img:new ig.Image(_BASEPATH.media+"graphics/tiered-rv/popup.png"),posOffset:{x:0,y:0},dur:2.25,
txtFont:"30px metroblack",txtFillStyle:"#3F0E77",txtPosOffset:{x:318,y:62},txtStr_success:"You have received ",txtStr_coins:" coins!",txtStr_fail:"RV ad has errored. Try again later."},soundsID:{click:"clickTieredRV",reward:"rewardTieredRV",error:"errorTieredRV"},saveName:null,isShow:!1,tiersData_cur:null,curRVBtn:0,winBox:null,winBox_pos:null,init:function(){this.load_data();this.calc_remaining_time()},update:function(){this.calc_remaining_time()},get_tier_is_active:function(b){return this.tiersData_cur[b].active},
get_highest_active_tier_index:function(){for(var b=this.tiersData_cur.length-1;0<=b;b--)if(this.tiersData_cur[b].active)return b},update_panel_buttons_status:function(){try{var b=ig.game.getEntitiesByType(ig.TieredRvWindow)[0];"lootbox"==ig.game.windowName&&(b=ig.game.getEntitiesByType(ig.TieredRvStarterWindow)[0]);if(!b)return}catch(d){return}for(var e=0;e<b.panels.length;e++)0>=e?this._set_btn_status(b.panels[e].btn,this.tiersData_cur[e].active?"running":"clickable",b):this.check_past_buttons_status(e)&&
!this.tiersData_cur[e].active?this._set_btn_status(b.panels[e].btn,"clickable",b):this.tiersData_cur[e].active?this._set_btn_status(b.panels[e].btn,"running",b):this._set_btn_status(b.panels[e].btn,"locked",b)},check_past_buttons_status:function(b){for(var d=0;d<b;d++)if(!this.tiersData_cur[d].active)return!1;return!0},_set_btn_status:function(b,d){var e=!1;switch(d){case "clickable":b.img=this.tierPanel_btn.img;e=!0;break;case "running":b.img=this.tierPanel_btn.imgActive;break;case "locked":b.img=
this.tierPanel_btn.imgOff}b.isEnabled=e;b.status=d},save_data:function(){var b=JSON.stringify(this.tiersData_cur);ig.LSTieredRV.set(this.saveName,b)},isWindowStorageUsable:function(){try{return window.localStorage.setItem("test","test"),window.localStorage.removeItem("test"),!0}catch(b){return!1}},load_data:function(){ig.LSTieredRV||(ig.LSTieredRV=this.isWindowStorageUsable()?new SecureLS({encodingType:"aes"}):{get:function(b){return ig[b]?ig[b]:""},set:function(b,e){ig[b]=e}},this.saveName=this.hash(ig.game.name+
"-mjs-tiered-rv-save-data","").replace("-","s"));this.saveName||(this.saveName=this.hash(ig.game.name+"-tiered-rv-data-"+this.tierDataVersion,"").replace("-","s"));var b=ig.LSTieredRV.get(this.saveName);""==b?this.clear_data():this.tiersData_cur=JSON.parse(b)},clear_data:function(){this.tiersData_cur=this.tiersData;this.save_data()},calc_remaining_time:function(){for(var b=(new Date).getTime(),d=0;d<this.tiersData_cur.length;d++)this.tiersData_cur[d].active&&this.tiersData_cur[d].timeTarg<=b&&this.tier_dur_ends(d)},
convert_time_text:function(b){b/=1E3;var d=Math.floor(b/3600),e=Math.floor(b%3600/60);b=Math.floor(b%60);10>b&&(b="0"+b);return(0>=d?"":10>d?"0"+d+":":d+":")+(10>e?"0"+e+":":e+":")+b},hash:function(b){var d=0,e,f;if(0===b.length)return d;for(e=0;e<b.length;e++)f=b.charCodeAt(e),d=(d<<5)-d+f,d|=0;return d.toString(36)},draw_text_wrapped:function(b,d,e,f,g,j){d=d.split(" ");for(var l="",n=0;n<d.length;n++){var m=l+d[n]+" ";b.measureText(m).width>g&&0<n?(b.fillText(l,e,f),l=d[n]+" ",f+=j):l=m}b.fillText(l,
e,f)}});ig.Image.inject({drawImage:function(b,d,e,f,g,j,l,n){b=b?b:0;d=d?d:0;2>=arguments.length?this.draw(b,d):4>=arguments.length?(e=e?e:this.width,f=f?f:this.height,this.draw(b,d,0,0,this.width,this.height,e,f)):(e=e?e:this.width,f=f?f:this.height,l=l?l:this.width,n=n?n:this.height,this.draw(g?g:0,j?j:0,b,d,e,f,l,n))}})});ig.baked=!0;
ig.module("plugins.freezeframe.freezeframe-settings").defines(function(){ig.initFreezeFrameSettings=function(){ig.FreezeFrame.animation={type1:{bgColor:"#FDECFC",bgTextColor:"#831066",stripe1Color:"#EA79EC",stripe2Color:"#D628A9",stripe3Color:"#D53AC2",stripe4Color:"#F5B2E6"},type2:{},type3:{},type4:{},type5:{}};ig.FreezeFrame.images={bg:new ig.Image(_BASEPATH.background+"home.png"),bghome:new ig.Image(_BASEPATH.background+"home.png"),textBg:new ig.Image(_BASEPATH.image+"sprites/bgtext.png")};ig.FreezeFrame.sounds=
{}}});ig.baked=!0;
ig.module("plugins.freezeframe.freezeframe").requires("impact.entity").defines(function(){EntityFreezeFrame=ig.Entity.extend({zIndex:_DATAGAME.zIndexData.freezeFrame,bg:null,character:null,charConfig:null,sptChar:null,textBg:"",text:"",font:"",textColor:null,textShadowColor:null,callback:null,firstSound:null,secondSound:null,shadowOffset:{x:10,y:10},textOffset:{x:50,y:0},offsetCharX:0,posXBG:0,posYBG:0,posXBGText:0,posYBGText:0,posXChar:0,posXText:0,boolShowChar:!1,boolShowText:!1,alphaBG:0,alphaBGText:0,
alphaText:1,alphaChar:0,isVisible:!0,timeAlive:4,init:function(b,d,e){this.parent(b,d,e);this.sptChar="Amy"==this.charConfig.name||0<=_DATAGAME.neutral_girl.indexOf(this.charConfig.name)?ig.game.spawnEntity(SpriterGirl,ig.game.midX,ig.game.midY,{_parent:this,charName:this.charConfig.name.toLowerCase(),freezeFrame:!0,zIndex:this.zIndex}):0<=_DATAGAME.neutral_boy.indexOf(this.charConfig.name)?ig.game.spawnEntity(SpriterBoy,ig.game.midX,ig.game.midY,{charName:this.charConfig.name.toLowerCase(),_parent:this,
freezeFrame:!0,zIndex:this.zIndex}):"girl"==ig.game.sessionData.loveInterest?ig.game.spawnEntity(SpriterGirl,ig.game.midX,ig.game.midY,{_parent:this,charName:this.charConfig.name.toLowerCase(),freezeFrame:!0,zIndex:this.zIndex}):ig.game.spawnEntity(SpriterBoy,ig.game.midX,ig.game.midY,{charName:this.charConfig.name.toLowerCase(),_parent:this,freezeFrame:!0,zIndex:this.zIndex});"Amy"==this.charConfig.name?this.sptChar.changeDU(ig.game.sessionData.dressUpTheme[this._parent.numChapter].now):(b=this.charConfig.name.toLowerCase(),
b=b.replaceAll(" ",""),null!=ig.game.sessionData.dressUpChar[this._parent.numChapter][b]?(this.sptChar.charName=ig.game.sessionData.dressUpChar[this._parent.numChapter][b],this.sptChar.changeDU(ig.game.sessionData.dressUpChar[this._parent.numChapter][b])):(this.sptChar.charName=this.charConfig.name.toLowerCase(),this.sptChar.changeDU(this.charConfig.name.toLowerCase())));this.sptChar.spriter.scale.x=-1.1;this.sptChar.spriter.scale.y=1.1;this.sptChar.spriter.root.alpha=0;this.sptChar.spriter.zIndex=
_DATAGAME.zIndexData.freezeFrameSpriter;this.repos();console.log(this.charConfig);this.startAnimation();ig.game.sortEntitiesDeferred()},playAnimSpriter:function(){var b=this.charConfig.animSpeed;null==b&&0>=b&&(b=100);this.sptChar.changePose(this.charConfig.anim,this.charConfig.handheld,!1,b);"ANIM_NONE"!=this.charConfig.emotion&&this.sptChar.changeEmotion(_DATAGAME.listEmotion.indexOf(this.charConfig.emotion),!1)},draw:function(){this.parent();this.isVisible&&this.drawObject()},repos:function(){},
update:function(){this.parent()}})});ig.baked=!0;
ig.module("plugins.freezeframe.freezeframe1").requires("impact.entity","plugins.freezeframe.freezeframe").defines(function(){EntityFreezeFrame1=EntityFreezeFrame.extend({bgColor:"#FFFFFF",bgTextColor:"#9D183B",stripe1Color:"#F63C30",stripe2Color:"#FE9C08",stripe3Color:"#58C8BF",stripe4Color:"#6FA4D1",arrText:[],fontSizeRatio:0,init:function(b,d,e){this.parent(b,d,e);this.fontSizeRatio=1;ig.game.consoleLog("freeze1");this.repos();this.bgColor=ig.FreezeFrame.animation.type1.bgColor;this.bgTextColor=
ig.FreezeFrame.animation.type1.bgTextColor;this.stripe1Color=ig.FreezeFrame.animation.type1.stripe1Color;this.stripe2Color=ig.FreezeFrame.animation.type1.stripe2Color;this.stripe3Color=ig.FreezeFrame.animation.type1.stripe3Color;this.stripe4Color=ig.FreezeFrame.animation.type1.stripe4Color;ig.game.sortEntitiesDeferred()},startAnimation:function(){null!=this.firstSound&&ig.soundHandler.sfxPlayer.play(this.firstSound);this.posXBG=-this.plusBorderX/2;this.posYBG=this.plusBorderY/2;this.tweenBG=this.tween({posYBG:-this.plusBorderY/
2},3,{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenAlpha=this.tween({alphaBG:1,posXBG:0},0.4,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){}.bind(this)});this.tweenAlpha.chain(this.tweenBG);this.tweenAlpha.start();this.posYBGText=-ig.sizeHandler.minH/4;this.tweenBGText=this.tween({alphaBGText:1,posYBGText:-ig.sizeHandler.minH/4/4},0.3,{delay:0.2,easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.posXChar=-600*_DATAGAME.ratioRes;this.boolShowChar=!0;this.playAnimSpriter();
this.tweenChar=this.tween({alphaChar:1,posXChar:-30*_DATAGAME.ratioRes},0.1,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.posXText=ig.system.width-ig.game.midX;this.boolShowText=!0;this.tweenText=this.tween({posXText:(ig.system.width-ig.game.midX)/(20*_DATAGAME.ratioRes)},0.1,{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenTextLoop=this.tween({posXText:0},3,{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenText.chain(this.tweenTextLoop);null!=this.secondSound&&ig.soundHandler.sfxPlayer.play(this.secondSound);
this.tweenText.start();this.tryDelay=0;this.tween({tryDelay:1},2.5,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){}}).start();this.tween({alphaBG:0,alphaBGText:0,alphaChar:0,alphaText:0},0.1,{delay:2.7,easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.alphaText=this.alphaChar=this.alphaBGText=this.alphaBG=0;this.boolShowChar=!1;this.sptChar.spriter.root.alpha=0;this.isVisible=!1;this.kill();null!=this.callback&&this.callback()}.bind(this)}).start()}.bind(this)});this.tweenCharLoop=
this.tween({posXChar:0},3,{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenChar.chain(this.tweenCharLoop);this.tweenChar.start()}.bind(this)});this.tweenBGTextSlow=this.tween({posYBGText:0},3,{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenBGText.chain(this.tweenBGTextSlow);this.tweenBGText.start()},drawObject:function(){var b=ig.system.context;b.save();b.fillStyle=this.bgColor;b.globalAlpha=this.alphaBG;b.fillRect(0,0,ig.system.width,ig.system.height);b.restore();b.save();b.translate(this.posXBG,
this.posYBG);b.globalAlpha=this.alphaBG;b.fillStyle=this.stripe1Color;b.beginPath();b.moveTo(this.startX,this.startY+3*this.totalHeight/8);b.lineTo(this.startX,this.startY+4*this.totalHeight/8);b.lineTo(this.startX+1.3*this.totalWidth/8,this.startY);b.lineTo(this.startX+1*this.totalWidth/8,this.startY);b.closePath();b.fill();b.fillStyle=this.stripe2Color;b.beginPath();b.moveTo(this.startX,this.startY+5*this.totalHeight/8);b.lineTo(this.startX,this.startY+6.5*this.totalHeight/8);b.lineTo(this.startX+
2.9*this.totalWidth/8,this.startY);b.lineTo(this.startX+1.8*this.totalWidth/8,this.startY);b.closePath();b.fill();b.fillStyle=this.stripe3Color;b.beginPath();b.moveTo(this.startX,this.startY+7.5*this.totalHeight/8);b.lineTo(this.startX,this.endY);b.lineTo(this.startX+3.9*this.totalWidth/8,this.startY);b.lineTo(this.startX+3.5*this.totalWidth/8,this.startY);b.closePath();b.fill();b.fillStyle=this.stripe4Color;b.beginPath();b.moveTo(this.startX+0.4*this.totalWidth/8,this.endY);b.lineTo(this.startX+
0.6*this.totalWidth/8,this.endY);b.lineTo(this.startX+5.3*this.totalWidth/8,this.startY);b.lineTo(this.startX+4.7*this.totalWidth/8,this.startY);b.closePath();b.fill();b.fillStyle=this.stripe2Color;b.beginPath();b.moveTo(this.startX+1.1*this.totalWidth/8,this.endY);b.lineTo(this.startX+1.3*this.totalWidth/8,this.endY);b.lineTo(this.startX+6.7*this.totalWidth/8,this.startY);b.lineTo(this.startX+6.2*this.totalWidth/8,this.startY);b.closePath();b.fill();b.fillStyle=this.stripe3Color;b.beginPath();b.moveTo(this.startX+
1.9*this.totalWidth/8,this.endY);b.lineTo(this.startX+2.3*this.totalWidth/8,this.endY);b.lineTo(this.endX,this.startY+1.1*this.totalHeight/8);b.lineTo(this.endX,this.startY);b.closePath();b.fill();b.fillStyle=this.stripe4Color;b.beginPath();b.moveTo(this.startX+3*this.totalWidth/8,this.endY);b.lineTo(this.startX+3.3*this.totalWidth/8,this.endY);b.lineTo(this.endX,this.startY+3*this.totalHeight/8);b.lineTo(this.endX,this.startY+2.5*this.totalHeight/8);b.closePath();b.fill();b.fillStyle=this.stripe1Color;
b.beginPath();b.moveTo(this.startX+4*this.totalWidth/8,this.endY);b.lineTo(this.startX+5*this.totalWidth/8,this.endY);b.lineTo(this.endX,this.startY+5.3*this.totalHeight/8);b.lineTo(this.endX,this.startY+4.2*this.totalHeight/8);b.closePath();b.fill();b.fillStyle=this.stripe2Color;b.beginPath();b.moveTo(this.startX+6.2*this.totalWidth/8,this.endY);b.lineTo(this.startX+6.8*this.totalWidth/8,this.endY);b.lineTo(this.endX,this.startY+7.3*this.totalHeight/8);b.lineTo(this.endX,this.startY+6.5*this.totalHeight/
8);b.closePath();b.fill();b.restore();b.save();b.translate(0,this.posYBGText-ig.game.screen.y);b.globalAlpha=this.alphaBGText;b.fillStyle=this.bgTextColor;b.beginPath();b.moveTo(0,4.5*this.bgTextHeight/8);b.lineTo(0,8*this.bgTextHeight/8);b.lineTo(ig.system.width,5*this.bgTextHeight/8);b.lineTo(ig.system.width,1*this.bgTextHeight/8);b.closePath();b.fill();b.restore();if(this.boolShowText){b.save();b.globalAlpha=this.alphaText;b.translate(this.posXText,0);b.font=ig.game.fontNameWeight+" "+Math.round(this.font*
_DATAGAME.ratioRes*this.fontSizeRatio*ig.game.fontRatio)+"px "+ig.game.fontName;var d=1.2*(this.arrText.length-2)*this.font*_DATAGAME.ratioRes*this.fontSizeRatio/2;null!=this.textShadowColor&&(b.fillStyle=this.textShadowColor,b.textAlign="left",ig.game.drawText(this.arrText,this.font*_DATAGAME.ratioRes*this.fontSizeRatio,b,ig.game.midX+this.textOffset.x+this.shadowOffset.x*this.fontSizeRatio,ig.game.midY+this.textOffset.y+this.shadowOffset.y*this.fontSizeRatio-d));b.fillStyle=this.textColor;b.textAlign=
"left";ig.game.drawText(this.arrText,this.font*_DATAGAME.ratioRes*this.fontSizeRatio,b,ig.game.midX+this.textOffset.x,ig.game.midY+this.textOffset.y-d);b.restore()}},repos:function(){ig.system.width>ig.system.height?(this.plusBorderX=0.2*ig.system.width,this.plusBorderY=0.2*ig.system.width,this.totalWidth=ig.system.width+this.plusBorderX,this.totalHeight=ig.system.width+this.plusBorderY):(this.plusBorderX=0.2*ig.system.height,this.plusBorderY=0.2*ig.system.height,this.totalWidth=ig.system.height+
this.plusBorderX,this.totalHeight=ig.system.height+this.plusBorderY);this.startX=-(this.totalWidth-ig.system.width)/2;this.endX=ig.system.width+(this.totalWidth-ig.system.width)/2;this.startY=-(this.totalHeight-ig.system.height)/2;this.endY=ig.system.height+(this.totalHeight-ig.system.height)/2;this.bgTextHeight=ig.sizeHandler.minH;this.fontSizeRatio=ig.sizeHandler.isPortrait?0.5:1;this.arrText=ig.game.wordWrap(this.text,ig.sizeHandler.isPortrait?350*_DATAGAME.ratioRes:ig.sizeHandler.minH/2-30*_DATAGAME.ratioRes,
Math.round(this.font*_DATAGAME.ratioRes*this.fontSizeRatio*ig.game.fontRatio),ig.game.fontName,!0)},update:function(){this.parent();this.boolShowChar&&null!=this.sptChar&&(this.sptChar.spriter.root.alpha=this.alphaChar,this.sptChar.spriter.pos.x=ig.game.midX-200*_DATAGAME.ratioRes+this.posXChar,this.sptChar.spriter.pos.y=ig.game.midY+500*_DATAGAME.ratioRes)}})});ig.baked=!0;
ig.module("plugins.freezeframe.freezeframe2").requires("impact.entity","plugins.freezeframe.freezeframe").defines(function(){EntityFreezeFrame2=EntityFreezeFrame.extend({init:function(b,d,e){this.parent(b,d,e);ig.game.consoleLog("freeze2");this.repos();ig.game.sortEntitiesDeferred()},startAnimation:function(){null!=this.firstSound&&ig.soundHandler.sfxPlayer.play(this.firstSound);this.posXBG=-this.plusBorderX/2;this.posYBG=this.plusBorderY/2;this.tweenBG=this.tween({posYBG:-this.plusBorderY/2},this.timeAlive,
{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenAlpha=this.tween({alphaBG:1,posXBG:0},0.4,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){}.bind(this)});this.tweenAlpha.chain(this.tweenBG);this.tweenAlpha.start();this.posYBGText=-ig.sizeHandler.minH/4;this.tweenBGText=this.tween({alphaBGText:1,posYBGText:-ig.sizeHandler.minH/4/4},0.3,{delay:0.2,easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.posXChar=-600*_DATAGAME.ratioRes;this.boolShowChar=!0;this.playAnimSpriter();
this.tweenChar=this.tween({alphaChar:1,posXChar:-30},0.1,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.posXText=ig.system.width-ig.game.midX;this.boolShowText=!0;this.tweenText=this.tween({posXText:(ig.system.width-ig.game.midX)/(20*_DATAGAME.ratioRes)},0.1,{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenTextLoop=this.tween({posXText:0},this.timeAlive,{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenText.chain(this.tweenTextLoop);null!=this.secondSound&&ig.soundHandler.sfxPlayer.play(this.secondSound);
this.tweenText.start();this.tween({alphaBG:0,alphaBGText:0,alphaChar:0,alphaText:0},0.3,{delay:this.timeAlive-0.5,easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.alphaText=this.alphaChar=this.alphaBGText=this.alphaBG=0;this.boolShowChar=!1;this.alphaChar=0;this.sptChar.spriter.root.alpha=0;this.isVisible=!1;this.kill();null!=this.callback&&this.callback()}.bind(this)}).start()}.bind(this)});this.tweenCharLoop=this.tween({posXChar:0},this.timeAlive,{easing:ig.Tween.Easing.Linear.EaseNone});
this.tweenChar.chain(this.tweenCharLoop);this.tweenChar.start()}.bind(this)});this.tweenBGTextSlow=this.tween({posYBGText:0},this.timeAlive,{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenBGText.chain(this.tweenBGTextSlow);this.tweenBGText.start()},drawObject:function(){var b=ig.system.context;b.save();b.translate(this.posXBG,this.posYBG);b.globalAlpha=this.alphaBG;this.updatePosition();this.bg.draw(this.startX,this.startY,this.bgX,this.bgY,this.bgW,this.bgH,this.totalWidth,this.totalHeight);
b.restore();b.save();b.translate(0,this.posYBGText);b.globalAlpha=this.alphaBGText;var d=this.textBg.height*ig.system.width/this.textBg.width;this.textBg.draw(0,ig.game.midY-2*d/5,0,0,this.textBg.width,this.textBg.height,ig.system.width,d);b.restore();this.boolShowChar&&null!=this.sptChar&&(this.sptChar.spriter.root.alpha=this.alphaChar,this.sptChar.spriter.pos.x=ig.game.midX-200*_DATAGAME.ratioRes+this.posXChar,this.sptChar.spriter.pos.y=ig.game.midY+500*_DATAGAME.ratioRes);this.boolShowText&&(b.save(),
b.globalAlpha=this.alphaText,b.translate(this.posXText,0),b.font=ig.game.fontNameWeight+" "+Math.round(this.font*_DATAGAME.ratioRes*this.fontSizeRatio*ig.game.fontRatio)+"px "+ig.game.fontName,d=1.2*(this.arrText.length-2)*this.font*_DATAGAME.ratioRes*this.fontSizeRatio/2,null!=this.textShadowColor&&(b.fillStyle=this.textShadowColor,b.textAlign="left",ig.game.drawText(this.arrText,this.font*_DATAGAME.ratioRes*this.fontSizeRatio,b,ig.game.midX+this.textOffset.x+this.shadowOffset.x*_DATAGAME.ratioRes*
this.fontSizeRatio,ig.game.midY+this.textOffset.y+this.shadowOffset.y*_DATAGAME.ratioRes*this.fontSizeRatio-d)),b.fillStyle=this.textColor,b.textAlign="left",ig.game.drawText(this.arrText,this.font*_DATAGAME.ratioRes*this.fontSizeRatio,b,ig.game.midX+this.textOffset.x,ig.game.midY+this.textOffset.y-d),b.restore())},updatePosition:function(){var b=this.totalWidth/this.totalHeight;this.bg.width/this.bg.height>b?(this.bgH=this.bg.height,this.bgW=this.bgH*b,this.bgX=(this.bg.width-this.bgW)/2,this.bgY=
0):(this.bgW=this.bg.width,this.bgH=this.bgW/b,this.bgX=0,this.bgY=(this.bg.height-this.bgH)/2)},repos:function(){this.plusBorderX=0.2*ig.system.width;this.plusBorderY=0.2*ig.system.height;this.totalWidth=ig.system.width+this.plusBorderX;this.totalHeight=ig.system.height+this.plusBorderY;this.startX=-this.plusBorderX/2;this.endX=ig.system.width+this.plusBorderX/2;this.startY=-this.plusBorderY/2;this.endY=ig.system.height+this.plusBorderY/2;this.fontSizeRatio=ig.sizeHandler.isPortrait?0.5:1;this.arrText=
ig.game.wordWrap(this.text,ig.sizeHandler.isPortrait?350*_DATAGAME.ratioRes:ig.sizeHandler.minH/2-30*_DATAGAME.ratioRes,Math.round(this.font*_DATAGAME.ratioRes*this.fontSizeRatio*ig.game.fontRatio),ig.game.fontName,!0)},update:function(){this.parent()}})});ig.baked=!0;
ig.module("plugins.freezeframe.freezeframe3").requires("impact.entity","plugins.freezeframe.freezeframe").defines(function(){EntityFreezeFrame3=EntityFreezeFrame.extend({angleText:340,scaleText:5,alphaChar:1,alphaTrans:0,alphaTransBlack:0,boolShowAll:!1,boolIn:!0,init:function(b,d,e){this.parent(b,d,e);ig.game.consoleLog("freeze3");this.repos();ig.game.sortEntitiesDeferred()},startAnimation:function(){null!=this.firstSound&&ig.soundHandler.sfxPlayer.play(this.firstSound);this.posXBG=-this.plusBorderX/
2;this.posYBG=this.plusBorderY/2;this.bgWhite=ig.game.spawnEntity(EntityBlack,0,0,{color:"white",alphaTrans:0});this.tweenInWhite=this.tween({alphaTrans:1},0.2,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.boolShowAll=!0;this.tweenOutWhite.start();this.tweenBG.start();this.tweenBGTextSlow.start();this.animChar()}.bind(this)});this.tweenInWhite.start();this.tweenOutWhite=this.tween({alphaTrans:0},0.2,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.boolIn=!1;
this.animText()}.bind(this)});this.tweenBG=this.tween({posYBG:-this.plusBorderY/2,posXBG:0},this.timeAlive,{easing:ig.Tween.Easing.Linear.EaseNone});this.posYBGText=0;this.tweenBGTextSlow=this.tween({posYBGText:-ig.sizeHandler.minH/(20*_DATAGAME.ratioRes)},this.timeAlive,{easing:ig.Tween.Easing.Linear.EaseNone})},animText:function(){this.posXText=(ig.system.width-ig.game.midX)/(20*_DATAGAME.ratioRes);this.boolShowText=!0;this.repos();this.tweenText=this.tween({scaleText:1},0.3,{easing:ig.Tween.Easing.Linear.EaseNone});
this.tweenTextLoop=this.tween({posXText:10},5*this.timeAlive/3,{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenText.chain(this.tweenTextLoop);null!=this.secondSound&&ig.soundHandler.sfxPlayer.play(this.secondSound);this.tweenText.start()},animChar:function(){this.posXChar=-30*_DATAGAME.ratioRes;this.boolShowChar=!0;this.playAnimSpriter();this.bgBlack=ig.game.spawnEntity(EntityBlack,0,0,{color:"black",alphaTrans:0});this.tween({alphaTransBlack:1},0.2,{delay:this.timeAlive-0.5,easing:ig.Tween.Easing.Linear.EaseNone,
onComplete:function(){this.boolShowAll=!1;this.alphaChar=0;this.sptChar.spriter.root.alpha=0;this.sptChar.spriter.zIndex=_DATAGAME.zIndexData.freezeFrame3Spriter;ig.game.sortEntitiesDeferred();this.tween({alphaTransBlack:0},0.2,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.alphaTransBlack=0;null!=this.bgWhite&&(this.bgWhite.alphaTrans=this.alphaTrans);null!=this.bgBlack&&(this.bgBlack.alphaTrans=this.alphaTransBlack);this.isVisible=!1;this.kill();null!=this.callback&&this.callback()}.bind(this)}).start()}.bind(this)}).start();
this.tweenCharLoop=this.tween({posXChar:0},4*this.timeAlive/3,{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenCharLoop.start()},drawObject:function(){var b=ig.system.context;this.updatePosition();if(this.boolShowAll){b.save();b.translate(this.posXBG,this.posYBG);this.bg.draw(this.startX,this.startY,this.bgX,this.bgY,this.bgW,this.bgH,this.totalWidth,this.totalHeight);b.restore();b.save();b.translate(this.posXBGText,this.posYBGText);var d=this.textBg.height*ig.system.width/this.textBg.width;d<=
600*_DATAGAME.ratioRes&&(d=600*_DATAGAME.ratioRes);this.textBg.draw(0,ig.game.midY-2*d/5,0,0,this.textBg.width,this.textBg.height,ig.system.width,d);b.restore();this.boolShowChar&&null!=this.sptChar&&(this.sptChar.spriter.root.alpha=this.alphaChar,this.sptChar.spriter.pos.x=ig.game.midX-200*_DATAGAME.ratioRes+this.posXChar+this.offsetCharX,this.sptChar.spriter.pos.y=ig.game.midY+500*_DATAGAME.ratioRes);this.boolShowText&&(b.save(),b.globalAlpha=this.alphaText,b.translate(ig.game.midX+this.textOffset.x+
ig.FreezeFrame.textDimension.width/2+this.posXText,ig.game.midY+this.textOffset.y+ig.FreezeFrame.textDimension.height/2-ig.FreezeFrame.textDimension.height/4),b.scale(this.scaleText,this.scaleText),b.rotate(this.angleText*Math.PI/180),b.font=ig.game.fontNameWeight+" "+Math.round(this.font*_DATAGAME.ratioRes*this.fontSizeRatio*ig.game.fontRatio)+"px "+ig.game.fontName,null!=this.textShadowColor&&(b.fillStyle=this.textShadowColor,b.textAlign="left",ig.game.drawText(this.arrText,this.font*_DATAGAME.ratioRes*
this.fontSizeRatio,b,-ig.FreezeFrame.textDimension.width/2+this.shadowOffset.x*this.fontSizeRatio,-ig.FreezeFrame.textDimension.height/2+this.shadowOffset.y*this.fontSizeRatio-0)),b.fillStyle=this.textColor,b.textAlign="left",ig.game.drawText(this.arrText,this.font*_DATAGAME.ratioRes*this.fontSizeRatio,b,-ig.FreezeFrame.textDimension.width/2,-ig.FreezeFrame.textDimension.height/2-0),b.restore())}null!=this.bgWhite&&(this.bgWhite.alphaTrans=this.alphaTrans);null!=this.bgBlack&&(this.bgBlack.alphaTrans=
this.alphaTransBlack)},updatePosition:function(){var b=this.totalWidth/this.totalHeight;this.bg.width/this.bg.height>b?(this.bgH=this.bg.height,this.bgW=this.bgH*b,this.bgX=(this.bg.width-this.bgW)/2,this.bgY=0):(this.bgW=this.bg.width,this.bgH=this.bgW/b,this.bgX=0,this.bgY=(this.bg.height-this.bgH)/2)},repos:function(){this.plusBorderX=0.2*ig.system.width;this.plusBorderY=0.2*ig.system.height;this.totalWidth=ig.system.width+this.plusBorderX;this.totalHeight=ig.system.height+this.plusBorderY;this.startX=
-this.plusBorderX/2;this.endX=ig.system.width+this.plusBorderX/2;this.startY=-this.plusBorderY/2;this.endY=ig.system.height+this.plusBorderY/2;this.fontSizeRatio=ig.sizeHandler.isPortrait?0.5:1;this.arrText=ig.game.wordWrap(this.text,ig.sizeHandler.isPortrait?350*_DATAGAME.ratioRes:ig.sizeHandler.minH/2-30*_DATAGAME.ratioRes,Math.round(this.font*_DATAGAME.ratioRes*this.fontSizeRatio*ig.game.fontRatio),ig.game.fontName,!0);var b=ig.system.context;ig.FreezeFrame.measure({text:this.arrText,fontSize:Math.round(this.font*
_DATAGAME.ratioRes*this.fontSizeRatio*ig.game.fontRatio),fontFamily:ig.game.fontName},b);this.offsetCharX=ig.sizeHandler.isPortrait?0:-20*_DATAGAME.ratioRes},update:function(){this.parent()}});EntityBlack=ig.Entity.extend({zIndex:_DATAGAME.zIndexData.freezeFrame3Black,alphaTrans:0,color:"white",isVisible:!0,init:function(b,d,e){this.parent(b,d,e);ig.game.sortEntitiesDeferred()},draw:function(){if(this.isVisible){var b=ig.system.context;b.save();b.globalAlpha=this.alphaTrans;b.fillStyle=this.color;
b.fillRect(0,0,ig.system.width,ig.system.height);b.restore();this.parent()}},repos:function(){},update:function(){this.parent()}})});ig.baked=!0;
ig.module("plugins.freezeframe.freezeframe4").requires("impact.entity","plugins.freezeframe.freezeframe").defines(function(){EntityFreezeFrame4=EntityFreezeFrame.extend({scaleBG:0.3,scaleBGText:5,scaleText:0,scaleChar:0,alphaChar:0,alphaText:0,init:function(b,d,e){this.parent(b,d,e);ig.game.consoleLog("freeze4");this.repos();ig.game.sortEntitiesDeferred()},startAnimation:function(){null!=this.firstSound&&ig.soundHandler.sfxPlayer.play(this.firstSound);this.tweenBG=this.tween({scaleBG:1.1},this.timeAlive,
{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenAlpha=this.tween({scaleBG:1,alphaBG:1},0.3,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.animBGText()}.bind(this)});this.tweenAlpha.chain(this.tweenBG);this.tweenAlpha.start()},animBGText:function(){this.tweenBGText=this.tween({alphaBGText:1,scaleBGText:1.05},0.2,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.animChar();this.animText()}.bind(this)});this.tweenBGTextSlow=this.tween({scaleBGText:1},this.timeAlive,
{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenBGText.chain(this.tweenBGTextSlow);this.tweenBGText.start()},animChar:function(){this.boolShowChar=!0;this.tweenChar=this.tween({scaleChar:0.95,alphaChar:1},0.3,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.playAnimSpriter()}.bind(this)});this.tweenCharLoop=this.tween({scaleChar:1},this.timeAlive,{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenChar.chain(this.tweenCharLoop);this.tweenChar.start();this.tween({alphaBG:0,alphaBGText:0,
alphaText:0,alphaChar:0,scaleBG:2,scaleBGText:2,scaleText:2,scaleChar:2},0.2,{delay:this.timeAlive-0.5,easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.alphaChar=this.alphaText=this.alphaBGText=this.alphaBG=0;this.scaleChar=this.scaleText=this.scaleBGText=this.scaleBG=2;this.boolShowChar=this.boolShowAll=!1;this.alphaChar=0;this.sptChar.spriter.root.alpha=0;this.tween({alphaTransBlack:0},0.2,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.isVisible=!1;this.kill();
null!=this.callback&&this.callback()}.bind(this)}).start()}.bind(this)}).start();this.tweenCharLoop=this.tween({posXChar:0},4*this.timeAlive/3,{easing:ig.Tween.Easing.Linear.EaseNone})},animText:function(){this.boolShowText=!0;this.tweenText=this.tween({scaleText:0.95,alphaText:1},0.3,{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenTextLoop=this.tween({scaleText:1.05},this.timeAlive,{easing:ig.Tween.Easing.Linear.EaseNone});this.tweenText.chain(this.tweenTextLoop);null!=this.secondSound&&ig.soundHandler.sfxPlayer.play(this.secondSound);
this.tweenText.start()},drawObject:function(){var b=ig.system.context;b.save();this.updatePosition();b.translate(this.posXBG,this.posYBG);b.scale(this.scaleBG,this.scaleBG);b.globalAlpha=this.alphaBG;this.bg.draw(-this.totalWidth/2,-this.totalHeight/2,this.bgX,this.bgY,this.bgW,this.bgH,this.totalWidth,this.totalHeight);b.restore();b.save();var d=this.textBg.height*ig.system.width/this.textBg.width;b.translate(ig.game.midX,ig.game.midY);b.scale(this.scaleBGText,this.scaleBGText);b.globalAlpha=this.alphaBGText;
this.textBg.draw(-ig.system.width/2,-d/2,0,0,this.textBg.width,this.textBg.height,ig.system.width,d);b.restore();this.boolShowChar&&null!=this.sptChar&&(this.sptChar.spriter.root.alpha=this.alphaChar,this.sptChar.spriter.pos.x=ig.game.midX-200*_DATAGAME.ratioRes+this.posXChar+this.offsetCharX,this.sptChar.spriter.pos.y=ig.game.midY+500*_DATAGAME.ratioRes,this.sptChar.spriter.scale.x=-1.1*this.scaleChar,this.sptChar.spriter.scale.y=1.1*this.scaleChar);this.boolShowText&&(b.save(),b.globalAlpha=this.alphaText,
b.translate(ig.game.midX+this.textOffset.x+ig.FreezeFrame.textDimension.width/2+this.posXText,ig.game.midY+this.textOffset.y+ig.FreezeFrame.textDimension.height/5),b.scale(this.scaleText,this.scaleText),b.globalAlpha=this.alphaText,b.font=this.font*_DATAGAME.ratioRes*this.fontSizeRatio,null!=this.textShadowColor&&(b.fillStyle=this.textShadowColor,b.textAlign="left",ig.game.drawText(this.arrText,this.font*_DATAGAME.ratioRes*this.fontSizeRatio,b,-ig.FreezeFrame.textDimension.width/2+this.shadowOffset.x,
-ig.FreezeFrame.textDimension.height/2+this.shadowOffset.y)),b.fillStyle=this.textColor,b.textAlign="left",ig.game.drawText(this.arrText,this.font*_DATAGAME.ratioRes*this.fontSizeRatio,b,-ig.FreezeFrame.textDimension.width/2,-ig.FreezeFrame.textDimension.height/2),b.restore())},updatePosition:function(){var b=this.totalWidth/this.totalHeight;this.bg.width/this.bg.height>b?(this.bgH=this.bg.height,this.bgW=this.bgH*b,this.bgX=(this.bg.width-this.bgW)/2,this.bgY=0):(this.bgW=this.bg.width,this.bgH=
this.bgW/b,this.bgX=0,this.bgY=(this.bg.height-this.bgH)/2)},repos:function(){this.plusBorderX=0.2*ig.system.width;this.plusBorderY=0.2*ig.system.height;this.totalWidth=ig.system.width+this.plusBorderX;this.totalHeight=ig.system.height+this.plusBorderY;this.startX=-this.plusBorderX/2;this.endX=ig.system.width+this.plusBorderX/2;this.startY=-this.plusBorderY/2;this.endY=ig.system.height+this.plusBorderY/2;this.posXBG=this.totalWidth/2-this.plusBorderX/2;this.posYBG=this.totalHeight/2-this.plusBorderY/
2;this.fontSizeRatio=ig.sizeHandler.isPortrait?0.5:1;this.arrText=ig.game.wordWrap(this.text,ig.sizeHandler.isPortrait?350*_DATAGAME.ratioRes:ig.sizeHandler.minH/2-30*_DATAGAME.ratioRes,Math.round(this.font*_DATAGAME.ratioRes*this.fontSizeRatio*ig.game.fontRatio),ig.game.fontName,!0);var b=ig.system.context;ig.FreezeFrame.measure({text:this.arrText,fontSize:Math.round(this.font*_DATAGAME.ratioRes*this.fontSizeRatio*ig.game.fontRatio),fontFamily:ig.game.fontName},b);this.offsetCharX=ig.sizeHandler.isPortrait?
0:-20*_DATAGAME.ratioRes},update:function(){this.parent()}})});ig.baked=!0;
ig.module("plugins.freezeframe.freezeframe-plugin").requires("plugins.freezeframe.freezeframe-settings","plugins.freezeframe.freezeframe1","plugins.freezeframe.freezeframe2","plugins.freezeframe.freezeframe3","plugins.freezeframe.freezeframe4").defines(function(){ig.FreezeFrame={textDimension:{width:0,height:0},measureLine:function(b,d){for(var e=b.measureText(d[0]),f=1;f<d.length;f++){var g=b.measureText(d[f]);g.width>=e.width&&(e=g)}return e},measure:function(b,d){var e=b.text;d.save();d.font=b.fontSize+
"px "+b.fontFamily;var f=this.measureLine(d,e);d.restore();b.textData={textLines:e,textWidth:f.width,fontHeight:f.fontBoundingBoxAscent+f.fontBoundingBoxDescent};if(isNaN(b.textData.fontHeight)||null==b.textData.fontHeight)b.textData.fontHeight=b.fontSize;this.textDimension={width:b.textData.textWidth,height:b.textData.fontHeight*b.textData.textLines.length}}};ig.initFreezeFrameSettings()});ig.baked=!0;
ig.module("plugins.multilang").requires("game.entities.buttons.button","impact.impact","impact.entity","plugins.tween").defines(function(){function b(b){return{x:b.pos.x+0.5*b.size.x,y:b.pos.y+0.5*b.size.y}}function d(b,d){b.pos={x:d.x-0.5*b.size.x,y:d.y-0.5*b.size.y}}function e(b,d,e,f,g,q,s,t){b.font=f+"pt "+e;b.textAlign=q;b.fillStyle=g;b.fillText(d,s,t)}function f(b,d,e,f,g,q,s,t){"undefined"==typeof t&&(t=!0);"undefined"===typeof q&&(q=5);if("number"===typeof q)q={tl:q,tr:q,br:q,bl:q};else{var v=
{tl:0,tr:0,br:0,bl:0},u;for(u in v)q[u]=q[u]||v[u]}b.beginPath();b.moveTo(d+q.tl,e);b.lineTo(d+f-q.tr,e);b.quadraticCurveTo(d+f,e,d+f,e+q.tr);b.lineTo(d+f,e+g-q.br);b.quadraticCurveTo(d+f,e+g,d+f-q.br,e+g);b.lineTo(d+q.bl,e+g);b.quadraticCurveTo(d,e+g,d,e+g-q.bl);b.lineTo(d,e+q.tl);b.quadraticCurveTo(d,e,d+q.tl,e);b.closePath();s&&b.fill();t&&b.stroke()}function g(b,d){var e=$("<span>Hg</span>").css({fontFamily:b,fontSize:d}),f=$('<div style="display: inline-block; width: 1px; height: 0px;"></div>'),
g=$("<div></div>");g.append(e,f);$("body").append(g);try{var q={};f.css({verticalAlign:"baseline"});q.ascent=f.offset().top-e.offset().top;f.css({verticalAlign:"bottom"});q.height=f.offset().top-e.offset().top;q.descent=q.height-q.ascent}finally{g.remove()}return q}SelectLanguage=ig.Class.extend({zIndex:99999,settings:{animationSpeed:0.25,fontFamily:"metroblack",onSelected:!1,showButton:{font:{size:23*_DATAGAME.ratioRes,color:"white"},radius:5*_DATAGAME.ratioRes,bg:"brown",stroke:{color:"white",size:2*
_DATAGAME.ratioRes}},dialog:{overlayBaseOpacity:0.5,width:500*_DATAGAME.ratioRes,caption:{font:{size:20*_DATAGAME.ratioRes,color:"black"},boxHeight:70*_DATAGAME.ratioRes,margin:{top:0,bottom:0}},item:{boxHeight:50*_DATAGAME.ratioRes,paddingLeft:20*_DATAGAME.ratioRes,font:{size:18*_DATAGAME.ratioRes,color:"black",colorSelected:"white"},selectedBG:"#3069C2"},okButton:{font:{size:20*_DATAGAME.ratioRes,color:"black"},stroke:{color:"grey",size:2*_DATAGAME.ratioRes},bg:!1,btnRadius:5*_DATAGAME.ratioRes,
boxHeight:50*_DATAGAME.ratioRes,boxWidth:200*_DATAGAME.ratioRes,margin:{top:20*_DATAGAME.ratioRes,bottom:10*_DATAGAME.ratioRes}}}},init:function(b){ig.merge(this.settings,b);this.itemLength=Object.keys(_LANG).length;this.calculateFontHeight();this.calculateDialogHeight();b=navigator.language;var d=getQueryVariable("language");this.selected=_LANG[d]?d:_LANG[b]?b:"en";this.fnAssignLanguage();ig.game.prevLang=this.selected;b=ig.game.getEntitiesByType(EntityPointer);for(d=0;d<b.length;d++){var e=b[d];
e.size.x=1;e.size.y=1}window.tlSelector=this},calculateFontHeight:function(){var b=this.settings,d=b.showButton,e=b.dialog;d.font.halfHeight=0.5*g(b.fontFamily,d.font.size).height;e.caption.font.halfHeight=0.5*g(b.fontFamily,e.caption.font.size).height;e.item.font.halfHeight=0.5*g(b.fontFamily,e.item.font.size).height;e.okButton.font.halfHeight=0.5*g(b.fontFamily,e.okButton.font.size).height},calculateDialogHeight:function(){var b=this.settings.dialog;b.height=b.caption.boxHeight+b.caption.margin.top+
b.caption.margin.bottom;b.height+=this.itemLength*b.item.boxHeight;b.height+=b.okButton.boxHeight+b.okButton.margin.top+b.okButton.margin.bottom},fnAssignLanguage:function(){_STRINGS=JSON.parse(JSON.stringify(_LANG[this.selected]));if("function"===typeof this.settings.onSelected)this.settings.onSelected(this.selected)},showDialog:function(){this.dialog||(this.dialog=ig.game.spawnEntity(EntitySLDialog,0,0,{SL:this}))},hideDialog:function(){this.dialog&&(this.dialog.fnHide(),delete this.dialog)}});
EntitySLDialog=ig.Entity.extend({animateValue:0,animating:!1,gravityFactor:0,size:{x:0,y:0},relZIndex:{overlay:0,self:1,okButton:2,item:3},init:function(b,d,e){this.SL=e.SL;this.showPos={x:0.5*ig.system.width,y:0.5*ig.system.height};this.hidePos=ig.copy(this.showPos);this.hidePos.y=0.5*-this.SL.settings.dialog.height;this.pos=ig.copy(this.hidePos);this.uiPos=this.calculateUIRelPos();this.prepareUI();this.zIndex=this.SL.zIndex+this.relZIndex.self;ig.game.sortEntitiesDeferred();this.fnShow()},calculateUIRelPos:function(){for(var b=
this.SL.settings.dialog,d=0.5*b.item.boxHeight,e=-0.5*b.height,e=e+(b.caption.margin.top+b.caption.boxHeight),f=e-0.5*b.caption.boxHeight,e=e+b.caption.margin.bottom,g=[],q=0;q<this.SL.itemLength;q++)e+=b.item.boxHeight,g.push(e-0.5*d);e+=b.okButton.margin.top+b.okButton.boxHeight;return{capY:f,itemsY:g,okButtonY:e-0.5*b.okButton.boxHeight}},prepareUI:function(){var b=this.SL.settings.dialog;this.overlay=ig.game.spawnEntity(EntitySLDialogOverlay,0,0,{relPos:this.uiPos.capY,baseOpacity:this.SL.settings.dialog.overlayBaseOpacity});
this.overlay.zIndex=this.SL.zIndex+this.relZIndex.overlay;this.items=[];var d=0,e;for(e in _LANG){if(_LANG.hasOwnProperty(e)){var f=ig.game.spawnEntity(EntitySLDialogItem,0,0,{langCode:e,size:{x:b.width,y:b.item.boxHeight},relPos:this.uiPos.itemsY[d],zIndex:this.SL.zIndex+this.relZIndex.item,SL:this.SL});this.items.push(f)}d++}this.okButton=ig.game.spawnEntity(EntitySLOkButton,0,0,{size:{x:b.okButton.boxWidth,y:b.okButton.boxHeight},relPos:this.uiPos.okButtonY,SL:this.SL,zIndex:this.SL.zIndex+this.relZIndex.okButton})},
drawBg:function(){var b=ig.system.context,d=this.SL.settings.dialog;b.save();b.fillStyle="white";b.strokeStyle="whitesmoke";f(b,this.pos.x-0.5*d.width,this.pos.y-0.5*d.height,d.width,d.height,10,!0,!0);b.restore()},drawCaption:function(){var b=ig.system.context,d=_STRINGS.lang.select,f=this.SL.settings.dialog.caption;b.save();var g=Math.round(0.4*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);e(b,d,ig.game.fontName,g,f.font.color,"center",this.pos.x,this.pos.y+this.uiPos.capY+f.font.halfHeight);
b.restore()},draw:function(){this.parent();this.drawBg();this.drawCaption()},fnShow:function(){this.animating=!0;this.tween({pos:{y:this.showPos.y},overlay:{opacity:1}},this.SL.settings.animationSpeed,{easing:ig.Tween.Easing.Exponential.EaseOut,onComplete:function(){for(var b=0;b<this.items.length;b++)this.items[b].enableClick=!0;this.okButton.enableClick=!0;this.animating=!1}.bind(this)}).start()},fnHide:function(b){this.SL.closeCallback=b;this.animating=!0;this.SL.requestDialogDestroy=!0;for(b=
0;b<this.items.length;b++)this.items[b].enableClick=!1;this.okButton.enableClick=!1;this.tween({pos:{y:this.hidePos.y},overlay:{opacity:0}},this.SL.settings.animationSpeed,{easing:ig.Tween.Easing.Exponential.EaseIn,onComplete:function(){ig.game.prevLang=this.selected;this.animating=!1;this.SL.fnAssignLanguage();this.SL.settings.fontFamily=ig.game.fontName;ig.game.currentWindow.changeLanguage();this.kill()}.bind(this)}).start()},updatePos:function(){for(var b=0;b<this.items.length;b++){var e=this.items[b];
d(e,{x:this.pos.x,y:this.pos.y+e.relPos})}d(this.okButton,{x:this.pos.x,y:this.pos.y+this.okButton.relPos})},update:function(){this.parent();this.animating&&this.updatePos()},kill:function(){this.overlay.kill();for(var b=0;b<this.items.length;b++)this.items[b].kill();this.okButton.kill();this.parent()}});EntitySLDialogOverlay=ig.Entity.extend({type:ig.Entity.TYPE.B,gravityFactor:0,opacity:0,init:function(b,d,e){this.parent(b,d,e);this.size={x:ig.system.width,y:ig.system.height}},drawBg:function(){var b=
ig.system.context;b.save();b.fillStyle="rgba(0,0,0,"+this.baseOpacity*this.opacity+")";b.fillRect(0,0,ig.system.width,ig.system.height);b.restore()},draw:function(){this.parent();this.drawBg()}});EntitySLDialogItem=EntityButton.extend({gravityFactor:0,enableClick:!1,init:function(b,d,e){this.parent(b,d,e)},clicked:function(){this.enableClick&&console.log("Item "+this.langCode+" Clicked!")},released:function(){this.enableClick&&(console.log("Item "+this.langCode+" Released!"),this.SL.selected=this.langCode)},
draw:function(){this.parent();this.drawBG();this.drawText()},drawBG:function(){var b=!1;this.SL.selected===this.langCode&&(b=this.SL.settings.dialog.item.selectedBG||!1);if(b){var d=ig.system.context;d.save();d.fillStyle=b;d.fillRect(this.pos.x,this.pos.y,this.size.x,this.size.y);d.restore()}},drawText:function(){var d=_LANG[this.langCode].lang.label,f=this.SL.settings.dialog.item,g=b(this),m=f.font.color;this.SL.selected===this.langCode&&(m=f.font.colorSelected||m);var r=ig.system.context;r.save();
var q=this.SL.settings.fontFamily,s=Math.round(0.4*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);e(r,d,q,s,m,"left",this.pos.x+f.paddingLeft,g.y+f.font.halfHeight);r.save()}});EntitySLOkButton=EntityButton.extend({gravityFactor:0,enableClick:!1,init:function(b,d,e){this.parent(b,d,e)},clicked:function(){this.enableClick&&console.log("Ok Clicked!")},released:function(){this.enableClick&&(console.log("Ok Released!"),this.SL.hideDialog(),ig.game.currentWindow.enabledButton(!0),ig.game.checkFont(),
_DATAGAME.isLinearChapter||ig.game.sortChapterList())},draw:function(){this.parent();this.drawButton();this.drawCaption()},drawButton:function(){var b=this.SL.settings.dialog.okButton.bg||!1;if(this.SL.settings.dialog.okButton.stroke)var d=this.SL.settings.dialog.okButton.stroke.color||!1,e=this.SL.settings.dialog.okButton.stroke.size||!1;if(b||d){var g=ig.system.context;g.save();b&&(g.fillStyle=b);d&&(g.strokeStyle=d);e&&(g.lineWidth=e);f(g,this.pos.x,this.pos.y,this.size.x,this.size.y,this.SL.settings.dialog.okButton.btnRadius||
5,b?!0:!1,d?!0:!1);g.restore()}},drawCaption:function(){var d=b(this),f=ig.system.context;f.save();var g=this.SL.settings.fontFamily,m=Math.round(0.4*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);e(f,_STRINGS.lang.ok,g,m,this.SL.settings.dialog.okButton.font.color,"center",d.x,d.y+this.SL.settings.dialog.okButton.font.halfHeight);f.restore()}});EntitySLShowBtn=EntityButton.extend({gravityFactor:0,enableClick:!0,alpha:1,image:new ig.Image(_RESOURCESINFO.image.globe),imageButton:new ig.Image(_RESOURCESINFO.image.btnBlank2,
253*_DATAGAME.ratioRes,75*_DATAGAME.ratioRes),size:{x:253*_DATAGAME.ratioRes,y:75*_DATAGAME.ratioRes},clicked:function(){this.enableClick&&this.isClickable&&(window.tlSelector.showDialog(),ig.game.currentWindow.enabledButton(!1))},released:function(){this.enableClick&&console.log("Released")},draw:function(){this.parent();var b=ig.system.context;b.save();b.globalAlpha=this.alpha;this.imageButton.draw(this.pos.x,this.pos.y);this.drawImage();this.drawCaption();b.restore()},drawBg:function(){var b=window.tlSelector.settings.showButton.bg||
!1,d=window.tlSelector.settings.showButton.stroke||!1;if(b||d){var e=ig.system.context;e.save();b&&(e.fillStyle=b);d&&(e.strokeStyle=d.color,e.lineWidth=d.size);f(e,this.pos.x,this.pos.y,this.size.x,this.size.y,window.tlSelector.settings.showButton.radius||5,b?!0:!1,d?!0:!1);e.restore()}},drawImage:function(){var b=this.pos.x,d=this.pos.y,e=ig.system.context;e.save();this.image.draw(b+24*_DATAGAME.ratioRes,d+21*_DATAGAME.ratioRes);e.restore()},drawCaption:function(){var d=b(this),f=ig.system.context;
f.save();var g=Math.round(0.41*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);halfHeight=window.tlSelector.settings.showButton.font.halfHeight;e(f,_STRINGS.lang.select,ig.game.fontName,g,ig.game.buttonTextColor,"center",d.x+19*_DATAGAME.ratioRes,d.y+halfHeight+ig.game.checkArialOffset(g)+_DATAGAME.uiColor[_DATAGAME.uiTheme].button.textOffsetY*_DATAGAME.ratioRes*_DATAGAME.multiplierOffsetTextButtonBlankSmall);f.restore()}})});ig.baked=!0;
ig.module("plugins.notification").requires("impact.entity").defines(function(){EntityNotification=ig.Entity.extend({lineHeight:55,maxLines:10,zIndex:_DATAGAME.zIndexData.notification,alpha:0,text:"",fontFace:"Arial",fontSize:50,fontColor:"#fff",delayTimer:null,delayedFunction:null,notifWidth:800,notifHeight:50,notifPadding:20,toBeRemoved:!1,backgroundColor:"#2F463B",outlineColor:"black",notifPosition:"top",configs:{},textAnchor:"center",textVAlign:"middle",textAlign:"center",textBaseline:"top",timeAlive:1,
prevPos:{x:0,y:0},defPos:{x:0,y:0},formatText:{formatText0:{reset:!0}},scale:{x:0,y:1},notifProperties:{},staticInstantiate:function(){"undefined"===typeof EntityNotification.notificationArr&&(EntityNotification.notificationArr=[])},init:function(b,d,e){this.parent(b,d,e);this.anchorCenter();this.handleExistingNotifications();this.tweenIn();this.fontSize=_DATAGAME.toastBox.fontSize*_DATAGAME.ratioRes;this.lineHeight=1.1*_DATAGAME.toastBox.fontSize*_DATAGAME.ratioRes;this.fontFace=ig.game.fontNameThin;
this.fontColor=_DATAGAME.toastBox.fontColor;this.backgroundColor=_DATAGAME.toastBox.boxColor;this.outlineColor=_DATAGAME.toastBox.outlineColor;var f=ig.system.context;f.font=this.fontSize+"px "+this.fontFace;b=ig.game.wordWrapForChatBubble(this.text,this.notifWidth-2*this.notifPadding,this.fontSize,this.fontFace,!0,this.formatText);d=b.replaceAll("<>","").split("<br>");this.wrappedLines=b.split("<br>");this.notifProperties.lines=this.wrappedLines;this.notifProperties.longestLineWidth=Math.max.apply(null,
d.map(function(b){return f.measureText(b).width}));this.notifProperties.adjustedWidth=Math.max(this.notifWidth,this.notifProperties.longestLineWidth+2*this.notifPadding);this.notifProperties.adjustedHeight=Math.min(this.notifProperties.lines.length,this.maxLines)*this.lineHeight+2*this.notifPadding;this.configs={textData:{textLines:this.notifProperties.lines},fontSize:this.fontSize,fillStyle:this.fontColor,fontFamily:this.fontFace,counterAnim:0,showFlash:[!0,!0,!0,!0,!0,!0],showShake:[!0,!0,!0,!0,
!0,!0]};ig.game.sortEntitiesDeferred()},anchorCenter:function(){this.pos.x-=0.5*this.notifWidth;this.pos.y-=0.5*this.notifHeight},handleExistingNotifications:function(){EntityNotification.notificationArr.unshift(this)},tweenIn:function(){this.tween({alpha:1,scale:{x:1,y:1}},0.25,{easing:ig.Tween.Easing.Quadratic.EaseInOut,onComplete:function(){this.delayTimer=new ig.Timer(this.timeAlive);this.delayedFunction=this.tweenFadeOut}.bind(this)}).start()},tweenFadeOut:function(){this.tween({alpha:0},0.25,
{onComplete:function(){this.toBeRemoved=!0}.bind(this)}).start()},tweenMoveUp:function(){},handleDelayTimer:function(){this.delayTimer&&0<this.delayTimer.delta()&&(this.delayTimer=null,this.delayedFunction(),this.delayedFunction=null)},getStartX:function(b,d){switch(this.textAnchor){case "center":return this.getCenteredStartX(b,d);case "right":return this.getRightAlignedStartX(b,d);default:return this.getLeftAlignedStartX(b,d)}},getCenteredStartX:function(b,d){return"center"===this.textAlign?this.pos.x+
d/2:"left"===this.textAlign?this.pos.x+d/2:this.pos.x+d/2-b},getRightAlignedStartX:function(b,d){return"center"===this.textAlign?this.pos.x+d-b/2:"left"===this.textAlign?this.pos.x+d-b:this.pos.x+d},getLeftAlignedStartX:function(b){return"center"===this.textAlign?this.pos.x+b/2+this.notifPadding:"left"===this.textAlign?this.pos.x+this.notifPadding:this.pos.x},getStartY:function(b,d,e){switch(this.textVAlign){case "middle":return this.pos.y+d/2-e*this.lineHeight/2;case "bottom":return this.pos.y+d-
b-this.notifPadding;default:return this.pos.y+this.notifPadding}},wrapTextAndGetLines:function(b,d,e){var f=d.split(" "),g="";d=[];for(var j=0;j<f.length;j++){for(;b.measureText(f[j]).width>e;){var l=f[j];f[j]=l.substring(0,l.length-1);j<f.length-1?f[j+1]=l[l.length-1]+f[j+1]:f.push(l[l.length-1])}l=g+f[j]+" ";b.measureText(l).width>e&&0<j?(d.push(g),g=f[j]+" "):g=l}d.push(g);d.length>this.maxLines&&(d=d.slice(0,this.maxLines),b=d[this.maxLines-1].trim(),3<b.length&&(b=b.substring(0,b.length-3)),
d[this.maxLines-1]=b+"...");return d},repos:function(){var b=0.1*ig.system.height;if("bottom"==this.notifPosition)b=0.95*ig.system.height;else if("center"==this.notifPosition||"middle"==this.notifPosition)b=0.5*ig.system.height;this.defPos={x:ig.system.width/2,y:b}},draw:function(){this.parent();var b=ig.system.context;b.save();b.globalAlpha=this.alpha;b.translate(this.defPos.x+this.pos.x+0.5*this.notifProperties.adjustedWidth,this.pos.y+0.5*this.notifProperties.adjustedHeight);b.scale(this.scale.x,
this.scale.y);b.translate(-this.pos.x-0.5*this.notifProperties.adjustedWidth,-this.pos.y-0.5*this.notifProperties.adjustedHeight);b.font=this.fontSize+"px "+this.fontFace;b.textAlign="left";b.textBaseline=this.textBaseline;b.fillStyle=this.fontColor;b.save();b.globalAlpha=_DATAGAME.toastBox.opacity;b.fillStyle=this.backgroundColor;b.roundRect(this.pos.x,this.pos.y,this.notifProperties.adjustedWidth,this.notifProperties.adjustedHeight,_DATAGAME.toastBox.corner*_DATAGAME.ratioRes);null!=this.outlineColor&&
("none"!=this.outlineColor&&""!=this.outlineColor)&&(b.lineWidth=5,b.strokeStyle=this.outlineColor,b.stroke());b.restore();this.drawText(b,"");b.restore()},drawText:function(b,d){var e=this.configs;b.font=this.fontSize+"px "+this.fontFace;b.textAlign="left";b.textBaseline=this.textBaseline;b.fillStyle=this.fontColor;for(var f=this.getStartX(this.notifProperties.longestLineWidth,this.notifProperties.adjustedWidth),g=this.getStartY(this.notifProperties.lines.length*this.lineHeight,this.notifProperties.adjustedHeight,
Math.min(this.notifProperties.lines.length,this.maxLines)),j=0,l=0;l<e.textData.textLines.length;l++){var n=e.textData.textLines[l].split("<>"),m=b.measureText(e.textData.textLines[l].replaceAll("<>","")).width,r=0,q=0;"center"==this.textAlign&&"center"==this.textAnchor&&(q=-m/2);for(m=0;m<n.length;m++){var s=!1;0<m&&(j++,r+=b.measureText(n[m-1]).width);if(m+1<n.length&&("."==n[m+1].substr(0,1)||","==n[m+1].substring(0,1)||"!"==n[m+1].substring(0,1)||"?"==n[m+1].substring(0,1)))" "==n[m].substr(n[m].length-
1,1)&&(n[m]=n[m].substr(0,n[m].length-1));0==j||0!=j&&null!=this.formatText["formatText"+d+j].reset&&!0==this.formatText["formatText"+d+j].reset?(b.fillStyle=e.fillStyle,b.font=e.fontSize+"px "+e.fontFamily):(b.fillStyle=null==this.formatText["formatText"+d+j].color?e.fillStyle:this.formatText["formatText"+d+j].color,null!=this.formatText["formatText"+d+j].format?!0==ig.ua.iOS?-1==this.formatText["formatText"+d+j].format.search("bold")?b.font=this.formatText["formatText"+d+j].format+" "+e.fontSize+
"px "+e.fontFamily:(s=this.formatText["formatText"+d+j].format.replaceAll("bold",""),b.font=s+" "+e.fontSize+"px "+e.fontFamily,s=!0):b.font=this.formatText["formatText"+d+j].format+" "+e.fontSize+"px "+e.fontFamily:b.font=e.fontSize+"px "+e.fontFamily);0!=j&&null!=this.formatText["formatText"+d+j].animEffect?"flash"==this.formatText["formatText"+d+j].animEffect?(null==this.formatText["formatText"+d+j].speed&&(this.formatText["formatText"+d+j].speed=1),e["showFlash"+this.formatText["formatText"+d+
j].speed]&&b.fillText(n[m],f+r+q,g+l*this.lineHeight)):"shake"==this.formatText["formatText"+d+j].animEffect&&(null==this.formatText["formatText"+d+j].speed&&(this.formatText["formatText"+d+j].speed=1),e["showShake"+this.formatText["formatText"+d+j].speed]?b.fillText(n[m],f+r+q+1,g+l*this.lineHeight):b.fillText(n[m],f+r+q-1,g+l*this.lineHeight)):(s&&(b.lineCap="round",c.lineJoin="round",b.strokeText(n[m],f+r+q,g+l*this.lineHeight)),b.fillText(n[m],f+r+q,g+l*this.lineHeight))}}0!=e.counterAnim&&(0==
e.counterAnim%10&&(e.showFlash5=e.showFlash5?!1:!0),0==e.counterAnim%20&&(e.showFlash4=e.showFlash4?!1:!0),0==e.counterAnim%30&&(e.showFlash3=e.showFlash3?!1:!0),0==e.counterAnim%40&&(e.showFlash2=e.showFlash2?!1:!0),0==e.counterAnim%50&&(e.showFlash1=e.showFlash1?!1:!0),0==e.counterAnim%8&&(e.showShake1=e.showShake1?!1:!0),0==e.counterAnim%7&&(e.showShake2=e.showShake2?!1:!0),0==e.counterAnim%6&&(e.showShake3=e.showShake3?!1:!0),0==e.counterAnim%5&&(e.showShake4=e.showShake4?!1:!0),0==e.counterAnim%
4&&(e.showShake5=e.showShake5?!1:!0));e.counterAnim++},update:function(){if(!ig.game.isPauseSetting)if(this.toBeRemoved){var b=EntityNotification.notificationArr.indexOf(this);-1<b&&EntityNotification.notificationArr.splice(b,1);this.kill()}else{for(var b=EntityNotification.notificationArr.indexOf(this),d=0,e=0;e<=b;e++)d+=EntityNotification.notificationArr[e].notifProperties.adjustedHeight;b=this.defPos.y-d-this.notifPadding*b;this.prevPos.y!=b&&(null!=this.tweenMoveUPorDown&&this.tweenMoveUPorDown.stop(),
this.prevPos.y=b,this.tweenMoveUPorDown=this.tween({pos:{y:b}},0.1).start());this.parent();this.handleDelayTimer()}}});CanvasRenderingContext2D.prototype.roundRect=function(b,d,e,f,g,j){"undefined"==typeof j&&(j=!1);"undefined"===typeof g&&(g=5);this.save();this.beginPath();this.moveTo(b+g,d);this.lineTo(b+e-g,d);this.quadraticCurveTo(b+e,d,b+e,d+g);this.lineTo(b+e,d+f-g);this.quadraticCurveTo(b+e,d+f,b+e-g,d+f);this.lineTo(b+g,d+f);this.quadraticCurveTo(b,d+f,b,d+f-g);this.lineTo(b,d+g);this.quadraticCurveTo(b,
d,b+g,d);this.closePath();j&&(this.lineWidth=4,this.stroke());this.fill();this.restore()}});ig.baked=!0;
ig.module("plugins.progressbar").requires("impact.entity").defines(function(){EntityProgressBar=ig.Entity.extend({id:"",zIndex:_DATAGAME.zIndexData.progressBar,alpha:0,barPadding:20,lastCurrentProgress:-1,toBeRemoved:!1,barPosition:"top",clippingWidth:0,prevPos:{x:0,y:0},defPos:{x:0,y:0},scale:{x:1,y:1},barProperties:{showText:!0,showMaxValue:!0,width:400,height:100,progressColor:"white",strokeColor:"black",strokeThickness:15,corner:15,textColor:"black",textSize:50},staticInstantiate:function(){"undefined"===
typeof EntityProgressBar.progressBarArr&&(EntityProgressBar.progressBarArr=[])},init:function(b,d,e){this.parent(b,d,e);this.anchorCenter();this.handleExistingBar();this.tweenIn();ig.game.sortEntitiesDeferred()},anchorCenter:function(){this.pos.x-=0.5*this.barProperties.width;this.pos.y-=0.5*this.barProperties.height},handleExistingBar:function(){EntityProgressBar.progressBarArr.unshift(this)},tweenIn:function(){this.tween({alpha:1,scale:{x:1,y:1}},0.25,{easing:ig.Tween.Easing.Quadratic.EaseInOut,
onComplete:function(){}.bind(this)}).start()},tweenFadeOut:function(){this.tween({alpha:0},0.1,{onComplete:function(){this.toBeRemoved=!0}.bind(this)}).start()},handleDelayTimer:function(){this.delayTimer&&0<this.delayTimer.delta()&&(this.delayTimer=null,this.delayedFunction(),this.delayedFunction=null)},repos:function(){var b=0.04*ig.system.height;if("bottom"==this.barPosition)b=0.96*ig.system.height;else if("center"==this.barPosition||"middle"==this.barPosition)b=0.5*ig.system.height;this.defPos=
{x:ig.system.width/2,y:b}},checkClippingProgress:function(){if(0<=this.lastCurrentProgress){if(this.lastCurrentProgress!=ig.game.sessionData[_DATAGAME.progressBar[this.id].current]){var b=ig.game.sessionData[_DATAGAME.progressBar[this.id].current]/ig.game.sessionData[_DATAGAME.progressBar[this.id].max]*this.barProperties.width;b>=this.barProperties.width?b=this.barProperties.width:0>=b&&(b=0);var d=Math.abs(b-this.clippingWidth)/this.barProperties.width;null!=this.tweenProgress&&this.tweenProgress.stop();
this.tweenProgress=this.tween({clippingWidth:b},d).start()}this.lastCurrentProgress=ig.game.sessionData[_DATAGAME.progressBar[this.id].current]}else this.lastCurrentProgress=ig.game.sessionData[_DATAGAME.progressBar[this.id].current],this.clippingWidth=ig.game.sessionData[_DATAGAME.progressBar[this.id].current]/ig.game.sessionData[_DATAGAME.progressBar[this.id].max]*this.barProperties.width,this.clippingWidth>=this.barProperties.width&&(this.clippingWidth=this.barProperties.width)},draw:function(){this.parent();
var b=ig.system.context;b.save();b.globalAlpha=this.alpha;b.translate(this.defPos.x+this.pos.x+0.5*this.barProperties.width,this.pos.y+0.5*this.barProperties.height);b.scale(this.scale.x,this.scale.y);b.translate(-this.pos.x-0.5*this.barProperties.width,-this.pos.y-0.5*this.barProperties.height);this.barProperties.isStroke&&(b.fillStyle=this.barProperties.strokeColor,b.strokeStyle=this.barProperties.strokeColor,b.roundRect(this.pos.x,this.pos.y,this.barProperties.width,this.barProperties.height,this.barProperties.corner,
this.barProperties.isStroke,this.barProperties.strokeThickness));b.save();b.beginPath();this.checkClippingProgress();b.rect(this.pos.x,this.pos.y,this.clippingWidth,this.barProperties.height);b.clip();b.fillStyle=this.barProperties.progressColor;b.strokeStyle=this.barProperties.strokeColor;b.roundRect(this.pos.x,this.pos.y,this.barProperties.width,this.barProperties.height,this.barProperties.corner,this.barProperties.isStroke,this.barProperties.strokeThickness);b.restore();if(!0==this.barProperties.showText){var d=
Math.round(this.barProperties.textSize*ig.game.fontRatio);b.font=d+"px "+ig.game.fontName;b.textAlign="left";b.textBaseline="middle";0<this.barProperties.strokeTextThickness&&(b.lineCap="round",b.lineJoin="round",b.strokeStyle=this.barProperties.strokeTextColor,b.lineWidth=this.barProperties.strokeTextThickness,b.strokeText(_DATAGAME.progressBar[this.id].text,this.pos.x+10*_DATAGAME.ratioRes,this.pos.y+0.5*this.barProperties.height));b.fillStyle=this.barProperties.textColor;b.fillText(_DATAGAME.progressBar[this.id].text,
this.pos.x+10*_DATAGAME.ratioRes,this.pos.y+0.5*this.barProperties.height);b.textAlign="right";var d=this.convertNumber(ig.game.sessionData[_DATAGAME.progressBar[this.id].current]),e=this.convertNumber(ig.game.sessionData[_DATAGAME.progressBar[this.id].max]);0<this.barProperties.strokeTextThickness&&(b.lineCap="round",b.lineJoin="round",b.strokeStyle=this.barProperties.strokeTextColor,b.lineWidth=this.barProperties.strokeTextThickness,this.barProperties.showMaxValue?b.strokeText(d+" / "+e,this.pos.x+
this.barProperties.width-10*_DATAGAME.ratioRes,this.pos.y+0.5*this.barProperties.height):b.strokeText(d,this.pos.x+this.barProperties.width-10*_DATAGAME.ratioRes,this.pos.y+0.5*this.barProperties.height));this.barProperties.showMaxValue?b.fillText(d+" / "+e,this.pos.x+this.barProperties.width-10*_DATAGAME.ratioRes,this.pos.y+0.5*this.barProperties.height):b.fillText(d,this.pos.x+this.barProperties.width-10*_DATAGAME.ratioRes,this.pos.y+0.5*this.barProperties.height)}b.restore()},formatNumberWithCommas:function(b){return null==
b?"0":b.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},convertNumber:function(b){return _DATAGAME.defaultProgressBar.simplifyNumber&&1E3<=b?this.formatNumberWithCommas(b/1E3)+"K":this.formatNumberWithCommas(b)},update:function(){if(!ig.game.isPauseSetting)if(this.toBeRemoved){var b=EntityProgressBar.progressBarArr.indexOf(this);-1<b&&EntityProgressBar.progressBarArr.splice(b,1);this.kill()}else{for(var b=EntityProgressBar.progressBarArr.indexOf(this),d=0,e=0;e<b;e++)d+=this.barProperties.height;
e=this.defPos.y+d+this.barPadding*b;if("top"==this.barPosition)e=this.defPos.y+d+this.barPadding*b-0.5*this.barProperties.height;else if("bottom"==this.barPosition)e=this.defPos.y-d-this.barPadding*b-0.5*this.barProperties.height;else if("center"==this.barPosition||"middle"==this.barPosition)this.defPos.y=0.5*ig.system.height-EntityProgressBar.progressBarArr.length*this.barProperties.height/2-EntityProgressBar.progressBarArr.length*this.barPadding/2,e=this.defPos.y+this.barProperties.height*b+this.barPadding*
b;this.prevPos.y!=e&&(null!=this.tweenMoveUPorDown&&this.tweenMoveUPorDown.stop(),this.prevPos.y=e,this.tweenMoveUPorDown=this.tween({pos:{y:e}},0.1).start());this.parent();this.handleDelayTimer()}}});CanvasRenderingContext2D.prototype.roundRect=function(b,d,e,f,g,j,l){"undefined"==typeof j&&(j=!1);"undefined"===typeof g&&(g=0);this.save();this.beginPath();this.moveTo(b+g,d);this.lineTo(b+e-g,d);this.quadraticCurveTo(b+e,d,b+e,d+g);this.lineTo(b+e,d+f-g);this.quadraticCurveTo(b+e,d+f,b+e-g,d+f);this.lineTo(b+
g,d+f);this.quadraticCurveTo(b,d+f,b,d+f-g);this.lineTo(b,d+g);this.quadraticCurveTo(b,d,b+g,d);this.closePath();j&&(this.lineWidth=l,this.stroke());this.fill();this.restore()}});ig.baked=!0;
ig.module("plugins.clickable-div-layer").requires("plugins.data.vector").defines(function(){ClickableDivLayer=ig.Class.extend({pos:new Vector2(0,0),size:new Vector2(0,0),identifier:null,invisImagePath:_BASEPATH.media+"graphics/misc/invisible.png",init:function(b){this.pos=new Vector2(b.pos.x,b.pos.y);this.size=new Vector2(b.size.x,b.size.y);var d="more-games",e=null,f=!1;b.div_layer_name&&(d=b.div_layer_name);b.link&&(e=b.link);b.newWindow&&(f=b.newWindow);this.createClickableLayer(d,e,f)},createClickableLayer:function(b,
d,e){this.identifier=b;var f=ig.domHandler.getElementById("#"+b);f?(ig.domHandler.show(f),ig.domHandler.attr(f,"href",d)):this.createClickableOutboundLayer(b,d,this.invisImagePath,e)},updatePos:function(b,d){this.pos.x=b;this.pos.y=d;ig.sizeHandler.dynamicClickableEntityDivs[this.identifier]={};ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].width=this.size.x;ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].height=this.size.y;ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_x=
this.pos.x;ig.sizeHandler.dynamicClickableEntityDivs[this.identifier].entity_pos_y=this.pos.y},createClickableOutboundLayer:function(b,d,e,f){var g=ig.domHandler.create("div");ig.domHandler.attr(g,"id",b);var j=ig.domHandler.create("a");ig.domHandler.addEvent(g,"mousedown",function(b){b.preventDefault()});f?(ig.domHandler.attr(j,"href",d),ig.domHandler.attr(j,"target","_blank")):ig.domHandler.attr(j,"href",d);d=ig.domHandler.create("img");ig.domHandler.css(d,{width:"100%",height:"100%"});ig.domHandler.attr(d,
"src",e);e=Math.min(ig.sizeHandler.scaleRatioMultiplier.x,ig.sizeHandler.scaleRatioMultiplier.y);if(ig.ua.mobile){f=ig.domHandler.getElementById("#canvas");var l=ig.domHandler.getOffsets(f);f=l.left;l=l.top;if(ig.sizeHandler.disableStretchToFitOnMobileFlag){f=Math.floor(f+this.pos.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";var l=Math.floor(l+this.pos.y*ig.sizeHandler.scaleRatioMultiplier.y)+"px",n=Math.floor(this.size.x*ig.sizeHandler.scaleRatioMultiplier.x)+"px";e=Math.floor(this.size.y*ig.sizeHandler.scaleRatioMultiplier.y)+
"px"}else f=Math.floor(this.pos.x*ig.sizeHandler.sizeRatio.x)+"px",l=Math.floor(this.pos.y*ig.sizeHandler.sizeRatio.y)+"px",n=Math.floor(this.size.x*ig.sizeHandler.sizeRatio.x)+"px",e=Math.floor(this.size.y*ig.sizeHandler.sizeRatio.y)+"px"}else f=ig.domHandler.getElementById("#canvas"),l=ig.domHandler.getOffsets(f),f=l.left,l=l.top,f=Math.floor(f+this.pos.x*e)+"px",l=Math.floor(l+this.pos.y*e-ig.game.screen.y)+"px",n=Math.floor(this.size.x*e)+"px",e=Math.floor(this.size.y*e)+"px";ig.domHandler.css(g,
{"float":"left",position:"absolute",left:f,top:l,width:n,height:e,"z-index":3});ig.domHandler.addEvent(g,"mousemove",ig.input.mousemove.bind(ig.input),!1);ig.domHandler.appendChild(j,d);ig.domHandler.appendChild(g,j);ig.domHandler.appendToBody(g);ig.sizeHandler.dynamicClickableEntityDivs[b]={};ig.sizeHandler.dynamicClickableEntityDivs[b].width=this.size.x;ig.sizeHandler.dynamicClickableEntityDivs[b].height=this.size.y;ig.sizeHandler.dynamicClickableEntityDivs[b].entity_pos_x=this.pos.x;ig.sizeHandler.dynamicClickableEntityDivs[b].entity_pos_y=
this.pos.y}})});ig.baked=!0;
ig.module("game.entities.buttons.button-more-games").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonMoreGames=EntityButton.extend({type:ig.Entity.TYPE.A,gravityFactor:0,animSheet:new ig.AnimationSheet(_RESOURCESINFO.image.btnMoreGames,98*_DATAGAME.ratioRes,96*_DATAGAME.ratioRes),size:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},zIndex:_DATAGAME.zIndexData.buttonMoreGames,clickableLayer:null,link:null,newWindow:!1,div_layer_name:"more-games",
name:"moregames",init:function(b,d,e){this.parent(b,d,e);ig.global.wm||(_SETTINGS.MoreGames.Enabled?(this.div_layer_name=e.div_layer_name?e.div_layer_name:"more-games",_SETTINGS.MoreGames.Link&&(this.link=_SETTINGS.MoreGames.Link),_SETTINGS.MoreGames.NewWindow&&(this.newWindow=_SETTINGS.MoreGames.NewWindow),this.addAnim("idle",1,[0],!0),this.clickableLayer=new ClickableDivLayer(this),this.repos(),ig.sizeHandler.resizeLayers()):this.kill())},show:function(){var b=ig.domHandler.getElementById("#"+this.div_layer_name);
b&&ig.domHandler.show(b)},hide:function(){var b=ig.domHandler.getElementById("#"+this.div_layer_name);b&&ig.domHandler.hide(b)},draw:function(){this.parent()},repos:function(){var b=ig.system.width-this.size.x-30*_DATAGAME.ratioRes-98*_DATAGAME.ratioRes;this.pos.x=b+ig.game.screen.x;this.pos.y=25+ig.game.screen.y;this.clickableLayer&&this.clickableLayer.updatePos(b,25)}})});ig.baked=!0;
ig.module("game.entities.pointer").requires("impact.entity").defines(function(){EntityPointer=ig.Entity.extend({checkAgainst:ig.Entity.TYPE.BOTH,size:new Vector2(1,1),isFirstPressed:!1,isPressed:!1,isReleased:!1,isHovering:!1,hoveringItem:null,objectArray:[],clickedObjectList:[],ignorePause:!0,zIndex:5500,check:function(b){this.objectArray.push(b)},clickObject:function(b){this.isFirstPressed&&"function"==typeof b.clicked&&(b.clicked(),this.addToClickedObjectList(b));this.isPressed&&!this.isReleased&&
"function"==typeof b.clicking&&b.clicking();this.isReleased&&"function"==typeof b.released&&(b.released(),this.removeFromClickedObjectList(b))},refreshPos:function(){this.pos=ig.game.io.getClickPos()},update:function(){this.parent();this.refreshPos();var b=null,d=-1;for(a=this.objectArray.length-1;-1<a;a--)this.objectArray[a].zIndex>d&&(d=this.objectArray[a].zIndex,b=this.objectArray[a]);if(null!=b)null!=this.hoveringItem?this.hoveringItem!=b&&("function"==typeof this.hoveringItem.leave&&this.hoveringItem.leave(),
"function"==typeof b.over&&b.over()):"function"==typeof b.over&&b.over(),this.hoveringItem=b,this.clickObject(b),this.objectArray=[];else if(null!=this.hoveringItem&&"function"==typeof this.hoveringItem.leave&&(this.hoveringItem.leave(),this.hoveringItem=null),this.isReleased){for(b=0;b<this.clickedObjectList.length;b++)d=this.clickedObjectList[b],"function"==typeof d.releasedOutside&&d.releasedOutside();this.clickedObjectList=[]}this.isFirstPressed=ig.input.pressed("click");this.isReleased=ig.input.released("click");
this.isPressed=ig.input.state("click")},addToClickedObjectList:function(b){this.clickedObjectList.push(b)},removeFromClickedObjectList:function(b){for(var d=[],e=0;e<this.clickedObjectList.length;e++){var f=this.clickedObjectList[e];f!=b&&d.push(f)}this.clickedObjectList=d}})});ig.baked=!0;
ig.module("game.entities.pointer-selector").requires("game.entities.pointer").defines(function(){EntityPointerSelector=EntityPointer.extend({zIndex:1E3,_wmDrawBox:!0,_wmBoxColor:"rgba(0, 0, 255, 0.7)",size:{x:20,y:20},init:function(b,d,e){this.parent(b,d,e)}})});ig.baked=!0;
ig.module("game.entities.select").requires("impact.entity").defines(function(){EntitySelect=ig.Entity.extend({type:ig.Entity.TYPE.B,checkAgainst:ig.Entity.TYPE.A,collides:ig.Entity.COLLIDES.NEVER,canSelect:!1,canSelectTimerDuration:0.35,zIndex:99999,isHovering:!1,isSelected:!1,init:function(b,d,e){this.parent(b,d,e);this.canSelectTimer=new ig.Timer(this.canSelectTimerDuration)},doesClickableLayerExist:function(b){for(k in dynamicClickableEntityDivs)if(k==b)return!0;return!1},checkClickableLayer:function(b,
d,e){"undefined"==typeof wm&&(this.doesClickableLayerExist(b)?(ig.game.showOverlay([b]),$("#"+b).find("[href]").attr("href",d)):this.createClickableOutboundLayer(b,d,_BASEPATH.media+"graphics/misc/invisible.png",e))},createClickableOutboundLayer:function(b,d,e,f){var g=ig.$new("div");g.id=b;document.body.appendChild(g);$("#"+g.id).css("float","left");$("#"+g.id).css("width",this.size.x*multiplier);$("#"+g.id).css("height",this.size.y*multiplier);$("#"+g.id).css("position","absolute");var j=w/2-destW/
2,l=h/2-destH/2;w==mobileWidth?($("#"+g.id).css("left",this.pos.x),$("#"+g.id).css("top",this.pos.y)):($("#"+g.id).css("left",j+this.pos.x*multiplier),$("#"+g.id).css("top",l+this.pos.y*multiplier));f?$("#"+g.id).html("<a target='_blank' href='"+d+"'><img style='width:100%;height:100%' src='"+e+"'></a>"):$("#"+g.id).html("<a href='"+d+"'><img style='width:100%;height:100%' src='"+e+"'></a>");dynamicClickableEntityDivs[b]={};dynamicClickableEntityDivs[b].width=$("#"+g.id).width();dynamicClickableEntityDivs[b].height=
$("#"+g.id).height();dynamicClickableEntityDivs[b].entity_pos_x=this.pos.x;dynamicClickableEntityDivs[b].entity_pos_y=this.pos.y},hovered:function(){this.isHovering=!0;this.dehoverOthers()},dehoverOthers:function(){var b=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<b.length;i++)b[i]!=this&&(b[i].isHovering=!1)},deselectOthers:function(){var b=ig.game.getEntitiesByType(EntitySelect);for(i=0;i<b.length;i++)b[i]!=this&&(b[i].isSelected=!1)},update:function(){this.parent();this.canSelectTimer&&0<
this.canSelectTimer.delta()&&(this.canSelect=!0,this.canSelectTimer=null)}})});ig.baked=!0;
ig.module("impact.entity-pool").requires("impact.game").defines(function(){ig.EntityPool={pools:{},mixin:{staticInstantiate:function(b,d,e){return ig.EntityPool.getFromPool(this.classId,b,d,e)},erase:function(){ig.EntityPool.putInPool(this)}},enableFor:function(b){b.inject(this.mixin)},getFromPool:function(b,d,e,f){b=this.pools[b];if(!b||!b.length)return null;b=b.pop();b.reset(d,e,f);return b},putInPool:function(b){this.pools[b.classId]?this.pools[b.classId].push(b):this.pools[b.classId]=[b]},drainPool:function(b){delete this.pools[b]},
drainAllPools:function(){this.pools={}}};ig.Game.inject({loadLevel:function(b){ig.EntityPool.drainAllPools();this.parent(b)}})});ig.baked=!0;
ig.module("game.entities.object.transition").requires("impact.entity","impact.entity-pool").defines(function(){EntityTransition=ig.Entity.extend({tweenTransition:null,name:"Transition",isClosed:!1,isRunning:!1,tweenTime:0.6,fill:"black",zIndex:_DATAGAME.zIndexData.transition,transAlpha:0,init:function(b,d,e){this.parent(b,d,e)},reset:function(b,d,e){this.parent(b,d,e);this.transAlpha=0},update:function(){this.parent()},draw:function(){this.parent();var b=ig.system.context;b.save();b.fillStyle=this.fill;
b.globalAlpha=this.transAlpha;b.fillRect(0,0,ig.system.width,ig.system.height);b.restore()},afterClose:function(){this.isClosed=!0;ig.game.windowBefore=ig.game.windowName;"menu"==ig.game.windowBefore&&(ig.game.isFullScreen&&ig.game.currentWindow.buttons.btnFullScreen)&&ig.game.currentWindow.buttons.btnFullScreen.kill();ig.game.boolChooseChapter&&0==ig.game.statusLoad[ig.game.numChapter]?(ig.game.loadAssets(),ig.game.showLoadingScreen(this.afterCloseChapter.bind(this))):this.afterCloseChapter()},afterCloseChapter:function(){ig.game.director.jumpTo(this.stateIdx);
ig.game.fadeOutWindow()},afterOpen:function(){this.isClosed=this.isRunning=!1;"game"==ig.game.windowName?ig.game.currentWindow.startWindow():"menu"==ig.game.windowName&&ig.game.isFullScreen&&(ig.Fullscreen.enableFullscreenButton=!0)},animationClose:function(){this.tweenClose=this.tween({transAlpha:1},this.tweenTime,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.afterClose()}.bind(this)});this.tweenClose.start()},animationOpen:function(){this.tweenOpen=this.tween({transAlpha:0},
this.tweenTime,{delay:0.1,easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.afterOpen()}.bind(this)});this.tweenOpen.start()},close:function(b){this.isRunning=!0;this.stateIdx=b;this.animationClose()},open:function(){this.transAlpha=1;this.isRunning=!0;this.animationOpen()}});EntityTransition1=EntityTransition.extend({fill:"black",init:function(b,d,e){this.parent(b,d,e)},reset:function(b,d,e){this.parent(b,d,e);this.transAlpha=0},update:function(){this.parent()},draw:function(){this.parent();
var b=ig.system.context;b.save();b.fillStyle=this.fill;b.globalAlpha=this.transAlpha;b.fillRect(0,0,ig.system.width,ig.system.height);b.restore()},animationClose:function(){this.tweenClose=this.tween({transAlpha:1},this.tweenTime,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.afterClose()}.bind(this)});this.tweenClose.start()},animationOpen:function(){this.tweenOpen=this.tween({transAlpha:0},this.tweenTime,{delay:0.1,easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.afterOpen()}.bind(this)});
this.tweenOpen.start()}});ig.EntityPool.enableFor(EntityTransition)});ig.baked=!0;
ig.module("game.entities.object.demo-text").requires("impact.entity").defines(function(){EntityDemoText=ig.Entity.extend({zIndex:_DATAGAME.zIndexData.demoText,visible:!0,init:function(b,d,e){this.parent(b,d,e);ig.game.sortEntitiesDeferred()},update:function(){this.parent()},drawDemo:function(b){b.save();b.font=ig.game.fontNameWeight+" "+Math.round(0.54*ig.game.fontNameSize*_DATAGAME.ratioRes)+"px "+ig.game.fontName;b.measureText(_STRINGS.Demo.title).width>ig.system.width&&(b.font=ig.game.fontNameWeight+
" "+Math.round(0.4*ig.game.fontNameSize*_DATAGAME.ratioRes)+"px "+ig.game.fontName);b.textAlign="right";null!=_DATAGAME.demoText.stroke&&("none"!=_DATAGAME.demoText.stroke&&""!=_DATAGAME.demoText.stroke)&&(b.strokeStyle=_DATAGAME.demoText.stroke,b.lineWidth=_DATAGAME.demoText.lineWidth,b.strokeText(_STRINGS.Demo.title,ig.system.width-10,ig.system.height-10));b.fillStyle=_DATAGAME.demoText.color;b.fillText(_STRINGS.Demo.title,ig.system.width-10,ig.system.height-10);b.restore()},draw:function(){this.parent();
_DATAGAME.enableDemo&&this.drawDemo(ig.system.context)}})});ig.baked=!0;
ig.module("game.entities.buttons.button-shop").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonShop=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.miniButton,gap:{x:0,y:0},image:new ig.Image(_RESOURCESINFO.image.btnShop),defsize:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},size:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},defPos:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},alphaNow:1,init:function(b,d,e){this.parent(b,
d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){this._parent._parent.uiShop.show()},clicked:function(){if(this.visible&&this.isClickable&&this._parent.isShop&&!ig.game.isPauseSetting&&(null==ig.game.transition||!ig.game.transition.isRunning))ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect()},draw:function(){this.parent();if(this.visible&&this._parent.isShop){var b=ig.system.context;b.save();b.globalAlpha=this.alphaNow;b.translate(this.pos.x+
this.offset.x,this.pos.y+this.offset.y);this.image.draw(0,0);b.restore()}},repos:function(){"game"==ig.game.windowName&&"rectangle"==_DATAGAME.dialogStyle.toLowerCase()?(this.pos.x=ig.system.width-this.size.x-25,this.pos.y=25+this.size.y+25):(this.pos.x=25,this.pos.y=25)}})});ig.baked=!0;
ig.module("game.entities.object.ui-currency").requires("impact.entity","game.entities.buttons.button-shop").defines(function(){EntityUICurrency=ig.Entity.extend({icon1:new ig.Image(_RESOURCESINFO.image.vc1),icon2:new ig.Image(_RESOURCESINFO.image.vc2),icon3:new ig.Image(_RESOURCESINFO.image.vc3),icon4:new ig.Image(_RESOURCESINFO.image.vc4),icon5:new ig.Image(_RESOURCESINFO.image.vc5),icon6:new ig.Image(_RESOURCESINFO.image.vc6),icon7:new ig.Image(_RESOURCESINFO.image.vc7),icon8:new ig.Image(_RESOURCESINFO.image.vc8),
size:{x:200*_DATAGAME.ratioRes,y:80*_DATAGAME.ratioRes},halfSize:{x:750*_DATAGAME.ratioRes,y:80*_DATAGAME.ratioRes},alphaNow:0,wCoin:0,xCoin:0,xCoinText:0,wFollow:0,xFollow:0,xFollowText:0,wHeart:0,xHeart:0,xHeartText:0,xMiddle:0,zIndex:_DATAGAME.zIndexData.UICurrency,plusY:0,fontSize:35*_DATAGAME.ratioRes,chatBubble:null,vcGain:1,posBubble:{x:0,y:0},isOnTop:!1,isShowBubble:!1,durShowBubble:1,isShop:!1,totalColumnNow:3,maxVCColumn:3,totalCurrency:3,arrPosition:[],arrColumn:[0,0,0,0,0,0,0,0,0],arrRow:[0,
0,0,0,0,0,0,0,0],posIcon:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],startPosition:{x:15*_DATAGAME.ratioRes,y:15*_DATAGAME.ratioRes},paddingPosition:{x:200*_DATAGAME.ratioRes,y:30*_DATAGAME.ratioRes},scaleUI:1,init:function(b,d,e){this.parent(b,d,e);this.totalCurrency=_DATAGAME.virtualCurrencyUsed.length;this.halfSize={x:this.size.x/2,y:this.size.y/2};this.btnShop=ig.game.spawnEntity(EntityButtonShop,0,0,{_parent:this,alphaNow:0});this.btnShop.isClickable=
!1;ig.game.sortEntitiesDeferred();this.repos()},spawnChatBubble:function(b){this.isShowBubble=!0;this.repos();this.calculatePosBubble();var d=30*_DATAGAME.ratioRes,e=15*_DATAGAME.ratioRes,f=0.9,g=1,j=0;this.isOnTop&&(g=0,j=0.9);2==this.totalColumnNow+1?(f=0.5,this.isOnTop&&(j=0.5)):0==this.arrColumn[this.vcGain]?j=f=0.1:1==this.arrColumn[this.vcGain]?(f=0.5,this.isOnTop&&(j=0.5)):2==this.arrColumn[this.vcGain]&&4==this.totalColumnNow+1&&(f=0.5,this.isOnTop&&(j=0.5));this.chatBubble=ig.game.spawnChatBubble(this,
{zIndex:_DATAGAME.zIndexData.chatBubbleUICurrency,chatBubbleDrawConfigs:{textConfigs:{isReward:!0,fullText:b,text:b,fillStyle:"black",textAlign:"left",fontSize:Math.round(1*ig.game.fontBubbleSize*_DATAGAME.ratioRes*ig.game.fontRatio),fontFamily:ig.game.fontBubbleThin},avatarConfigs:{image:null,size:{x:100,y:100},padding:{x:4,y:4}},bubbleConfigs:{lineWidth:4*_DATAGAME.ratioRes,fillStyle:"white",strokeStyle:"black",shadowColor:"black",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,isReward:!0,box:{width:100*
_DATAGAME.ratioRes,height:60*_DATAGAME.ratioRes,round:30*_DATAGAME.ratioRes,padding:{x:25*_DATAGAME.ratioRes,y:30*_DATAGAME.ratioRes}},tail:{length:d,width:e,direction:{x:f,y:g,stretchx:j,stretchy:0}}}},chatBubbleAppearTime:0.2,chatBubbleAliveTime:this.durShowBubble,chatBubbleDisappearTime:0.2,chatBubblePercent:{x:this.isOnTop?0:0.5,y:0},chatBubbleOffset:{x:0,y:0},parentPos:{x:this.posBubble.x,y:this.posBubble.y},chatBubbleAlpha:1,boolNotif:!0});this.repos()},showUI:function(b,d){null==d&&(d=!0);
ig.game.currentWindow.isShowingButtonShop="rectangle"==_DATAGAME.dialogStyle.toLowerCase()&&!0==this.isShop&&!0==b?!0:!1;"game"==ig.game.windowName&&ig.game.currentWindow.reposMiniButton();this.btnShop.repos();if(_DATAGAME.CurrencyOption){var e=300;!1==d&&(e=0);b?((new ig.TweenDef(this)).to({alphaNow:1},e).easing(ig.Tween.Easing.Linear.EaseNone).onComplete(function(){}.bind(this)).start(),(new ig.TweenDef(this.btnShop)).to({alphaNow:1},e).easing(ig.Tween.Easing.Linear.EaseNone).onComplete(function(){this.btnShop.isClickable=
!0}.bind(this)).start()):this.isShowBubble||(this.btnShop.isClickable=!1,(new ig.TweenDef(this)).to({alphaNow:0},e).easing(ig.Tween.Easing.Linear.EaseNone).onComplete(function(){}.bind(this)).start(),(new ig.TweenDef(this.btnShop)).to({alphaNow:0},e).easing(ig.Tween.Easing.Linear.EaseNone).onComplete(function(){}.bind(this)).start())}},repos:function(){this.arrPosition=[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]];this.maxVCColumn=ig.system.width>=ig.sizeHandler.minW+200*_DATAGAME.ratioRes+50*_DATAGAME.ratioRes?
4:3;for(var b=0,d=0,e=this.totalColumnNow=1,f=0,g=0;g<this.totalCurrency;g++){var j=this.totalCurrency-(g+1);this.arrPosition[b][d]=g;this.arrColumn[_DATAGAME.virtualCurrencyUsed[g]]=d;this.arrRow[_DATAGAME.virtualCurrencyUsed[g]]=b;f++;e=b;d>this.totalColumnNow&&(this.totalColumnNow=d);f==this.maxVCColumn-1&&2==j?(b++,d=0):(d++,d>this.maxVCColumn-1&&(b++,d=0))}this.size={x:this.paddingPosition.x*(this.totalColumnNow+1)+this.startPosition.x,y:(this.paddingPosition.y+this.fontSize)*(e+1)+this.startPosition.y};
this.halfSize={x:this.size.x/2,y:this.size.y/2};"game"==ig.game.windowName&&"rectangle"==_DATAGAME.dialogStyle.toLowerCase()?(this.isOnTop=!0,this.pos.x=25,this.pos.y=25+this.plusY):(this.isOnTop=!1,this.pos.x=ig.game.midX-this.halfSize.x,this.pos.y=ig.system.height-this.size.y-20*_DATAGAME.ratioRes+this.plusY);null!=this.chatBubble&&(this.calculatePosBubble(),this.chatBubble.parentPos={x:this.posBubble.x,y:this.posBubble.y})},calculatePosBubble:function(){var b=0,d=this.paddingPosition.y;3==this.totalColumnNow+
1?b=95*_DATAGAME.ratioRes:2==this.totalColumnNow+1&&(b=200*_DATAGAME.ratioRes);this.posBubble=!0==this.isOnTop?{x:ig.game.screen.x+this.pos.x+(this.startPosition.x+this.icon1.width/2)*this.scaleUI+this.paddingPosition.x*this.arrColumn[this.vcGain]*this.scaleUI,y:ig.game.screen.y+this.pos.y+this.plusY+(d+this.icon1.height/4)*this.scaleUI+(this.paddingPosition.y+this.fontSize)*this.arrRow[this.vcGain]*this.scaleUI}:{x:-this.halfSize.x+b+this.paddingPosition.x*this.arrColumn[this.vcGain],y:ig.sizeHandler.minH+
(ig.system.height-ig.sizeHandler.minH)/2-this.size.y-20*_DATAGAME.ratioRes+this.plusY+d+(this.paddingPosition.y+this.fontSize)*this.arrRow[this.vcGain]}},update:function(){this.parent()},drawCurrency:function(b){b.globalAlpha=this.alphaNow;b.font=this.fontSize+"px "+ig.game.fontName;b.textAlign="left";b.textBaseline="middle";b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].textcurrency;for(var d=0;2>=d;d++)for(var e=0;3>=e;e++)if(-1!=this.arrPosition[d][e]){var f=_DATAGAME.virtualCurrencyUsed[this.arrPosition[d][e]],
g=this.startPosition.x+this.paddingPosition.x*e,j=this.startPosition.y+(this.fontSize+this.paddingPosition.y)*d;this.posIcon[f].x=g;this.posIcon[f].y=j;this["icon"+f].draw(g,j);b.fillText(this._parent["virtualCurrency"+f],g+this["icon"+f].width+10*_DATAGAME.ratioRes,j+this["icon"+f].height/2)}},draw:function(){this.parent();this.fontSize=Math.round(0.63*ig.game.fontNameSize*_DATAGAME.ratioRes);var b=ig.system.context;b.save();b.globalAlpha=this.alphaNow;b.translate(this.pos.x,this.pos.y);!0==this.isOnTop&&
ig.system.width<=ig.sizeHandler.minW+50*_DATAGAME.ratioRes?(this.scaleUI=0.93,b.scale(this.scaleUI,this.scaleUI)):this.scaleUI=1;var d=4*_DATAGAME.ratioRes;b.lineWidth=d;b.strokeStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].strokeuicurrency;b.strokeRect(-d/2,-d/2,this.size.x+d,this.size.y+d);b.globalAlpha=this.alphaNow*_DATAGAME.uiColor[_DATAGAME.uiTheme].opacitycurrency;b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].bguicurrency;b.fillRect(0,0,this.size.x,this.size.y);this.drawCurrency(b);b.restore()}})});
ig.baked=!0;
ig.module("game.entities.buttons.button-chapter").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonChapter=EntityButton.extend({type:ig.Entity.TYPE.A,size:{x:485*_DATAGAME.ratioRes,y:115*_DATAGAME.ratioRes},rounded:15*_DATAGAME.ratioRes,textButton:"Encounter",noButton:0,zIndex:_DATAGAME.zIndexData.buttonChapter,noChapter:1,isClickable:!0,imgLock:new ig.Image(_RESOURCESINFO.image.lock),imgCrown:new ig.Image(_RESOURCESINFO.image.crown),imgCheck:new ig.Image(_RESOURCESINFO.image.checkChapter),
init:function(b,d,e){this.parent(b,d,e);null!=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnchaptercorner&&(this.rounded=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnchaptercorner*_DATAGAME.ratioRes);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){ig.game.fadeInWindow(LevelGame)},clicked:function(){if(this.visible&&!0==this._parent.visible&&this.isClickable&&null!=_STRINGS.Chapter.title[this.noChapter]&&(!_DATAGAME.lockPreviousChapter&&this.noChapter<=ig.game.sessionData.unlockChapter||
_DATAGAME.lockPreviousChapter&&this.noChapter==ig.game.sessionData.unlockChapter))ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect(),this.addDUtoCustomLoad(),this.proceedToSelectedChapter()},proceedToSelectedChapter:function(){ig.game.numChapter=this.noChapter;null==ig.game.statusLoad[ig.game.numChapter]&&(ig.game.statusLoad[ig.game.numChapter]=0);this._parent.enabledButton(!1)},addDUtoCustomLoad:function(){var b=_CUSTOMLOAD.Chapter[this.noChapter].duTheme;null==b&&(b=[]);if(null!=_DATAGAME.firstMCOutfit["chapter"+
this.noChapter]&&""!=_DATAGAME.firstMCOutfit["chapter"+this.noChapter]){var d=_DATAGAME.firstMCOutfit["chapter"+this.noChapter],e=b.findIndex(function(b){return b.toLowerCase()==d.toLowerCase()});""!=_DATAGAME.firstMCOutfit["chapter"+this.noChapter]&&("default"!=_DATAGAME.firstMCOutfit["chapter"+this.noChapter].toLowerCase()&&0>e)&&_CUSTOMLOAD.Chapter[this.noChapter].duTheme.push(_DATAGAME.firstMCOutfit["chapter"+this.noChapter])}var f=null==ig.game.sessionData.dressUpTheme[this.noChapter-1]?"amy":
ig.game.sessionData.dressUpTheme[this.noChapter-1].last,b=b.findIndex(function(b){return b.toLowerCase()==f.toLowerCase()});2<=this.noChapter&&(null!=ig.game.sessionData.dressUpTheme[this.noChapter-1]&&null!=ig.game.sessionData.dressUpTheme[this.noChapter-1].last&&0>b)&&_CUSTOMLOAD.Chapter[this.noChapter].duTheme.push(ig.game.sessionData.dressUpTheme[this.noChapter-1].last)},openQueenPack:function(){ig.game.currentWindow.uiChapterVisibility=!0;ig.game.currentWindow.uiChapter.hide();ig.game.currentWindow.packPlugin.onClicked()},
clicking:function(){},released:function(){},draw:function(){var b=ig.system.context;this._parent.visible&&(b.save(),b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y),b.beginPath(),b.moveTo(0+this.rounded,0),b.lineTo(0+this.size.x-this.rounded,0),b.quadraticCurveTo(0+this.size.x,0,0+this.size.x,0+this.rounded),b.lineTo(0+this.size.x,0+this.size.y-this.rounded),b.quadraticCurveTo(0+this.size.x,0+this.size.y,0+this.size.x-this.rounded,0+this.size.y),b.lineTo(0+this.rounded,0+this.size.y),
b.quadraticCurveTo(0,0+this.size.y,0,0+this.size.y-this.rounded),b.lineTo(0,0+this.rounded),b.quadraticCurveTo(0,0,0+this.rounded,0),b.closePath(),b.fillStyle=null!=_STRINGS.Chapter.title[this.noChapter]&&this.noChapter<=ig.game.sessionData.unlockChapter?_DATAGAME.uiColor[_DATAGAME.uiTheme].btnchapterbg:_DATAGAME.uiColor[_DATAGAME.uiTheme].btnchapterbggray,b.fill(),b.font=ig.game.fontNameWeight+" "+Math.round(0.69*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName,b.fillStyle=
null!=_STRINGS.Chapter.title[this.noChapter]&&this.noChapter<=ig.game.sessionData.unlockChapter?_DATAGAME.uiColor[_DATAGAME.uiTheme].btnchaptertitle:_DATAGAME.uiColor[_DATAGAME.uiTheme].btnchapterinfogray,b.textAlign="left",null!=_STRINGS.Chapter.title[this.noChapter]?b.fillText(_STRINGS.Chapter.chapter+" "+this.noChapter,0+20*_DATAGAME.ratioRes,0+50*_DATAGAME.ratioRes):b.fillText(_STRINGS.Chapter.soon,0+20*_DATAGAME.ratioRes,0+50*_DATAGAME.ratioRes),b.font=Math.round(0.58*ig.game.fontNameSize*_DATAGAME.ratioRes*
ig.game.fontRatio)+"px "+ig.game.fontNameThin,b.fillStyle=null!=_STRINGS.Chapter.title[this.noChapter]&&this.noChapter<=ig.game.sessionData.unlockChapter?_DATAGAME.uiColor[_DATAGAME.uiTheme].btnchapterinfo:_DATAGAME.uiColor[_DATAGAME.uiTheme].btnchapterinfogray,b.textAlign="left",null!=_STRINGS.Chapter.title[this.noChapter]&&b.fillText(_STRINGS.Chapter.title[this.noChapter],0+20*_DATAGAME.ratioRes,0+90*_DATAGAME.ratioRes),null!=_STRINGS.Chapter.title[this.noChapter]&&(this.noChapter>ig.game.sessionData.unlockChapter?
this.imgLock.draw(0+this.size.x-this.imgLock.width-20*_DATAGAME.ratioRes,0+this.size.y/2-this.imgLock.height/2):this.noChapter<ig.game.sessionData.unlockChapter&&_DATAGAME.lockPreviousChapter&&this.imgCheck.draw(0+this.size.x-this.imgCheck.width-18*_DATAGAME.ratioRes,0+this.size.y/2-this.imgCheck.height/2)),b.restore())},repos:function(){this.pos={x:this._parent.pos.x-this._parent.halfSize.x+this._parent.halfSize.x-this.size.x/2,y:this._parent.pos.y-this._parent.halfSize.y+this.noButton*142*_DATAGAME.ratioRes+
45*_DATAGAME.ratioRes}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-prev").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonPrev=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.buttonPrev,gap:{x:0,y:0},image:new ig.Image(_RESOURCESINFO.image.btnPrev),defsize:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},size:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},scaleSize:1,init:function(b,d,e){this.parent(b,d,e);this.size.x*=this.scaleSize;this.size.y*=
this.scaleSize;this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){this._parent.pageNow--;1>this._parent.pageNow&&(this._parent.pageNow=this._parent.totalPage);this._parent.loadPage()},clicked:function(){if(this.visible&&this.isClickable&&(ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect(),this.onClicked))this.onClicked()},draw:function(){this.parent();if(this._parent.visible&&this.visible){var b=ig.system.context;b.save();b.translate(this.pos.x+
this.offset.x,this.pos.y+this.offset.y);this.image.draw(0,0,0,0,this.image.width,this.image.height,this.size.x,this.size.y);b.restore()}},repos:function(){this.pos={x:this._parent.pos.x-this.halfSize.x-305*_DATAGAME.ratioRes,y:this._parent.pos.y-15*_DATAGAME.ratioRes}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-next").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonNext=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.buttonNext,gap:{x:0,y:0},image:new ig.Image(_RESOURCESINFO.image.btnNext),defsize:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},size:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},scaleSize:1,init:function(b,d,e){this.parent(b,d,e);this.size.x*=this.scaleSize;this.size.y*=
this.scaleSize;this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){this._parent.pageNow++;this._parent.pageNow>this._parent.totalPage&&(this._parent.pageNow=1);this._parent.loadPage()},clicked:function(){if(this.visible&&this.isClickable&&(ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect(),this.onClicked))this.onClicked()},draw:function(){this.parent();if(this._parent.visible&&this.visible){var b=ig.system.context;b.save();b.translate(this.pos.x+
this.offset.x,this.pos.y+this.offset.y);this.image.draw(0,0,0,0,this.image.width,this.image.height,this.size.x,this.size.y);b.restore()}},repos:function(){this.pos={x:this._parent.pos.x-this.halfSize.x+305*_DATAGAME.ratioRes,y:this._parent.pos.y-15*_DATAGAME.ratioRes}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-close").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonClose=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.buttonClose,gap:{x:0,y:0},image:new ig.Image(_RESOURCESINFO.image.buttonExit),defsize:{x:60*_DATAGAME.ratioRes,y:60*_DATAGAME.ratioRes},size:{x:60*_DATAGAME.ratioRes,y:60*_DATAGAME.ratioRes},init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/
2};ig.global.wm||this.repos()},funcComplete:function(){this._parent.hide();if(this.onClicked)this.onClicked()},clicked:function(){this.visible&&this.isClickable&&(ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect())},draw:function(){this.parent();if(this._parent.visible){var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.image.draw(0,0);b.restore()}},repos:function(){this.pos={x:this._parent.pos.x+this._parent.halfSize.x-this.size.x-20*_DATAGAME.ratioRes,
y:this._parent.pos.y-this._parent.halfSize.y-60*_DATAGAME.ratioRes-20*_DATAGAME.ratioRes}}})});ig.baked=!0;
ig.module("game.entities.object.ui-chapter").requires("impact.entity","game.entities.buttons.button-chapter","game.entities.buttons.button-prev","game.entities.buttons.button-next","game.entities.buttons.button-close").defines(function(){EntityUIChapter=ig.Entity.extend({size:{x:604*_DATAGAME.ratioRes,y:614*_DATAGAME.ratioRes},halfSize:{x:750,y:80},zIndex:_DATAGAME.zIndexData.UIChapter,offset:{x:0,y:0},sizeOption:{x:485*_DATAGAME.ratioRes,y:115*_DATAGAME.ratioRes},rounded:15*_DATAGAME.ratioRes,visible:!0,
totalPage:1,pageNow:1,defaultSizeButton:142*_DATAGAME.ratioRes,init:function(b,d,e){this.parent(b,d,e);this.totalPage=Math.ceil((_STRINGS.Chapter.title.length-1)/_DATAGAME.chapters.totalChapter);_DATAGAME.simplifiedUI||(this.bgChapter1=new ig.Image(_RESOURCESINFO.image.bgChapter1,604*_DATAGAME.ratioRes,614*_DATAGAME.ratioRes),this.bgChapter2=new ig.Image(_RESOURCESINFO.image.bgChapter2,604*_DATAGAME.ratioRes,614*_DATAGAME.ratioRes),this.bgChapter3=new ig.Image(_RESOURCESINFO.image.bgChapter3,604*
_DATAGAME.ratioRes,614*_DATAGAME.ratioRes),this.btnClose=ig.game.spawnEntity(EntityButtonClose,0,0,{_parent:this}));this.size.y=this.defaultSizeButton*_DATAGAME.chapters.totalChapter;this.halfSize={x:this.size.x/2,y:this.size.y/2};for(b=0;b<_DATAGAME.chapters.totalChapter;b++)this["btnChapter"+b]=ig.game.spawnEntity(EntityButtonChapter,0,0,{_parent:this,noButton:b,noChapter:b+1,isClickable:!1});1<this.totalPage&&(this.btnPrev=ig.game.spawnEntity(EntityButtonPrev,0,0,{_parent:this}),this.btnNext=ig.game.spawnEntity(EntityButtonNext,
0,0,{_parent:this}));ig.game.sortEntitiesDeferred();this.repos()},show:function(){this.visible=ig.game.boolChooseChapter=!0;this._parent.enabledButton(!1);this.enabledButton(!0);this.repos();_DATAGAME.lockPreviousChapter&&(this.pageNow=Math.ceil(ig.game.sessionData.unlockChapter/_DATAGAME.chapters.totalChapter),this.loadPage())},hide:function(){this.visible=ig.game.boolChooseChapter=!1;this._parent.enabledButton(!0);this.enabledButton(!1)},enabledButton:function(b){_DATAGAME.simplifiedUI||(this.btnClose.isClickable=
b);null!=this.btnPrev&&(this.btnPrev.isClickable=b);null!=this.btnNext&&(this.btnNext.isClickable=b);b&&(_DATAGAME.simplifiedUI||this.btnClose.repos(),null!=this.btnPrev&&this.btnPrev.repos(),null!=this.btnNext&&this.btnNext.repos());for(var d=0;d<_DATAGAME.chapters.totalChapter;d++)(this["btnChapter"+d].isClickable=b)&&this["btnChapter"+d].repos()},loadPage:function(){for(var b=0;b<_DATAGAME.chapters.totalChapter;b++)this["btnChapter"+b].noChapter=(this.pageNow-1)*_DATAGAME.chapters.totalChapter+
(b+1)},repos:function(){this.pos={x:ig.system.width/2,y:ig.system.height/2}},update:function(){this.parent()},draw:function(){this.parent();if(this.visible){var b=ig.system.context;if(!_DATAGAME.simplifiedUI){b.save();b.fillStyle="black";b.globalAlpha=0.7;b.fillRect(0,0,ig.system.width,ig.system.height);b.restore();b.save();b.translate(this.pos.x-this.halfSize.x,this.pos.y-this.halfSize.y);var d=-99*_DATAGAME.ratioRes;this.bgChapter1.draw(0,d+50*_DATAGAME.ratioRes,0,87*_DATAGAME.ratioRes,this.bgChapter2.width,
this.bgChapter2.height,this.bgChapter2.width,this.bgChapter2.height+(_DATAGAME.chapters.totalChapter-3)*this.defaultSizeButton);var e=d+(_DATAGAME.chapters.totalChapter-3)*this.defaultSizeButton/2+67*_DATAGAME.ratioRes*(_DATAGAME.chapters.totalChapter-3);this.bgChapter2.draw(0,e);this.bgChapter3.draw(0,d);!0==_DATAGAME.chapterPage.visible&&(b.font=0>=_DATAGAME.chapterPage.fontSize||null==_DATAGAME.chapterPage.fontSize?ig.game.fontNameWeight+" "+Math.round(0.7*ig.game.fontNameSize*_DATAGAME.ratioRes*
ig.game.fontRatio)+"px "+ig.game.fontName:ig.game.fontNameWeight+" "+Math.round(_DATAGAME.chapterPage.fontSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName,b.fillStyle=null==_DATAGAME.chapterPage.color||""==_DATAGAME.chapterPage.color||"none"==_DATAGAME.chapterPage.color?_DATAGAME.uiColor[_DATAGAME.uiTheme].chapterNLTitle:_DATAGAME.chapterPage.color,b.textBaseline="top",b.textAlign="center",b.fillText(this.pageNow+" / "+this.totalPage,this.halfSize.x,e+this.bgChapter2.height+15*_DATAGAME.ratioRes));
b.restore()}b.save();b.translate(this.pos.x-this.halfSize.x,this.pos.y-this.halfSize.y);b.font=ig.game.fontNameWeight+" "+Math.round(0.81*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName;b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].chapterTitle;b.textAlign="center";b.fillText(_STRINGS.Chapter.choose,this.halfSize.x,0);b.restore()}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-chapter-non-linear").requires("game.entities.buttons.button-chapter","plugins.clickable-div-layer").defines(function(){EntityButtonChapterNonLinear=EntityButtonChapter.extend({type:ig.Entity.TYPE.A,size:{x:477*_DATAGAME.ratioRes,y:480*_DATAGAME.ratioRes},sizeThumbnail:{x:Math.round(437.88*_DATAGAME.ratioRes),y:Math.round(329.64*_DATAGAME.ratioRes)},sizeBGTitle:{x:438*_DATAGAME.ratioRes,y:50*_DATAGAME.ratioRes},sizeLock:{x:Math.round(32.9*_DATAGAME.ratioRes),
y:Math.round(39.9*_DATAGAME.ratioRes)},sizeCheck:{x:Math.round(35*_DATAGAME.ratioRes),y:Math.round(35*_DATAGAME.ratioRes)},roundedTag:5*_DATAGAME.ratioRes,textButton:"Encounter",noButton:0,zIndex:_DATAGAME.zIndexData.buttonChapterNonLinear,noChapter:1,idxChapter:0,isClickable:!0,imgPanel:new ig.Image(_RESOURCESINFO.image.chapterPanel),imgCrown:new ig.Image(_RESOURCESINFO.image.crown),isHover:!1,imgThumbnail:new ig.Image(_RESOURCESINFO.image.crown),imgLock:new ig.Image(_RESOURCESINFO.image.lockChapter),
imgCheck:new ig.Image(_RESOURCESINFO.image.checkChapter),desc:[],widthTag:[0,0,0,0,0,0,0],fontSizeDesc:50,posButton:{x:0,y:0},init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||(this.defPos={x:-this.halfSize.x,y:-this.halfSize.y},this.posThumbnail={x:-this.sizeThumbnail.x/2,y:this.defPos.y+20*_DATAGAME.ratioRes},this.posBGTitle={x:this.posThumbnail.x,y:this.posThumbnail.y+this.sizeThumbnail.y-this.sizeBGTitle.y+_DATAGAME.ratioRes},this.repos())},
clicked:function(){if(this.visible&&!0==this._parent.visible&&this.isClickable&&(!1==_DATAGAME.isLinearChapter||!0==_DATAGAME.isLinearChapter&&(!_DATAGAME.lockPreviousChapter&&ig.game.chapter_list[this.idxChapter].chapterID<=ig.game.sessionData.unlockChapter||_DATAGAME.lockPreviousChapter&&ig.game.chapter_list[this.idxChapter].chapterID==ig.game.sessionData.unlockChapter)))this.noChapter=ig.game.chapter_list[this.idxChapter].chapterID,ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect(),this.addDUtoCustomLoad(),
this.proceedToSelectedChapter()},reloadInfo:function(){this.imgThumbnail=new ig.Image(_BASEPATH.thumbnail+ig.game.chapter_list[this.idxChapter].thumbnail);this.fontSizeDesc=Math.round(0.4*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);this.desc=ig.game.wordWrapLetter(ig.game.chapter_list[this.idxChapter].description,this.sizeBGTitle.x-20*_DATAGAME.ratioRes,this.fontSizeDesc,ig.game.fontNameThin)},drawTag:function(b,d){var e=this.posBGTitle.x+10*_DATAGAME.ratioRes,f=this.posBGTitle.y+this.sizeBGTitle.y+
5*_DATAGAME.ratioRes,g=0;0<d&&(g=5*_DATAGAME.ratioRes+this.widthTag[d-1],e+=g);var j="#"+ig.game.chapter_list[this.idxChapter].tags[d].title;b.font=this.fontSizeDesc+"px "+ig.game.fontNameThin;var l=b.measureText(j).width,n=this.fontSizeDesc;this.widthTag[d]=l+g;b.beginPath();b.moveTo(e+this.roundedTag,f);b.lineTo(e+l-this.roundedTag,f);b.quadraticCurveTo(e+l,f,e+l,f+this.roundedTag);b.lineTo(e+l,f+n+-this.roundedTag);b.quadraticCurveTo(e+l,f+n,e+l-this.roundedTag,f+n);b.lineTo(e+this.roundedTag,
f+n);b.quadraticCurveTo(e,f+n,e,f+n-this.roundedTag);b.lineTo(e,f+this.roundedTag);b.quadraticCurveTo(e,f,e+this.roundedTag,f);b.closePath();b.fillStyle=ig.game.chapter_list[this.idxChapter].tags[d].color;b.fill();b.textAlign="center";b.textBaseline="middle";b.font=0.9*this.fontSizeDesc+"px "+ig.game.fontNameThin;b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnchapterNLtag;b.fillText(j,e+l/2,f+n/2)},draw:function(){var b=ig.system.context;if(this._parent.visible&&this.visible){b.save();b.translate(this.pos.x+
this.halfSize.x+this.offset.x,this.pos.y+this.halfSize.y+this.offset.y);this.underPointer()?b.scale(0.97,0.97):b.scale(1,1);this.imgPanel.draw(this.defPos.x,this.defPos.y);this.imgThumbnail.draw(this.posThumbnail.x,this.posThumbnail.y,0,0,this.imgThumbnail.width,this.imgThumbnail.height,this.sizeThumbnail.x,this.sizeThumbnail.y);b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnchapterNLtitlebg;b.globalAlpha=0.6;_DATAGAME.isLinearChapter&&ig.game.chapter_list[this.idxChapter].chapterID>ig.game.sessionData.unlockChapter&&
b.fillRect(this.posThumbnail.x,this.posThumbnail.y,this.sizeThumbnail.x,this.sizeThumbnail.y);b.globalAlpha=0.7;b.fillRect(this.posBGTitle.x,this.posBGTitle.y,this.sizeBGTitle.x,this.sizeBGTitle.y);b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnchapterNLtitle;b.globalAlpha=1;b.font=Math.round(0.58*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName;b.textBaseline="middle";_DATAGAME.isLinearChapter?b.fillText(_STRINGS.Chapter.chapter+" "+ig.game.chapter_list[this.idxChapter].chapterID,
this.posBGTitle.x+10*_DATAGAME.ratioRes,this.posBGTitle.y+this.sizeBGTitle.y/2+4*_DATAGAME.ratioRes):b.fillText(ig.game.chapter_list[this.idxChapter].title,this.posBGTitle.x+10*_DATAGAME.ratioRes,this.posBGTitle.y+this.sizeBGTitle.y/2+4*_DATAGAME.ratioRes);b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnchapterNLinfo;b.font=this.fontSizeDesc+"px "+ig.game.fontNameThin;b.textBaseline="top";ig.game.drawText(this.desc,this.fontSizeDesc,b,this.posBGTitle.x+10*_DATAGAME.ratioRes,this.posBGTitle.y+
this.sizeBGTitle.y+10*_DATAGAME.ratioRes+this.fontSizeDesc,1);for(var d=0;d<ig.game.chapter_list[this.idxChapter].tags.length;d++)this.drawTag(b,d);_DATAGAME.isLinearChapter&&(ig.game.chapter_list[this.idxChapter].chapterID>ig.game.sessionData.unlockChapter?this.imgLock.draw(this.posBGTitle.x+this.sizeBGTitle.x-this.sizeLock.x-10*_DATAGAME.ratioRes,this.posBGTitle.y+this.sizeBGTitle.y/2-this.sizeLock.y/2,0,0,this.imgLock.width,this.imgLock.height,this.sizeLock.x,this.sizeLock.y):ig.game.chapter_list[this.idxChapter].chapterID<
ig.game.sessionData.unlockChapter&&_DATAGAME.lockPreviousChapter&&this.imgCheck.draw(this.posBGTitle.x+this.sizeBGTitle.x-this.sizeCheck.x-10*_DATAGAME.ratioRes,this.posBGTitle.y+this.sizeBGTitle.y/2-this.sizeCheck.y/2,0,0,this.imgCheck.width,this.imgCheck.height,this.sizeCheck.x,this.sizeCheck.y));b.restore()}},repos:function(){this.pos={x:ig.game.midX-this.halfSize.x+this.posButton.x,y:ig.game.midY-this.halfSize.y+this.posButton.y+this._parent.offset.y}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-close-big").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonCloseBig=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.buttonCloseBig,gap:{x:0,y:0},image:new ig.Image(_RESOURCESINFO.image.buttonCloseBig),defsize:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},size:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/
2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){this._parent.hide();if(this.onClicked)this.onClicked()},clicked:function(){this.visible&&this.isClickable&&(ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect())},draw:function(){this.parent();if(this._parent.visible){var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.image.draw(0,0);b.restore()}},repos:function(){this.pos={x:25,y:25}}})});ig.baked=!0;
ig.module("game.entities.object.ui-chapter-non-linear").requires("impact.entity","game.entities.buttons.button-chapter-non-linear","game.entities.buttons.button-prev","game.entities.buttons.button-next","game.entities.buttons.button-close-big").defines(function(){EntityUIChapterNonLinear=ig.Entity.extend({halfSize:{x:750,y:80},zIndex:_DATAGAME.zIndexData.UIChapterNonLinear,offset:{x:0,y:40*_DATAGAME.ratioRes},paddingButton:{x:5*_DATAGAME.ratioRes,y:5*_DATAGAME.ratioRes},sizeButton:{x:477*_DATAGAME.ratioRes,
y:480*_DATAGAME.ratioRes},rounded:15*_DATAGAME.ratioRes,visible:!0,totalChapter:2,totalPage:1,pageNow:1,lastIdxChapter:1,isRepos:!0,prevPage:[0,0,0,0,0,0,0,0],posButton2:[{x:0,y:0},{x:0,y:0}],posButton4:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],posButton6:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],init:function(b,d,e){this.parent(b,d,e);b=-this.sizeButton.y/2-this.paddingButton.y;d=this.sizeButton.y/2+this.paddingButton.y;this.posButton2=[{x:0,y:b},{x:0,y:d}];this.posButton4=[{x:-this.sizeButton.x/
2-this.paddingButton.x,y:b},{x:this.sizeButton.x/2+this.paddingButton.x,y:b},{x:-this.sizeButton.x/2-this.paddingButton.x,y:d},{x:this.sizeButton.x/2+this.paddingButton.x,y:d}];this.posButton6=[{x:-this.sizeButton.x-2*this.paddingButton.x,y:b},{x:0,y:b},{x:this.sizeButton.x+2*this.paddingButton.x,y:b},{x:-this.sizeButton.x-2*this.paddingButton.x,y:d},{x:0,y:d},{x:this.sizeButton.x+2*this.paddingButton.x,y:d}];this.totalPage=Math.ceil((_STRINGS.Chapter.title.length-1)/_DATAGAME.chapters.totalChapter);
this.btnClose=ig.game.spawnEntity(EntityButtonCloseBig,0,0,{_parent:this});for(b=5;0<=b;b--)this["btnChapter"+b]=ig.game.spawnEntity(EntityButtonChapterNonLinear,0,0,{_parent:this,noButton:b,noChapter:b+1,isClickable:!1});this.btnPrev=ig.game.spawnEntity(EntityButtonPrev,0,0,{_parent:this,repos:function(){this.pos={x:ig.game.midX-this._parent.sizeButton.x*(this._parent.totalChapter/2-1)/2-305*_DATAGAME.ratioRes-this.halfSize.x,y:ig.game.midY-this.halfSize.y+this._parent.offset.y}},onClicked:function(){this._parent.prevPage=
[0,0,0,0,0,0,0,0]}});this.btnNext=ig.game.spawnEntity(EntityButtonNext,0,0,{_parent:this,repos:function(){this.pos={x:ig.game.midX+this._parent.sizeButton.x*(this._parent.totalChapter/2-1)/2+305*_DATAGAME.ratioRes-this.halfSize.x,y:ig.game.midY-this.halfSize.y+this._parent.offset.y}},onClicked:function(){this._parent.prevPage=[0,0,0,0,0,0,0,0]}});ig.game.sortEntitiesDeferred();this.repos()},show:function(){ig.game.boolChooseChapter=!0;this.loadPage();this.visible=!0;this._parent.enabledButton(!1,
!0);this.enabledButton(!0);this.repos()},hide:function(){this.visible=ig.game.boolChooseChapter=!1;this._parent.enabledButton(!0,!0);this.enabledButton(!1)},enabledButton:function(b){this.btnClose.isClickable=b;null!=this.btnPrev&&(this.btnPrev.isClickable=b);null!=this.btnNext&&(this.btnNext.isClickable=b);b&&(this.btnClose.repos(),null!=this.btnPrev&&this.btnPrev.repos(),null!=this.btnNext&&this.btnNext.repos());for(var d=0;6>d;d++)(this["btnChapter"+d].isClickable=b)&&this["btnChapter"+d].repos()},
loadPage:function(){for(var b=0;6>b;b++)this["btnChapter"+b].visible=!1,this["btnChapter"+b].isClickable=!1;for(b=0;b<this.totalChapter;b++){var d=(this.pageNow-1)*this.totalChapter+b;d>ig.game.chapter_list.length-1?(this["btnChapter"+b].visible=!1,this["btnChapter"+b].isClickable=!1):(this["btnChapter"+b].visible=!0,this["btnChapter"+b].isClickable=!0,this["btnChapter"+b].posButton=this["posButton"+this.totalChapter][b],this["btnChapter"+b].repos(),this["btnChapter"+b].noChapter=ig.game.chapter_list[d].chapterID,
this.lastIdxChapter=this["btnChapter"+b].idxChapter=d,this["btnChapter"+b].reloadInfo())}},repos:function(){if(this.visible){this.pos={x:ig.system.width/2,y:ig.system.height/2};0==this.prevPage[this.totalChapter]&&(this.prevPage[this.totalChapter]=this.pageNow);var b=this.totalChapter;this.totalChapter=ig.system.width<ig.sizeHandler.minW+this.sizeButton.x+2*this.paddingButton.x?2:ig.system.width<ig.sizeHandler.minW+2*this.sizeButton.x+4*this.paddingButton.x?4:6;this.totalPage=Math.ceil(ig.game.chapter_list.length/
this.totalChapter);1<this.totalPage?(this.btnPrev.visible=this.btnNext.visible=!0,this.btnNext.repos(),this.btnPrev.repos()):this.btnPrev.visible=this.btnNext.visible=!1;this.pageNow=0==this.prevPage[this.totalChapter]?Math.ceil((this.lastIdxChapter+1)/this.totalChapter):this.prevPage[this.totalChapter];b!=this.totalChapter&&this.loadPage()}},draw:function(){this.parent();if(this.visible){var b=ig.system.context;_DATAGAME.simplifiedUI||(b.save(),b.fillStyle="black",b.globalAlpha=0.8,b.fillRect(0,
0,ig.system.width,ig.system.height),b.restore());b.save();b.font=ig.game.fontNameWeight+" "+Math.round(1.1*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName;b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].chapterNLTitle;b.textAlign="center";b.fillText(_STRINGS.Chapter.select,ig.game.midX,ig.game.midY-this.sizeButton.x-35*_DATAGAME.ratioRes+this.offset.y);!0==_DATAGAME.chapterPage.visible&&(b.font=0>=_DATAGAME.chapterPage.fontSize||null==_DATAGAME.chapterPage.fontSize?
ig.game.fontNameWeight+" "+Math.round(0.7*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName:ig.game.fontNameWeight+" "+Math.round(_DATAGAME.chapterPage.fontSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName,b.fillStyle=null==_DATAGAME.chapterPage.color||""==_DATAGAME.chapterPage.color||"none"==_DATAGAME.chapterPage.color?_DATAGAME.uiColor[_DATAGAME.uiTheme].chapterNLTitle:_DATAGAME.chapterPage.color,b.textBaseline="top",b.fillText(this.pageNow+" / "+
this.totalPage,ig.game.midX,ig.game.midY+this.sizeButton.y/2+this.posButton2[1].y+this.offset.y+15*_DATAGAME.ratioRes));b.restore()}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-vc").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonVC=EntityButton.extend({type:ig.Entity.TYPE.A,size:{x:540*_DATAGAME.ratioRes,y:115*_DATAGAME.ratioRes},sizePrice:{x:150*_DATAGAME.ratioRes,y:68*_DATAGAME.ratioRes},rounded:15*_DATAGAME.ratioRes,textButton:"Encounter",noButton:0,zIndex:_DATAGAME.zIndexData.buttonVC,noChapter:1,isClickable:!0,fontSizeCost:30*_DATAGAME.ratioRes,cost:600,startXDef:380*_DATAGAME.ratioRes,
icon:null,iconVC1:new ig.Image(_RESOURCESINFO.image.vc1),init:function(b,d,e){this.parent(b,d,e);null!=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnshopcorner&&(this.rounded=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnshopcorner*_DATAGAME.ratioRes);this.cost=_STRINGS.Shop.price[this.noButton];this.vcType=_STRINGS.Shop.vcType[this.noButton];this.icon=new ig.Image(_RESOURCESINFO.image["vc"+this.vcType]);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){},clicked:function(){if(this.visible&&
this.isClickable&&ig.game.sessionData.virtualCurrency1>=_STRINGS.Shop.price[this.noButton]){ig.soundHandler.sfxPlayer.play("cashier");this.sinkingEffect();ig.game.currentWindow.virtualCurrency1-=_STRINGS.Shop.price[this.noButton];ig.game.currentWindow["virtualCurrency"+this.vcType]+=_STRINGS.Shop.reward[this.noButton];for(var b=1;b<=_DATAGAME.totalVirtualCurrency;b++)ig.game.sessionData["virtualCurrency"+b]=ig.game.currentWindow["virtualCurrency"+b];ig.game.saveAll();"game"==ig.game.windowName?ig.game.currentWindow.entityGame.uiCurrency.repos():
ig.game.currentWindow.uiCurrency.repos()}},clicking:function(){},released:function(){},draw:function(){if(this._parent.visible){this.fontSizeCost=Math.round(0.54*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);var d=0,e=0;b.beginPath();b.moveTo(d+this.rounded,e);b.lineTo(d+this.size.x-this.rounded,e);b.quadraticCurveTo(d+this.size.x,e,d+this.size.x,e+this.rounded);b.lineTo(d+this.size.x,e+this.size.y-
this.rounded);b.quadraticCurveTo(d+this.size.x,e+this.size.y,d+this.size.x-this.rounded,e+this.size.y);b.lineTo(d+this.rounded,e+this.size.y);b.quadraticCurveTo(d,e+this.size.y,d,e+this.size.y-this.rounded);b.lineTo(d,e+this.rounded);b.quadraticCurveTo(d,e,d+this.rounded,e);b.closePath();b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnshopbg;b.fill();this.icon.draw(d+20*_DATAGAME.ratioRes,e+10*_DATAGAME.ratioRes);b.font=ig.game.fontNameWeight+" "+Math.round(0.69*ig.game.fontNameSize*_DATAGAME.ratioRes)+
"px "+ig.game.fontName;b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnshoptitle;b.textAlign="left";b.fillText(_STRINGS.Shop.reward[this.noButton]+" "+_STRINGS.Currency["vc"+_STRINGS.Shop.vcType[this.noButton]],d+80*_DATAGAME.ratioRes,e+48*_DATAGAME.ratioRes);b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnshopinfo;b.font=Math.round(0.58*ig.game.fontNameSize*_DATAGAME.ratioRes)+"px "+ig.game.fontNameThin;b.textAlign="left";b.fillText(_STRINGS.Shop.info[this.noButton],d+20*_DATAGAME.ratioRes,
e+95*_DATAGAME.ratioRes);d=380*_DATAGAME.ratioRes;e=30*_DATAGAME.ratioRes;b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnshopshadow;b.beginPath();b.moveTo(d+this.rounded,e);b.lineTo(d+this.sizePrice.x-this.rounded,e);b.quadraticCurveTo(d+this.sizePrice.x,e,d+this.sizePrice.x,e+this.rounded);b.lineTo(d+this.sizePrice.x,e+this.sizePrice.y-this.rounded);b.quadraticCurveTo(d+this.sizePrice.x,e+this.sizePrice.y,d+this.sizePrice.x-this.rounded,e+this.sizePrice.y);b.lineTo(d+this.rounded,e+this.sizePrice.y);
b.quadraticCurveTo(d,e+this.sizePrice.y,d,e+this.sizePrice.y-this.rounded);b.lineTo(d,e+this.rounded);b.quadraticCurveTo(d,e,d+this.rounded,e);b.closePath();b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnshopupshadow;b.fill();e=20*_DATAGAME.ratioRes;b.beginPath();b.moveTo(d+this.rounded,e);b.lineTo(d+this.sizePrice.x-this.rounded,e);b.quadraticCurveTo(d+this.sizePrice.x,e,d+this.sizePrice.x,e+this.rounded);b.lineTo(d+this.sizePrice.x,e+this.sizePrice.y-this.rounded);b.quadraticCurveTo(d+this.sizePrice.x,
e+this.sizePrice.y,d+this.sizePrice.x-this.rounded,e+this.sizePrice.y);b.lineTo(d+this.rounded,e+this.sizePrice.y);b.quadraticCurveTo(d,e+this.sizePrice.y,d,e+this.sizePrice.y-this.rounded);b.lineTo(d,e+this.rounded);b.quadraticCurveTo(d,e,d+this.rounded,e);b.closePath();b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnshopup;b.fill();this.iconVC1.draw(this.xCost-this.wAll/2,e+this.sizePrice.y/2-this.iconVC1.height/2);b.font=this.fontSizeCost+"px "+ig.game.fontNameThin;b.textAlign="left";b.fillStyle=
_DATAGAME.uiColor[_DATAGAME.uiTheme].btnvctext;b.fillText(this.cost,this.xCostText,e+this.sizePrice.y/2+11*_DATAGAME.ratioRes);_STRINGS.Shop.price[this.noButton]>ig.game.sessionData.virtualCurrency1&&(e=d=0,b.globalAlpha=0.7,b.beginPath(),b.moveTo(d+this.rounded,e),b.lineTo(d+this.size.x-this.rounded,e),b.quadraticCurveTo(d+this.size.x,e,d+this.size.x,e+this.rounded),b.lineTo(d+this.size.x,e+this.size.y-this.rounded),b.quadraticCurveTo(d+this.size.x,e+this.size.y,d+this.size.x-this.rounded,e+this.size.y),
b.lineTo(d+this.rounded,e+this.size.y),b.quadraticCurveTo(d,e+this.size.y,d,e+this.size.y-this.rounded),b.lineTo(d,e+this.rounded),b.quadraticCurveTo(d,e,d+this.rounded,e),b.closePath(),b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].btnshoptint,b.fill());b.restore()}},repos:function(){this.pos={x:this._parent.pos.x-this._parent.halfSize.x+this._parent.halfSize.x-this.size.x/2,y:this._parent.pos.y-this._parent.halfSize.y+130*_DATAGAME.ratioRes+(this.noButton-1)*142*_DATAGAME.ratioRes};var b=ig.system.context;
b.font=this.fontSizeCost+"px "+ig.game.fontNameThin;this.wCost=b.measureText(this.cost).width;this.xCost=this.startXDef+this.sizePrice.x/2;this.wAll=this.iconVC1.width+10*_DATAGAME.ratioRes+this.wCost;this.xCostText=this.xCost-this.wAll/2+this.iconVC1.width+10*_DATAGAME.ratioRes}})});ig.baked=!0;
ig.module("game.entities.object.ui-shop").requires("impact.entity","game.entities.buttons.button-vc","game.entities.buttons.button-close").defines(function(){EntityUIShop=ig.Entity.extend({size:{x:604*_DATAGAME.ratioRes,y:450*_DATAGAME.ratioRes},halfSize:{x:750,y:80},zIndex:_DATAGAME.zIndexData.UIShop,offset:{x:0,y:0},sizeOption:{x:485*_DATAGAME.ratioRes,y:115*_DATAGAME.ratioRes},rounded:15*_DATAGAME.ratioRes,visible:!0,bgChapter:new ig.Image(_RESOURCESINFO.image.bgShop,604*_DATAGAME.ratioRes,450*
_DATAGAME.ratioRes),init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};this.btnClose=ig.game.spawnEntity(EntityButtonClose,0,0,{_parent:this,repos:function(){this.pos={x:this._parent.pos.x+this._parent.halfSize.x-this.size.x-20*_DATAGAME.ratioRes,y:this._parent.pos.y-this._parent.halfSize.y+20*_DATAGAME.ratioRes}},onClicked:function(){"menu"==ig.game.windowName&&ig.game.currentWindow.uiCurrency.showUI(!1,!1)}});this.btnVC1=ig.game.spawnEntity(EntityButtonVC,0,
0,{_parent:this,noButton:1});this.btnVC2=ig.game.spawnEntity(EntityButtonVC,0,0,{_parent:this,noButton:2});ig.game.sortEntitiesDeferred();this.repos()},show:function(){this.visible=!0;this._parent.enabledButton(!1);this.enabledButton(!0);this.repos()},hide:function(){this.visible=!1;this._parent.enabledButton(!0);this.enabledButton(!1)},enabledButton:function(b){this.btnClose.isClickable=b;this.btnVC1.isClickable=b;if(this.btnVC2.isClickable=b)this.btnClose.repos(),this.btnVC1.repos(),this.btnVC2.repos()},
repos:function(){this.pos={x:ig.system.width/2,y:ig.system.height/2}},update:function(){this.parent()},draw:function(){this.parent();if(this.visible){var b=ig.system.context;b.save();b.fillStyle="black";b.globalAlpha=0.7;b.fillRect(0,0,ig.system.width,ig.system.height);b.restore();b.save();b.translate(this.pos.x-this.halfSize.x,this.pos.y-this.halfSize.y);this.bgChapter.draw(0,0);b.font=ig.game.fontNameWeight+" "+Math.round(0.9*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName;
b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].shoptitle;b.textAlign="center";b.fillText(_STRINGS.Shop.title,this.halfSize.x,80*_DATAGAME.ratioRes);b.restore()}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-yes").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonYes=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.buttonYes,gap:{x:0,y:0},image:new ig.Image(_RESOURCESINFO.image.btnBlank4),imageHover:new ig.Image(_RESOURCESINFO.image.btnBlank4Hover),defsize:{x:300*_DATAGAME.ratioRes,y:76*_DATAGAME.ratioRes},size:{x:300*_DATAGAME.ratioRes,y:76*_DATAGAME.ratioRes},enableHover:!1,init:function(b,
d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){this._parent.enabledButton(!1);ig.game.fadeInWindow(LevelGame)},clicked:function(){this.visible&&this.isClickable&&(ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect())},hover:function(){this.enableHover&&(this.isMouseOver=this.isHover=!0,0!=this._parent.selectedButton&&this._parent.selectedButton!=this._parent.SELECTED_BUTTON_YES&&(this._parent.btnNo.isHover=!1),this._parent.selectedButton=
1)},leave:function(){this.enableHover&&this.isMouseOver&&(this.isMouseOver=this.isHover=!1,this._parent.selectedButton=0)},draw:function(){this.parent();if(this._parent.visible&&this.visible){var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.isHover&&this.enableHover?this.imageHover.draw(0,0):this.image.draw(0,0);var d=Math.round(0.6*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);b.font=ig.game.fontNameWeight+" "+d+"px "+ig.game.fontName;
b.textAlign="center";b.textBaseline="middle";b.fillStyle=ig.game.buttonTextColor;b.fillText(_STRINGS.Replay.yes,this.halfSize.x,this.halfSize.y+ig.game.checkArialOffset(d)+_DATAGAME.uiColor[_DATAGAME.uiTheme].button.textOffsetY*_DATAGAME.ratioRes*_DATAGAME.multiplierOffsetTextButtonBlankSmall);b.restore()}},repos:function(){this.pos={x:this._parent.pos.x-this.halfSize.x,y:this._parent.pos.y-this._parent.halfSize.y+209*_DATAGAME.ratioRes}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-no-reset").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonNoReset=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.buttonNoReset,gap:{x:0,y:0},image:new ig.Image(_RESOURCESINFO.image.btnBlank4),imageHover:new ig.Image(_RESOURCESINFO.image.btnBlank4Hover),defsize:{x:300*_DATAGAME.ratioRes,y:76*_DATAGAME.ratioRes},size:{x:300*_DATAGAME.ratioRes,y:76*_DATAGAME.ratioRes},enableHover:!1,
init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){},clicked:function(){if(this.visible&&this.isClickable&&(ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect(),this.onClicked))this.onClicked()},onClicked:function(){this._parent.changeState(this._parent.STATE_SETTING)},hover:function(){this.enableHover&&(this.isMouseOver=this.isHover=!0,0!=this._parent.selectedButton&&this._parent.selectedButton!=this._parent.SELECTED_BUTTON_NO&&
(this._parent.btnYes.isHover=!1),this._parent.selectedButton=2)},leave:function(){this.enableHover&&this.isMouseOver&&(this.isMouseOver=this.isHover=!1,this._parent.selectedButton=0)},draw:function(){this.parent();if(this._parent.visible&&this.visible){var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.isHover&&this.enableHover?this.imageHover.draw(0,0):this.image.draw(0,0);var d=Math.round(0.6*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);
b.font=ig.game.fontNameWeight+" "+d+"px "+ig.game.fontName;b.textAlign="center";b.textBaseline="middle";b.fillStyle=ig.game.buttonTextColor;b.fillText(_STRINGS.Replay.no,this.halfSize.x,this.halfSize.y+ig.game.checkArialOffset(d)+_DATAGAME.uiColor[_DATAGAME.uiTheme].button.textOffsetY*_DATAGAME.ratioRes*_DATAGAME.multiplierOffsetTextButtonBlankSmall);b.restore()}},repos:function(){this.pos={x:this._parent.pos.x-this.halfSize.x,y:this._parent.pos.y-this.halfSize.y+115*_DATAGAME.ratioRes}}})});
ig.baked=!0;
ig.module("game.entities.buttons.button-menu").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonMenu=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.buttonMenu,gap:{x:0,y:0},image:new ig.Image(_RESOURCESINFO.image.btnBlank2),defsize:{x:260*_DATAGAME.ratioRes,y:76*_DATAGAME.ratioRes},size:{x:260*_DATAGAME.ratioRes,y:76*_DATAGAME.ratioRes},init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};
ig.global.wm||this.repos()},funcComplete:function(){},clicked:function(){this.visible&&this.isClickable&&(ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect(),null!=ig.game.dataSFXLoop&&ig.soundHandler.sfxPlayer.stopSFX(ig.game.dataSFXLoop.name,ig.game.dataSFXLoop.id),null!=ig.game.dataSFXText&&ig.soundHandler.sfxPlayer.stopSFX(ig.game.dataSFXText.name,ig.game.dataSFXText.id),"menu"==ig.game.windowName?this._parent.hide():(ig.game.isPauseSetting=!1,ig.game.resumeGame(),ig.game.openMiniButton=
ig.game.currentWindow.miniButtonOpenedBefore,this._parent.enabledButton(!1),ig.game.fadeInWindow(LevelMenu)))},draw:function(){this.parent();if(this._parent.visible&&this.visible){var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.image.draw(0,0);var d=Math.round(0.6*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);b.font=ig.game.fontNameWeight+" "+d+"px "+ig.game.fontName;b.textAlign="center";b.textBaseline="middle";b.fillStyle=ig.game.buttonTextColor;
b.fillText(_STRINGS.Settings.menu,this.halfSize.x,this.halfSize.y+ig.game.checkArialOffset(d)+_DATAGAME.uiColor[_DATAGAME.uiTheme].button.textOffsetY*_DATAGAME.ratioRes*_DATAGAME.multiplierOffsetTextButtonBlankSmall);b.restore()}},repos:function(){var b=150;!_DATAGAME.loadBackgroundMusic&&!_DATAGAME.chapters.multipleChapter&&(b=110);this.pos={x:this._parent.pos.x-this.size.x-10*_DATAGAME.ratioRes,y:this._parent.pos.y-this.halfSize.y+b*_DATAGAME.ratioRes}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-reset").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonReset=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.buttonReset,gap:{x:0,y:0},image:new ig.Image(_RESOURCESINFO.image.btnBlank2),defsize:{x:260*_DATAGAME.ratioRes,y:76*_DATAGAME.ratioRes},size:{x:260*_DATAGAME.ratioRes,y:76*_DATAGAME.ratioRes},init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/
2};ig.global.wm||this.repos()},funcComplete:function(){},clicked:function(){this.visible&&this.isClickable&&(ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect(),this._parent.changeState(this._parent.STATE_RESET))},draw:function(){this.parent();if(this._parent.visible&&this.visible){var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.image.draw(0,0);var d=Math.round(0.6*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);b.font=ig.game.fontNameWeight+
" "+d+"px "+ig.game.fontName;b.textAlign="center";b.textBaseline="middle";b.fillStyle=ig.game.buttonTextColor;b.fillText(_STRINGS.Settings.reset,this.halfSize.x,this.halfSize.y+ig.game.checkArialOffset(d)+_DATAGAME.uiColor[_DATAGAME.uiTheme].button.textOffsetY*_DATAGAME.ratioRes*_DATAGAME.multiplierOffsetTextButtonBlankSmall);b.restore()}},repos:function(){var b=150;!_DATAGAME.loadBackgroundMusic&&!_DATAGAME.chapters.multipleChapter&&(b=110);this.pos=_DATAGAME.showButtonMenuSetting?{x:this._parent.pos.x+
10*_DATAGAME.ratioRes,y:this._parent.pos.y-this.halfSize.y+b*_DATAGAME.ratioRes}:{x:this._parent.pos.x-this.halfSize.x,y:this._parent.pos.y-this.halfSize.y+b*_DATAGAME.ratioRes}}})});ig.baked=!0;
ig.module("game.entities.object.ui-setting").requires("impact.entity","game.entities.buttons.button-yes","game.entities.buttons.button-no-reset","game.entities.buttons.button-menu","game.entities.buttons.button-prev","game.entities.buttons.button-next","game.entities.buttons.button-reset").defines(function(){EntityUISetting=ig.Entity.extend({defSize:{x:604*_DATAGAME.ratioRes,y:450*_DATAGAME.ratioRes},size:{x:604*_DATAGAME.ratioRes,y:450*_DATAGAME.ratioRes},halfSize:{x:750*_DATAGAME.ratioRes,y:80*
_DATAGAME.ratioRes},zIndex:_DATAGAME.zIndexData.UISetting,offset:{x:0,y:0},sizeOption:{x:485*_DATAGAME.ratioRes,y:115*_DATAGAME.ratioRes},rounded:15*_DATAGAME.ratioRes,visible:!0,totalPage:1,pageNow:1,bgReset:new ig.Image(_RESOURCESINFO.image.bgInput,604*_DATAGAME.ratioRes,450*_DATAGAME.ratioRes),stateNow:1,STATE_SETTING:1,STATE_RESET:2,paddingTextSound:{x:50*_DATAGAME.ratioRes,y:50*_DATAGAME.ratioRes},scaleButtonVolume:0.7,volumeMusic:8,volumeSound:8,init:function(b,d,e){this.parent(b,d,e);this.volumeMusic=
ig.game.sessionData.music;this.volumeSound=ig.game.sessionData.sound;this.totalPage=Math.ceil((_STRINGS.Chapter.title.length-1)/3);this.resizeBG();this.tweenCloseFalse=this.tween({paramClose:1},0.1,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){ig.game.isClickClose=!1}.bind(this)});this.btnClose=ig.game.spawnEntity(EntityButtonClose,0,0,{_parent:this,ignorePause:!0,repos:function(){this.pos={x:this._parent.pos.x+this._parent.halfSize.x-this.size.x-20*_DATAGAME.ratioRes,y:this._parent.pos.y-
this._parent.halfSize.y+20*_DATAGAME.ratioRes}},clicked:function(){this.visible&&this.isClickable&&(ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect(),this._parent.tweenCloseFalse.stop(),ig.game.isClickClose=!0,this._parent.tweenCloseFalse.start(),ig.game.isPauseSetting=!1,this._parent.hide(),"game"==ig.game.windowName&&(ig.game.resumeGame(),ig.game.currentWindow.canClickStage=!0,ig.game.openMiniButton=ig.game.currentWindow.miniButtonOpenedBefore,ig.game.currentWindow.reposMiniButton()))},
funcComplete:function(){}});_DATAGAME.showButtonMenuSetting&&(this.btnHome=ig.game.spawnEntity(EntityButtonMenu,0,0,{_parent:this}));_DATAGAME.loadBackgroundMusic&&(this.btnPrevBGM=ig.game.spawnEntity(EntityButtonPrev,0,0,{_parent:this,scaleSize:this.scaleButtonVolume,zIndex:_DATAGAME.zIndexData.buttonUISetting,repos:function(){this.pos=_DATAGAME.loadBackgroundMusic?{x:this._parent.pos.x-this.size.x,y:this._parent.pos.y-this._parent.paddingTextSound.y-this.halfSize.y}:{x:this._parent.pos.x-this.size.x,
y:this._parent.pos.y-this.halfSize.y}},onClicked:function(){0>=this._parent.volumeMusic?this._parent.volumeMusic=0:this._parent.volumeMusic--;ig.soundHandler.bgmPlayer.volume(this._parent.volumeMusic/ig.game.maxVolume);ig.game.save("music",this._parent.volumeMusic)},funcComplete:function(){}}),this.btnNextBGM=ig.game.spawnEntity(EntityButtonNext,0,0,{_parent:this,scaleSize:this.scaleButtonVolume,zIndex:_DATAGAME.zIndexData.buttonUISetting,repos:function(){this.pos=_DATAGAME.loadBackgroundMusic?{x:this._parent.pos.x+
this._parent.halfSize.x-this.size.x-this._parent.paddingTextSound.x,y:this._parent.pos.y-this._parent.paddingTextSound.y-this.halfSize.y}:{x:this._parent.pos.x+this._parent.halfSize.x-this.size.x-this._parent.paddingTextSound.x,y:this._parent.pos.y-this.halfSize.y}},onClicked:function(){12<=this._parent.volumeMusic?this._parent.volumeMusic=12:this._parent.volumeMusic++;ig.soundHandler.bgmPlayer.volume(this._parent.volumeMusic/ig.game.maxVolume);ig.game.save("music",this._parent.volumeMusic)},funcComplete:function(){}}));
this.btnPrevSFX=ig.game.spawnEntity(EntityButtonPrev,0,0,{_parent:this,scaleSize:this.scaleButtonVolume,zIndex:_DATAGAME.zIndexData.buttonUISetting,repos:function(){this.pos=_DATAGAME.loadBackgroundMusic?{x:this._parent.pos.x-this.size.x,y:this._parent.pos.y+this._parent.paddingTextSound.y-this.halfSize.y}:{x:this._parent.pos.x-this.size.x,y:this._parent.pos.y-this.halfSize.y}},onClicked:function(){0>=this._parent.volumeSound?this._parent.volumeSound=0:this._parent.volumeSound--;ig.soundHandler.sfxPlayer.volume(this._parent.volumeSound/
ig.game.maxVolume);ig.game.save("sound",this._parent.volumeSound)},funcComplete:function(){}});this.btnNextSFX=ig.game.spawnEntity(EntityButtonNext,0,0,{_parent:this,scaleSize:this.scaleButtonVolume,zIndex:_DATAGAME.zIndexData.buttonUISetting,repos:function(){this.pos=_DATAGAME.loadBackgroundMusic?{x:this._parent.pos.x+this._parent.halfSize.x-this.size.x-this._parent.paddingTextSound.x,y:this._parent.pos.y+this._parent.paddingTextSound.y-this.halfSize.y}:{x:this._parent.pos.x+this._parent.halfSize.x-
this.size.x-this._parent.paddingTextSound.x,y:this._parent.pos.y-this.halfSize.y}},onClicked:function(){12<=this._parent.volumeSound?this._parent.volumeSound=12:this._parent.volumeSound++;ig.soundHandler.sfxPlayer.volume(this._parent.volumeSound/ig.game.maxVolume);ig.game.save("sound",this._parent.volumeSound)},funcComplete:function(){}});this.btnReset=ig.game.spawnEntity(EntityButtonReset,0,0,{_parent:this});this.btnYes=ig.game.spawnEntity(EntityButtonYes,0,0,{_parent:this,repos:function(){this.pos=
{x:this._parent.pos.x-this.halfSize.x,y:this._parent.pos.y-this.halfSize.y+20*_DATAGAME.ratioRes}},clicked:function(){if(this.visible&&this.isClickable){ig.soundHandler.sfxPlayer.play("click");this.sinkingEffect();this._parent.enabledButton(!1);ig.game.resetAllData();for(var b=1;b<=_DATAGAME.totalVirtualCurrency;b++)ig.game.currentWindow["virtualCurrency"+b]=ig.game.sessionData["virtualCurrency"+b];ig.game.isPauseSetting=!1;"game"==ig.game.windowName?(ig.game.openMiniButton=ig.game.currentWindow.miniButtonOpenedBefore,
ig.game.resumeGame(),_DATAGAME.chapters.multipleChapter?ig.game.fadeInWindow(LevelMenu):ig.game.fadeInWindow(LevelGame)):this._parent.hide()}},funcComplete:function(){}});this.btnNo=ig.game.spawnEntity(EntityButtonNoReset,0,0,{_parent:this});ig.game.sortEntitiesDeferred();this.repos()},resizeBG:function(){this.stateNow==this.STATE_RESET?(this.size.x=0.85*this.defSize.x,this.size.y=0.85*this.defSize.y):!_DATAGAME.chapters.multipleChapter&&!_DATAGAME.loadBackgroundMusic?(this.size.x=0.85*this.defSize.x,
this.size.y=0.85*this.defSize.y):(this.size.x=this.defSize.x,this.size.y=this.defSize.y);this.halfSize={x:this.size.x/2,y:this.size.y/2}},show:function(){this.changeState(this.STATE_SETTING);this.visible=!0;this._parent.enabledButton(!1);this.enabledButton(!0);this.repos();ig.game.sortEntitiesDeferred()},hide:function(){this.visible=!1;this._parent.enabledButton(!0);this.enabledButton(!1)},enabledButton:function(b){if(b){var d=!1,e=!1;this.stateNow==this.STATE_RESET?(d=!1,e=!0):this.stateNow==this.STATE_SETTING&&
(d=!0,e=!1);this.btnHome&&(this.btnHome.visible=d);this.btnPrevSFX&&(this.btnPrevSFX.visible=d);this.btnNextSFX&&(this.btnNextSFX.visible=d);this.btnPrevBGM&&(this.btnPrevBGM.visible=d);this.btnNextBGM&&(this.btnNextBGM.visible=d);this.btnReset.visible=d;this.btnHome&&(this.btnHome.isClickable=d);this.btnPrevSFX&&(this.btnPrevSFX.isClickable=d);this.btnNextSFX&&(this.btnNextSFX.isClickable=d);this.btnPrevBGM&&(this.btnPrevBGM.isClickable=d);this.btnNextBGM&&(this.btnNextBGM.isClickable=d);this.btnReset.isClickable=
d;this.btnYes.visible=e;this.btnNo.visible=e;this.btnYes.isClickable=e;this.btnNo.isClickable=e;this.btnClose.isClickable=b}else this.btnClose.isClickable=b,this.btnHome&&(this.btnHome.isClickable=b),this.btnPrevSFX&&(this.btnPrevSFX.isClickable=b),this.btnNextSFX&&(this.btnNextSFX.isClickable=b),this.btnPrevBGM&&(this.btnPrevBGM.isClickable=b),this.btnNextBGM&&(this.btnNextBGM.isClickable=b),this.btnReset.isClickable=b,this.btnYes.isClickable=b,this.btnNo.isClickable=b;b&&(this.btnClose.repos(),
this.btnHome&&this.btnHome.repos(),this.btnPrevSFX&&this.btnPrevSFX.repos(),this.btnNextSFX&&this.btnNextSFX.repos(),this.btnPrevBGM&&this.btnPrevBGM.repos(),this.btnNextBGM&&this.btnNextBGM.repos(),this.btnReset.repos(),this.btnYes.repos(),this.btnNo.repos())},changeState:function(b){this.stateNow=b;this.resizeBG();this.enabledButton(!0)},repos:function(){this.pos={x:ig.system.width/2,y:ig.system.height/2}},update:function(){this.parent()},draw:function(){this.parent();if(this.visible){var b=ig.system.context;
b.save();b.fillStyle="black";b.globalAlpha=0.7;b.fillRect(0,0,ig.system.width,ig.system.height);b.restore();b.save();b.translate(this.pos.x-this.halfSize.x,this.pos.y-this.halfSize.y);this.bgReset.draw(0,0,0,0,this.bgReset.width,this.bgReset.height,this.size.x,this.size.y);if(this.stateNow==this.STATE_RESET){var d=Math.round(0.54*ig.game.fontNameSize*_DATAGAME.ratioRes),e=45*_DATAGAME.ratioRes;b.font=ig.game.fontNameWeight+" "+d*ig.game.fontRatio+"px "+ig.game.fontName;b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].settingTitle;
b.textAlign="center";b.textBaseline="top";b.fillText(_STRINGS.Settings.textreset1,this.halfSize.x,e);e+=d*ig.game.fontRatio+5*_DATAGAME.ratioRes;b.fillText(_STRINGS.Settings.textreset2,this.halfSize.x,e);e+=d*ig.game.fontRatio+5*_DATAGAME.ratioRes;b.fillText(_STRINGS.Settings.textreset3,this.halfSize.x,e)}else b.font=ig.game.fontNameWeight+" "+Math.round(1.09*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName,b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].settingTitle,
b.textAlign="center",b.fillText(_STRINGS.Settings.settings,this.halfSize.x,100*_DATAGAME.ratioRes),b.font=ig.game.fontNameWeight+" "+Math.round(0.7*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName,b.textAlign="left",b.textBaseline="middle",d=(this.btnNextSFX.pos.x-(this.btnPrevSFX.pos.x+this.btnPrevSFX.size.x))/2,_DATAGAME.loadBackgroundMusic?(b.fillText(_STRINGS.Settings.music,this.paddingTextSound.x,this.halfSize.y-this.paddingTextSound.y),b.fillText(_STRINGS.Settings.sfx,
this.paddingTextSound.x,this.halfSize.y+this.paddingTextSound.y),b.textAlign="center",b.fillText(this.volumeMusic,this.halfSize.x+d,this.halfSize.y-this.paddingTextSound.y),b.fillText(this.volumeSound,this.halfSize.x+d,this.halfSize.y+this.paddingTextSound.y)):(b.fillText(_STRINGS.Settings.sfx,this.paddingTextSound.x,this.halfSize.y),b.textAlign="center",b.fillText(this.volumeSound,this.halfSize.x+d,this.halfSize.y));b.restore()}}})});ig.baked=!0;
ig.module("game.entities.object.ui-exit").requires("impact.entity","game.entities.buttons.button-yes","game.entities.buttons.button-no-reset").defines(function(){EntityUIExit=ig.Entity.extend({size:{x:604*_DATAGAME.ratioRes,y:450*_DATAGAME.ratioRes},halfSize:{x:750,y:80},zIndex:_DATAGAME.zIndexData.UIExit,offset:{x:0,y:0},sizeOption:{x:485*_DATAGAME.ratioRes,y:115*_DATAGAME.ratioRes},rounded:15*_DATAGAME.ratioRes,visible:!0,totalPage:1,pageNow:1,bgReset:new ig.Image(_RESOURCESINFO.image.bgInput,604*
_DATAGAME.ratioRes,450*_DATAGAME.ratioRes),init:function(b,d,e){this.parent(b,d,e);this.totalPage=Math.ceil((_STRINGS.Chapter.title.length-1)/3);this.size.x*=0.85;this.size.y*=0.85;this.halfSize={x:this.size.x/2,y:this.size.y/2};this.btnYes=ig.game.spawnEntity(EntityButtonYes,0,0,{_parent:this,repos:function(){this.pos={x:this._parent.pos.x-this.halfSize.x,y:this._parent.pos.y-this.halfSize.y+20*_DATAGAME.ratioRes}},clicked:function(){this.visible&&this.isClickable&&(ig.soundHandler.sfxPlayer.play("click"),
this.sinkingEffect(),this._parent.enabledButton(!1),this._parent.hide(),ig.gameExit&&ig.gameExit())},funcComplete:function(){}});this.btnNo=ig.game.spawnEntity(EntityButtonNoReset,0,0,{_parent:this,clicked:function(){this.visible&&this.isClickable&&(ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect(),this._parent.enabledButton(!1),this._parent.hide())},funcComplete:function(){}});ig.game.sortEntitiesDeferred();this.repos()},show:function(){this.visible=!0;this._parent.enabledButton(!1);this.enabledButton(!0);
this.repos();ig.game.sortEntitiesDeferred()},hide:function(){this.visible=!1;this._parent.enabledButton(!0);this.enabledButton(!1)},enabledButton:function(b){this.btnYes.isClickable=b;if(this.btnNo.isClickable=b)this.btnYes.repos(),this.btnNo.repos()},repos:function(){this.pos={x:ig.system.width/2,y:ig.system.height/2}},update:function(){this.parent()},draw:function(){this.parent();if(this.visible){var b=ig.system.context;b.save();b.fillStyle="black";b.globalAlpha=0.7;b.fillRect(0,0,ig.system.width,
ig.system.height);b.restore();b.save();b.translate(this.pos.x-this.halfSize.x,this.pos.y-this.halfSize.y);this.bgReset.draw(0,0,0,0,this.bgReset.width,this.bgReset.height,this.size.x,this.size.y);var d=Math.round(0.72*ig.game.fontNameSize*_DATAGAME.ratioRes),e=55*_DATAGAME.ratioRes;b.font=ig.game.fontNameWeight+" "+d*ig.game.fontRatio+"px "+ig.game.fontName;b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].exitText;b.textAlign="center";b.textBaseline="top";b.fillText(_STRINGS.Exit.textexit1,this.halfSize.x,
e);e+=d*ig.game.fontRatio+8*_DATAGAME.ratioRes;b.fillText(_STRINGS.Exit.textexit2,this.halfSize.x,e);b.restore()}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-play").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonPlay=EntityButton.extend({type:ig.Entity.TYPE.A,image:new ig.Image(_RESOURCESINFO.image.btnBlank,384*_DATAGAME.ratioRes,114*_DATAGAME.ratioRes),size:{x:384*_DATAGAME.ratioRes,y:114*_DATAGAME.ratioRes},halfSize:null,zIndex:_DATAGAME.zIndexData.buttonOnMenu,noCoba:0,init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};
ig.global.wm||this.repos()},draw:function(){this.parent();var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.image.draw(0,0);var d=Math.round(1*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);b.font=ig.game.fontNameWeight+" "+d+"px "+ig.game.fontName;b.textAlign="center";b.textBaseline="middle";b.fillStyle=ig.game.buttonTextColor;b.fillText(_STRINGS.Button.play,this.halfSize.x,this.halfSize.y+ig.game.checkArialOffset(d)+_DATAGAME.uiColor[_DATAGAME.uiTheme].button.textOffsetY*
_DATAGAME.ratioRes);b.restore()},funcComplete:function(){_DATAGAME.chapters.multipleChapter?_DATAGAME.isCheat?(ig.game.numChapter=1,ig.game.fadeInWindow(LevelGame)):this._parent.uiChapter.show():ig.game.fadeInWindow(LevelGame)},clicked:function(){if(this.visible&&this.isClickable&&(null==ig.game.transition||!ig.game.transition.isRunning))ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect(),_DATAGAME.chapters.multipleChapter||(ig.game.boolChooseChapter=!0,this.addDUtoCustomLoad(),this.proceedToSelectedChapter())},
proceedToSelectedChapter:function(){ig.game.numChapter=1;null==ig.game.statusLoad[ig.game.numChapter]&&(ig.game.statusLoad[ig.game.numChapter]=0);this._parent.enabledButton(!1)},addDUtoCustomLoad:function(){this.noChapter=1;var b=_CUSTOMLOAD.Chapter[this.noChapter].duTheme;null==b&&(b=[]);if(null!=_DATAGAME.firstMCOutfit["chapter"+this.noChapter]&&""!=_DATAGAME.firstMCOutfit["chapter"+this.noChapter]){var d=_DATAGAME.firstMCOutfit["chapter"+this.noChapter],e=b.findIndex(function(b){return b.toLowerCase()==
d.toLowerCase()});""!=_DATAGAME.firstMCOutfit["chapter"+this.noChapter]&&("default"!=_DATAGAME.firstMCOutfit["chapter"+this.noChapter].toLowerCase()&&0>e)&&_CUSTOMLOAD.Chapter[this.noChapter].duTheme.push(_DATAGAME.firstMCOutfit["chapter"+this.noChapter])}var f=null==ig.game.sessionData.dressUpTheme[this.noChapter-1]?"amy":ig.game.sessionData.dressUpTheme[this.noChapter-1].last,b=b.findIndex(function(b){return b.toLowerCase()==f.toLowerCase()});2<=this.noChapter&&(null!=ig.game.sessionData.dressUpTheme[this.noChapter-
1]&&null!=ig.game.sessionData.dressUpTheme[this.noChapter-1].last&&0>b)&&_CUSTOMLOAD.Chapter[this.noChapter].duTheme.push(ig.game.sessionData.dressUpTheme[this.noChapter-1].last)},clicking:function(){},released:function(){},repos:function(){this.pos.x=ig.game.midX-this.halfSize.x;this.pos.y=ig.game.midY+100*_DATAGAME.ratioRes}})});ig.baked=!0;
ig.module("game.entities.buttons.button-shopmm").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonShopMM=EntityButton.extend({type:ig.Entity.TYPE.A,image:new ig.Image(_RESOURCESINFO.image.btnBlank,384*_DATAGAME.ratioRes,114*_DATAGAME.ratioRes),size:{x:384*_DATAGAME.ratioRes,y:114*_DATAGAME.ratioRes},halfSize:null,zIndex:_DATAGAME.zIndexData.buttonOnMenu,init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||
this.repos()},draw:function(){this.parent();var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.image.draw(0,0);var d=Math.round(1*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);b.font=ig.game.fontNameWeight+" "+d+"px "+ig.game.fontName;b.textAlign="center";b.textBaseline="middle";b.fillStyle=ig.game.buttonTextColor;b.fillText(_STRINGS.Button.shop,this.halfSize.x,this.halfSize.y+ig.game.checkArialOffset(d)+_DATAGAME.uiColor[_DATAGAME.uiTheme].button.textOffsetY*
_DATAGAME.ratioRes);b.restore()},funcComplete:function(){this._parent.uiShop.show();if(this.onClicked)this.onClicked()},clicked:function(){if(this.visible&&this.isClickable&&(null==ig.game.transition||!ig.game.transition.isRunning))ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect()},clicking:function(){},released:function(){},repos:function(){this.pos.x=ig.game.midX-this.halfSize.x;this.pos.y=ig.game.midY+225*_DATAGAME.ratioRes}})});ig.baked=!0;
ig.module("game.entities.buttons.button-exit").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonExit=EntityButton.extend({type:ig.Entity.TYPE.A,image:new ig.Image(_RESOURCESINFO.image.btnBlank,384*_DATAGAME.ratioRes,114*_DATAGAME.ratioRes),size:{x:384*_DATAGAME.ratioRes,y:114*_DATAGAME.ratioRes},halfSize:null,zIndex:_DATAGAME.zIndexData.buttonOnMenu,init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||
this.repos()},draw:function(){this.parent();var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.image.draw(0,0);var d=Math.round(1*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);b.font=ig.game.fontNameWeight+" "+d+"px "+ig.game.fontName;b.textAlign="center";b.textBaseline="middle";b.fillStyle=ig.game.buttonTextColor;b.fillText(_STRINGS.Button.exit,this.halfSize.x,this.halfSize.y+ig.game.checkArialOffset(d)+_DATAGAME.uiColor[_DATAGAME.uiTheme].button.textOffsetY*
_DATAGAME.ratioRes);b.restore()},funcComplete:function(){this._parent.uiExit.show()},clicked:function(){if(this.visible&&this.isClickable&&(null==ig.game.transition||!ig.game.transition.isRunning))ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect()},clicking:function(){},released:function(){},repos:function(){this.pos.x=ig.game.midX-this.halfSize.x;this.pos.y=_DATAGAME.enableShop?ig.game.midY+350*_DATAGAME.ratioRes:ig.game.midY+225*_DATAGAME.ratioRes}})});ig.baked=!0;
ig.module("game.entities.buttons.button-setting").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonSetting=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.miniButton,gap:{x:0,y:0},image:new ig.Image(_RESOURCESINFO.image.btnSetting),defsize:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},size:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},defPos:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},init:function(b,d,e){this.parent(b,
d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){},clicked:function(){if(this.visible&&this.isClickable&&(null==ig.game.transition||!ig.game.transition.isRunning))"game"==ig.game.windowName&&(ig.game.isPauseSetting=!0,ig.game.currentWindow.canClickStage=!1,ig.game.pauseGame(),ig.game.openMiniButton=!1,ig.game.currentWindow.reposMiniButton()),this.sinkingEffect(),ig.soundHandler.sfxPlayer.play("click"),this._parent.uiSetting.show()},draw:function(){this.parent();
if(ig.game.showUI&&this.visible){var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.image.draw(0,0);b.restore()}},repos:function(){this.pos.x=ig.system.width-this.size.x-25;this.pos.y=25}})});ig.baked=!0;
ig.module("game.entities.controller.menu-controller").requires("impact.entity","game.entities.object.demo-text","game.entities.object.ui-currency","game.entities.object.ui-chapter","game.entities.object.ui-chapter-non-linear","game.entities.buttons.button-chapter-non-linear","game.entities.object.ui-shop","game.entities.object.ui-setting","game.entities.object.ui-exit","game.entities.buttons.button-more-games","game.entities.buttons.button-play","game.entities.buttons.button-shopmm","game.entities.buttons.button-exit",
"game.entities.buttons.button-setting").defines(function(){EntityMenuController=ig.Entity.extend({zIndex:0,loadBG:!0,buttons:{},scaleTitle:0.9,entityGame:{},isShowChapter:!1,uiChapterVisibility:!1,init:function(b,d,e){this.parent(b,d,e);ig.game.animDelayed=!0;7<_DATAGAME.chapters.totalChapter&&(_DATAGAME.chapters.totalChapter=7);ig.game.consoleLog("shop : "+_DATAGAME.enableShop+", language : "+_DATAGAME.enableLanguage);ig.game.openAllChapter&&(ig.game.sessionData.unlockChapter=!0==_DATAGAME.linearChapterWithThumbnail?
_STRINGS.chapter_list.length:_STRINGS.Chapter.title.length-1);"bgmdefault"!=ig.game.lastBGM&&ig.game.lastBGM!=_RESOURCESINFO.bgm.replaceAll("-","")&&(ig.game.lastBGM="bgmdefault",ig.soundHandler.bgmPlayer.onStopBGM(),ig.soundHandler.bgmPlayer.play("bgmdefault"));ig.game.windowName="menu";ig.game.currentWindow=this;ig.game.lastBGM="bgmdefault";for(b=1;b<=_DATAGAME.totalVirtualCurrency;b++)this["virtualCurrency"+b]=ig.game.sessionData["virtualCurrency"+b];this.buttons.btnSetting=ig.game.spawnEntity(EntityButtonSetting,
0,0,{_parent:this,zIndex:_DATAGAME.zIndexData.buttonOnMenu});_DATAGAME.chapters.multipleChapter||!1==_DATAGAME.chapters.multipleChapter&&!0==_DATAGAME.chapters.showMainMenu?(_DATAGAME.enableCurrency&&(this.uiCurrency=ig.game.spawnEntity(EntityUICurrency,0,0,{_parent:this}),this.uiCurrency.isShop=!1,this.uiCurrency.repos()),_DATAGAME.simplifiedUI||(this.bg=new ig.Image(_BASEPATH.backgroundMenu+_RESOURCESINFO.image.bgMenu),this.title=new ig.Image(_RESOURCESINFO.image.title),this.tweenTitleBig=this.tween({scaleTitle:1},
0.8,{easing:ig.Tween.Easing.Linear.EaseNone,loop:2,onComplete:function(){}.bind(this)}),this.tweenTitleSmall=this.tween({scaleTitle:0.9},0.8,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.tweenTitleBig.start()}.bind(this)}),this.tweenTitleBig.start(),this.buttons.btnPlay=ig.game.spawnEntity(EntityButtonPlay,0,0,{_parent:this}),_DATAGAME.enableShop&&(this.buttons.btnShop=ig.game.spawnEntity(EntityButtonShopMM,0,0,{_parent:this,onClicked:function(){this._parent.uiCurrency.showUI(!0,
!1)}})),_DATAGAME.enableExit&&(this.buttons.btnExit=ig.game.spawnEntity(EntityButtonExit,0,0,{_parent:this})),_SETTINGS.MoreGames.Enabled&&(this.buttons.btnMoreGames=ig.game.spawnEntity(EntityButtonMoreGames,0,0,{_parent:this,zIndex:_DATAGAME.zIndexData.buttonOnMenu})),ig.game.languageOn&&1>ig.game.getEntitiesByType(EntitySLShowBtn).length&&(this.slButton=ig.game.spawnEntity(EntitySLShowBtn,ig.game.isFullScreen?25+115*_DATAGAME.ratioRes:25,25,{zIndex:_DATAGAME.zIndexData.buttonOnMenu,size:{x:253*
_DATAGAME.ratioRes,y:75*_DATAGAME.ratioRes}}))),ig.game.isFullScreen&&(ig.Fullscreen.enableFullscreenButton=!0,this.buttons.btnFullScreen=ig.game.spawnEntity(ig.FullscreenButton,0,0,{zIndex:_DATAGAME.zIndexData.buttonOnMenu,anchor:1}),this.buttons.btnFullScreen.show()),_DATAGAME.chapters.multipleChapter&&(this.uiChapter=_DATAGAME.isLinearChapter&&!_DATAGAME.linearChapterWithThumbnail?ig.game.spawnEntity(EntityUIChapter,0,0,{_parent:this}):ig.game.spawnEntity(EntityUIChapterNonLinear,0,0,{_parent:this}),
this.uiChapter.hide(),this.uiChapter.repos()),_DATAGAME.enableShop&&(this.uiShop=ig.game.spawnEntity(EntityUIShop,0,0,{_parent:this}),this.uiShop.hide(),this.uiShop.repos()),_DATAGAME.enableExit&&(this.uiExit=ig.game.spawnEntity(EntityUIExit,0,0,{_parent:this}),this.uiExit.hide(),this.uiExit.repos()),_DATAGAME.simplifiedUI?null!=this.uiChapter&&(this.isShowChapter=!0):("game"==ig.game.windowBefore&&ig.game.isChapterEnd&&null!=this.uiChapter&&(this.isShowChapter=!0),ig.game.isChapterEnd=!1)):1>ig.game.directLoadChapter&&
(ig.game.numChapter=1,null==ig.game.statusLoad[1]&&(ig.game.statusLoad[1]=0),0==ig.game.statusLoad[1]&&(ig.game.loadAssets(),ig.game.showLoadingScreen(function(){ig.game.fadeOutWindowSplash()}.bind(this))),this.enabledButton(!1));_DATAGAME.showButtonLoadOnMenu&&(this.btnLoad=ig.game.spawnEntity(EntityButtonLoad,0,0,{_parent:this,zIndex:_DATAGAME.zIndexData.buttonOnMenu}),this.uiSaveLoad=ig.game.spawnEntity(EntityUISaveLoad,0,0,{_parent:this,zIndex:_DATAGAME.zIndexData.UILoadOnMenu}),this.uiSaveLoad.hide(),
this.uiSaveLoad.repos());this.uiSetting=ig.game.spawnEntity(EntityUISetting,0,0,{_parent:this});this.uiSetting.hide();this.uiSetting.repos();_DATAGAME.enableDemo&&ig.game.spawnEntity(EntityDemoText,0,0,{_parent:this});1<=ig.game.directLoadChapter&&(ig.game.numChapter=ig.game.directLoadChapter,null==ig.game.statusLoad[ig.game.numChapter]&&(ig.game.statusLoad[ig.game.numChapter]=0),0==ig.game.statusLoad[ig.game.numChapter]&&(ig.game.loadAssets(),ig.game.showLoadingScreen(function(){ig.game.fadeOutWindowSplash()}.bind(this))),
this.enabledButton(!1),ig.game.directLoadChapter=0);this.repos();this.checkMiniButton();this.isShowChapter&&this.uiChapter.show();ig.game.sortEntitiesDeferred()},checkMiniButton:function(){ig.game.showMiniButton=!1;ig.game.listMiniButton=[];for(var b in _DATAGAME.miniButton)!0==_DATAGAME.miniButton[b]&&(ig.game.listMiniButton.push(b),ig.game.showMiniButton=!0)},changeLanguage:function(){},enabledButton:function(b,d){null==d&&(d=!1);this.buttons.btnSetting.isClickable=b;this.btnLoad&&(this.btnLoad.isClickable=
b);this.slButton&&(this.slButton.isClickable=b);this.buttons.btnMoreGames&&((this.buttons.btnMoreGames.isClickable=b)?this.buttons.btnMoreGames.show():this.buttons.btnMoreGames.hide());this.buttons.btnFullScreen&&(ig.Fullscreen.enableFullscreenButton=b,!1==_DATAGAME.isLinearChapter&&!0==d?b?this.buttons.btnFullScreen.show():this.buttons.btnFullScreen.hide():!0==d&&(b?this.buttons.btnFullScreen.show():this.buttons.btnFullScreen.hide()));if(!_DATAGAME.simplifiedUI&&(_DATAGAME.chapters.multipleChapter||
!1==_DATAGAME.chapters.multipleChapter&&!0==_DATAGAME.chapters.showMainMenu))this.buttons.btnPlay&&(this.buttons.btnPlay.isClickable=b),_DATAGAME.enableShop&&(this.buttons.btnShop.isClickable=b),_DATAGAME.enableExit&&(this.buttons.btnExit.isClickable=b)},ready:function(){},update:function(){this.parent();ig.game._menu=this},draw:function(){this.parent();var b=ig.system.context;if(!_DATAGAME.simplifiedUI&&(_DATAGAME.chapters.multipleChapter||!1==_DATAGAME.chapters.multipleChapter&&!0==_DATAGAME.chapters.showMainMenu)){0<
this.bg.width&&this.loadBG&&(this.loadBG=!1,this.repos());b.save();b.setTransform(1,0,0,1,0,0);this.bg.draw(0,0,this.bgX,this.bgY,this.bgW,this.bgH,ig.system.width,ig.system.height);b.restore();b.save();b.translate(ig.game.midX,ig.game.midY-200*_DATAGAME.ratioRes);b.scale(this.scaleTitle,this.scaleTitle);var d=1;ig.system.width<this.title.width&&(d=ig.sizeHandler.minW/this.title.width);this.title.draw(-this.title.width*d/2,-this.title.height*d/2,0,0,this.title.width,this.title.height,this.title.width*
d,this.title.height*d)}else b.save(),b.fillStyle=_DATAGAME.mainMenuBgColor,b.fillRect(0,0,ig.system.width,ig.system.height);b.restore()},repos:function(){if(!_DATAGAME.simplifiedUI&&(_DATAGAME.chapters.multipleChapter||!1==_DATAGAME.chapters.multipleChapter&&!0==_DATAGAME.chapters.showMainMenu)){var b=ig.system.width/ig.system.height;this.bg.width/this.bg.height>b?(this.bgH=this.bg.height,this.bgW=this.bgH*b,this.bgX=(this.bg.width-this.bgW)/2,this.bgY=0):(this.bgW=this.bg.width,this.bgH=this.bgW/
b,this.bgX=0,this.bgY=(this.bg.height-this.bgH)/2)}}})});ig.baked=!0;ig.module("game.levels.menu").requires("impact.image","game.entities.controller.menu-controller").defines(function(){LevelMenu={entities:[{type:"EntityMenuController",x:0,y:0}],layer:[]};LevelMenuResources=[new ig.Image(_BASEPATH.media+"graphics/backgrounds/desktop/background.jpg")]});ig.baked=!0;
ig.module("game.entities.text-view").requires("impact.entity").defines(function(){EntityTextView=ig.Entity.extend({text:"",fontStyle:"40px metromed",lines:[],size:{x:900,y:100},visible:!0,zIndex:3001,alphaBlink:0,init:function(b,d,e){this.parent(b,d,e);ig.game.sortEntitiesDeferred();this.repos();this.tweenBlink1=this.tween({alphaBlink:1},0.2,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.tweenBlink2.start()}.bind(this)});this.tweenBlink2=this.tween({alphaBlink:0},0.2,{easing:ig.Tween.Easing.Linear.EaseNone,
onComplete:function(){this.tweenBlink1.start()}.bind(this)});this.tweenBlink1.start()},repos:function(){this.pos={x:ig.system.width/2-this.size.x/2,y:ig.system.height/2-this.size.y/2}},draw:function(){this.parent();if(this.visible){var b=ig.system.context;b.save();b.fillStyle="#ffffff";b.fillRect(this.pos.x,this.pos.y,this.size.x,this.size.y);b.font=this.fontStyle;b.fillStyle="#000000";b.textBaseline="top";var d=this.pos.y+15*_DATAGAME.ratioRes;b.globalAlpha=this.alphaBlink;0==this.lines.length?b.fillText("|",
this.pos.x+this.size.x/2,d):b.fillText("|",this.pos.x+this.size.x/2+b.measureText(this.lines[0]).width/2+2*_DATAGAME.ratioRes,d);b.globalAlpha=1;for(var e=0;e<this.lines.length;e++)b.fillText(this.lines[e],this.pos.x+this.size.x/2-b.measureText(this.lines[e]).width/2,d),d+=40*_DATAGAME.ratioRes;0>=this.text.length&&(b.font=this.fontStyle,b.fillStyle="#c7c7c7",b.textAlign="left",b.fillText("e.g. Amy",this.pos.x+this.size.x/2-b.measureText(this.lines[e]).width/2,this.pos.y+15*_DATAGAME.ratioRes));b.restore()}},
addText:function(b){10<=this.text.length&&(this.text=this.text.substring(0,9));this.text+=b;b=ig.system.context;b.font=this.fontStyle;this.lines=this.getLines(b,this.text,this.size.x-10)},removeText:function(){if(0!=this.text.length){1==this.text.length&&(this.text="");if(2<=this.text.length){var b=this.text.substring(this.text.length-2);this.text="\r"==b||"\n"==b?this.text.slice(0,-2):this.text.slice(0,-1)}this.addText("")}},getLines:function(b,d,e){d=d.split(/[ ]/);for(var f=[],g="",j=0;j<d.length;j++){var l=
d[j],n=l.split(/[\r|\n]/);if(1<n.length){var m=b.measureText(g+" "+n[0]).width;m<e?g=""==g?g+n[0]:g+(" "+n[0]):(f.push(g),g=n[0]);for(l=1;l<n.length;l++)f.push(g),g=n[l]}else m=b.measureText(g+" "+l).width,m<e?g=""==g?g+l:g+(" "+l):(f.push(g),g=l)}f.push(g);return f}})});ig.baked=!0;
ig.module("plugins.tiered-rv.rv-sample-control").requires("impact.entity").defines(function(){EntityRvSampleControl=ig.Entity.extend({ignorePause:!0,zIndex:9999999,init:function(b,d,e){this.parent(b,d,e)},update:function(){this.parent();0<this.sampleRV_curDur&&(this.sampleRV_curDur-=ig.system.tick,0>=this.sampleRV_curDur&&this.sample_rv_end())},draw:function(){var b=ig.system.context;b.save();0<this.sampleRV_curDur&&(b.globalAlpha=0.25,b.fillStyle="#000000",b.fillRect(0,0,ig.system.width,ig.system.height),
b.globalAlpha=1,b.font="100px Arial",b.fillStyle="#FFFFFF",b.textAlign="center",b.fillText("Test RV is playing...",ig.system.width/2,ig.system.height/2));b.restore()},sampleRV_dur:1,sampleRV_curDur:0,sampleRV_cbSuccess:null,sampleRV_cbFail:null,sample_rv_start:function(b,d){this.sampleRV_curDur=this.sampleRV_dur;this.sampleRV_cbSuccess=b;this.sampleRV_cbFail=d},sample_rv_end:function(){this.sampleRV_cbSuccess()}})});ig.baked=!0;
ig.module("game.entities.buttons.button-option").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonOption=EntityButton.extend({type:ig.Entity.TYPE.A,size:{x:640*_DATAGAME.ratioRes,y:120*_DATAGAME.ratioRes},sizeOption:{x:510*_DATAGAME.ratioRes,y:120*_DATAGAME.ratioRes},sizeCurrency:{x:170*_DATAGAME.ratioRes,y:120*_DATAGAME.ratioRes},distButton:10*_DATAGAME.ratioRes,rounded:15*_DATAGAME.ratioRes,halfSize:null,zIndex:_DATAGAME.zIndexData.buttonOption,
alpha:1,textButton:"",fontSize:30*_DATAGAME.ratioRes,fontSizeCost:35*_DATAGAME.ratioRes,hasClick:!1,noOption:1,dummy:0,enabled:!0,cost:0,costType:-1,posX:0,iconCurrency:new ig.Image(_BASEPATH.ui+_DATAGAME.uiTheme+"/rv-icon.png"),chatBubble:null,startXDef:0,isHover:!1,isMouseOver:!1,init:function(b,d,e){this.parent(b,d,e);null!=_DATAGAME.uiColor[_DATAGAME.uiTheme].optioncorner&&(this.rounded=_DATAGAME.uiColor[_DATAGAME.uiTheme].optioncorner*_DATAGAME.ratioRes);0<=_DATAGAME.optionButton.corner&&(this.rounded=
_DATAGAME.optionButton.corner*_DATAGAME.ratioRes);this.reloadSize();ig.global.wm||this.repos()},reloadSize:function(){"du"==this._parent.optionType?(this.size={x:300*_DATAGAME.ratioRes,y:-1!=this.costType?60*_DATAGAME.ratioRes+this.distButton+60*_DATAGAME.ratioRes:60*_DATAGAME.ratioRes},this.sizeOption={x:300*_DATAGAME.ratioRes,y:60*_DATAGAME.ratioRes},this.sizeCurrency={x:170*_DATAGAME.ratioRes,y:60*_DATAGAME.ratioRes}):-1==this.costType?(this.size={x:this.sizeOption.x,y:120*_DATAGAME.ratioRes},
this.posX=(this.sizeCurrency.x+this.distButton)/2):(this.size={x:this.sizeOption.x+this.sizeCurrency.x+this.distButton,y:120*_DATAGAME.ratioRes},this.posX=0);this.halfSize={x:this.size.x/2,y:this.size.y/2};this.halfSizeOption={x:this.sizeOption.x/2,y:this.sizeOption.y/2};this.startXDef="du"==this._parent.optionType?this.halfSizeOption.x-this.sizeCurrency.x/2:this.sizeOption.x+this.distButton;if(-1!=this.costType)if(0==this.costType)this.iconCurrency=new ig.Image(_BASEPATH.ui+_DATAGAME.uiTheme+"/rv-icon.png");
else{this.iconCurrency=new ig.Image(_RESOURCESINFO.image["vc"+this.costType]);var b=ig.system.context;b.font=this.fontSizeCost+"px metromed";this.wCost=b.measureText(this.cost).width;this.xCost=this.startXDef+this.sizeCurrency.x/2;this.wAll=this.iconCurrency.width+10*_DATAGAME.ratioRes+this.wCost;this.xCostText=this.xCost-this.wAll/2+this.iconCurrency.width+10*_DATAGAME.ratioRes}},hover:function(){this.isMouseOver=this.isHover=!0;0!=ig.game.currentWindow.optionSelectedByKeyboard&&this.noOption!=ig.game.currentWindow.optionSelectedByKeyboard&&
(ig.game.currentWindow.buttons["btnOption"+ig.game.currentWindow.optionSelectedByKeyboard].isHover=!1);ig.game.currentWindow.optionSelectedByKeyboard=this.noOption},leave:function(){this.isMouseOver&&(this.isMouseOver=this.isHover=!1,ig.game.currentWindow.optionSelectedByKeyboard=0)},drawBox:function(b){var d=0,e=8*_DATAGAME.ratioRes;b.beginPath();b.moveTo(d+this.rounded,e);b.lineTo(d+this.sizeOption.x-this.rounded,e);b.quadraticCurveTo(d+this.sizeOption.x,e,d+this.sizeOption.x,e+this.rounded);b.lineTo(d+
this.sizeOption.x,e+this.sizeOption.y-this.rounded);b.quadraticCurveTo(d+this.sizeOption.x,e+this.sizeOption.y,d+this.sizeOption.x-this.rounded,e+this.sizeOption.y);b.lineTo(d+this.rounded,e+this.sizeOption.y);b.quadraticCurveTo(d,e+this.sizeOption.y,d,e+this.sizeOption.y-this.rounded);b.lineTo(d,e+this.rounded);b.quadraticCurveTo(d,e,d+this.rounded,e);b.closePath();b.fillStyle=this.enabled?this.hasClick?_DATAGAME.uiColor[_DATAGAME.uiTheme].optionclickshadow:this.isHover?_DATAGAME.uiColor[_DATAGAME.uiTheme].optionhovershadow:
_DATAGAME.uiColor[_DATAGAME.uiTheme].optionupshadow:_DATAGAME.uiColor[_DATAGAME.uiTheme].optiongreyshadow;b.fill();-1!=this.costType&&(d=this.startXDef,"du"==this._parent.optionType&&(e+=this.sizeOption.y+this.distButton),b.beginPath(),b.moveTo(d+this.rounded,e),b.lineTo(d+this.sizeCurrency.x-this.rounded,e),b.quadraticCurveTo(d+this.sizeCurrency.x,e,d+this.sizeCurrency.x,e+this.rounded),b.lineTo(d+this.sizeCurrency.x,e+this.sizeCurrency.y-this.rounded),b.quadraticCurveTo(d+this.sizeCurrency.x,e+
this.sizeCurrency.y,d+this.sizeCurrency.x-this.rounded,e+this.sizeCurrency.y),b.lineTo(d+this.rounded,e+this.sizeCurrency.y),b.quadraticCurveTo(d,e+this.sizeCurrency.y,d,e+this.sizeCurrency.y-this.rounded),b.lineTo(d,e+this.rounded),b.quadraticCurveTo(d,e,d+this.rounded,e),b.closePath(),b.fillStyle=this.enabled?this.hasClick?_DATAGAME.uiColor[_DATAGAME.uiTheme].optionclickshadow:this.isHover?_DATAGAME.uiColor[_DATAGAME.uiTheme].optionhovershadow:_DATAGAME.uiColor[_DATAGAME.uiTheme].optionupshadow:
_DATAGAME.uiColor[_DATAGAME.uiTheme].optiongreyshadow,b.fill());e=d=0;b.beginPath();b.moveTo(d+this.rounded,e);b.lineTo(d+this.sizeOption.x-this.rounded,e);b.quadraticCurveTo(d+this.sizeOption.x,e,d+this.sizeOption.x,e+this.rounded);b.lineTo(d+this.sizeOption.x,e+this.sizeOption.y-this.rounded);b.quadraticCurveTo(d+this.sizeOption.x,e+this.sizeOption.y,d+this.sizeOption.x-this.rounded,e+this.sizeOption.y);b.lineTo(d+this.rounded,e+this.sizeOption.y);b.quadraticCurveTo(d,e+this.sizeOption.y,d,e+this.sizeOption.y-
this.rounded);b.lineTo(d,e+this.rounded);b.quadraticCurveTo(d,e,d+this.rounded,e);b.closePath();b.fillStyle=this.enabled?this.hasClick?_DATAGAME.uiColor[_DATAGAME.uiTheme].optionclick:this.isHover?_DATAGAME.uiColor[_DATAGAME.uiTheme].optionhover:_DATAGAME.uiColor[_DATAGAME.uiTheme].optionup:_DATAGAME.uiColor[_DATAGAME.uiTheme].optiongrey;b.fill();-1!=this.costType&&(d=this.startXDef,"du"==this._parent.optionType&&(e=this.sizeOption.y+this.distButton),b.beginPath(),b.moveTo(d+this.rounded,e),b.lineTo(d+
this.sizeCurrency.x-this.rounded,e),b.quadraticCurveTo(d+this.sizeCurrency.x,e,d+this.sizeCurrency.x,e+this.rounded),b.lineTo(d+this.sizeCurrency.x,e+this.sizeCurrency.y-this.rounded),b.quadraticCurveTo(d+this.sizeCurrency.x,e+this.sizeCurrency.y,d+this.sizeCurrency.x-this.rounded,e+this.sizeCurrency.y),b.lineTo(d+this.rounded,e+this.sizeCurrency.y),b.quadraticCurveTo(d,e+this.sizeCurrency.y,d,e+this.sizeCurrency.y-this.rounded),b.lineTo(d,e+this.rounded),b.quadraticCurveTo(d,e,d+this.rounded,e),
b.closePath(),b.fillStyle=this.enabled?this.hasClick?_DATAGAME.uiColor[_DATAGAME.uiTheme].optionclick:this.isHover?_DATAGAME.uiColor[_DATAGAME.uiTheme].optionhover:_DATAGAME.uiColor[_DATAGAME.uiTheme].optionup:_DATAGAME.uiColor[_DATAGAME.uiTheme].optiongrey,b.fill());if(-1!=this.costType)if(0==this.costType){b=this.iconCurrency.width;var f=this.iconCurrency.height;"du"==this._parent.optionType?this.iconCurrency.draw(d+this.sizeCurrency.x/2-0.73*(this.iconCurrency.width/2),e+this.sizeCurrency.y/2-
0.73*(this.iconCurrency.height/2),0,0,b,f,0.73*b,0.73*f):this.iconCurrency.draw(d+this.sizeCurrency.x/2-this.iconCurrency.width/2,e+this.sizeCurrency.y/2-this.iconCurrency.height/2)}else this.iconCurrency.draw(this.xCost-this.wAll/2,e+this.sizeCurrency.y/2-this.iconCurrency.height/2),b.font=this.fontSizeCost+"px metromed",b.textAlign="left",b.fillStyle=this.enabled?_DATAGAME.uiColor[_DATAGAME.uiTheme].optiontext:_DATAGAME.uiColor[_DATAGAME.uiTheme].optiontextgrey,b.fillText(this.cost,this.xCostText,
e+this.sizeCurrency.y/2+11*_DATAGAME.ratioRes)},spawnChatBubble:function(b){var d=30*_DATAGAME.ratioRes,e=15*_DATAGAME.ratioRes,f=1,g=3==this.noOption?0:1,j=3==this.noOption?1:0,l=ig.sizeHandler.minW/2-this.sizeCurrency.x/2,n=3==this.noOption?ig.sizeHandler.minH/2+this._parent.getBubbleHeight()+(this.noOption-1)*140*_DATAGAME.ratioRes-this.sizeCurrency.y/2:ig.sizeHandler.minH/2+this._parent.getBubbleHeight()+(this.noOption-1)*140*_DATAGAME.ratioRes-this.sizeCurrency.y+10*_DATAGAME.ratioRes;"rectangle"==
_DATAGAME.dialogStyle.toLowerCase()&&(n=ig.sizeHandler.minH/2+0+(this.noOption-1)*140*_DATAGAME.ratioRes-this.sizeCurrency.y+10*_DATAGAME.ratioRes);"du"==this._parent.optionType&&(n=ig.sizeHandler.minH-300*_DATAGAME.ratioRes,1==this.noOption?(l-=200*_DATAGAME.ratioRes,f=0,g=1,j=0):l+=150*_DATAGAME.ratioRes);this.chatBubble=ig.game.spawnChatBubble(this,{zIndex:_DATAGAME.zIndexData.chatBubbleOption,chatBubbleDrawConfigs:{textConfigs:{fullText:b,text:b,fillStyle:"black",textAlign:"left",fontSize:Math.round(1*
ig.game.fontBubbleSize*_DATAGAME.ratioRes*ig.game.fontRatio),fontFamily:ig.game.fontBubbleThin},avatarConfigs:{image:null,size:{x:100,y:100},padding:{x:4,y:4}},bubbleConfigs:{lineWidth:4*_DATAGAME.ratioRes,fillStyle:"white",strokeStyle:"black",shadowColor:"black",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,box:{width:100*_DATAGAME.ratioRes,height:60*_DATAGAME.ratioRes,round:30*_DATAGAME.ratioRes,padding:{x:25*_DATAGAME.ratioRes,y:30*_DATAGAME.ratioRes}},tail:{length:d,width:e,direction:{x:f,y:g,
stretchx:j,stretchy:0}}}},chatBubbleAppearTime:0.3,chatBubbleAliveTime:2,chatBubbleDisappearTime:0.3,chatBubblePercent:{x:0.5,y:0},chatBubbleOffset:{x:0,y:0},parentPos:{x:l,y:n},chatBubbleAlpha:1,boolNotif:!0})},draw:function(){this.parent();this.enabled=1<=this.costType&&this.costType<=_DATAGAME.totalVirtualCurrency&&this.cost>ig.game.currentWindow["virtualCurrency"+this.costType]?!1:!0;if(this.visible){var b=ig.system.context;b.save();b.globalAlpha=this.alpha;b.translate(this.pos.x+this.offset.x,
this.pos.y+this.offset.y);this.drawBox(b);var d=Math.round(0.54*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);b.font=d+"px "+ig.game.fontNameThin;b.textAlign="center";b.fillStyle=this.enabled?_DATAGAME.uiColor[_DATAGAME.uiTheme].optiontext:_DATAGAME.uiColor[_DATAGAME.uiTheme].optiontextgrey;d=ig.game.wordWrap(this.textButton,this.sizeOption.x-20*_DATAGAME.ratioRes,d,ig.game.fontNameThin);ig.game.drawText(d,this.fontSize*ig.game.fontRatio,b,this.halfSizeOption.x+5*_DATAGAME.ratioRes,this.halfSizeOption.y+
10*_DATAGAME.ratioRes-1.1*(d.length-1)*this.fontSize*ig.game.fontRatio/2);b.restore()}},showOption:function(b,d){b?(this.hasClick=!1,this.alpha=0,this.visible=!0,this.isClickable=!1,this.enabled=!0,this.tween({alpha:1},0.2,{onComplete:function(){this.isClickable=!0}.bind(this)}).start(),1<=this.costType&&(3>=this.costType&&this.cost>ig.game.currentWindow["virtualCurrency"+this.costType])&&(this.enabled=!1)):(this.isClickable=!1,this.tween({alpha:0},0.1,{delay:0.3,onComplete:function(){this.visible=
!1;d&&("du"==this._parent.optionType?this._parent.hideDU():(this._parent.isBubble=!1,this._parent.loadBubbleOption()))}.bind(this)}).start())},funcComplete:function(){},clicked:function(){if(this.visible&&this.isClickable)if(this.sinkingEffect(),this.enabled)if(0==this.costType)ig.soundHandler.sfxPlayer.play("click"),this._parent.optionSelected=this.noOption,ig.tieredRV.rv_btn_pressed(5,ig.tieredRV);else{if("du"==this._parent.optionType){var b=this.textButton.replaceAll(" ","");ig.game.sessionData.dressUpTheme[this._parent.numChapter].now=
b.toLowerCase();b=this._parent.arrChar.indexOf("Amy");this._parent["sptChar"+b].changeDU(ig.game.sessionData.dressUpTheme[this._parent.numChapter].now);ig.game.currentWindow.saveToLogHistory(this.textButton)}this._parent.optionSelected=this.noOption;this._parent.buttons.btnOption1.isClickable=!1;this._parent.buttons.btnOption2.isClickable=!1;this._parent.buttons.btnOption3.isClickable=!1;this._parent.buttons.btnOption1.showOption(!1,!0);this._parent.buttons.btnOption2.showOption(!1,!1);this._parent.buttons.btnOption3.showOption(!1,
!1);this.hasClick=!0;-1!=this.costType?(ig.soundHandler.sfxPlayer.play("cashier"),this._parent["virtualCurrency"+this.costType]-=this.cost):ig.soundHandler.sfxPlayer.play("click");this._parent.checkOptionReward();this._parent.entityGame.uiCurrency.repos();this._parent.entityGame.uiCurrency.showUI(!1);for(b=1;b<=_DATAGAME.totalVirtualCurrency;b++)ig.game.sessionData["virtualCurrency"+b]=this["virtualCurrency"+b]}else ig.soundHandler.sfxPlayer.play("click"),1<=this.costType&&this.spawnChatBubble(_STRINGS.Game.notenough+
" "+_STRINGS.Currency["vc"+this.costType].toLowerCase())},clicking:function(){},released:function(){},repos:function(){}})});ig.baked=!0;
ig.module("game.entities.buttons.button-show").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonShow=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.miniButton,gap:{x:0,y:0},imageShow:new ig.Image(_RESOURCESINFO.image.btnShow),imageHide:new ig.Image(_RESOURCESINFO.image.btnHide),defsize:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},size:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},defPos:{x:98*_DATAGAME.ratioRes,
y:96*_DATAGAME.ratioRes},init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){},clicked:function(){if(this.visible&&this.isClickable&&(null==ig.game.transition||!ig.game.transition.isRunning))ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect(),ig.game.openMiniButton=!ig.game.openMiniButton?!0:!1,ig.game.currentWindow.miniButtonOpenedBefore=ig.game.openMiniButton,ig.game.currentWindow.reposMiniButton(),
ig.game.currentWindow.delayClickButton(),this.repos()},draw:function(){this.parent();if(this.visible&&ig.game.showMiniButton){var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);ig.game.openMiniButton?this.imageHide.draw(0,0):this.imageShow.draw(0,0);b.font=Math.round(_DATAGAME.miniButton.fontSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName;b.textAlign="center";b.textBaseline="bottom";"none"!=_DATAGAME.miniButton.outlineColor&&""!=_DATAGAME.miniButton.outlineColor&&
(b.strokeStyle=_DATAGAME.miniButton.outlineColor,b.lineWidth=5*_DATAGAME.ratioRes,b.lineCap="round",b.lineJoin="round",b.strokeText(!ig.game.openMiniButton?_STRINGS.Button.show:_STRINGS.Button.hide,this.halfSize.x,this.size.y+_DATAGAME.miniButton.textOffset.y*_DATAGAME.ratioRes));b.fillStyle=_DATAGAME.miniButton.textColor;b.fillText(!ig.game.openMiniButton?_STRINGS.Button.show:_STRINGS.Button.hide,this.halfSize.x,this.size.y+_DATAGAME.miniButton.textOffset.y*_DATAGAME.ratioRes);b.restore()}},repos:function(){this.pos.x=
ig.system.width-this.size.x-25;this.pos.y=ig.game.openMiniButton?ig.game.currentWindow.isShowingButtonShop?25+this.size.y+(_DATAGAME.miniButton.padding.y+this.size.y)*(ig.game.listMiniButton.length+1)+_DATAGAME.miniButton.padding.y:25+this.size.y+(_DATAGAME.miniButton.padding.y+this.size.y)*ig.game.listMiniButton.length+_DATAGAME.miniButton.padding.y:ig.game.currentWindow.isShowingButtonShop?25+2*(this.size.y+_DATAGAME.miniButton.padding.y):25+this.size.y+_DATAGAME.miniButton.padding.y}})});
ig.baked=!0;
ig.module("game.entities.buttons.button-save").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonSave=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.miniButton,gap:{x:0,y:0},imageSave:new ig.Image(_RESOURCESINFO.image.btnSave),defsize:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},size:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},defPos:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},init:function(b,d,e){this.parent(b,
d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){},clicked:function(){if(this.visible&&this.isClickable&&(null==ig.game.transition||!ig.game.transition.isRunning))this.sinkingEffect(),ig.game.currentWindow.delayClickButton(),ig.game.pauseGameviaButton(this,"uiSaveLoad"),this._parent.uiSaveLoad.show("save"),ig.game.openMiniButton=!1,ig.game.currentWindow.reposMiniButton(),this.repos()},draw:function(){this.parent();if(this.visible&&ig.game.showMiniButton){var b=
ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.imageSave.draw(0,0);b.font=Math.round(_DATAGAME.miniButton.fontSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName;b.textAlign="center";b.textBaseline="bottom";"none"!=_DATAGAME.miniButton.outlineColor&&""!=_DATAGAME.miniButton.outlineColor&&(b.strokeStyle=_DATAGAME.miniButton.outlineColor,b.lineWidth=5*_DATAGAME.ratioRes,b.lineCap="round",b.lineJoin="round",b.strokeText(_STRINGS.Button.save,
this.halfSize.x,this.size.y+_DATAGAME.miniButton.textOffset.y*_DATAGAME.ratioRes));b.fillStyle=_DATAGAME.miniButton.textColor;b.fillText(_STRINGS.Button.save,this.halfSize.x,this.size.y+_DATAGAME.miniButton.textOffset.y*_DATAGAME.ratioRes);b.restore()}},repos:function(){this.pos.x=ig.system.width-this.size.x-25;this.pos.y=ig.game.openMiniButton?ig.game.currentWindow.isShowingButtonShop?25+this.size.y+(_DATAGAME.miniButton.padding.y+this.size.y)*(ig.game.listMiniButton.indexOf("save")+1)+_DATAGAME.miniButton.padding.y:
25+this.size.y+(_DATAGAME.miniButton.padding.y+this.size.y)*ig.game.listMiniButton.indexOf("save")+_DATAGAME.miniButton.padding.y:2*-this.size.y}})});ig.baked=!0;
ig.module("game.entities.buttons.button-load").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonLoad=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.miniButton,gap:{x:0,y:0},imageLoad:new ig.Image(_RESOURCESINFO.image.btnLoad),defsize:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},size:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},defPos:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},init:function(b,d,e){this.parent(b,
d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){},clicked:function(){if(this.visible&&this.isClickable&&(null==ig.game.transition||!ig.game.transition.isRunning))this.sinkingEffect(),"menu"==ig.game.windowName?(ig.soundHandler.sfxPlayer.play("click"),this._parent.enabledButton(!1,!0),this._parent.uiSaveLoad.show("load")):(ig.game.currentWindow.delayClickButton(),ig.game.pauseGameviaButton(this,"uiSaveLoad"),this._parent.uiSaveLoad.show("load"),
ig.game.openMiniButton=!1,ig.game.currentWindow.reposMiniButton()),this.repos()},draw:function(){this.parent();if(this.visible&&ig.game.showMiniButton){var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.imageLoad.draw(0,0);b.font=Math.round(_DATAGAME.miniButton.fontSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName;b.textAlign="center";b.textBaseline="bottom";"none"!=_DATAGAME.miniButton.outlineColor&&""!=_DATAGAME.miniButton.outlineColor&&
(b.strokeStyle=_DATAGAME.miniButton.outlineColor,b.lineWidth=5*_DATAGAME.ratioRes,b.lineCap="round",b.lineJoin="round",b.strokeText(_STRINGS.Button.load,this.halfSize.x,this.size.y+_DATAGAME.miniButton.textOffset.y*_DATAGAME.ratioRes));b.fillStyle=_DATAGAME.miniButton.textColor;b.fillText(_STRINGS.Button.load,this.halfSize.x,this.size.y+_DATAGAME.miniButton.textOffset.y*_DATAGAME.ratioRes);b.restore()}},repos:function(){this.pos.x=ig.system.width-this.size.x-25;this.pos.y="menu"==ig.game.windowName?
25+this.size.y+_DATAGAME.miniButton.padding.y:ig.game.openMiniButton?ig.game.currentWindow.isShowingButtonShop?25+this.size.y+(_DATAGAME.miniButton.padding.y+this.size.y)*(ig.game.listMiniButton.indexOf("load")+1)+_DATAGAME.miniButton.padding.y:25+this.size.y+(_DATAGAME.miniButton.padding.y+this.size.y)*ig.game.listMiniButton.indexOf("load")+_DATAGAME.miniButton.padding.y:2*-this.size.y}})});ig.baked=!0;
ig.module("game.entities.buttons.button-log").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonLog=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.miniButton,gap:{x:0,y:0},imageLog:new ig.Image(_RESOURCESINFO.image.btnLog),defsize:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},size:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},defPos:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},init:function(b,d,e){this.parent(b,
d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){},clicked:function(){if(this.visible&&this.isClickable&&(null==ig.game.transition||!ig.game.transition.isRunning))this.sinkingEffect(),ig.game.currentWindow.delayClickButton(),ig.game.pauseGameviaButton(this,"uiLog"),this._parent.uiLog.show(),ig.game.openMiniButton=!1,ig.game.currentWindow.reposMiniButton(),this.repos()},draw:function(){this.parent();if(this.visible&&ig.game.showMiniButton){var b=
ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);this.imageLog.draw(0,0);b.font=Math.round(_DATAGAME.miniButton.fontSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName;b.textAlign="center";b.textBaseline="bottom";"none"!=_DATAGAME.miniButton.outlineColor&&""!=_DATAGAME.miniButton.outlineColor&&(b.strokeStyle=_DATAGAME.miniButton.outlineColor,b.lineWidth=5*_DATAGAME.ratioRes,b.lineCap="round",b.lineJoin="round",b.strokeText(_STRINGS.Button.log,
this.halfSize.x,this.size.y+_DATAGAME.miniButton.textOffset.y*_DATAGAME.ratioRes));b.fillStyle=_DATAGAME.miniButton.textColor;b.fillText(_STRINGS.Button.log,this.halfSize.x,this.size.y+_DATAGAME.miniButton.textOffset.y*_DATAGAME.ratioRes);b.restore()}},repos:function(){this.pos.x=ig.system.width-this.size.x-25;this.pos.y=ig.game.openMiniButton?ig.game.currentWindow.isShowingButtonShop?25+this.size.y+(_DATAGAME.miniButton.padding.y+this.size.y)*(ig.game.listMiniButton.indexOf("log")+1)+_DATAGAME.miniButton.padding.y:
25+this.size.y+(_DATAGAME.miniButton.padding.y+this.size.y)*ig.game.listMiniButton.indexOf("log")+_DATAGAME.miniButton.padding.y:2*-this.size.y}})});ig.baked=!0;
ig.module("game.entities.buttons.button-auto").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonAuto=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.miniButton,gap:{x:0,y:0},imageAutoOff:new ig.Image(_RESOURCESINFO.image.btnAuto),imageAutoOn:new ig.Image(_RESOURCESINFO.image.btnAuto2),defsize:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},size:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},defPos:{x:98*_DATAGAME.ratioRes,
y:96*_DATAGAME.ratioRes},init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){},clicked:function(){if(this.visible&&this.isClickable&&(null==ig.game.transition||!ig.game.transition.isRunning))ig.soundHandler.sfxPlayer.play("click"),ig.game.dialogAutoStatus=ig.game.dialogAutoStatus==ig.game.STAT_DIALOG_AUTO?ig.game.STAT_DIALOG_NORMAL:ig.game.STAT_DIALOG_AUTO,ig.game.setAutoDialog(),this.sinkingEffect(),ig.game.currentWindow.delayClickButton(),
this.repos()},draw:function(){this.parent();if(this.visible&&ig.game.showMiniButton){var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);ig.game.dialogAutoStatus==ig.game.STAT_DIALOG_AUTO?this.imageAutoOn.draw(0,0):this.imageAutoOff.draw(0,0);b.font=Math.round(_DATAGAME.miniButton.fontSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName;b.textAlign="center";b.textBaseline="bottom";"none"!=_DATAGAME.miniButton.outlineColor&&""!=_DATAGAME.miniButton.outlineColor&&
(b.strokeStyle=_DATAGAME.miniButton.outlineColor,b.lineWidth=5*_DATAGAME.ratioRes,b.lineCap="round",b.lineJoin="round",b.strokeText(_STRINGS.Button.auto,this.halfSize.x,this.size.y+_DATAGAME.miniButton.textOffset.y*_DATAGAME.ratioRes));b.fillStyle=_DATAGAME.miniButton.textColor;b.fillText(_STRINGS.Button.auto,this.halfSize.x,this.size.y+_DATAGAME.miniButton.textOffset.y*_DATAGAME.ratioRes);b.restore()}},repos:function(){this.pos.x=ig.system.width-this.size.x-25;this.pos.y=ig.game.openMiniButton?ig.game.currentWindow.isShowingButtonShop?
25+this.size.y+(_DATAGAME.miniButton.padding.y+this.size.y)*(ig.game.listMiniButton.indexOf("auto")+1)+_DATAGAME.miniButton.padding.y:25+this.size.y+(_DATAGAME.miniButton.padding.y+this.size.y)*ig.game.listMiniButton.indexOf("auto")+_DATAGAME.miniButton.padding.y:2*-this.size.y}})});ig.baked=!0;
ig.module("game.entities.buttons.button-skip").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonSkip=EntityButton.extend({type:ig.Entity.TYPE.A,zIndex:_DATAGAME.zIndexData.miniButton,gap:{x:0,y:0},imageSkipOn:new ig.Image(_RESOURCESINFO.image.btnSkip2),imageSkipOff:new ig.Image(_RESOURCESINFO.image.btnSkip),defsize:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},size:{x:98*_DATAGAME.ratioRes,y:96*_DATAGAME.ratioRes},defPos:{x:98*_DATAGAME.ratioRes,
y:96*_DATAGAME.ratioRes},init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},funcComplete:function(){},clicked:function(){if(this.visible&&this.isClickable&&(null==ig.game.transition||!ig.game.transition.isRunning))ig.soundHandler.sfxPlayer.play("click"),ig.game.dialogAutoStatus=ig.game.dialogAutoStatus==ig.game.STAT_DIALOG_SKIP?ig.game.STAT_DIALOG_NORMAL:ig.game.STAT_DIALOG_SKIP,ig.game.setAutoDialog(),this.sinkingEffect(),ig.game.currentWindow.delayClickButton(),
this.repos()},draw:function(){this.parent();if(this.visible&&ig.game.showMiniButton){var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);ig.game.dialogAutoStatus==ig.game.STAT_DIALOG_SKIP?this.imageSkipOn.draw(0,0):this.imageSkipOff.draw(0,0);b.font=Math.round(_DATAGAME.miniButton.fontSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName;b.textAlign="center";b.textBaseline="bottom";"none"!=_DATAGAME.miniButton.outlineColor&&""!=_DATAGAME.miniButton.outlineColor&&
(b.strokeStyle=_DATAGAME.miniButton.outlineColor,b.lineWidth=5*_DATAGAME.ratioRes,b.lineCap="round",b.lineJoin="round",b.strokeText(_STRINGS.Button.skip,this.halfSize.x,this.size.y+_DATAGAME.miniButton.textOffset.y*_DATAGAME.ratioRes));b.fillStyle=_DATAGAME.miniButton.textColor;b.fillText(_STRINGS.Button.skip,this.halfSize.x,this.size.y+_DATAGAME.miniButton.textOffset.y*_DATAGAME.ratioRes);b.restore()}},repos:function(){this.pos.x=ig.system.width-this.size.x-25;this.pos.y=ig.game.openMiniButton?ig.game.currentWindow.isShowingButtonShop?
25+this.size.y+(_DATAGAME.miniButton.padding.y+this.size.y)*(ig.game.listMiniButton.indexOf("skip")+1)+_DATAGAME.miniButton.padding.y:25+this.size.y+(_DATAGAME.miniButton.padding.y+this.size.y)*ig.game.listMiniButton.indexOf("skip")+_DATAGAME.miniButton.padding.y:2*-this.size.y}})});ig.baked=!0;
ig.module("game.entities.particle.bubble").requires("impact.entity").defines(function(){EntityBubble=ig.Entity.extend({zIndex:-1,startX:0,startY:0,speedX:0,speedY:0,radius:0,opacity:1,defSize:{x:9,y:60},init:function(b,d,e){this.parent(b,d,e);this.createBubble()},random:function(b,d){return Math.random()*(d-b)+b},createBubble:function(){this.speedX=this.random(-2,2);this.speedY=this.random(2,5);this.radius=this.random(50,70);this.opacity=0.5;var b=this.random(0,ig.system.width),d=ig.system.height+
this.radius;this.startX=b;this.startY=d;this.zIndex=this._parent.zIndex;ig.game.sortEntitiesDeferred()},update:function(){this.parent();!ig.game.isPauseSetting&&0!=ig.Timer.timeScale&&(this.startX+=this.speedX,this.startY-=this.speedY,this.startY<=-this.radius&&this.kill())},draw:function(){this.parent();var b=ig.system.context;b.save();b.translate(this.startX,this.startY);b.scale(ig.game.currentWindow.zoomBG,ig.game.currentWindow.zoomBG);b.globalAlpha=this.opacity;var d=b.createRadialGradient(0,
0,1,1,1,this.radius);d.addColorStop(0.4,ig.game.hexToRGBA("white",0));d.addColorStop(1,ig.game.hexToRGBA("white",1));b.beginPath();b.arc(0,0,this.radius,0,2*Math.PI,!1);b.fillStyle=d;b.fill();d=b.createRadialGradient(0,0,1,1,1,this.radius);d.addColorStop(0.4,ig.game.hexToRGBA(this.color,0));d.addColorStop(0.8,ig.game.hexToRGBA(this.color,0.3));d.addColorStop(0.95,ig.game.hexToRGBA(this.color,0.5));b.beginPath();b.arc(0,0,this.radius,0,2*Math.PI,!1);b.fillStyle=d;b.fill();b.restore();b.save();b.translate(this.startX-
this.radius/2,this.startY-this.radius/2);b.rotate(315*Math.PI/180);b.scale(1.7,0.8);b.globalAlpha=0.8;b.beginPath();b.arc(0,0,0.15*this.radius,0,2*Math.PI,!1);b.fillStyle="white";b.fill();b.restore()}})});ig.baked=!0;
ig.module("game.entities.particle.snow").requires("impact.entity").defines(function(){EntitySnow=ig.Entity.extend({zIndex:-1,startX:0,startY:0,speedX:0,speedY:0,radius:0,opacity:1,defSize:{x:9,y:60},init:function(b,d,e){this.parent(b,d,e);this.createSnow()},random:function(b,d){return Math.random()*(d-b)+b},createSnow:function(){var b=this.random(0,ig.system.width),d=this.random(-10,-5);this.speedX=this.random(-4,4);this.speedY=this.random(5,10);this.radius=this.random(7,20);this.opacity=this.random(0,
0.9);this.startX=b;this.startY=d;this.zIndex=this._parent.zIndex;ig.game.sortEntitiesDeferred()},update:function(){this.parent();!ig.game.isPauseSetting&&0!=ig.Timer.timeScale&&(this.startX+=this.speedX,this.startY+=this.speedY,this.startY>=ig.system.height+this.radius&&this.kill())},draw:function(){this.parent();var b=ig.system.context;b.save();b.translate(this.startX,this.startY);b.scale(ig.game.currentWindow.zoomBG,ig.game.currentWindow.zoomBG);b.globalAlpha=this.opacity;var d=b.createRadialGradient(0,
0,0,0,0,this.radius);d.addColorStop(0,this.color);d.addColorStop(0.8,ig.game.hexToRGBA(this.color,0));b.beginPath();b.arc(0,0,this.radius,0,2*Math.PI,!1);b.fillStyle=d;b.fill();b.restore()}})});ig.baked=!0;
ig.module("game.entities.particle.rain").requires("impact.entity").defines(function(){EntityRain=ig.Entity.extend({zIndex:-1,startX:0,startY:0,opacity:1,defSize:{x:9,y:60},init:function(b,d,e){this.parent(b,d,e);this.createRaindrop()},random:function(b,d){return Math.random()*(d-b)+b},createRaindrop:function(){var b=this.random(0,ig.system.width),d=this.random(-10,-5);this.startX=b;this.startY=d;d=this.random(0.5,2)*ig.system.height/ig.sizeHandler.minH;this.tweenRain=this.tween({startX:b+60,startY:ig.system.height+
this.defSize.y,opacity:0},d,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.kill()}.bind(this)});this.tweenRain.start();this.zIndex=this._parent.zIndex;ig.game.sortEntitiesDeferred()},draw:function(){this.parent();var b=ig.system.context;b.save();b.translate(this.startX,this.startY);b.scale(ig.game.currentWindow.zoomBG,ig.game.currentWindow.zoomBG);b.globalAlpha=this.opacity;var d=b.createLinearGradient(0,0,0,this.defSize.y);d.addColorStop(0,"rgba(255, 255, 255, 0)");d.addColorStop(1,
this.color);b.fillStyle=d;b.fillRect(0,0,this.defSize.x,this.defSize.y);b.restore()}})});ig.baked=!0;
ig.module("game.entities.particle.matrix").requires("impact.entity").defines(function(){EntityMatrix=ig.Entity.extend({zIndex:-1,fontSize:60,delay:0,counter:0,limit:3,letters:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%^&*(){}[]<>?/",init:function(b,d,e){this.parent(b,d,e);this.zIndex=this._parent.zIndex;ig.game.sortEntitiesDeferred();this.repos()},repos:function(){this.columns=Math.floor(ig.system.width/this.fontSize);this.drops=[];this.text=[];this.opacity=[];for(var b=0;b<this.columns;b++)this.drops[b]=
ig.game.calculateRandom(0,100),this.text[b]=this.letters[Math.floor(Math.random()*this.letters.length)],this.opacity[b]=Math.random()},random:function(b,d){return Math.random()*(d-b)+b},update:function(){this.parent();if(!ig.game.isPauseSetting&&0!=ig.Timer.timeScale&&(this.counter++,this.counter>=this.limit)){for(var b=0;b<this.drops.length;b++)this.opacity[b]=Math.random(),this.text[b]=this.letters[Math.floor(Math.random()*this.letters.length)],this.drops[b]++,this.drops[b]*this.fontSize>ig.system.height&&
0.95<Math.random()&&(this.drops[b]=0);this.counter=0}},draw:function(b){this.parent();b=ig.system.context;for(var d=0;d<this.drops.length;d++)b.save(),b.globalAlpha=this.opacity[d]*this._parent.opacityMatrix,b.scale(ig.game.currentWindow.zoomBG,ig.game.currentWindow.zoomBG),b.fillStyle=this.color,b.fillText(this.text[d],d*this.fontSize,this.drops[d]*this.fontSize),b.restore()}})});ig.baked=!0;
ig.module("game.entities.particle.fireworks").requires("impact.entity").defines(function(){EntityFireworks=ig.Entity.extend({zIndex:-1,posLaunch:{x:0,y:0},posTail:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],statFireworks:0,STAT_LAUNCH:1,STAT_SPARK:2,sparkType:"circle star double-spiral cross swirl flower heart ring-of-rings diamond hexagon spiral flurry triple-star random-burst wave".split(" "),sparkSize:["large","medium","small"],init:function(b,d,e){this.parent(b,d,e);this.launchRocket()},
repos:function(){},random:function(b,d){return Math.random()*(d-b)+b},launchRocket:function(){this.endPos={x:ig.system.width*ig.game.calculateRandom(15,85)/100,y:ig.system.height*ig.game.calculateRandom(20,80)/100};var b=1500+500*Math.random();ig.game.spawnEntity(EntityRocket,0,0,{_parent:this,_particleParent:this._parent,radLaunch:10,color:this.color,posLaunch:{x:this.endPos.x,y:ig.system.height-50},endPos:this.endPos.y,durLaunch:b,delay:0});for(var d=1;6>=d;d++)ig.game.spawnEntity(EntityRocket,
0,0,{_parent:this,_particleParent:this._parent,radLaunch:8-d,alpha:1-d/10,color:this.color,posLaunch:{x:this.endPos.x,y:ig.system.height-50+50*d},endPos:this.endPos.y,durLaunch:b,delay:0});ig.game.tweenDelay(this,b-100,function(){this.explode(this.color,this.sparkType[ig.game.calculateRandom(0,this.sparkType.length-1)],this.sparkSize[ig.game.calculateRandom(0,this.sparkSize.length-1)])}.bind(this))},explode:function(b,d,e){this.statFireworks=this.STAT_SPARK;b=50;b="small"===e?30:"large"===e?80:50;
d=this.getExplosionPattern(d);for(var f=0;f<b;f++){var g=d.angles&&d.angles.length?d.angles[f%d.angles.length]:2*Math.random()*Math.PI;this.createFragment(this.endPos.x,this.endPos.y,this.color,g,e,d.magnitude&&d.magnitude.length?d.magnitude[f%d.magnitude.length]:1)}},createFragment:function(b,d,e,f,g,j){e="small"===g?2:"large"===g?4:3;j*=e;g=70*Math.cos(f)*j;f=70*Math.sin(f)*j;var l=2E3+800*Math.random();ig.game.spawnEntity(EntitySpark,0,0,{_parent:this,_particleParent:this._parent,radLaunch:10,
baseVelocity:e,velocity:j,offsetX:g,offsetY:f,duration:l,color:this.color,posLaunch:{x:b,y:d}})},generateRandomArray:function(b,d){for(var e=[],f=0;f<b;f++)e.push(d());return e},getExplosionPattern:function(b){if("circle"===b){var d=[];for(b=0;30>b;b++)d.push(2*(b/30)*Math.PI);return{angles:d}}if("star"===b){d=[];for(b=0;15>b;b++)d.push(2*(b/15)*Math.PI),d.push(2*((b+0.2)/15)*Math.PI);return{angles:d}}if("double-spiral"===b){d=[];for(b=0;40>b;b++)d.push(b/10*Math.PI);for(var e=[],f=0;f<d.length;f++)e.push(0===
f%2?1:2);return{angles:d,magnitude:e}}if("cross"===b){e=[0,Math.PI/2,Math.PI,3*Math.PI/2];d=[];for(f=0;10>f;f++)for(b=0;b<e.length;b++)d.push(e[b]);return{angles:d}}if("swirl"===b){d=[];for(b=0;60>b;b++)d.push(0.2*b);e=[];for(f=0;f<d.length;f++)e.push(0.5+0.05*b);return{angles:d,magnitude:e}}if("flower"===b){d=[];e=[];for(b=0;36>b;b++)d.push(2*Math.PI*b/36),e.push(0===b%2?1.2:0.7);return{angles:d,magnitude:e}}if("heart"===b){d=[];for(b=0;50>b;b++)d.push(b/25*Math.PI);e=this.generateRandomArray(d.length,
function(){return 1+1*Math.random()});return{angles:d,magnitude:e}}if("ring-of-rings"===b){d=[];e=[];for(f=1;3>=f;f++)for(b=0;20>b;b++)d.push(2*Math.PI*b/20),e.push(f);return{angles:d,magnitude:e}}if("diamond"===b){e=[Math.PI/4,3*Math.PI/4,5*Math.PI/4,7*Math.PI/4];d=[];for(b=0;10>b;b++)for(f=0;f<e.length;f++)d.push(e[f]);return{angles:d}}if("hexagon"===b){d=[];e=[0,Math.PI/3,2*Math.PI/3,Math.PI,4*Math.PI/3,5*Math.PI/3];for(b=0;10>b;b++)for(f=0;f<e.length;f++)d.push(e[f]);return{angles:d}}if("spiral"===
b){d=[];for(b=0;50>b;b++)d.push(0.3*b);e=[];for(f=0;f<d.length;f++)e.push(0.4+0.1*f);return{angles:d,magnitude:e}}if("flurry"===b)return d=this.generateRandomArray(60,function(){return 2*Math.random()*Math.PI}),e=this.generateRandomArray(60,function(){return 0.5+1.5*Math.random()}),{angles:d,magnitude:e};if("triple-star"===b){d=[];for(e=0;3>e;e++)for(b=0;15>b;b++)d.push(2*(b/15)*Math.PI),d.push(2*((b+0.2)/15)*Math.PI);return{angles:d}}if("random-burst"===b)return d=this.generateRandomArray(50,function(){return 2*
Math.random()*Math.PI}),e=this.generateRandomArray(50,function(){return 0.5+2*Math.random()}),{angles:d,magnitude:e};if("wave"===b){d=[];e=[];for(b=0;40>b;b++)f=2*(b/40)*Math.PI,d.push(f),e.push(1+Math.sin(4*f));return{angles:d,magnitude:e}}d=this.generateRandomArray(30,function(){return 2*Math.random()*Math.PI});e=this.generateRandomArray(30,function(){return 0.5+1.5*Math.random()});return{angles:d,magnitude:e}},update:function(){this.parent()},draw:function(){this.parent()}});EntitySpark=ig.Entity.extend({zIndex:-1,
posLaunch:{x:0,y:0},radLaunch:10,delay:0,alpha:1,scale:1,statFireworks:0,STAT_NONE:0,STAT_SPARK:1,init:function(b,d,e){this.parent(b,d,e);this.createSpark()},repos:function(){},random:function(b,d){return Math.random()*(d-b)+b},createSpark:function(){this.offset={x:0,y:0};this.tweenSpark=this.tween({offset:{x:this.offsetX,y:this.offsetY},alpha:0,scale:0.3},this.duration/1E3,{easing:ig.Tween.Easing.Quadratic.EaseOut,onComplete:function(){this.kill()}.bind(this)});this.tweenSpark.start();this.zIndex=
this._particleParent.zIndex;ig.game.sortEntitiesDeferred()},update:function(){this.parent()},draw:function(b){this.parent();b=ig.system.context;b.save();b.globalAlpha=this.alpha;b.translate(this.posLaunch.x+this.offset.x,this.posLaunch.y+this.offset.y);b.scale(this.scale*ig.game.currentWindow.zoomBG,this.scale*ig.game.currentWindow.zoomBG);b.beginPath();b.arc(0,0,this.radLaunch,0,2*Math.PI,!1);b.fillStyle=this.color;b.fill();b.restore()}});EntityRocket=ig.Entity.extend({zIndex:-1,posLaunch:{x:0,y:0},
radLaunch:10,delay:0,alpha:1,statFireworks:0,STAT_NONE:0,STAT_LAUNCH:1,init:function(b,d,e){this.parent(b,d,e);0>=this.delay?this.launchRocket():ig.game.tweenDelay(this,1E3*this.delay,this.launchRocket.bind(this));this.launchRocket()},repos:function(){},random:function(b,d){return Math.random()*(d-b)+b},launchRocket:function(){this.statFireworks=this.STAT_LAUNCH;this.tweenLaunch=this.tween({posLaunch:{y:this.endPos}},this.durLaunch/1E3,{easing:ig.Tween.Easing.Quadratic.EaseOut,onComplete:function(){this.statFireworks=
this.STAT_NONE;this.kill()}.bind(this)});this.tweenLaunch.start();this.zIndex=this._particleParent.zIndex;ig.game.sortEntitiesDeferred()},update:function(){this.parent()},draw:function(b){this.parent();b=ig.system.context;this.statFireworks==this.STAT_LAUNCH&&(b.save(),b.globalAlpha=this.alpha,b.translate(this.posLaunch.x,this.posLaunch.y),b.scale(ig.game.currentWindow.zoomBG,ig.game.currentWindow.zoomBG),b.beginPath(),b.arc(0,0,this.radLaunch,0,2*Math.PI,!1),b.fillStyle=this.color,b.fill(),b.restore())}})});
ig.baked=!0;
ig.module("game.entities.particle.meteor").requires("impact.entity").defines(function(){EntityMeteor=ig.Entity.extend({zIndex:-1,startX:0,startY:0,opacity:0.9,radiusGlow:40,radius:15,speedX:0,speedY:0,minSpeed:20,maxSpeed:40,defSize:{x:600,y:4},init:function(b,d,e){this.parent(b,d,e);this.createMeteor()},random:function(b,d){return Math.random()*(d-b)+b},createMeteor:function(){var b=this.random(ig.system.width/4,ig.system.width),d=this.random(-10,-5);50>=this.random(0,100)&&(b=ig.system.width+this.random(this.radius,
this.radiusGlow),d=this.random(0,ig.system.height/2));this.speedX=-1*this.random(this.minSpeed,this.maxSpeed);this.speedY=Math.abs(this.speedX);this.opacity=0.9;this.startX=b;this.startY=d;this.tweenMeteor=this.tween({opacity:0},2*((this.maxSpeed+10*this.maxSpeed/30-this.speedY)/this.maxSpeed),{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.kill()}.bind(this)});this.tweenMeteor.start();this.zIndex=this._parent.zIndex;ig.game.sortEntitiesDeferred()},update:function(){this.parent();
!ig.game.isPauseSetting&&0!=ig.Timer.timeScale&&(this.startX+=this.speedX,this.startY+=this.speedY,this.startY>=ig.system.height+this.radius+this.defSize.x/2&&this.kill())},draw:function(){this.parent();var b=ig.system.context;b.save();b.translate(this.startX,this.startY);b.scale(ig.game.currentWindow.zoomBG,ig.game.currentWindow.zoomBG);b.rotate(315*Math.PI/180);b.globalAlpha=this.opacity;var d=b.createLinearGradient(0,0,this.defSize.x,0);d.addColorStop(0,this.color);d.addColorStop(1,"rgba(255, 255, 255, 0)");
b.fillStyle=d;b.fillRect(0,-this.defSize.y/2,this.defSize.x,this.defSize.y);b.globalAlpha=0.5*this.opacity;d=b.createRadialGradient(0,0,0,0,0,this.radiusGlow);d.addColorStop(0,this.color);d.addColorStop(1,"rgba(255, 255, 255, 0)");b.beginPath();b.arc(0,0,this.radiusGlow,0,2*Math.PI,!1);b.fillStyle=d;b.fill();b.globalAlpha=1*this.opacity;d=b.createRadialGradient(0,0,0,0,0,this.radius);d.addColorStop(0,this.color);d.addColorStop(1,"rgba(255, 255, 255, 0)");b.beginPath();b.arc(0,0,this.radius,0,2*Math.PI,
!1);b.fillStyle=d;b.fill();b.restore()}})});ig.baked=!0;
ig.module("game.entities.particle.dust_mote").requires("impact.entity").defines(function(){EntityDustMote=ig.Entity.extend({zIndex:-1,startX:0,startY:0,speedX:0,speedY:0,radius:0,opacity:0,size:{x:9,y:60},speed:3,divider:5,init:function(b,d,e){this.parent(b,d,e);this.createDust()},random:function(b,d){return Math.random()*(d-b)+b},createDust:function(){var b=this.random(0,ig.system.width),d=this.random(0,ig.system.height);this.speedX=this.random(-this.speed,this.speed)/this.divider;this.speedY=this.random(-this.speed,
this.speed)/this.divider;this.radius=this.random(7,20)*this.size;this.opacity=this.random(0.3,0.7);this.startX=b;this.startY=d;this.zIndex=this._parent.zIndex;ig.game.sortEntitiesDeferred()},fadeOut:function(){this.tweenAlpha=this.tween({opacity:0},0.2,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.kill()}.bind(this)});this.tweenAlpha.start()},update:function(){this.parent();!ig.game.isPauseSetting&&0!=ig.Timer.timeScale&&(this.startX+=this.speedX,this.startY+=this.speedY,this.startY>
ig.system.height+this.radius?(this.speedY=this.random(-this.speed,0)/this.divider,this.speedX=this.random(-this.speed,this.speed)/this.divider,this.startY=ig.system.height+this.radius+this.speedY):this.startY<0-this.radius?(this.speedY=this.random(0,this.speed)/this.divider,this.speedX=this.random(-this.speed,this.speed)/this.divider,this.startY=0-this.radius+this.speedY):this.startX>ig.system.width+this.radius?(this.speedX=this.random(-this.speed,0)/this.divider,this.speedY=this.random(-this.speed,
this.speed)/this.divider,this.startX=ig.system.width+this.radius+this.speedX):this.startX<0-this.radius&&(this.speedX=this.random(0,this.speed)/this.divider,this.speedY=this.random(-this.speed,this.speed)/this.divider,this.startX=0-this.radius+this.speedX))},draw:function(){this.parent();var b=ig.system.context;b.save();b.translate(this.startX,this.startY);b.scale(ig.game.currentWindow.zoomBG,ig.game.currentWindow.zoomBG);b.globalAlpha=this.opacity;var d=b.createRadialGradient(0,0,0,0,0,this.radius);
d.addColorStop(0,this.color);d.addColorStop(0.8,ig.game.hexToRGBA(this.color,0));b.beginPath();b.arc(0,0,this.radius,0,2*Math.PI,!1);b.fillStyle=d;b.fill();b.restore()}})});ig.baked=!0;
ig.module("game.entities.particle.fire_ember").requires("impact.entity").defines(function(){EntityFireEmber=ig.Entity.extend({zIndex:-1,startX:0,startY:0,speedX:0,speedY:0,radius:0,opacity:1,defSize:{x:9,y:60},init:function(b,d,e){this.parent(b,d,e);this.createBubble()},random:function(b,d){return Math.random()*(d-b)+b},createBubble:function(){this.speedX=this.random(-2,2);this.speedY=this.random(1,3)/2*this.speed;this.radius=this.random(1,5)*this.size;this.opacity=1;var b=this.random(0,ig.system.width),
d=ig.system.height+this.radius;this.startX=b;this.startY=d;this.zIndex=this._parent.zIndex;ig.game.sortEntitiesDeferred()},update:function(){this.parent();!ig.game.isPauseSetting&&0!=ig.Timer.timeScale&&(this.startX+=this.speedX,this.startY-=this.speedY,this.startY<=-this.radius&&this.kill())},draw:function(){this.parent();var b=ig.system.context;b.save();b.translate(this.startX,this.startY);b.scale(ig.game.currentWindow.zoomBG,ig.game.currentWindow.zoomBG);b.globalAlpha=this.opacity;b.beginPath();
b.arc(0,0,this.radius,0,2*Math.PI,!1);b.fillStyle=this.color;b.fill();b.restore()}})});ig.baked=!0;
ig.module("game.entities.particle.particle").requires("impact.entity","game.entities.particle.bubble","game.entities.particle.snow","game.entities.particle.rain","game.entities.particle.matrix","game.entities.particle.fireworks","game.entities.particle.meteor","game.entities.particle.dust_mote","game.entities.particle.fire_ember").defines(function(){EntityParticle=ig.Entity.extend({dataParticle:{},zIndex:-1,animType:1,opacityMatrix:1,dummyParam:0,arrayColor:["white","red","blue","green","yellow"],
numColor:0,arrType:"TYPE_SNOW TYPE_RAIN TYPE_MATRIX TYPE_FIREWORKS TYPE_METEOR TYPE_BUBBLE TYPE_DUST_MOTE TYPE_FIRE_EMBER".split(" "),init:function(b,d,e){this.parent(b,d,e)},setInitialProp:function(){null==this.dataParticle.zIndex&&(this.dataParticle.zIndex=-1);this.zIndex=0>this.dataParticle.zIndex?_DATAGAME.zIndexData.particleBack-this.dataParticle.zIndex:0<=this.dataParticle.zIndex?_DATAGAME.zIndexData.particleFront+this.dataParticle.zIndex:_DATAGAME.zIndexData.particleFront;this.animType=this.arrType.indexOf("TYPE_"+
this.dataParticle.type.toUpperCase());var b=!1;null==this.dataParticle.speed&&(this.dataParticle.speed=1,b=!0);null==this.dataParticle.size&&(this.dataParticle.size=1);switch(this.animType){case this.arrType.indexOf("TYPE_SNOW"):null==this.dataParticle.color&&(this.dataParticle.color="white");if(null==this.dataParticle.quantity||0>=this.dataParticle.quantity)this.dataParticle.quantity=10;break;case this.arrType.indexOf("TYPE_RAIN"):null==this.dataParticle.color&&(this.dataParticle.color="#8cef");
if(null==this.dataParticle.quantity||0>=this.dataParticle.quantity)this.dataParticle.quantity=10;break;case this.arrType.indexOf("TYPE_MATRIX"):null==this.dataParticle.color&&(this.dataParticle.color="#11e809");if(null==this.dataParticle.quantity||0>=this.dataParticle.quantity)this.dataParticle.quantity=8;break;case this.arrType.indexOf("TYPE_FIREWORKS"):null==this.dataParticle.color?this.dataParticle.color=["white","red","blue","green","yellow"]:"string"===typeof this.dataParticle.color&&(this.dataParticle.color=
[this.dataParticle.color]);if(null==this.dataParticle.quantity||0>=this.dataParticle.quantity)this.dataParticle.quantity=1;this.numColor=0;this.arrayColor=[];this.arrayColor=this.dataParticle.color.concat([]);this.arrayColor=ig.game.shuffleArray(this.arrayColor);break;case this.arrType.indexOf("TYPE_METEOR"):null==this.dataParticle.color&&(this.dataParticle.color="white");if(null==this.dataParticle.quantity||0>=this.dataParticle.quantity)this.dataParticle.quantity=2;break;case this.arrType.indexOf("TYPE_BUBBLE"):null==
this.dataParticle.color&&(this.dataParticle.color="#54e1ff");if(null==this.dataParticle.quantity||0>=this.dataParticle.quantity)this.dataParticle.quantity=2;break;case this.arrType.indexOf("TYPE_DUST_MOTE"):!0==b&&(this.dataParticle.speed=3);null==this.dataParticle.color&&(this.dataParticle.color="gray");if(null==this.dataParticle.quantity||0>=this.dataParticle.quantity)this.dataParticle.quantity=100;break;case this.arrType.indexOf("TYPE_FIRE_EMBER"):if(null==this.dataParticle.color&&(this.dataParticle.color=
"red"),null==this.dataParticle.quantity||0>=this.dataParticle.quantity)this.dataParticle.quantity=2}this.drawParticle(!0)},drawParticle:function(b){var d=1;switch(this.animType){case this.arrType.indexOf("TYPE_SNOW"):!0!=b&&(d=1/this.dataParticle.quantity);this.dummyParam=0;this.tweenSnow=this.tween({dummyParam:1},d,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.animType==this.arrType.indexOf("TYPE_SNOW")&&(ig.game.spawnEntity(EntitySnow,0,0,{_parent:this,color:this.dataParticle.color,
speed:this.dataParticle.speed,size:this.dataParticle.size}),this.drawParticle())}.bind(this)});this.tweenSnow.start();break;case this.arrType.indexOf("TYPE_RAIN"):!0!=b&&(d=1/(5*this.dataParticle.quantity));this.dummyParam=0;this.tweenRain=this.tween({dummyParam:1},d,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.animType==this.arrType.indexOf("TYPE_RAIN")&&(ig.game.spawnEntity(EntityRain,0,0,{_parent:this,color:this.dataParticle.color,speed:this.dataParticle.speed,size:this.dataParticle.size}),
this.drawParticle())}.bind(this)});this.tweenRain.start();break;case this.arrType.indexOf("TYPE_MATRIX"):this.opacityMatrix=1;b=10<=this.dataParticle.quantity?0.1:1/this.dataParticle.quantity;for(d=0;d<this.dataParticle.quantity;d++)this["entityMatrix"+d]=ig.game.spawnEntity(EntityMatrix,0,0,{_parent:this,delay:b*d,color:this.dataParticle.color,speed:this.dataParticle.speed,size:this.dataParticle.size});break;case this.arrType.indexOf("TYPE_FIREWORKS"):!0!=b&&(d=4/this.dataParticle.quantity);this.dummyParam=
0;this.numColor++;this.numColor>this.arrayColor.length-1&&(this.arrayColor=ig.game.shuffleArray(this.arrayColor),this.numColor=0);this.tweenFireworks=this.tween({dummyParam:1},d,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.animType==this.arrType.indexOf("TYPE_FIREWORKS")&&(ig.game.spawnEntity(EntityFireworks,0,0,{_parent:this,color:this.arrayColor[this.numColor],speed:this.dataParticle.speed,size:this.dataParticle.size}),this.drawParticle())}.bind(this)});this.tweenFireworks.start();
break;case this.arrType.indexOf("TYPE_METEOR"):!0!=b&&(d=1/this.dataParticle.quantity);this.dummyParam=0;this.tweenMeteor=this.tween({dummyParam:1},d,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.animType==this.arrType.indexOf("TYPE_METEOR")&&(ig.game.spawnEntity(EntityMeteor,0,0,{_parent:this,color:this.dataParticle.color,speed:this.dataParticle.speed,size:this.dataParticle.size}),this.drawParticle())}.bind(this)});this.tweenMeteor.start();break;case this.arrType.indexOf("TYPE_BUBBLE"):!0!=
b&&(d=1/this.dataParticle.quantity);this.dummyParam=0;this.tweenBubble=this.tween({dummyParam:1},d,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.animType==this.arrType.indexOf("TYPE_BUBBLE")&&(ig.game.spawnEntity(EntityBubble,0,0,{_parent:this,color:this.dataParticle.color,speed:this.dataParticle.speed,size:this.dataParticle.size}),this.drawParticle())}.bind(this)});this.tweenBubble.start();break;case this.arrType.indexOf("TYPE_DUST_MOTE"):for(b=0;b<this.dataParticle.quantity;b++)this["dustMote"+
b]=ig.game.spawnEntity(EntityDustMote,0,0,{_parent:this,color:this.dataParticle.color,speed:this.dataParticle.speed,size:this.dataParticle.size});break;case this.arrType.indexOf("TYPE_FIRE_EMBER"):!0!=b&&(d=1/this.dataParticle.quantity),this.dummyParam=0,this.tweenFireEmber=this.tween({dummyParam:1},d,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.animType==this.arrType.indexOf("TYPE_FIRE_EMBER")&&(ig.game.spawnEntity(EntityFireEmber,0,0,{_parent:this,color:this.dataParticle.color,
speed:this.dataParticle.speed,size:this.dataParticle.size}),this.drawParticle())}.bind(this)}),this.tweenFireEmber.start()}},killOtherEntity:function(){switch(this.animType){case this.arrType.indexOf("TYPE_DUST_MOTE"):for(var b=0;b<this.dataParticle.quantity;b++)this["dustMote"+b].fadeOut()}},killEntityMatrix:function(){this.opacityMatrix=1;this.tweenKillMatrix=this.tween({opacityMatrix:0},0.1,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){for(var b=0;b<this.dataParticle.quantity;b++)null!=
this["entityMatrix"+b]&&(this["entityMatrix"+b].kill(),this["entityMatrix"+b]=null);this._parent.entityParticle.kill();this._parent.entityParticle=null}.bind(this)});this.tweenKillMatrix.start()},update:function(){this.parent()},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.particle.overlay_particle").requires("impact.entity").defines(function(){EntityOverlayParticle=ig.Entity.extend({objectID:"",init:function(b,d,e){this.parent(b,d,e)},setPosition:function(){null!=this.dataParticle.posX&&(this.pos.x=this.dataParticle.posX);null!=this.dataParticle.posY&&(this.pos.y=this.dataParticle.posY)},update:function(){this.parent()},calculateOffset:function(){var b=this.pos.x-ig.game.screen.x+ig.game.currentWindow.posXBG-(-ig.game.screen.x+ig.sizeHandler.minW*
ig.game.currentWindow.bg.pntX),d=ig.system.height*ig.game.currentWindow.bg.pntY,e=ig.game.currentWindow.bg.isImage?ig.game.currentWindow.bg.cvsBG.height:1280*_DATAGAME.ratioRes,d=e*ig.game.currentWindow.bg.pntY;return{x:-ig.game.screen.x+ig.sizeHandler.minW*ig.game.currentWindow.bg.pntX+b*ig.game.currentWindow.zoomBG,y:-ig.game.screen.y+ig.game.currentWindow.posYBG-e*(ig.game.currentWindow.zoomBG-1)*(d/e)+this.pos.y*ig.game.currentWindow.zoomBG}},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.particle.light_sunshine").requires("impact.entity","game.entities.particle.overlay_particle").defines(function(){EntityLightSunshine=EntityOverlayParticle.extend({opacity:1,multiplierRay:{x:1.4,y:1.1},angle:{spark1:0,spark2:45,ray1:0,ray2:0,ray3:0,ray4:0,ray5:0,ray6:0,ray7:0,ray8:0,ray9:0,ray10:0,ray11:0,ray12:0},init:function(b,d,e){this.parent(b,d,e);this.setInitialProp()},setInitialProp:function(){this.setPosition();this.radius=50*this.dataParticle.size;this.opacity=0.5;
this.zIndex=this._parent.zIndex;this.tweenAngle("spark1",0,11,4.6);this.tweenAngle("spark2",45,11,4.3);this.tweenAngle("ray1",0,15,4.2);this.tweenAngle("ray2",45,30,8.1);this.tweenAngle("ray3",90,65,12.6);this.tweenAngle("ray4",135,20,16.8);this.tweenAngle("ray5",170,11,6.1);this.tweenAngle("ray6",245,40,9.3);this.tweenAngle("ray7",290,95,20.1);this.tweenAngle("ray8",335,25,22.8);this.tweenAngle("ray9",152,11,6.3);this.tweenAngle("ray10",198,40,11.1);this.tweenAngle("ray11",221,95,20.9);this.tweenAngle("ray12",
375,25,22.1);ig.game.sortEntitiesDeferred()},tweenAngle:function(b,d,e,f){this.angle[b]=d-e;var g={};g[b]=d+e;this.tween({angle:g},f,{easing:ig.Tween.Easing.Linear.EaseNone,loop:ig.Tween.Loop.Reverse}).start()},random:function(b,d){return Math.random()*(d-b)+b},update:function(){this.parent()},drawRay:function(b,d,e,f){b.save();b.translate(this.posFinal.x,this.posFinal.y);b.rotate(this.angle[f]*Math.PI/180);b.scale(ig.game.currentWindow.zoomBG,ig.game.currentWindow.zoomBG);f=b.createLinearGradient(0,
0,0,-e);f.addColorStop(0,ig.game.hexToRGBA(this.dataParticle.color,0.2));f.addColorStop(0.8,ig.game.hexToRGBA(this.dataParticle.color,0));b.fillStyle=f;b.beginPath();b.moveTo(0,0);b.lineTo(-d/2,-e);b.lineTo(d/2,-e);b.closePath();b.fill();b.restore()},drawPlusSign:function(b,d,e){b.save();b.translate(this.posFinal.x,this.posFinal.y);b.rotate(this.angle[e]*Math.PI/180);b.scale(ig.game.currentWindow.zoomBG,ig.game.currentWindow.zoomBG);b.globalAlpha=0.7;this.drawCircle(b,2*(d/3));b.restore();b.save();
b.translate(this.posFinal.x,this.posFinal.y);b.rotate(this.angle[e]*Math.PI/180);b.scale(ig.game.currentWindow.zoomBG,0.05*ig.game.currentWindow.zoomBG);this.drawCircle(b,d);b.restore();b.save();b.translate(this.posFinal.x,this.posFinal.y);b.rotate(this.angle[e]*Math.PI/180);b.scale(0.05*ig.game.currentWindow.zoomBG,ig.game.currentWindow.zoomBG);this.drawCircle(b,d);b.restore()},drawCircle:function(b,d,e){null==e&&(e=1);var f=b.createRadialGradient(0,0,0,0,0,d);f.addColorStop(0,ig.game.hexToRGBA(this.dataParticle.color,
e));f.addColorStop(0.3,ig.game.hexToRGBA(this.dataParticle.color,e/2));f.addColorStop(0.8,ig.game.hexToRGBA(this.dataParticle.color,0));b.beginPath();b.arc(0,0,d,0,2*Math.PI,!1);b.fillStyle=f;b.fill()},draw:function(){this.parent();var b=ig.system.context;this.posFinal=this.calculateOffset();this.drawRay(b,this.radius*this.multiplierRay.x,this.radius*this.multiplierRay.y,"ray1");this.drawRay(b,1.04*this.radius*this.multiplierRay.x,1.28*this.radius*this.multiplierRay.y,"ray2");this.drawRay(b,1.1*this.radius*
this.multiplierRay.x,1.57*this.radius*this.multiplierRay.y,"ray3");this.drawRay(b,1.13*this.radius*this.multiplierRay.x,1.85*this.radius*this.multiplierRay.y,"ray4");this.drawRay(b,0.81*this.radius*this.multiplierRay.x,0.82*this.radius*this.multiplierRay.y,"ray5");this.drawRay(b,1.04*this.radius*this.multiplierRay.x,1.18*this.radius*this.multiplierRay.y,"ray6");this.drawRay(b,1.09*this.radius*this.multiplierRay.x,0.85*this.radius*this.multiplierRay.y,"ray7");this.drawRay(b,1.1*this.radius*this.multiplierRay.x,
1.85*this.radius*this.multiplierRay.y,"ray8");this.drawRay(b,0.5*this.radius*this.multiplierRay.x,1.57*this.radius*this.multiplierRay.y,"ray9");this.drawRay(b,0.31*this.radius*this.multiplierRay.x,1.28*this.radius*this.multiplierRay.y,"ray10");this.drawRay(b,0.92*this.radius*this.multiplierRay.x,1*this.radius*this.multiplierRay.y,"ray11");this.drawRay(b,0.7*this.radius*this.multiplierRay.x,0.58*this.radius*this.multiplierRay.y,"ray12");b.save();b.translate(this.posFinal.x,this.posFinal.y);b.scale(ig.game.currentWindow.zoomBG,
ig.game.currentWindow.zoomBG);b.beginPath();b.arc(0,0,this.radius/20,0,2*Math.PI,!1);b.fillStyle=this.dataParticle.color;b.fill();b.restore();this.drawPlusSign(b,this.radius,"spark1");this.drawPlusSign(b,this.radius/2,"spark2");b.save();b.translate(this.posFinal.x,this.posFinal.y);b.scale(ig.game.currentWindow.zoomBG,ig.game.currentWindow.zoomBG);this.drawCircle(b,this.radius/5);b.restore()}})});ig.baked=!0;
ig.module("game.entities.particle.explosion").requires("impact.entity","game.entities.particle.overlay_particle").defines(function(){EntityExplosion=EntityOverlayParticle.extend({opacity:1,requestId:null,rad:Math.PI/180,spring:0.1,friction:0.85,particles:[],init:function(b,d,e){this.parent(b,d,e);this.setInitialProp()},setInitialProp:function(){this.setPosition();for(var b=0;50>b;b++){var d=this.setParticleData({x:0,y:0});this.particles.push(d)}this.zIndex=this._parent.zIndex;ig.game.sortEntitiesDeferred()},
randomIntFromInterval:function(b,d){return Math.floor(Math.random()*(d-b+1)+b)},setParticleData:function(b){var d=this.randomIntFromInterval(10,70)*(this.dataParticle.size/5),e=100*(this.dataParticle.size/5)-d,f=2*Math.random()*Math.PI,g={x:b.x+d*Math.cos(f),y:b.y+d*Math.sin(f)},j={x:b.x+e*Math.cos(f),y:b.y+e*Math.sin(f)},l=this.dataParticle.color[~~(Math.random()*this.dataParticle.color.length)];return{decay:0.95,r:d,R:e,angle:f,center:b,pos:g,dest:j,color:l,vel:{x:0,y:0},acc:{x:0,y:0}}},drawParticle:function(b,
d){b.save();b.translate(this.posFinal.x,this.posFinal.y);b.scale(ig.game.currentWindow.zoomBG,ig.game.currentWindow.zoomBG);b.fillStyle=d.color;b.beginPath();b.arc(d.pos.x,d.pos.y,d.r,0,2*Math.PI);b.fill();b.restore()},update:function(){this.parent();if(!ig.game.isPauseSetting&&0!=ig.Timer.timeScale)for(var b=0;b<this.particles.length;b++){var d=this.particles[b].dest.y-this.particles[b].pos.y;this.particles[b].acc.x=(this.particles[b].dest.x-this.particles[b].pos.x)*this.spring;this.particles[b].acc.y=
d*this.spring;this.particles[b].vel.x+=this.particles[b].acc.x;this.particles[b].vel.y+=this.particles[b].acc.y;this.particles[b].vel.x*=this.friction;this.particles[b].vel.y*=this.friction;this.particles[b].pos.x+=this.particles[b].vel.x;this.particles[b].pos.y+=this.particles[b].vel.y;0<this.particles[b].r&&(this.particles[b].r*=this.particles[b].decay);0.5>this.particles[b].r&&this.particles.splice(b,1)}},draw:function(){this.parent();var b=ig.system.context;this.posFinal=this.calculateOffset();
for(var d=0;d<this.particles.length;d++)this.drawParticle(b,this.particles[d])}})});ig.baked=!0;
ig.module("game.entities.particle.blood_drip").requires("impact.entity","game.entities.particle.overlay_particle").defines(function(){EntityBloodDrip=EntityOverlayParticle.extend({opacity:1,options:{scatter:0,gravity:0.2,consistency:0.04,pollock:!1,burst:!0,shade:!0},items:[],shadowItems:[],init:function(b,d,e){this.parent(b,d,e);this.setInitialProp()},setInitialProp:function(){this.setPosition();this.splat(this.items);this.zIndex=this._parent.zIndex;ig.game.sortEntitiesDeferred()},random:function(b,
d){return Math.random()*(d-b)+b},splat:function(b){for(var d=0;30>d;d++){var e=Math.random()*Math.PI,f=(0.5>Math.random()?3:-3)*(3*Math.random())*this.options.scatter,g=(0.5>Math.random()?3:-3)*(3*Math.random())*this.options.scatter;b.push({x:0,y:0,dx:f,dy:g,size:e})}},drawsplat:function(b,d){for(var e=b.length;e--;){var f=b[e],g=f.x,j=f.y,l=f.size;this.circle(g,j,l,d);f.dy-=this.options.gravity;f.x-=f.dx;f.y-=f.dy;f.size-=0.05;if(0.3>b[e].size||Math.random()<this.options.consistency)this.shadowItems.push({x:g,
y:j,s:l}),b.splice(e,1)}},circle:function(b,d,e,f){f.save();f.translate(this.posFinal.x,this.posFinal.y);f.scale(ig.game.currentWindow.zoomBG,ig.game.currentWindow.zoomBG);f.fillStyle=this.dataParticle.color;f.beginPath();f.arc(b,d,e*this.dataParticle.size,0,2*Math.PI,!1);f.fill();f.closePath();f.restore()},update:function(){this.parent()},draw:function(){this.parent();var b=ig.system.context;this.posFinal=this.calculateOffset();this.drawsplat(this.items,b);if(null!=this.shadowItems&&0<this.shadowItems.length)for(var d=
0;d<this.shadowItems.length;d++)this.circle(this.shadowItems[d].x,this.shadowItems[d].y,this.shadowItems[d].s,b)}})});ig.baked=!0;
ig.module("game.entities.particle.single_particle").requires("impact.entity","game.entities.particle.light_sunshine","game.entities.particle.explosion","game.entities.particle.blood_drip").defines(function(){EntitySingleParticle=ig.Entity.extend({dataParticle:{},zIndex:-1,animType:1,opacityMatrix:1,entitySP:null,dummyParam:0,arrayColor:["white","red","blue","green","yellow"],numColor:0,arrType:["TYPE_LIGHT_SUNSHINE","TYPE_BLOOD_DRIP","TYPE_EXPLOSION"],typeName:"",init:function(b,d,e){this.parent(b,
d,e)},setInitialProp:function(){null==this.dataParticle.zIndex&&(this.dataParticle.zIndex=-1);this.zIndex=0>this.dataParticle.zIndex?_DATAGAME.zIndexData.singleParticleBack-this.dataParticle.zIndex:0<=this.dataParticle.zIndex?_DATAGAME.zIndexData.singleParticleFront+this.dataParticle.zIndex:_DATAGAME.zIndexData.singleParticleFront;this.animType=this.arrType.indexOf("TYPE_"+this.dataParticle.type.toUpperCase());this.typeName="TYPE_"+this.dataParticle.type.toUpperCase();var b=!1;null==this.dataParticle.speed&&
(this.dataParticle.speed=1);null==this.dataParticle.size&&(this.dataParticle.size=1,b=!0);switch(this.animType){case this.arrType.indexOf("TYPE_LIGHT_SUNSHINE"):!0==b&&(this.dataParticle.size=3);null==this.dataParticle.color&&(this.dataParticle.color="white");break;case this.arrType.indexOf("TYPE_BLOOD_DRIP"):!0==b&&(this.dataParticle.size=5);null==this.dataParticle.color&&(this.dataParticle.color="#aa0707");break;case this.arrType.indexOf("TYPE_EXPLOSION"):!0==b&&(this.dataParticle.size=5),null==
this.dataParticle.color?this.dataParticle.color="#6A0000 #900000 #902B2B #A63232 #A62626 #FD5039 #C12F2A #FF6540 #f93801".split(" "):"string"===typeof this.dataParticle.color&&(this.dataParticle.color=[this.dataParticle.color])}this.drawParticle();ig.game.sortEntitiesDeferred()},drawParticle:function(){var b=1,d="";switch(this.animType){case this.arrType.indexOf("TYPE_LIGHT_SUNSHINE"):d="LightSunshine";break;case this.arrType.indexOf("TYPE_BLOOD_DRIP"):d="BloodDrip";break;case this.arrType.indexOf("TYPE_EXPLOSION"):d=
"Explosion"}b=null==this.dataParticle.delay?0.05:this.dataParticle.delay;this.dummyParam=0;this.tweenLight=this.tween({dummyParam:1},b,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.animType==this.arrType.indexOf(this.typeName)&&(this.entitySP=ig.game.spawnEntity("Entity"+d,0,0,{_parent:this,dataParticle:this.dataParticle}))}.bind(this)});this.tweenLight.start()},update:function(){this.parent()},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.topoverlay.vignette").requires("impact.entity").defines(function(){EntityVignette=ig.Entity.extend({zIndex:99999,hole:{x:1E3,y:500,w:200,h:150},init:function(b,d,e){this.parent(b,d,e);this.overlayCanvas=document.createElement("canvas");this.overlayCanvas.width=ig.system.width;this.overlayCanvas.height=ig.system.height;this.overlayCtx=this.overlayCanvas.getContext("2d",{alpha:!0})},update:function(){this.parent()},repos:function(){ig.game.sortEntitiesDeferred()},draw:function(){this.parent();
var b=ig.system.context;b.save();this.overlayCanvas.width=ig.system.width;this.overlayCanvas.height=ig.system.height;var d=this.overlayCtx;d.clearRect(0,0,this.overlayCanvas.width,this.overlayCanvas.height);d.globalAlpha=1;d.fillStyle="blue";d.fillRect(0,0,this.overlayCanvas.width,this.overlayCanvas.height);d.globalCompositeOperation="destination-out";d.filter="blur(40px)";d.fillStyle="black";d.fillRect(ig.system.width/2-250,ig.system.height/2-250,500,500);d.filter="none";d.globalCompositeOperation=
"source-over";b.drawImage(this.overlayCanvas,0,0);b.restore()}})});ig.baked=!0;
ig.module("game.entities.topoverlay.window_boxing").requires("impact.entity").defines(function(){EntityWindowBoxing=ig.Entity.extend({zIndex:_DATAGAME.zIndexData.windowBoxingTop,position:"top",thickness:200,color:_DATAGAME.windowBoxing.top.color,BOX_TOP:"top",BOX_BOTTOM:"bottom",BOX_LEFT:"left",BOX_RIGHT:"right",init:function(b,d,e){this.parent(b,d,e)},update:function(){this.parent()},repos:function(){ig.game.sortEntitiesDeferred()},draw:function(){this.parent();var b=ig.system.context;b.save();b.fillStyle=
this.color;this.position==this.BOX_TOP?b.fillRect(0,0,ig.system.width,this.thickness*_DATAGAME.ratioRes):this.position==this.BOX_BOTTOM?b.fillRect(0,ig.system.height-this.thickness*_DATAGAME.ratioRes,ig.system.width,this.thickness*_DATAGAME.ratioRes):this.position==this.BOX_LEFT?b.fillRect(0,0,this.thickness*_DATAGAME.ratioRes,ig.system.height):this.position==this.BOX_RIGHT&&b.fillRect(ig.system.width-this.thickness*_DATAGAME.ratioRes,0,this.thickness*_DATAGAME.ratioRes,ig.system.height);b.restore()}})});
ig.baked=!0;
ig.module("game.entities.topoverlay.camera1").requires("impact.entity").defines(function(){Entitycamera1=ig.Entity.extend({zIndex:_DATAGAME.zIndexData.camera,radDot:15*_DATAGAME.ratioRes,borderLineLength:150*_DATAGAME.ratioRes,strokeWidth:5*_DATAGAME.ratioRes,padding:{x:50*_DATAGAME.ratioRes,y:50*_DATAGAME.ratioRes},totalTime:0,counterRedDot:0,init:function(b,d,e){this.parent(b,d,e)},update:function(){this.parent()},draw:function(){this.parent();var b=ig.system.context;b.save();b.strokeStyle="white";
b.lineWidth=this.strokeWidth;b.lineCap="square";b.beginPath();b.moveTo(this.padding.x,this.padding.y+this.borderLineLength);b.lineTo(this.padding.x,this.padding.y);b.lineTo(this.padding.x+this.borderLineLength,this.padding.y);b.stroke();b.closePath();b.beginPath();b.moveTo(this.padding.x,ig.system.height-this.padding.y-this.borderLineLength);b.lineTo(this.padding.x,ig.system.height-this.padding.y);b.lineTo(this.padding.x+this.borderLineLength,ig.system.height-this.padding.y);b.stroke();b.closePath();
b.beginPath();b.moveTo(ig.system.width-this.padding.x,this.padding.y+this.borderLineLength);b.lineTo(ig.system.width-this.padding.x,this.padding.y);b.lineTo(ig.system.width-this.padding.x-this.borderLineLength,this.padding.y);b.stroke();b.closePath();b.beginPath();b.moveTo(ig.system.width-this.padding.x,ig.system.height-this.padding.y-this.borderLineLength);b.lineTo(ig.system.width-this.padding.x,ig.system.height-this.padding.y);b.lineTo(ig.system.width-this.padding.x-this.borderLineLength,ig.system.height-
this.padding.y);b.stroke();b.closePath();var d=(20+this.radDot)*_DATAGAME.ratioRes;this.counterRedDot++;30>=this.counterRedDot?(b.fillStyle="red",b.beginPath(),b.arc(this.padding.x+d,this.padding.y+d,this.radDot,0,2*Math.PI),b.fill(),b.closePath()):50<=this.counterRedDot&&(this.counterRedDot=0);b.font=50*_DATAGAME.ratioRes+"px arialmtbold";b.fillStyle="white";b.textBaseline="middle";b.fillText("REC",this.padding.x+d+this.radDot+10*_DATAGAME.ratioRes,this.padding.y+d+this.strokeWidth/2);b.textBaseline=
"bottom";b.font=30*_DATAGAME.ratioRes+"px arialmtbold";this.totalTime++;b.fillText(ig.game.frameConvertToHourMinSec(this.totalTime),this.padding.x+(20+this.strokeWidth/2)*_DATAGAME.ratioRes,ig.system.height-this.padding.y-20*_DATAGAME.ratioRes);b.restore();b.save();var d=100*_DATAGAME.ratioRes,e=50*_DATAGAME.ratioRes,f=15*_DATAGAME.ratioRes,g=10*_DATAGAME.ratioRes,j=25*_DATAGAME.ratioRes;b.translate(ig.system.width-this.padding.x-d-j,ig.system.height-this.padding.y-e-j);b.strokeStyle="white";b.lineWidth=
4*_DATAGAME.ratioRes;b.strokeRect(0,0,d,e);b.beginPath();b.arc(g+f,e/2,f,0,2*Math.PI);b.stroke();b.closePath();b.beginPath();b.arc(d-g-f,e/2,f,0,2*Math.PI);b.stroke();b.closePath();b.beginPath();b.moveTo(g+f,e/2-f);b.lineTo(d-g-f,e/2-f);b.stroke();b.closePath();b.restore();b.save();d=100*_DATAGAME.ratioRes;e=50*_DATAGAME.ratioRes;f=10*_DATAGAME.ratioRes;g=10*_DATAGAME.ratioRes;j=25*_DATAGAME.ratioRes;b.translate(ig.system.width-this.padding.x-d-g-j,this.padding.y+j);b.strokeStyle="white";b.fillStyle=
"white";b.lineWidth=4*_DATAGAME.ratioRes;b.strokeRect(g,0,d,e);b.fillRect(g+f,f,d-2*f,e-2*f);b.fillRect(0,e/2-e/2/2,g,e/2);b.restore()}})});ig.baked=!0;
ig.module("game.entities.topoverlay.camera2").requires("impact.entity").defines(function(){Entitycamera2=ig.Entity.extend({zIndex:_DATAGAME.zIndexData.camera,corner:25*_DATAGAME.ratioRes,radDot:15*_DATAGAME.ratioRes,borderLineLength:130*_DATAGAME.ratioRes,strokeWidth:5*_DATAGAME.ratioRes,padding:{x:50*_DATAGAME.ratioRes,y:50*_DATAGAME.ratioRes},paddingInside:{x:150*_DATAGAME.ratioRes,y:150*_DATAGAME.ratioRes},cornerInside:15*_DATAGAME.ratioRes,borderLineLengthInside:50*_DATAGAME.ratioRes,totalTime:0,
counterRedDot:0,init:function(b,d,e){this.parent(b,d,e)},update:function(){this.parent()},draw:function(){this.parent();var b=ig.system.context;b.save();b.strokeStyle="white";b.lineWidth=this.strokeWidth;b.lineCap="round";b.beginPath();b.moveTo(this.padding.x,this.padding.y+this.borderLineLength);b.lineTo(this.padding.x,this.padding.y+this.corner);b.quadraticCurveTo(this.padding.x,this.padding.y,this.padding.x+this.corner,this.padding.y);b.lineTo(this.padding.x+this.borderLineLength,this.padding.y);
b.stroke();b.closePath();b.beginPath();b.moveTo(this.padding.x,ig.system.height-this.padding.y-this.borderLineLength);b.lineTo(this.padding.x,ig.system.height-this.padding.y-this.corner);b.quadraticCurveTo(this.padding.x,ig.system.height-this.padding.y,this.padding.x+this.corner,ig.system.height-this.padding.y);b.lineTo(this.padding.x+this.borderLineLength,ig.system.height-this.padding.y);b.stroke();b.closePath();b.beginPath();b.moveTo(ig.system.width-this.padding.x,this.padding.y+this.borderLineLength);
b.lineTo(ig.system.width-this.padding.x,this.padding.y+this.corner);b.quadraticCurveTo(ig.system.width-this.padding.x,this.padding.y,ig.system.width-this.padding.x-this.corner,this.padding.y);b.lineTo(ig.system.width-this.padding.x-this.borderLineLength,this.padding.y);b.stroke();b.closePath();b.beginPath();b.moveTo(ig.system.width-this.padding.x,ig.system.height-this.padding.y-this.borderLineLength);b.lineTo(ig.system.width-this.padding.x,ig.system.height-this.padding.y-this.corner);b.quadraticCurveTo(ig.system.width-
this.padding.x,ig.system.height-this.padding.y,ig.system.width-this.padding.x-this.corner,ig.system.height-this.padding.y);b.lineTo(ig.system.width-this.padding.x-this.borderLineLength,ig.system.height-this.padding.y);b.stroke();b.closePath();var d=(30+this.radDot)*_DATAGAME.ratioRes;this.counterRedDot++;30>=this.counterRedDot?(b.fillStyle="red",b.beginPath(),b.arc(this.padding.x+d,this.padding.y+d,this.radDot,0,2*Math.PI),b.fill(),b.closePath()):50<=this.counterRedDot&&(this.counterRedDot=0);b.font=
50*_DATAGAME.ratioRes+"px arialmtbold";b.fillStyle="white";b.textBaseline="middle";b.fillText("REC",this.padding.x+d+this.radDot+10*_DATAGAME.ratioRes,this.padding.y+d+this.strokeWidth/2);b.restore();b.save();b.globalAlpha=0.6;b.strokeStyle="white";b.lineWidth=this.strokeWidth;b.lineCap="round";var d=ig.system.width/2-this.paddingInside.x,e=ig.system.height/2-this.paddingInside.y,f=ig.system.width/2+this.paddingInside.x,g=ig.system.height/2-this.paddingInside.y,j=ig.system.width/2-this.paddingInside.x,
l=ig.system.height/2+this.paddingInside.y,n=ig.system.width/2+this.paddingInside.x,m=ig.system.height/2+this.paddingInside.y;b.beginPath();b.moveTo(d,e+this.borderLineLengthInside);b.lineTo(d,e+this.cornerInside);b.quadraticCurveTo(d,e,d+this.cornerInside,e);b.lineTo(d+this.borderLineLengthInside,e);b.stroke();b.closePath();b.beginPath();b.moveTo(j,l-this.borderLineLengthInside);b.lineTo(j,l-this.cornerInside);b.quadraticCurveTo(j,l,j+this.cornerInside,l);b.lineTo(j+this.borderLineLengthInside,l);
b.stroke();b.closePath();b.beginPath();b.moveTo(f,g+this.borderLineLengthInside);b.lineTo(f,g+this.cornerInside);b.quadraticCurveTo(f,g,f-this.cornerInside,g);b.lineTo(f-this.borderLineLengthInside,g);b.stroke();b.closePath();b.beginPath();b.moveTo(n,m-this.borderLineLengthInside);b.lineTo(n,m-this.cornerInside);b.quadraticCurveTo(n,m,n-this.cornerInside,m);b.lineTo(n-this.borderLineLengthInside,m);b.stroke();b.closePath();b.restore()}})});ig.baked=!0;
ig.module("game.entities.topoverlay.topoverlay").requires("impact.entity","game.entities.topoverlay.vignette","game.entities.topoverlay.window_boxing","game.entities.topoverlay.camera1","game.entities.topoverlay.camera2").defines(function(){});ig.baked=!0;
ig.module("game.entities.object.overlay").requires("impact.entity","impact.entity-pool").defines(function(){EntityOverlay=ig.Entity.extend({tweenID:-1,tweenList:{},objectID:"",imgSrc:null,textSrc:null,flip:{x:!1,y:!1},scale:{x:1,y:1},pivot:{x:0.5,y:0.5},angle:0,size:{x:0,y:0},alpha:0,isFirstLoad:!0,objectType:1,fontSize:30,TYPE_IMAGE:1,TYPE_TEXT:2,TYPE_SPRITESHEET:3,configs:{},init:function(b,d,e){this.parent(b,d,e)},setInitialProp:function(b){null!=this.dataTween.source&&(this.objectType=this.TYPE_IMAGE,
this.imgSrc=new ig.Image(_BASEPATH.object+this.dataTween.source+".png"),this.size={x:this.imgSrc.width,y:this.imgSrc.height});this.zIndex=0>this.dataTween.zIndex?_DATAGAME.zIndexData.overlayObjectBack-this.dataTween.zIndex:0<=this.dataTween.zIndex?_DATAGAME.zIndexData.overlayObjectFront+this.dataTween.zIndex:_DATAGAME.zIndexData.overlayObjectFront;null!=this.dataTween.pivotX&&(this.pivot.x=this.dataTween.pivotX);null!=this.dataTween.pivotY&&(this.pivot.y=this.dataTween.pivotY);null!=this.dataTween.flipX&&
(this.flip.x=this.dataTween.flipX);null!=this.dataTween.flipY&&(this.flip.y=this.dataTween.flipY);this.dataTween.from&&(null!=this.dataTween.from.angle&&(this.angle=this.dataTween.from.angle),null!=this.dataTween.from.scaleX&&(this.scale.x=this.dataTween.from.scaleX),null!=this.dataTween.from.scaleY&&(this.scale.y=this.dataTween.from.scaleY),null!=this.dataTween.from.x&&(this.pos.x=this.dataTween.from.x),null!=this.dataTween.from.y&&(this.pos.y=this.dataTween.from.y),this.alpha=null!=this.dataTween.from.alpha?
this.dataTween.from.alpha:1);b&&(-1!=this.tweenID&&null!=this.dataTween.to?this.animTween():(null!=this.tweenList["tween"+this.tweenID]&&(this.tweenList["tween"+this.tweenID].loop=0,this.tweenList["tween"+this.tweenID].stop()),this._parent.overlayList[this.tweenID]=!0,this._parent.finishAddOverlayObject&&0>this._parent.overlayList.indexOf(!1)&&this._parent.finishAllOverlay()))},animTween:function(){var b=0,d=this.alpha,e=this.angle,f={x:this.scale.x,y:this.scale.y},g={x:this.pos.x,y:this.pos.y},j=
this.dataTween.easing&&""!=this.dataTween.easing?this.dataTween.easing.split("."):["Linear","EaseNone"];null!=this.dataTween.to.angle&&(e=this.dataTween.to.angle);null!=this.dataTween.to.scaleX&&(f.x=this.dataTween.to.scaleX);null!=this.dataTween.to.scaleY&&(f.y=this.dataTween.to.scaleY);null!=this.dataTween.to.x&&(g.x=this.dataTween.to.x);null!=this.dataTween.to.y&&(g.y=this.dataTween.to.y);null!=this.dataTween.to.alpha&&(d=this.dataTween.to.alpha);null!=this.dataTween.loop&&("revert"==this.dataTween.loop.toLowerCase()?
b=ig.Tween.Loop.Revert:"reverse"==this.dataTween.loop.toLowerCase()&&(b=ig.Tween.Loop.Reverse));this.tweenList["tween"+this.tweenID]=this.tween({pos:g,alpha:d,angle:e,scale:f},this.dataTween.time,{delay:this.dataTween.delay?this.dataTween.delay:0,easing:ig.Tween.Easing[j[0]][j[1]],loop:b,onComplete:function(){this._parent.overlayList[this.tweenID]=!0;!0==this.dataTween.remove&&(this.kill(),this._parent.entityOverlay[this.objectID]=null);this._parent.finishAddOverlayObject&&0>this._parent.overlayList.indexOf(!1)?
this._parent.finishAllOverlay():this.checkChain()}.bind(this)});this.tweenList["tween"+this.tweenID].start();ig.game.sortEntitiesDeferred()},checkChain:function(){for(var b=!1,d,e=0;e<this._parent.overlayList.length;e++)if(!this._parent.overlayList[e]&&this._parent.objectList[e].chain==this.tweenID)if(this._parent.objectList[e].objectID==this.objectID)b=!0,d=this._parent.objectList[e];else{var f=this._parent.objectList[e];this._parent.entityOverlay[f.objectID]?(this._parent.entityOverlay[f.objectID].dataTween=
this._parent.objectList[e],this._parent.entityOverlay[f.objectID].tweenID=this.dataTween.id,this._parent.entityOverlay[f.objectID].setInitialProp()):(this._parent.entityOverlay[f.objectID]=ig.game.spawnEntity(EntityOverlay,0,0,{_parent:this._parent,objectID:f.objectID,dataTween:f,tweenID:f.id}),ig.game.sortEntitiesDeferred())}b&&(this.dataTween=d,this.tweenID=this.dataTween.id,this.setInitialProp(!0))},update:function(){this.parent()},calculateOffset:function(){var b=this.pos.x-ig.game.screen.x+ig.game.currentWindow.posXBG-
(-ig.game.screen.x+ig.sizeHandler.minW*ig.game.currentWindow.bg.pntX),d=ig.system.height*ig.game.currentWindow.bg.pntY,e=ig.game.currentWindow.bg.isImage?ig.game.currentWindow.bg.cvsBG.height:1280*_DATAGAME.ratioRes,d=e*ig.game.currentWindow.bg.pntY;return{x:-ig.game.screen.x+ig.sizeHandler.minW*ig.game.currentWindow.bg.pntX+b*ig.game.currentWindow.zoomBG,y:-ig.game.screen.y+ig.game.currentWindow.posYBG-e*(ig.game.currentWindow.zoomBG-1)*(d/e)+this.pos.y*ig.game.currentWindow.zoomBG}},draw:function(){this.parent();
var b=ig.system.context;if(this.objectType==this.TYPE_IMAGE&&this.imgSrc){b.save();var d=this.calculateOffset();b.globalAlpha=this.alpha;b.translate(d.x,d.y);b.rotate(this.angle*Math.PI/180);b.scale(this.scale.x*(this.flip.x?-1:1)*ig.game.currentWindow.zoomBG,this.scale.y*(this.flip.y?-1:1)*ig.game.currentWindow.zoomBG);var d=(this.flip.x?1-this.pivot.x:this.pivot.x)*-this.size.x,e=(this.flip.y?1-this.pivot.y:this.pivot.y)*-this.size.y;null==this.dataTween.tint?this.imgSrc.draw(d,e):this.imgSrc.drawTint(this.dataTween.tint,
1,d,e);b.restore()}else this.objectType==this.TYPE_TEXT&&this.textSrc&&(b.save(),d=this.calculateOffset(),b.globalAlpha=this.alpha,b.translate(d.x,d.y),b.rotate(this.angle*Math.PI/180),b.scale(this.scale.x*(this.flip.x?-1:1)*ig.game.currentWindow.zoomBG,this.scale.y*(this.flip.y?-1:1)*ig.game.currentWindow.zoomBG),d=(this.flip.x?1-this.pivot.x:this.pivot.x)*-this.size.x,e=(this.flip.y?1-this.pivot.y:this.pivot.y)*-this.size.y,b.fillText(this.textSrc,d,e),b.restore())}})});ig.baked=!0;
ig.module("game.entities.object.phone").requires("impact.entity").defines(function(){EntityPhone=ig.Entity.extend({zIndex:_DATAGAME.zIndexData.phone,imgPhone:new ig.Image(_RESOURCESINFO.image.phone),imgAvatar1:{},imgAvatar2:{},dataAvatar1:"",dataAvatar2:"",chattingName:"",titleName:"",idxStory:0,bubbleConfigs:{round:25*_DATAGAME.ratioRes,width:410*_DATAGAME.ratioRes,fontSize:30*_DATAGAME.ratioRes,height:90*_DATAGAME.ratioRes,padding:{x:30*_DATAGAME.ratioRes,y:15*_DATAGAME.ratioRes},fontName:"metromed",
fontTextName:"metroblack"},paddingText:15*_DATAGAME.ratioRes,phoneData:null,canClickPhone:!1,boolCheckHeight:!1,arrText:[],counterText:0,idPlayer:0,isImagePath:!1,size:{x:720*_DATAGAME.ratioRes,y:1280*_DATAGAME.ratioRes},sizeChat:{x:582*_DATAGAME.ratioRes,y:845*_DATAGAME.ratioRes},posChat:{x:0,y:0},posDefChat:{x:68*_DATAGAME.ratioRes,y:216*_DATAGAME.ratioRes},init:function(b,d,e){this.parent(b,d,e);this.timerAutoChat=new ig.Timer(ig.game.delayTextChat);this.timerAutoChat.pause();this.bubbleConfigs.fontName=
"arialmt";this.bubbleConfigs.fontTextName="arialmtbold";this.halfSize={x:this.size.x/2,y:this.size.y/2};this.loadDataPhone();this.repos();ig.game.sortEntitiesDeferred()},handleSuccess:function(b,d){this["imgUsingPath"+d]=new ig.Image(b);this.isImagePath=!0},handleError:function(){this.isImagePath=!1},loadDataPhone:function(){this.phoneData=_STRINGS[this.idxStory];ig.game.consoleLog(this.idxStory+" "+this.phoneData);this.chattingName=this.phoneData.from;this.titleName=2==this.phoneData.people[this.phoneData.people.map(function(b){return b.name}).indexOf(this.phoneData.from)].id?
this.phoneData.people[0].name:this.phoneData.people[1].name;for(var b in _STRINGS.dynamic_character)b.toLowerCase()==this.titleName.toLowerCase()&&(this.titleName=_STRINGS.dynamic_character[this.titleName][ig.game.sessionData.loveInterest]);for(b=0;b<this.phoneData.people.length;b++){var d=this.phoneData.people[b].name.toLowerCase(),d=d.replaceAll(" ",""),e=!1;if(null!=this.phoneData.people[b].path&&""!=this.phoneData.people[b].path){var f=_BASEPATH.avatar+this.phoneData.people[b].path+".png";try{$.ajax(f,
{success:this.handleSuccess.bind(this,f,this.phoneData.people[b].id),error:this.handleError.bind(this)})}catch(g){}}if("amy"==d)this["dataAvatar"+this.phoneData.people[b].id]=_DATAGAME.spriterData[ig.game.sessionData.dressUpTheme[ig.game.currentWindow.numChapter].now.toLowerCase()],null!=this["dataAvatar"+this.phoneData.people[b].id]&&(this["imgAvatar"+this.phoneData.people[b].id].skin=new ig.Image(_BASEPATH.spriter+"message/girl/"+this["dataAvatar"+this.phoneData.people[b].id].girl.skin+".png"),
this["imgAvatar"+this.phoneData.people[b].id].face=new ig.Image(_BASEPATH.spriter+"message/girl/"+this["dataAvatar"+this.phoneData.people[b].id].girl.face+".png"),this["imgAvatar"+this.phoneData.people[b].id].glasses=new ig.Image(_BASEPATH.spriter+"message/girl/"+(null==this["dataAvatar"+this.phoneData.people[b].id].girl.glasses?"glasses-none":this["dataAvatar"+this.phoneData.people[b].id].girl.glasses)+".png"),this["imgAvatar"+this.phoneData.people[b].id].hair=new ig.Image(_BASEPATH.spriter+"message/girl/"+
this["dataAvatar"+this.phoneData.people[b].id].girl.hair+".png"),this["imgAvatar"+this.phoneData.people[b].id].hairBack=new ig.Image(_BASEPATH.spriter+"message/girl/"+this["dataAvatar"+this.phoneData.people[b].id].girl.hair+"-back.png"),d=null==this["dataAvatar"+this.phoneData.people[b].id].girl.earrings?"earrings-none":this["dataAvatar"+this.phoneData.people[b].id].girl.earrings,this["imgAvatar"+this.phoneData.people[b].id].earrings=new ig.Image(_BASEPATH.spriter+"message/girl/"+d+".png"),this["imgAvatar"+
this.phoneData.people[b].id].earringsBack=new ig.Image(_BASEPATH.spriter+"message/girl/"+d+"-back.png"),this["imgAvatar"+this.phoneData.people[b].id].hat=new ig.Image(_BASEPATH.spriter+"message/girl/"+(null==this["dataAvatar"+this.phoneData.people[b].id].girl.hat?"hat-none":this["dataAvatar"+this.phoneData.people[b].id].girl.hat)+".png"),this["imgAvatar"+this.phoneData.people[b].id].beard=new ig.Image(_BASEPATH.spriter+"message/girl/"+(null==this["dataAvatar"+this.phoneData.people[b].id].girl.beard?
"beard-none":this["dataAvatar"+this.phoneData.people[b].id].girl.beard)+".png"));else{ig.game.currentWindow.checkCurrentCharDU(d);var f="boy",j;for(j in _DATAGAME.dynamic_name)_DATAGAME.dynamic_name[j].toLowerCase()==this.phoneData.people[b].name.toLowerCase()&&(f=ig.game.sessionData.loveInterest,e=!0);if(!e)for(var l in _DATAGAME.neutral_girl)_DATAGAME.neutral_girl[l].toLowerCase()==this.phoneData.people[b].name.toLowerCase()&&(f="girl",e=!0);this["dataAvatar"+this.phoneData.people[b].id]=_DATAGAME.spriterData[ig.game.sessionData.dressUpChar[ig.game.currentWindow.numChapter][d]];
null!=this["dataAvatar"+this.phoneData.people[b].id]&&(this["imgAvatar"+this.phoneData.people[b].id].skin=new ig.Image(_BASEPATH.spriter+"message/"+f+"/"+this["dataAvatar"+this.phoneData.people[b].id][f].skin+".png"),this["imgAvatar"+this.phoneData.people[b].id].face=new ig.Image(_BASEPATH.spriter+"message/"+f+"/"+this["dataAvatar"+this.phoneData.people[b].id][f].face+".png"),this["imgAvatar"+this.phoneData.people[b].id].hair=new ig.Image(_BASEPATH.spriter+"message/"+f+"/"+this["dataAvatar"+this.phoneData.people[b].id][f].hair+
".png"),this["imgAvatar"+this.phoneData.people[b].id].hairBack=new ig.Image(_BASEPATH.spriter+"message/"+f+"/"+this["dataAvatar"+this.phoneData.people[b].id][f].hair+"-back.png"),this["imgAvatar"+this.phoneData.people[b].id].glasses=new ig.Image(_BASEPATH.spriter+"message/"+f+"/"+(null==this["dataAvatar"+this.phoneData.people[b].id][f].glasses?"glasses-none":this["dataAvatar"+this.phoneData.people[b].id][f].glasses)+".png"),d=null==this["dataAvatar"+this.phoneData.people[b].id][f].earrings?"earrings-none":
this["dataAvatar"+this.phoneData.people[b].id][f].earrings,this["imgAvatar"+this.phoneData.people[b].id].earrings=new ig.Image(_BASEPATH.spriter+"message/"+f+"/"+d+".png"),this["imgAvatar"+this.phoneData.people[b].id].earringsBack=new ig.Image(_BASEPATH.spriter+"message/"+f+"/"+d+"-back.png"),this["imgAvatar"+this.phoneData.people[b].id].hat=new ig.Image(_BASEPATH.spriter+"message/"+f+"/"+(null==this["dataAvatar"+this.phoneData.people[b].id][f].hat?"hat-none":this["dataAvatar"+this.phoneData.people[b].id][f].hat)+
".png"),this["imgAvatar"+this.phoneData.people[b].id].beard=new ig.Image(_BASEPATH.spriter+"message/"+f+"/"+(null==this["dataAvatar"+this.phoneData.people[b].id][f].beard?"beard-none":this["dataAvatar"+this.phoneData.people[b].id][f].beard)+".png"))}}},startText:function(){this.idPlayer=this.phoneData.people[this.phoneData.people.map(function(b){return b.name}).indexOf(this.phoneData.from)].id;this.spawnChatBubble()},drawBubble:function(b,d){var e=this.bubbleConfigs.round,f=0+this.bubbleConfigs.width,
g=0+d.bubbleH,j=25*_DATAGAME.ratioRes,l=38*_DATAGAME.ratioRes,n=51*_DATAGAME.ratioRes,m=15*_DATAGAME.ratioRes,r=d.tail,q=d.noTail,s=this.posDefChat.x+26*_DATAGAME.ratioRes;"left"==r&&(s=this.posDefChat.x+120*_DATAGAME.ratioRes+this.bubbleConfigs.round);var t=this.posDefChat.y+d.posBubble.y;b.save();if("divider"!=d.textType){b.translate(-ig.game.screen.x+s,-ig.game.screen.y+t+this.posChat.y);if(null!=d.image){var v=this.bubbleConfigs.width-d.image.width;"left"==d.tail&&(v=0);d.image.draw(v,this.paddingText+
d.bubbleH)}if(d.avatar){v=this.bubbleConfigs.width+m+12*_DATAGAME.ratioRes;"left"==d.tail&&(v=-m-110*_DATAGAME.ratioRes);var u=47*_DATAGAME.ratioRes,x=4*_DATAGAME.ratioRes;b.beginPath();null!=this["dataAvatar"+d.avatarId]&&(b.arc(v+u+x,-5*_DATAGAME.ratioRes+u+x,u,0,2*Math.PI),b.fillStyle=this["dataAvatar"+d.avatarId].bgName,b.fill(),b.lineWidth=3*_DATAGAME.ratioRes,b.strokeStyle="black",b.stroke());this.isImagePath&&null!=this["imgUsingPath"+d.avatarId]?this["imgUsingPath"+d.avatarId].draw(v,-5*_DATAGAME.ratioRes):
this["dataAvatar"+d.avatarId]&&(this["imgAvatar"+d.avatarId].hairBack.draw(v,-5*_DATAGAME.ratioRes),this["imgAvatar"+d.avatarId].earringsBack.draw(v,-5*_DATAGAME.ratioRes),this["imgAvatar"+d.avatarId].skin.draw(v,-5*_DATAGAME.ratioRes),this["imgAvatar"+d.avatarId].earrings.draw(v,-5*_DATAGAME.ratioRes),this["imgAvatar"+d.avatarId].hair.draw(v,-5*_DATAGAME.ratioRes),this["imgAvatar"+d.avatarId].face.draw(v,-5*_DATAGAME.ratioRes),this["imgAvatar"+d.avatarId].glasses.draw(v,-5*_DATAGAME.ratioRes),this["imgAvatar"+
d.avatarId].beard.draw(v,-5*_DATAGAME.ratioRes),this["imgAvatar"+d.avatarId].hat.draw(v,-5*_DATAGAME.ratioRes))}b.beginPath();b.moveTo(0,0+e);"right"==r&&(b.lineTo(0,g-e),b.quadraticCurveTo(0,g,0+e,g),b.lineTo(f-e,g),b.quadraticCurveTo(f,g,f,g-e),q||(b.lineTo(f,n),b.lineTo(f+m,l),b.lineTo(f,j)),b.lineTo(f,0+e),b.quadraticCurveTo(f,0,f-e,0),b.lineTo(0+e,0),b.quadraticCurveTo(0,0,0,0+e));"left"==r&&(q||(b.lineTo(0,j),b.lineTo(0-m,l),b.lineTo(0,n)),b.lineTo(0,g-e),b.quadraticCurveTo(0,g,0+e,g),b.lineTo(f-
e,g),b.quadraticCurveTo(f,g,f,g-e),b.lineTo(f,0+e),b.quadraticCurveTo(f,0,f-e,0),b.lineTo(0+e,0),b.quadraticCurveTo(0,0,0,0+e));b.closePath();b.save();b.fillStyle="white";b.fill();b.lineWidth=4*_DATAGAME.ratioRes;b.strokeStyle="black";b.stroke();b.restore()}b.restore();b.save();b.textBaseline="top";"divider"==d.textType?(b.translate(-ig.game.screen.x+this.posDefChat.x,-ig.game.screen.y+t+this.posChat.y),b.fillStyle="white",b.font=this.bubbleConfigs.fontSize*ig.game.fontRatio+"px "+this.bubbleConfigs.fontName,
b.textAlign="center"):b.translate(-ig.game.screen.x+s,-ig.game.screen.y+t+this.posChat.y);for(e=0;e<d.textData.textLines.length;e++)1==d.textData.textLines.length&&"divider"!=d.textType?(b.textBaseline="middle",b.fillText(d.textData.textLines[e],15*_DATAGAME.ratioRes,this.bubbleConfigs.height/2)):"divider"==d.textType?b.fillText(d.textData.textLines[e],this.sizeChat.x/2,20*_DATAGAME.ratioRes+e*d.textData.fontHeight):b.fillText(d.textData.textLines[e],15*_DATAGAME.ratioRes,15*_DATAGAME.ratioRes+e*
d.textData.fontHeight);b.restore()},spawnChatBubble:function(){this.timerAutoChat.set(ig.game.delayTextChat);this.timerAutoChat.reset();this.timerAutoChat.unpause();this.arrText.push({text:null,posBubble:{x:0,y:0},textType:"text",noTail:!1,tail:"none",height:0,bubbleH:0,avatar:!1,image:null});this.counterText=this.arrText.length-1;var b=!1;0==this.phoneData.data[this.counterText].id?(this.arrText[this.counterText].textType="divider",b=!0):this.phoneData.data[this.counterText].id==this.idPlayer?(ig.soundHandler.sfxPlayer.play("send"),
this.arrText[this.counterText].tail="right",0==this.counterText||0<this.counterText&&this.phoneData.data[this.counterText-1].id!=this.idPlayer?(this.arrText[this.counterText].avatar=!0,this.arrText[this.counterText].avatarId=this.phoneData.data[this.counterText].id):this.arrText[this.counterText].noTail=!0):(ig.soundHandler.sfxPlayer.play("notif"),this.arrText[this.counterText].tail="left",0==this.counterText||0<this.counterText&&this.phoneData.data[this.counterText-1].id!=this.phoneData.data[this.counterText].id?
(this.arrText[this.counterText].avatar=!0,this.arrText[this.counterText].avatarId=this.phoneData.data[this.counterText].id):this.arrText[this.counterText].noTail=!0);var d=this.phoneData.data[this.counterText].text,d=d.replaceAll("{NAME}",ig.game.sessionData.playerName),e;for(e in _STRINGS.dynamic_character)d=d.replaceAll("{"+e+"}",_STRINGS.dynamic_character[e][ig.game.sessionData.loveInterest]);d=ig.game.wordWrapForChatBubble(d,this.bubbleConfigs.width-30*_DATAGAME.ratioRes,this.bubbleConfigs.fontSize,
this.bubbleConfigs.fontName,!0);this.arrText[this.counterText].text=d;d=ig.system.context;d.font=this.bubbleConfigs.fontSize+"px "+this.bubbleConfigs.fontName;this.arrText[this.counterText].size=this.measure(this.arrText[this.counterText],d,b);b?this.arrText[this.counterText].size.y+=40*_DATAGAME.ratioRes:(this.arrText[this.counterText].size.y+=30*_DATAGAME.ratioRes,this.arrText[this.counterText].size.y<=this.bubbleConfigs.height&&(this.arrText[this.counterText].size.y=this.bubbleConfigs.height));
this.arrText[this.counterText].bubbleH=this.arrText[this.counterText].size.y;this.arrText[this.counterText].height=this.arrText[this.counterText].size.y;this.arrText[this.counterText].posBubble.y=0!=this.counterText?this.arrText[this.arrText.length-2].posBubble.y+this.arrText[this.arrText.length-2].height+this.paddingText:20*_DATAGAME.ratioRes;""!=this.phoneData.data[this.counterText].image?(b="",this.phoneData.data[this.counterText].imageLoveInterest&&(b="girl"==ig.game.sessionData.loveInterest?
2:1),this.arrText[this.counterText].image=new ig.Image(_BASEPATH.mediaGame+"graphics/sprites/message/"+this.phoneData.data[this.counterText].image+b+".png"),this.boolCheckHeight=!0):this.checkHeight()},measureLine:function(b,d){for(var e=b.measureText(d[0]),f=1;f<d.length;f++){var g=b.measureText(d[f]);g.width>=e.width&&(e=g)}return e},measure:function(b,d,e){var f=b.text.toString().split("<br>"),g=b.text.toString().split("<br>");d.save();d.font=e?"bold "+this.bubbleConfigs.fontSize+"px "+this.bubbleConfigs.fontName:
this.bubbleConfigs.fontSize+"px "+this.bubbleConfigs.fontName;e=this.measureLine(d,g);d.restore();b.textData={textLines:f,textLinesFull:g,textWidth:e.width,fontHeight:e.fontBoundingBoxAscent+e.fontBoundingBoxDescent};if(isNaN(b.textData.fontHeight)||null==b.textData.fontHeight)b.textData.fontHeight=this.bubbleConfigs.fontSize;return{x:b.textData.textWidth,y:b.textData.fontHeight*b.textData.textLinesFull.length}},checkHeight:function(){0!=this.counterText&&(this.arrText[this.counterText].posBubble.y=
this.arrText[this.arrText.length-2].posBubble.y+this.arrText[this.arrText.length-2].height+this.paddingText);this.arrText[this.counterText].posBubble.y+this.posChat.y+this.arrText[this.counterText].height>this.sizeChat.y-10*_DATAGAME.ratioRes&&(this.posChat.y-=Math.abs(this.arrText[this.counterText].posBubble.y+this.posChat.y+this.arrText[this.counterText].height-(this.sizeChat.y-10*_DATAGAME.ratioRes)));this.repos();0==this.phoneData.data[this.counterText].id?this.spawnChatBubble():this.canClickPhone=
!0},repos:function(){this.pos={x:ig.game.midX-this.halfSize.x,y:ig.game.midY-this.halfSize.y}},update:function(){this.parent();this.boolCheckHeight&&(null!=this.arrText[this.counterText].image&&0<this.arrText[this.counterText].image.height)&&(this.arrText[this.counterText].height+=this.arrText[this.counterText].image.height+this.paddingText,this.boolCheckHeight=!1,this.checkHeight());if(ig.game.dialogAutoStatus!=ig.game.STAT_DIALOG_NORMAL)null!=this.timerAutoChat&&0<this.timerAutoChat.delta()&&(this.timerAutoChat.set(ig.game.delayTextChat),
this.timerAutoChat.reset(),this.timerAutoChat.pause(),this.arrText.length>=this.phoneData.data.length?(this.canClickPhone=!1,ig.game.currentWindow.checkChatBubble()):this.spawnChatBubble());else if(this._parent.canClickStage&&this.canClickPhone&&(ig.input.released("click")||!0==ig.game.currentWindow.checkFowardDialog())&&ig.game.dialogAutoStatus==ig.game.STAT_DIALOG_NORMAL&&!ig.game.isClickClose&&!ig.game.currentWindow.isClickButton)this.arrText.length>=this.phoneData.data.length?(this.canClickPhone=
!1,ig.game.currentWindow.checkChatBubble()):this.spawnChatBubble()},draw:function(){this.parent();var b=ig.system.context;b.save();b.translate(this.pos.x,this.pos.y);this.imgPhone.draw(0,0);b.textAlign="center";b.textBaseline="middle";b.fillStyle="white";b.font=Math.round(50*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+this.bubbleConfigs.fontTextName;b.fillText(this.titleName,this.halfSize.x,this.posDefChat.y-60*_DATAGAME.ratioRes);b.restore();b.save();b.beginPath();b.moveTo(-ig.game.screen.x+ig.sizeHandler.minW/
2-this.halfSize.x+this.posDefChat.x,-ig.game.screen.y+ig.sizeHandler.minH/2-this.halfSize.y+this.posDefChat.y);b.lineTo(-ig.game.screen.x+ig.sizeHandler.minW/2-this.halfSize.x+this.posDefChat.x+this.sizeChat.x,-ig.game.screen.y+ig.sizeHandler.minH/2-this.halfSize.y+this.posDefChat.y);b.lineTo(-ig.game.screen.x+ig.sizeHandler.minW/2-this.halfSize.x+this.posDefChat.x+this.sizeChat.x,-ig.game.screen.y+ig.sizeHandler.minH/2-this.halfSize.y+this.posDefChat.y+this.sizeChat.y);b.lineTo(-ig.game.screen.x+
ig.sizeHandler.minW/2-this.halfSize.x+this.posDefChat.x,-ig.game.screen.y+ig.sizeHandler.minH/2-this.halfSize.y+this.posDefChat.y+this.sizeChat.y);b.closePath();b.clip();for(var d=0;d<this.arrText.length;d++)0<this.arrText[d].posBubble.y+this.posChat.y+this.arrText[d].height&&this.drawBubble(b,this.arrText[d]);b.restore()}})});ig.baked=!0;
ig.module("game.entities.object.letter").requires("impact.entity").defines(function(){EntityLetter=ig.Entity.extend({zIndex:_DATAGAME.zIndexData.letter,bgLetter:new ig.Image(_RESOURCESINFO.image.bgLetter),imageLetter:null,showImage:!1,letterData:null,boolDrawText:!1,canClickLetter:!1,size:{x:662*_DATAGAME.ratioRes,y:885*_DATAGAME.ratioRes},padding:{x:30*_DATAGAME.ratioRes,y:30*_DATAGAME.ratioRes},imagePos:{x:0,y:0},textGreetingWidth:0,textBodyWidth:0,textClosureWidth:0,imageSize:null,fontSize:30*
_DATAGAME.ratioRes,fontName:"script1",startLoadSentence:!1,loadSentence:!1,counterWord:0,modWord:2,currentWord:0,statText:0,TEXT_GREETING:0,TEXT_BODY:1,TEXT_CLOSURE:2,init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};this.loadDataLetter();this.repos();this.timerAutoDialog=new ig.Timer(ig.game.delayDialog);this.timerAutoDialog.pause();ig.game.sortEntitiesDeferred()},loadDataLetter:function(){this.letterData=_STRINGS[this.idxStory];console.log(this.idxStory+" "+
this.letterData);if(null!=this.letterData.image){var b=this.letterData.image.id;!0==this.letterData.image.imageLoveInterest&&(b="girl"==ig.game.sessionData.loveInterest?this.letterData.image.id+"2":this.letterData.image.id+"1");this.imageLetter=new ig.Image(_BASEPATH.mediaGame+"graphics/sprites/message/"+b+".png");this.imagePos={x:this.bgLetter.width-this.imageLetter.width-this.padding.x,y:this.padding.y}}"default"!=this.letterData.font&&(this.fontName=0<this.letterData.font?"script"+this.letterData.font:
this.letterData.font);"script3"==this.fontName?this.fontSize*=1.1:"script4"==this.fontName&&(this.fontSize*=0.95);null!=this.letterData.bgImage&&(this.bgLetter=new ig.Image(_BASEPATH.image+"sprites/"+this.letterData.bgImage+".png"));1==this.letterData.speed&&(this.modWord=6);2==this.letterData.speed&&(this.modWord=4);3==this.letterData.speed&&(this.modWord=2);this.modWord*=ig.game.speedModDialog;null==this.imageLetter&&(this.setTextPosition(!1),this.startText())},startText:function(){this.showImage=
!0;this.statText=this.TEXT_GREETING;this.counterWord=this.currentWord=0;this.loadSentence=!1==this.letterData.animation?!1:!0;this.startLoadSentence=!0},repos:function(){this.pos={x:ig.game.midX-this.halfSize.x,y:ig.game.midY-this.halfSize.y}},trackWord:function(){var b=this.arrTextGreetingWord;this.statText==this.TEXT_BODY?b=this.arrTextBodyWord:this.statText==this.TEXT_CLOSURE&&(b=this.arrTextClosureWord);this.currentWord<b.length?(b=b[this.currentWord],this.statText==this.TEXT_GREETING?(this.textGreeting+=
b,this.textGreeting+=" ",this.arrTextGreeting=ig.game.wordWrapLetter(this.textGreeting,this.textGreetingWidth,this.fontSize,this.fontName)):this.statText==this.TEXT_BODY?(this.textBody+=b,this.textBody+=" ",this.arrTextBody=ig.game.wordWrapLetter(this.textBody,this.textBodyWidth,this.fontSize,this.fontName)):this.statText==this.TEXT_CLOSURE&&(this.textClosure+=b,this.textClosure+=" ",this.arrTextClosure=ig.game.wordWrapLetter(this.textClosure,this.textClosureWidth,this.fontSize,this.fontName)),this.currentWord++):
(this.loadSentence=!1,this.currentWord=0,this.statText==this.TEXT_GREETING?(this.statText=this.TEXT_BODY,this.loadSentence=!0):this.statText==this.TEXT_BODY?(this.statText=this.TEXT_CLOSURE,this.loadSentence=!0):this.statText==this.TEXT_CLOSURE&&(this.timerAutoDialog.set(ig.game.delayDialog),this.timerAutoDialog.reset(),this.timerAutoDialog.unpause()))},setTextPosition:function(b){this.canClickLetter=this.boolDrawText=!0;this.textGreetingWidth=this.size.x-2*this.padding.x;this.textBodyWidth=this.size.x-
2*this.padding.x;this.textClosureWidth=this.size.x-2*this.padding.x;b&&(this.textGreetingWidth=this.size.x-2*this.padding.x-this.imageSize.x-this.padding.x);this.arrTextGreetingFull=ig.game.wordWrapLetter(this.letterData.data[0].text,this.textGreetingWidth,this.fontSize,this.fontName);this.arrTextBodyFull=ig.game.wordWrapLetter(this.letterData.data[1].text,this.textBodyWidth,this.fontSize,this.fontName);this.arrTextClosureFull=ig.game.wordWrapLetter(this.letterData.data[2].text,this.textClosureWidth,
this.fontSize,this.fontName);if(ig.game.noSpacing){var d=this.letterData.data[0].text.split(""),e=this.letterData.data[1].text.split(""),f=this.letterData.data[2].text.split("");this.arrTextGreetingWord=[];this.arrTextBodyWord=[];this.arrTextClosureWord=[];ig.game.arrayWordWrapRegex(d,this.arrTextGreetingWord);ig.game.arrayWordWrapRegex(e,this.arrTextBodyWord);ig.game.arrayWordWrapRegex(f,this.arrTextClosureWord)}else this.arrTextGreetingWord=this.letterData.data[0].text.split(" "),this.arrTextBodyWord=
this.letterData.data[1].text.split(" "),this.arrTextClosureWord=this.letterData.data[2].text.split(" ");this.textClosure=this.textBody=this.textGreeting="";this.arrTextGreeting=[];this.arrTextBody=[];this.arrTextClosure=[];b?(this.yTextBody=this.padding.y+this.imageSize.y+20,this.yTextClosure=this.yTextBody+1.1*this.arrTextBodyFull.length*this.fontSize+this.fontSize,b=1.1*this.arrTextGreetingFull.length*this.fontSize,b>=this.imageSize.y&&(this.yTextBody=this.padding.y+b+this.fontSize,this.yTextClosure=
this.yTextBody+1.1*this.arrTextBodyFull.length*this.fontSize+this.fontSize)):(this.yTextBody=this.padding.y+1.1*this.arrTextGreetingFull.length*this.fontSize+this.fontSize,this.yTextClosure=this.yTextBody+1.1*this.arrTextBodyFull.length*this.fontSize+this.fontSize);this.letterData.animation||(this.arrTextGreeting=this.arrTextGreetingFull.concat([]),this.arrTextBody=this.arrTextBodyFull.concat([]),this.arrTextClosure=this.arrTextClosureFull.concat([]),this.startLoadSentence=!0,this.loadSentence=!1,
this.showImage=!0)},getImageHeight:function(){null!=this.imageLetter&&(null==this.imageSize&&0!=this.imageLetter.width)&&(this.imageSize={x:this.imageLetter.width,y:this.imageLetter.height},this.setTextPosition(!0),this.startText())},update:function(){this.parent();this.getImageHeight();if(!ig.game.isPauseSetting&&0!=ig.Timer.timeScale&&(this.loadSentence&&(this.counterWord++,0==this.counterWord%this.modWord&&this.trackWord()),this.startLoadSentence&&this._parent.canClickStage&&this.canClickLetter&&
!ig.game.currentWindow.isClickButton&&!ig.game.isClickClose))if(this.loadSentence){if((ig.input.released("click")||!0==ig.game.currentWindow.checkFowardDialog())&&ig.game.dialogAutoStatus==ig.game.STAT_DIALOG_NORMAL)!ig.game.autoDialog,this.loadSentence=!1,this.showImage=!0,this.arrTextGreeting=this.arrTextGreetingFull.concat([]),this.arrTextBody=this.arrTextBodyFull.concat([]),this.arrTextClosure=this.arrTextClosureFull.concat([])}else if(ig.game.dialogAutoStatus!=ig.game.STAT_DIALOG_NORMAL)null!=
this.timerAutoDialog&&0<this.timerAutoDialog.delta()&&(this.timerAutoDialog.set(ig.game.delayDialog),this.timerAutoDialog.reset(),this.timerAutoDialog.pause(),this.canClickLetter=!1,ig.game.currentWindow.checkChatBubble());else if((ig.input.released("click")||!0==ig.game.currentWindow.checkFowardDialog())&&ig.game.dialogAutoStatus==ig.game.STAT_DIALOG_NORMAL)!ig.game.autoDialog,this.canClickLetter=!1,ig.game.currentWindow.checkChatBubble()},draw:function(){this.parent();var b=ig.system.context;b.save();
b.translate(this.pos.x,this.pos.y);this.bgLetter.draw(0,0);null!=this.imageLetter&&this.showImage&&("top-left"==this.letterData.image.position?this.imageLetter.draw(this.padding.x,this.imagePos.y):this.imageLetter.draw(this.bgLetter.width-this.imageLetter.width-this.padding.x,this.imagePos.y));b.fillStyle="black";b.textBaseline="top";var d="";"script1"==this.fontName&&(d="bold ");b.font=d+this.fontSize+"px "+this.fontName;this.boolDrawText&&(null!=this.imageLetter&&"top-left"==this.letterData.image.position?
ig.game.drawText(this.arrTextGreeting,this.fontSize,b,2*this.padding.x+this.imageSize.x,this.padding.y):ig.game.drawText(this.arrTextGreeting,this.fontSize,b,this.padding.x,this.padding.y),ig.game.drawText(this.arrTextBody,this.fontSize,b,this.padding.x,this.yTextBody),ig.game.drawText(this.arrTextClosure,this.fontSize,b,this.padding.x,this.yTextClosure));b.restore()}})});ig.baked=!0;
ig.module("game.entities.object.email").requires("impact.entity").defines(function(){EntityEmail=ig.Entity.extend({zIndex:_DATAGAME.zIndexData.email,bgEmail:new ig.Image(_RESOURCESINFO.image.bgEmail),imageEmail:null,emailData:null,showImage:!1,boolDrawText:!1,canClickEmail:!1,size:{x:662*_DATAGAME.ratioRes,y:885*_DATAGAME.ratioRes},padding:{x:30*_DATAGAME.ratioRes,y:30*_DATAGAME.ratioRes},imagePos:{x:0,y:0},textGreetingWidth:0,textBodyWidth:0,textClosureWidth:0,imageSize:null,fontSize:28*_DATAGAME.ratioRes,
fontName:"arial",startLoadSentence:!1,loadSentence:!1,counterWord:0,modWord:2,currentWord:0,statText:0,TEXT_TO:0,TEXT_FROM:1,TEXT_SUBJECT:2,TEXT_GREETING:3,TEXT_BODY:4,TEXT_CLOSURE:5,init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};this.loadDataEmail();this.repos();this.timerAutoDialog=new ig.Timer(ig.game.delayDialog);this.timerAutoDialog.pause();ig.game.sortEntitiesDeferred()},loadDataEmail:function(){this.emailData=_STRINGS[this.idxStory];console.log(this.idxStory+
" "+this.emailData);if(null!=this.emailData.image){var b=this.emailData.image.id;!0==this.emailData.image.imageLoveInterest&&(b="girl"==ig.game.sessionData.loveInterest?this.emailData.image.id+"2":this.emailData.image.id+"1");this.imageEmail=new ig.Image(_BASEPATH.mediaGame+"graphics/sprites/message/"+b+".png");this.imagePos={x:this.padding.x,y:this.padding.y}}this.fontName="arialmt";null!=this.emailData.bgImage&&(this.bgEmail=new ig.Image(_BASEPATH.image+"sprites/"+this.emailData.bgImage+".png"));
1==this.emailData.speed&&(this.modWord=6);2==this.emailData.speed&&(this.modWord=4);3==this.emailData.speed&&(this.modWord=2);this.modWord*=ig.game.speedModDialog;null==this.imageEmail&&(this.setTextPosition(!1),this.startText())},startText:function(){this.statText=this.TEXT_TO;this.counterWord=this.currentWord=0;this.loadSentence=!1==this.emailData.animation?!1:!0;this.startLoadSentence=!0},repos:function(){this.pos={x:ig.game.midX-this.halfSize.x,y:ig.game.midY-this.halfSize.y}},trackWord:function(){var b=
this.arrTextGreetingWord;this.statText==this.TEXT_BODY?b=this.arrTextBodyWord:this.statText==this.TEXT_CLOSURE?b=this.arrTextClosureWord:this.statText==this.TEXT_TO?b=this.arrTextToWord:this.statText==this.TEXT_FROM?b=this.arrTextFromWord:this.statText==this.TEXT_SUBJECT&&(b=this.arrTextSubjectWord);this.currentWord<b.length?(b=b[this.currentWord],this.statText==this.TEXT_GREETING?(this.textGreeting+=b,this.textGreeting+=" ",this.arrTextGreeting=ig.game.wordWrapLetter(this.textGreeting,this.textGreetingWidth,
this.fontSize,this.fontName)):this.statText==this.TEXT_BODY?(this.textBody+=b,this.textBody+=" ",this.arrTextBody=ig.game.wordWrapLetter(this.textBody,this.textBodyWidth,this.fontSize,this.fontName)):this.statText==this.TEXT_CLOSURE?(this.textClosure+=b,this.textClosure+=" ",this.arrTextClosure=ig.game.wordWrapLetter(this.textClosure,this.textClosureWidth,this.fontSize,this.fontName)):this.statText==this.TEXT_TO?(this.textTo+=b,this.textTo+=" ",this.arrTextTo=ig.game.wordWrapLetter(this.textTo,this.textClosureWidth,
this.fontSize,this.fontName)):this.statText==this.TEXT_FROM?(this.textFrom+=b,this.textFrom+=" ",this.arrTextFrom=ig.game.wordWrapLetter(this.textFrom,this.textClosureWidth,this.fontSize,this.fontName)):this.statText==this.TEXT_SUBJECT&&(this.textSubject+=b,this.textSubject+=" ",this.arrTextSubject=ig.game.wordWrapLetter(this.textSubject,this.textClosureWidth,this.fontSize,this.fontName)),this.currentWord++):(this.loadSentence=!1,this.currentWord=0,this.statText==this.TEXT_GREETING?(this.statText=
this.TEXT_BODY,this.loadSentence=!0):this.statText==this.TEXT_BODY?(this.statText=this.TEXT_CLOSURE,this.loadSentence=!0):this.statText==this.TEXT_CLOSURE?(this.showImage=!0,this.timerAutoDialog.set(ig.game.delayDialog),this.timerAutoDialog.reset(),this.timerAutoDialog.unpause()):this.statText==this.TEXT_TO?(this.statText=this.TEXT_FROM,this.loadSentence=!0):this.statText==this.TEXT_FROM?(this.statText=this.TEXT_SUBJECT,this.loadSentence=!0):this.statText==this.TEXT_SUBJECT&&(this.statText=this.TEXT_GREETING,
this.loadSentence=!0))},setTextPosition:function(b){this.canClickEmail=this.boolDrawText=!0;this.textSubjectWidth=this.size.x-2*this.padding.x;this.textGreetingWidth=this.size.x-2*this.padding.x;this.textBodyWidth=this.size.x-2*this.padding.x;this.textClosureWidth=this.size.x-2*this.padding.x;b&&(this.textGreetingWidth=this.size.x-2*this.padding.x-this.imageSize.x-this.padding.x);this.arrTextGreetingFull=ig.game.wordWrapLetter(this.emailData.data[0].text,this.textGreetingWidth,this.fontSize,this.fontName);
this.arrTextBodyFull=ig.game.wordWrapLetter(this.emailData.data[1].text,this.textBodyWidth,this.fontSize,this.fontName);this.arrTextClosureFull=ig.game.wordWrapLetter(this.emailData.data[2].text,this.textClosureWidth,this.fontSize,this.fontName);var d=_STRINGS.Email.subject+" : "+this.emailData.subtitle,e=_STRINGS.Email.to+" : "+this.emailData.to,f=_STRINGS.Email.from+" : "+this.emailData.from;this.arrTextSubjectFull=ig.game.wordWrapLetter(d,this.textSubjectWidth,this.fontSize,this.fontName);this.arrTextToFull=
ig.game.wordWrapLetter(e,this.textSubjectWidth,this.fontSize,this.fontName);this.arrTextFromFull=ig.game.wordWrapLetter(f,this.textSubjectWidth,this.fontSize,this.fontName);if(ig.game.noSpacing){var d=d.split(" "),e=e.split(" "),f=f.split(" "),g=this.emailData.data[0].text.split(""),j=this.emailData.data[1].text.split(""),l=this.emailData.data[2].text.split("");this.arrTextSubjectWord=[];this.arrTextToWord=[];this.arrTextFromWord=[];this.arrTextGreetingWord=[];this.arrTextBodyWord=[];this.arrTextClosureWord=
[];ig.game.arrayWordWrapRegex(d,this.arrTextSubjectWord);ig.game.arrayWordWrapRegex(e,this.arrTextToWord);ig.game.arrayWordWrapRegex(f,this.arrTextFromWord);ig.game.arrayWordWrapRegex(g,this.arrTextGreetingWord);ig.game.arrayWordWrapRegex(j,this.arrTextBodyWord);ig.game.arrayWordWrapRegex(l,this.arrTextClosureWord)}else this.arrTextSubjectWord=d.split(" "),this.arrTextToWord=e.split(" "),this.arrTextFromWord=f.split(" "),this.arrTextGreetingWord=this.emailData.data[0].text.split(" "),this.arrTextBodyWord=
this.emailData.data[1].text.split(" "),this.arrTextClosureWord=this.emailData.data[2].text.split(" ");this.textClosure=this.textBody=this.textGreeting=this.textTo=this.textFrom=this.textSubject="";this.arrTextGreeting=[];this.arrTextBody=[];this.arrTextClosure=[];this.arrTextTo=[];this.arrTextFrom=[];this.arrTextSubject=[];this.yTextTo=this.padding.y;this.yTextFrom=this.padding.y+1.1*this.fontSize;this.yTextSubject=this.padding.y+2.2*this.fontSize;this.yTextGreeting=this.yTextSubject+1.1*this.arrTextSubjectFull.length*
this.fontSize+this.fontSize;this.yTextBody=this.yTextGreeting+1.1*this.arrTextGreetingFull.length*this.fontSize+this.fontSize;this.yTextClosure=this.yTextBody+1.1*this.arrTextBodyFull.length*this.fontSize+this.fontSize;b&&(this.imagePos.y=this.yTextClosure+1.1*this.arrTextClosureFull.length*this.fontSize+this.fontSize);this.emailData.animation||(this.arrTextTo=this.arrTextToFull.concat([]),this.arrTextFrom=this.arrTextFromFull.concat([]),this.arrTextSubject=this.arrTextSubjectFull.concat([]),this.arrTextGreeting=
this.arrTextGreetingFull.concat([]),this.arrTextBody=this.arrTextBodyFull.concat([]),this.arrTextClosure=this.arrTextClosureFull.concat([]),this.startLoadSentence=!0,this.loadSentence=!1,this.showImage=!0)},getImageHeight:function(){null!=this.imageEmail&&(null==this.imageSize&&0!=this.imageEmail.width)&&(this.imageSize={x:this.imageEmail.width,y:this.imageEmail.height},this.setTextPosition(!0),this.startText())},update:function(){this.parent();this.getImageHeight();if(!ig.game.isPauseSetting&&0!=
ig.Timer.timeScale&&(this.loadSentence&&!0==this.emailData.animation&&(this.counterWord++,0==this.counterWord%this.modWord&&this.trackWord()),this.startLoadSentence&&this._parent.canClickStage&&this.canClickEmail&&!ig.game.currentWindow.isClickButton&&!ig.game.isClickClose))if(this.loadSentence){if((ig.input.released("click")||!0==ig.game.currentWindow.checkFowardDialog())&&ig.game.dialogAutoStatus==ig.game.STAT_DIALOG_NORMAL)this.loadSentence=!1,this.showImage=!0,this.arrTextTo=this.arrTextToFull.concat([]),
this.arrTextFrom=this.arrTextFromFull.concat([]),this.arrTextSubject=this.arrTextSubjectFull.concat([]),this.arrTextGreeting=this.arrTextGreetingFull.concat([]),this.arrTextBody=this.arrTextBodyFull.concat([]),this.arrTextClosure=this.arrTextClosureFull.concat([])}else if(ig.game.dialogAutoStatus!=ig.game.STAT_DIALOG_NORMAL)null!=this.timerAutoDialog&&0<this.timerAutoDialog.delta()&&(this.timerAutoDialog.set(ig.game.delayDialog),this.timerAutoDialog.reset(),this.timerAutoDialog.pause(),this.canClickEmail=
!1,ig.game.currentWindow.checkChatBubble());else if((ig.input.released("click")||!0==ig.game.currentWindow.checkFowardDialog())&&ig.game.dialogAutoStatus==ig.game.STAT_DIALOG_NORMAL)this.canClickEmail=!1,ig.game.currentWindow.checkChatBubble()},draw:function(){this.parent();var b=ig.system.context;b.save();b.translate(this.pos.x,this.pos.y);this.bgEmail.draw(0,0);null!=this.imageEmail&&this.showImage&&this.imageEmail.draw(this.padding.x,this.imagePos.y);b.fillStyle="black";b.textBaseline="top";b.font=
this.fontSize+"px "+this.fontName;this.boolDrawText&&(ig.game.drawText(this.arrTextTo,this.fontSize,b,this.padding.x,this.yTextTo),ig.game.drawText(this.arrTextFrom,this.fontSize,b,this.padding.x,this.yTextFrom),ig.game.drawText(this.arrTextSubject,this.fontSize,b,this.padding.x,this.yTextSubject),ig.game.drawText(this.arrTextGreeting,this.fontSize,b,this.padding.x,this.yTextGreeting),ig.game.drawText(this.arrTextBody,this.fontSize,b,this.padding.x,this.yTextBody),ig.game.drawText(this.arrTextClosure,
this.fontSize,b,this.padding.x,this.yTextClosure));b.restore()}})});ig.baked=!0;
ig.module("game.entities.buttons.button-ok").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonOk=EntityButton.extend({type:ig.Entity.TYPE.A,image:new ig.Image(_RESOURCESINFO.image.btnBlank3,184*_DATAGAME.ratioRes,76*_DATAGAME.ratioRes),imageGrey:new ig.Image(_RESOURCESINFO.image.btnBlank3Grey,184*_DATAGAME.ratioRes,76*_DATAGAME.ratioRes),size:{x:184*_DATAGAME.ratioRes,y:76*_DATAGAME.ratioRes},halfSize:null,zIndex:_DATAGAME.zIndexData.buttonOK,init:function(b,
d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||this.repos()},draw:function(){this.parent();var b=ig.system.context;b.save();b.translate(this.pos.x+this.offset.x,this.pos.y+this.offset.y);3>this._parent.textView.text.length?this.imageGrey.draw(0,0):this.image.draw(0,0);var d=Math.round(0.72*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio);b.font=ig.game.fontNameWeight+" "+d+"px "+ig.game.fontName;b.textAlign="center";b.textBaseline="middle";b.fillStyle=
3>this._parent.textView.text.length?"#c7c7c7":ig.game.buttonTextColor;b.fillText(_STRINGS.Button.ok,this.halfSize.x,this.halfSize.y+ig.game.checkArialOffset(d)+_DATAGAME.uiColor[_DATAGAME.uiTheme].button.textOffsetY*_DATAGAME.ratioRes*_DATAGAME.multiplierOffsetTextButtonBlankSmall);b.restore()},funcComplete:function(){for(var b="",d=0;d<this._parent.textView.lines.length;d++)b+=this._parent.textView.lines[d];ig.game.sessionData.playerName=b;this.kill();this._parent.kill();this._parent.killed()},clicked:function(){this.visible&&
(this.isClickable&&3<=this._parent.textView.text.length)&&(this.isClickable=!1,ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect())},clicking:function(){},released:function(){},repos:function(){this.pos.x=ig.game.midX-this.halfSize.x;this.pos.y=ig.game.midY+90*_DATAGAME.ratioRes}})});ig.baked=!0;
ig.module("game.entities.object.ui-entername").requires("impact.entity","game.entities.buttons.button-ok").defines(function(){EntityUIEnterName=ig.Entity.extend({size:{x:604*_DATAGAME.ratioRes,y:450*_DATAGAME.ratioRes},halfSize:{x:750,y:80},zIndex:_DATAGAME.zIndexData.UIEnterName,offset:{x:0,y:0},bgInput:new ig.Image(_RESOURCESINFO.image.bgInput,604*_DATAGAME.ratioRes,450*_DATAGAME.ratioRes),init:function(b,d,e){this.parent(b,d,e);this.halfSize={x:this.size.x/2,y:this.size.y/2};this.textView=ig.game.spawnEntity(EntityTextView,
0,0,{_parent:this,size:{x:510*_DATAGAME.ratioRes,y:76*_DATAGAME.ratioRes},fontStyle:40*_DATAGAME.ratioRes+"px metromed"});this.btnOK=ig.game.spawnEntity(EntityButtonOk,0,0,{_parent:this});ig.game.sortEntitiesDeferred();this.repos()},killed:function(){this.textView.kill();this._parent.keyboard.hide();this._parent.isInputKeyboard=!1;this._parent.setupInputVirtualKeyboard(!1);this._parent.afterAnimation()},repos:function(){this.pos={x:ig.system.width/2,y:ig.system.height/2}},update:function(){this.parent()},
draw:function(){this.parent();var b=ig.system.context;b.save();b.translate(this.pos.x-this.halfSize.x,this.pos.y-this.halfSize.y);this.bgInput.draw(0,0);b.font=55*_DATAGAME.ratioRes+"px metroblack";b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].enterTitle;b.textAlign="center";b.fillText(_STRINGS.Game.entername,this.halfSize.x,this.halfSize.y-100*_DATAGAME.ratioRes);b.restore()}})});ig.baked=!0;
ig.module("game.entities.object.ui-log").requires("impact.entity","game.entities.buttons.button-prev","game.entities.buttons.button-next","game.entities.buttons.button-close").defines(function(){EntityUILog=ig.Entity.extend({size:{x:580*_DATAGAME.ratioRes,y:1060*_DATAGAME.ratioRes},halfSize:{x:580*_DATAGAME.ratioRes,y:1060*_DATAGAME.ratioRes},heightText:890*_DATAGAME.ratioRes,zIndex:_DATAGAME.zIndexData.UILog,offset:{x:0,y:0},rounded:15*_DATAGAME.ratioRes,visible:!0,totalPage:1,pageNow:1,fontSize:20,
tempPageRepos:[0,0,0,0],multiplierFontHeight:1.1,paddingDialog:0.5,paddingTop:35,paddingLeft:35,stateSize:1,paddingEachLine:{x:0,y:0},totalLineAccepted:1,pageContent:[[{min:0,max:1}],[{min:0,max:1}],[{min:0,max:1}],[{min:0,max:1}]],init:function(b,d,e){this.parent(b,d,e);this.fontSize=Math.round(ig.game.fontBubbleSize*_DATAGAME.ratioRes*ig.game.fontRatio);this.totalLineAccepted=Math.floor(this.heightText/(this.fontSize*this.multiplierFontHeight));this.halfSize={x:this.size.x/2,y:this.size.y/2};this.tweenCloseFalse=
this.tween({paramClose:1},0.1,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){ig.game.isClickClose=!1}.bind(this)});this.btnClose=ig.game.spawnEntity(EntityButtonClose,0,0,{_parent:this,ignorePause:!0,repos:function(){this.pos={x:this._parent.pos.x-this._parent.halfSize.x+20*_DATAGAME.ratioRes,y:this._parent.pos.y-this._parent.halfSize.y+20*_DATAGAME.ratioRes}},clicked:function(){ig.game.resumeGameviaButton(this,"uiLog");ig.game.openMiniButton=ig.game.currentWindow.miniButtonOpenedBefore;
ig.game.currentWindow.reposMiniButton()},funcComplete:function(){}});this.btnPrev=ig.game.spawnEntity(EntityButtonPrev,0,0,{_parent:this,zIndex:_DATAGAME.zIndexData.buttonUILog,repos:function(){this.pos={x:this._parent.pos.x-this.halfSize.x-3*this._parent.halfSize.x/4,y:this._parent.pos.y+this._parent.halfSize.y-this.halfSize.y}},onClicked:function(){},funcComplete:function(){this.pageNow--;1>=this.pageNow&&(this.pageNow=1);this.tempPageRepos=[0,0,0,0];this.tempPageRepos[this.stateSize]=this.pageNow;
this.pageContent[this.stateSize][this.pageNow]&&(this.lastScene=this.pageContent[this.stateSize][this.pageNow].max);this.checkPrevNext(!0)}.bind(this)});this.btnNext=ig.game.spawnEntity(EntityButtonNext,0,0,{_parent:this,zIndex:_DATAGAME.zIndexData.buttonUILog,repos:function(){this.pos={x:this._parent.pos.x-this.halfSize.x+3*this._parent.halfSize.x/4,y:this._parent.pos.y+this._parent.halfSize.y-this.halfSize.y}},onClicked:function(){},funcComplete:function(){this.pageNow++;this.pageNow>=this.pageContent[this.stateSize].length-
1&&(this.pageNow=this.pageContent[this.stateSize].length-1);this.tempPageRepos=[0,0,0,0];this.tempPageRepos[this.stateSize]=this.pageNow;this.pageContent[this.stateSize][this.pageNow]&&(this.lastScene=this.pageContent[this.stateSize][this.pageNow].max);this.checkPrevNext(!0)}.bind(this)});ig.game.sortEntitiesDeferred();this.repos()},show:function(){this.visible=!0;this._parent.enabledButton(!1);this.enabledButton(!0);this.repos();ig.game.sortEntitiesDeferred();this.checkAllDialogLine()},hide:function(){this.visible=
!1;this._parent.enabledButton(!0);this.enabledButton(!1)},checkAllDialogLine:function(){this.dataLog=ig.game.sessionData.historyLog["chapter"+ig.game.currentWindow.numChapter];null==ig.game.totalLineDialog&&(ig.game.totalLineDialog={});if(null==ig.game.totalLineDialog["chapter"+ig.game.currentWindow.numChapter]||ig.game.languageSelector.selected!=ig.game.prevLang){ig.game.totalLineDialog["chapter"+ig.game.currentWindow.numChapter]={stat1:[],stat2:[],stat3:[]};for(var b=0;b<_STRINGS["Chapter"+ig.game.currentWindow.numChapter].length;b++){var d=
_STRINGS["Chapter"+ig.game.currentWindow.numChapter][b],e=d.charTalk,d=d.nameTag;"none"==e?(e=_STRINGS.Log.none,null!=d&&(e="amy"==d.toLowerCase()?ig.game.sessionData.playerName:0>_DATAGAME.neutral_girl.indexOf(d)&&0>_DATAGAME.neutral_boy.indexOf(d)?null!=_STRINGS.dynamic_character[d]?_STRINGS.dynamic_character[d][ig.game.sessionData.loveInterest]:d:d)):"amy"==e.toLowerCase()?e=ig.game.sessionData.playerName:0>_DATAGAME.neutral_girl.indexOf(e)&&0>_DATAGAME.neutral_boy.indexOf(e)&&(e=_STRINGS.dynamic_character[e][ig.game.sessionData.loveInterest]);
var d=ig.game.removeFormatDialog(e+" : "+_STRINGS["Chapter"+ig.game.currentWindow.numChapter][b].text,580*_DATAGAME.ratioRes-2*this.paddingLeft,this.fontSize,ig.game.fontBubbleThin,!0),f=ig.game.removeFormatDialog(e+" : "+_STRINGS["Chapter"+ig.game.currentWindow.numChapter][b].text,1160*_DATAGAME.ratioRes-2*this.paddingLeft,this.fontSize,ig.game.fontBubbleThin,!0),e=ig.game.removeFormatDialog(e+" : "+_STRINGS["Chapter"+ig.game.currentWindow.numChapter][b].text,1740*_DATAGAME.ratioRes-2*this.paddingLeft,
this.fontSize,ig.game.fontBubbleThin,!0);ig.game.totalLineDialog["chapter"+ig.game.currentWindow.numChapter].stat1.push({text:d,total:d.length});ig.game.totalLineDialog["chapter"+ig.game.currentWindow.numChapter].stat2.push({text:f,total:f.length});ig.game.totalLineDialog["chapter"+ig.game.currentWindow.numChapter].stat3.push({text:e,total:e.length})}}this.setPage(1);this.setPage(2);this.setPage(3)},setPage:function(b){for(var d=!0,e=1,f=0,g=0;g<this.dataLog.length;g++){var j=0,j=0<=this.dataLog[g]?
ig.game.totalLineDialog["chapter"+ig.game.currentWindow.numChapter]["stat"+b][this.dataLog[g]].total:ig.game.removeFormatDialog(_STRINGS.Log.none+" : "+this.dataLog[g],580*b*_DATAGAME.ratioRes-2*this.paddingLeft,this.fontSize,ig.game.fontBubbleThin,!0).length,j=j*this.fontSize*this.multiplierFontHeight;0!=g&&(f+j>this.heightText?(f=0,d=!0,e++):(this.pageContent[b][e].max=g,f+=j+this.fontSize*this.paddingDialog));!0==d&&(null==this.pageContent[b][e]&&(this.pageContent[b][e]={min:g,max:g}),this.pageContent[b][e].min=
g,f+=j+this.fontSize*this.paddingDialog,d=!1)}},checkPrevNext:function(b){this.btnPrev&&(1==this.pageNow?this.btnPrev&&(this.btnPrev.visible=!1,this.btnPrev.isClickable=!1):(this.btnPrev.visible=b,this.btnPrev.isClickable=b));this.btnNext&&(this.pageNow==this.pageContent[this.stateSize].length-1?this.btnNext&&(this.btnNext.visible=!1,this.btnNext.isClickable=!1):(this.btnNext.visible=b,this.btnNext.isClickable=b))},enabledButton:function(b){this.checkPrevNext(b);this.btnClose&&(this.btnClose.visible=
b);if(this.btnClose.isClickable=b)this.btnPrev&&this.btnPrev.repos(),this.btnNext&&this.btnNext.repos(),this.btnClose&&this.btnClose.repos()},repos:function(){ig.system.width<2*ig.sizeHandler.minW?(this.size={x:580*_DATAGAME.ratioRes,y:1060*_DATAGAME.ratioRes},this.stateSize=1):ig.system.width<3*ig.sizeHandler.minW?(this.size={x:1160*_DATAGAME.ratioRes,y:1060*_DATAGAME.ratioRes},this.stateSize=2):(this.size={x:1740*_DATAGAME.ratioRes,y:1060*_DATAGAME.ratioRes},this.stateSize=3);if(this.lastScene){if(0==
this.tempPageRepos[this.stateSize])for(var b=1;b<this.pageContent[this.stateSize].length;b++)if(this.lastScene>=this.pageContent[this.stateSize][b].min&&this.lastScene<=this.pageContent[this.stateSize][b].max){this.tempPageRepos[this.stateSize]=b;break}this.pageNow=this.tempPageRepos[this.stateSize];this.checkPrevNext(!0)}this.heightText=this.size.y-25-2*this.paddingTop-this.btnClose.size.y-this.btnPrev.halfSize.y;this.halfSize={x:this.size.x/2,y:this.size.y/2};this.pos={x:ig.system.width/2,y:ig.system.height/
2}},update:function(){this.parent()},drawTextLog:function(b){b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].textuilog;b.textAlign="left";b.textBaseline="top";b.font=ig.game.fontBubbleWeight+" "+Math.round(this.fontSize)+"px "+ig.game.fontBubbleThin;for(var d=0,e=this.pageContent[this.stateSize][this.pageNow].min;e<=this.pageContent[this.stateSize][this.pageNow].max;e++){var f=[],g=0;0<=this.dataLog[e]?(f=ig.game.totalLineDialog["chapter"+ig.game.currentWindow.numChapter]["stat"+this.stateSize][this.dataLog[e]].text,
g=ig.game.totalLineDialog["chapter"+ig.game.currentWindow.numChapter]["stat"+this.stateSize][this.dataLog[e]].total):(f=ig.game.removeFormatDialog(_STRINGS.Log.none+" : "+this.dataLog[e],580*this.stateSize*_DATAGAME.ratioRes-2*this.paddingLeft,this.fontSize,ig.game.fontBubbleThin,!0),g=f.length);ig.game.drawText(f,this.fontSize,b,this.paddingLeft,d+25+this.btnClose.size.y+this.paddingTop,this.multiplierFontHeight);d+=g*this.fontSize*this.multiplierFontHeight+this.fontSize*this.paddingDialog}},draw:function(){this.parent();
if(this.visible){var b=ig.system.context;b.save();b.fillStyle="black";b.globalAlpha=0.7;b.fillRect(0,0,ig.system.width,ig.system.height);b.restore();b.save();b.translate(this.pos.x-this.halfSize.x,this.pos.y-this.halfSize.y);b.strokeStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].strokeuilog;b.lineWidth=10*_DATAGAME.ratioRes;b.strokeRect(0,0,this.size.x,this.size.y);b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].bguilog;b.fillRect(0,0,this.size.x,this.size.y);b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].textuilog;
b.textAlign="center";b.textBaseline="middle";b.font=ig.game.fontBubbleWeight+" "+Math.round(1.5*this.fontSize)+"px "+ig.game.fontBubble;b.fillText(_STRINGS.Log.title,this.halfSize.x,this.btnClose.halfSize.y+25);this.drawTextLog(b);b.restore()}}})});ig.baked=!0;
ig.module("game.entities.object.ui-warning-save").requires("impact.entity","game.entities.buttons.button-yes","game.entities.buttons.button-no-reset").defines(function(){EntityUIWarningSave=ig.Entity.extend({size:{x:604*_DATAGAME.ratioRes,y:450*_DATAGAME.ratioRes},halfSize:{x:750*_DATAGAME.ratioRes,y:80*_DATAGAME.ratioRes},zIndex:_DATAGAME.zIndexData.UIWarningSave,offset:{x:0,y:0},sizeOption:{x:485*_DATAGAME.ratioRes,y:115*_DATAGAME.ratioRes},rounded:15*_DATAGAME.ratioRes,visible:!0,totalPage:1,pageNow:1,
bgReset:new ig.Image(_RESOURCESINFO.image.bgInput,604*_DATAGAME.ratioRes,450*_DATAGAME.ratioRes),stateNow:1,STAT_SAVE:1,STAT_REPLACE:2,STAT_LOAD:3,init:function(b,d,e){this.parent(b,d,e);this.totalPage=Math.ceil((_STRINGS.Chapter.title.length-1)/3);this.size.x*=0.85;this.size.y*=0.85;this.halfSize={x:this.size.x/2,y:this.size.y/2};this.tweenCloseFalse=this.tween({paramClose:1},0.1,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){ig.game.isClickClose=!1}.bind(this)});this.btnYes=ig.game.spawnEntity(EntityButtonYes,
0,0,{_parent:this,zIndex:_DATAGAME.zIndexData.buttonUIWarningSave,repos:function(){this.pos={x:this._parent.pos.x-this.halfSize.x,y:this._parent.pos.y-this.halfSize.y+20*_DATAGAME.ratioRes}},clicked:function(){this.visible&&this.isClickable&&(ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect(),this._parent.hide(),this._parent.stateNow==this._parent.STAT_LOAD?(ig.game.loadDataSlot(ig.game.slotSelected.idx),"game"==ig.game.windowName&&(ig.game.isPauseSetting=!1,ig.game.resumeGame(),ig.game.openMiniButton=
ig.game.currentWindow.miniButtonOpenedBefore),this._parent.enabledButton(!1),this._parent.noChapter=ig.game.numChapter,this._parent.addDUtoCustomLoad(),ig.game.fadeInWindow(LevelGame)):(ig.game.saveDatatoSlot(ig.game.slotSelected.idx),this._parent._parent["btnSave"+ig.game.slotSelected.numButton].reloadInfo()))},funcComplete:function(){}});this.btnNo=ig.game.spawnEntity(EntityButtonNoReset,0,0,{_parent:this,onClicked:function(){this._parent.hide()}});ig.game.sortEntitiesDeferred();this.repos()},addDUtoCustomLoad:function(){var b=
_CUSTOMLOAD.Chapter[this.noChapter].duTheme;null==b&&(b=[]);if(null!=_DATAGAME.firstMCOutfit["chapter"+this.noChapter]&&""!=_DATAGAME.firstMCOutfit["chapter"+this.noChapter]){var d=_DATAGAME.firstMCOutfit["chapter"+this.noChapter],e=b.findIndex(function(b){return b.toLowerCase()==d.toLowerCase()});""!=_DATAGAME.firstMCOutfit["chapter"+this.noChapter]&&("default"!=_DATAGAME.firstMCOutfit["chapter"+this.noChapter].toLowerCase()&&0>e)&&_CUSTOMLOAD.Chapter[this.noChapter].duTheme.push(_DATAGAME.firstMCOutfit["chapter"+
this.noChapter])}var f=null==ig.game.sessionData.dressUpTheme[this.noChapter-1]?"amy":ig.game.sessionData.dressUpTheme[this.noChapter-1].last,b=b.findIndex(function(b){return b.toLowerCase()==f.toLowerCase()});2<=this.noChapter&&(null!=ig.game.sessionData.dressUpTheme[this.noChapter-1]&&null!=ig.game.sessionData.dressUpTheme[this.noChapter-1].last&&0>b)&&_CUSTOMLOAD.Chapter[this.noChapter].duTheme.push(ig.game.sessionData.dressUpTheme[this.noChapter-1].last)},show:function(b){this.stateNow=this["STAT_"+
b.toUpperCase()];this.visible=!0;this._parent.isWarning=!0;this._parent.btnPrev.isClickable=!1;this._parent.btnNext.isClickable=!1;this.enabledButton(!0);this.repos();ig.game.sortEntitiesDeferred()},hide:function(){this.visible=!1;this._parent.btnPrev.isClickable=!0;this._parent.btnNext.isClickable=!0;this._parent.isWarning=!1;this.enabledButton(!1)},enabledButton:function(b){this.btnYes.visible=b;this.btnNo.visible=b;this.btnYes.isClickable=b;this.btnNo.isClickable=b},repos:function(){this.pos={x:ig.system.width/
2,y:ig.system.height/2};this.btnYes&&this.btnYes.repos();this.btnNo&&this.btnNo.repos()},update:function(){this.parent()},draw:function(){this.parent();if(this.visible){var b=ig.system.context;b.save();b.fillStyle="black";b.globalAlpha=0.7;b.fillRect(0,0,ig.system.width,ig.system.height);b.restore();b.save();b.translate(this.pos.x-this.halfSize.x,this.pos.y-this.halfSize.y);this.bgReset.draw(0,0,0,0,this.bgReset.width,this.bgReset.height,this.size.x,this.size.y);var d=Math.round(0.54*ig.game.fontNameSize*
_DATAGAME.ratioRes),e=45*_DATAGAME.ratioRes;b.font=ig.game.fontNameWeight+" "+d*ig.game.fontRatio+"px "+ig.game.fontName;b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].settingTitle;b.textAlign="center";b.textBaseline="top";var f="",g="",j="";this.stateNow==this.STAT_SAVE?(f=_STRINGS.Save.textSave1,f=f.replaceAll("<>",ig.game.slotSelected.no),g=_STRINGS.Save.textSave2,g=g.replaceAll("<>",ig.game.slotSelected.no),j=_STRINGS.Save.textSave3,j=j.replaceAll("<>",ig.game.slotSelected.no)):this.stateNow==
this.STAT_REPLACE?(f=_STRINGS.Save.textReplace1,f=f.replaceAll("<>",ig.game.slotSelected.no),g=_STRINGS.Save.textReplace2,g=g.replaceAll("<>",ig.game.slotSelected.no),j=_STRINGS.Save.textReplace3,j=j.replaceAll("<>",ig.game.slotSelected.no)):this.stateNow==this.STAT_LOAD&&(f=_STRINGS.Load.textLoad1,f=f.replaceAll("<>",ig.game.slotSelected.no),g=_STRINGS.Load.textLoad2,g=g.replaceAll("<>",ig.game.slotSelected.no),j=_STRINGS.Load.textLoad3,j=j.replaceAll("<>",ig.game.slotSelected.no));b.fillText(f,
this.halfSize.x,e);e+=d*ig.game.fontRatio+5*_DATAGAME.ratioRes;b.fillText(g,this.halfSize.x,e);e+=d*ig.game.fontRatio+5*_DATAGAME.ratioRes;b.fillText(j,this.halfSize.x,e);b.restore()}}})});ig.baked=!0;
ig.module("game.entities.buttons.button-save-preview").requires("game.entities.buttons.button","plugins.clickable-div-layer").defines(function(){EntityButtonSavePreview=EntityButton.extend({type:ig.Entity.TYPE.A,size:{x:477*_DATAGAME.ratioRes,y:480*_DATAGAME.ratioRes},sizeBGTitle:{x:438*_DATAGAME.ratioRes,y:50*_DATAGAME.ratioRes},roundedTag:5*_DATAGAME.ratioRes,textButton:"Encounter",noButton:0,zIndex:_DATAGAME.zIndexData.buttonSavePreview,noSlot:1,idxSlot:0,isClickable:!0,imgPanel:new ig.Image(_RESOURCESINFO.image.chapterPanel),
isHover:!1,imgThumbnail:new ig.Image(_RESOURCESINFO.image.crown),multiplierFontHeight:1.1,paddingText:{x:40*_DATAGAME.ratioRes,y:40*_DATAGAME.ratioRes},fontSize:{title:Math.round(38.5*_DATAGAME.ratioRes),desc:Math.round(27.5*_DATAGAME.ratioRes)},desc:[],widthTag:[0,0,0,0,0,0,0],fontSizeDesc:50,posButton:{x:0,y:0},init:function(b,d,e){this.parent(b,d,e);this.fontSize={title:Math.round(0.7*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio),desc:Math.round(0.55*ig.game.fontNameSize*_DATAGAME.ratioRes*
ig.game.fontRatio)};this.halfSize={x:this.size.x/2,y:this.size.y/2};ig.global.wm||(this.defPos={x:-this.halfSize.x,y:-this.halfSize.y},this.repos())},clicked:function(){this.visible&&(this._parent.visible&&this.isClickable&&!this._parent.isWarning)&&(ig.soundHandler.sfxPlayer.play("click"),this.sinkingEffect(),ig.game.slotSelected={no:this.noSlot,idx:this.idxSlot,numButton:this.noButton},null==ig.game.sessionData.saveSlot[this.idxSlot].currentChapter?this._parent.stateSaveLoad==this._parent.STAT_SAVE&&
this._parent.uiWarningSave.show("save"):this._parent.stateSaveLoad==this._parent.STAT_SAVE?this._parent.uiWarningSave.show("replace"):this._parent.uiWarningSave.show("load"),this._parent.uiWarningSave.repos())},reloadInfo:function(){var b=ig.game.sessionData.saveSlot[this.idxSlot];if(null!=b.currentChapter){var d=b.historyLog["chapter"+b.currentChapter][0],e="";if(0<=d&&null!=_STRINGS["Chapter"+b.currentChapter]){var f=_STRINGS["Chapter"+b.currentChapter][d],e=f.charTalk,f=f.nameTag;"none"==e?(e=
_STRINGS.Log.none,null!=f&&(e="amy"==f.toLowerCase()?ig.game.sessionData.playerName:0>_DATAGAME.neutral_girl.indexOf(f)&&0>_DATAGAME.neutral_boy.indexOf(f)?null!=_STRINGS.dynamic_character[f]?_STRINGS.dynamic_character[f][ig.game.sessionData.loveInterest]:f:f)):"amy"==e.toLowerCase()?e=ig.game.sessionData.playerName:0>_DATAGAME.neutral_girl.indexOf(e)&&0>_DATAGAME.neutral_boy.indexOf(e)&&(e=_STRINGS.dynamic_character[e][ig.game.sessionData.loveInterest]);e=e+" : "+_STRINGS["Chapter"+b.currentChapter][d].text}else e=
_STRINGS.Log.none+" : "+d;this.textDialog=ig.game.removeFormatDialog(e,this.size.x-2*this.paddingText.x,this.fontSize.desc,ig.game.fontNameThin,!0)}},draw:function(){var b=ig.system.context;if(this._parent.visible&&this.visible){b.save();b.translate(this.pos.x+this.halfSize.x+this.offset.x,this.pos.y+this.halfSize.y+this.offset.y);this.underPointer()&&!this._parent.isWarning?b.scale(0.97,0.97):b.scale(1,1);this.imgPanel.draw(this.defPos.x,this.defPos.y);var d=this.defPos.x+this.paddingText.x,e=this.defPos.y+
this.paddingText.y;b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].textsaveui;b.font=this.fontSize.title+"px "+ig.game.fontName;b.textAlign="left";b.textBaseline="top";b.fillText(_STRINGS.Save.slot+" "+this.noSlot,d,e);var f=ig.game.sessionData.saveSlot[this.idxSlot];null==f.currentChapter?(b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].textsaveui,b.font=this.fontSize.title+"px "+ig.game.fontName,b.textAlign="center",b.textBaseline="middle",b.fillText(_STRINGS.Save.empty,0,0)):(b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].textsaveui,
b.font=this.fontSize.desc+"px "+ig.game.fontNameThin,b.textAlign="left",b.textBaseline="top",e+=1.5*this.fontSize.title,b.fillText(_STRINGS.Save.chapter+" "+f.currentChapter,d,e),e+=this.fontSize.desc*this.multiplierFontHeight,b.fillText(_STRINGS.Save.months[f.month]+" "+f.date,d,e),e+=this.fontSize.desc*this.multiplierFontHeight,b.fillText(f.time,d,e),e+=2*this.fontSize.desc*this.multiplierFontHeight,ig.game.drawText(this.textDialog,this.fontSize.desc,b,d,e,this.multiplierFontHeight));b.restore()}},
repos:function(){this.pos={x:ig.game.midX-this.halfSize.x+this.posButton.x,y:ig.game.midY-this.halfSize.y+this.posButton.y+this._parent.offset.y}}})});ig.baked=!0;
ig.module("game.entities.object.ui-saveload").requires("impact.entity","game.entities.object.ui-warning-save","game.entities.buttons.button-save-preview","game.entities.buttons.button-prev","game.entities.buttons.button-next","game.entities.buttons.button-close-big").defines(function(){EntityUISaveLoad=ig.Entity.extend({halfSize:{x:750,y:80},zIndex:_DATAGAME.zIndexData.UISaveLoad,offset:{x:0,y:40*_DATAGAME.ratioRes},paddingButton:{x:5*_DATAGAME.ratioRes,y:5*_DATAGAME.ratioRes},sizeButton:{x:477*_DATAGAME.ratioRes,
y:480*_DATAGAME.ratioRes},rounded:15*_DATAGAME.ratioRes,visible:!0,totalItemPerPage:2,totalPage:1,totalSaveSlot:12,pageNow:1,lastIdxSlot:1,isWarning:!1,isRepos:!0,stateSaveLoad:1,STAT_SAVE:1,STAT_LOAD:2,prevPage:[0,0,0,0,0,0,0,0],posButton2:[{x:0,y:0},{x:0,y:0}],posButton4:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],posButton6:[{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0},{x:0,y:0}],init:function(b,d,e){this.parent(b,d,e);this.tweenCloseFalse=this.tween({paramClose:1},0.1,{easing:ig.Tween.Easing.Linear.EaseNone,
onComplete:function(){ig.game.isClickClose=!1}.bind(this)});b=-this.sizeButton.y/2-this.paddingButton.y;d=this.sizeButton.y/2+this.paddingButton.y;this.posButton2=[{x:0,y:b},{x:0,y:d}];this.posButton4=[{x:-this.sizeButton.x/2-this.paddingButton.x,y:b},{x:this.sizeButton.x/2+this.paddingButton.x,y:b},{x:-this.sizeButton.x/2-this.paddingButton.x,y:d},{x:this.sizeButton.x/2+this.paddingButton.x,y:d}];this.posButton6=[{x:-this.sizeButton.x-2*this.paddingButton.x,y:b},{x:0,y:b},{x:this.sizeButton.x+2*
this.paddingButton.x,y:b},{x:-this.sizeButton.x-2*this.paddingButton.x,y:d},{x:0,y:d},{x:this.sizeButton.x+2*this.paddingButton.x,y:d}];this.totalSaveSlot=ig.game.sessionData.saveSlot.length;this.totalPage=Math.ceil(this.totalSaveSlot/this.totalItemPerPage);this.btnClose=ig.game.spawnEntity(EntityButtonCloseBig,0,0,{_parent:this,clicked:function(){"menu"==ig.game.windowName?(ig.soundHandler.sfxPlayer.play("click"),this._parent.hide()):(ig.game.resumeGameviaButton(this,"uiSaveLoad"),ig.game.openMiniButton=
ig.game.currentWindow.miniButtonOpenedBefore,ig.game.currentWindow.reposMiniButton())}});for(b=5;0<=b;b--)this["btnSave"+b]=ig.game.spawnEntity(EntityButtonSavePreview,0,0,{_parent:this,noButton:b,noSlot:b+1,isClickable:!1});this.btnPrev=ig.game.spawnEntity(EntityButtonPrev,0,0,{_parent:this,zIndex:_DATAGAME.zIndexData.buttonUISaveLoad,repos:function(){this.pos={x:ig.game.midX-this._parent.sizeButton.x*(this._parent.totalItemPerPage/2-1)/2-305*_DATAGAME.ratioRes-this.halfSize.x,y:ig.game.midY-this.halfSize.y+
this._parent.offset.y}},onClicked:function(){this._parent.prevPage=[0,0,0,0,0,0,0,0]}});this.btnNext=ig.game.spawnEntity(EntityButtonNext,0,0,{_parent:this,zIndex:_DATAGAME.zIndexData.buttonUISaveLoad,repos:function(){this.pos={x:ig.game.midX+this._parent.sizeButton.x*(this._parent.totalItemPerPage/2-1)/2+305*_DATAGAME.ratioRes-this.halfSize.x,y:ig.game.midY-this.halfSize.y+this._parent.offset.y}},onClicked:function(){this._parent.prevPage=[0,0,0,0,0,0,0,0]}});this.uiWarningSave=ig.game.spawnEntity(EntityUIWarningSave,
0,0,{_parent:this});this.uiWarningSave.hide();this.uiWarningSave.repos();ig.game.sortEntitiesDeferred();this.repos()},show:function(b){ig.game.boolChooseChapter=!0;null!=b&&(this.stateSaveLoad=this["STAT_"+b.toUpperCase()]);this.loadPage();this.visible=!0;this._parent.enabledButton(!1);this.enabledButton(!0);this.uiWarningSave.enabledButton(!1);this.repos()},hide:function(){this.visible=ig.game.boolChooseChapter=!1;"menu"==ig.game.windowName?this._parent.enabledButton(!0,!0):this._parent.enabledButton(!0);
this.uiWarningSave.enabledButton(!1);this.uiWarningSave.hide();this.enabledButton(!1)},enabledButton:function(b){this.btnClose.isClickable=b;null!=this.btnPrev&&(this.btnPrev.isClickable=b);null!=this.btnNext&&(this.btnNext.isClickable=b);b&&(this.btnClose.repos(),null!=this.btnPrev&&this.btnPrev.repos(),null!=this.btnNext&&this.btnNext.repos());for(var d=0;6>d;d++)(this["btnSave"+d].isClickable=b)&&this["btnSave"+d].repos()},loadPage:function(){for(var b=0;6>b;b++)this["btnSave"+b].visible=!1,this["btnSave"+
b].isClickable=!1;for(b=0;b<this.totalItemPerPage;b++){var d=(this.pageNow-1)*this.totalItemPerPage+b;d>ig.game.sessionData.saveSlot.length-1?(this["btnSave"+b].visible=!1,this["btnSave"+b].isClickable=!1):(this["btnSave"+b].visible=!0,this["btnSave"+b].isClickable=!0,this["btnSave"+b].posButton=this["posButton"+this.totalItemPerPage][b],this["btnSave"+b].repos(),this["btnSave"+b].noSlot=ig.game.sessionData.saveSlot[d].id,this.lastIdxSlot=this["btnSave"+b].idxSlot=d,this["btnSave"+b].reloadInfo())}},
repos:function(){this.pos={x:ig.system.width/2,y:ig.system.height/2};0==this.prevPage[this.totalItemPerPage]&&(this.prevPage[this.totalItemPerPage]=this.pageNow);var b=this.totalItemPerPage;this.totalItemPerPage=ig.system.width<ig.sizeHandler.minW+this.sizeButton.x+2*this.paddingButton.x?2:ig.system.width<ig.sizeHandler.minW+2*this.sizeButton.x+4*this.paddingButton.x?4:6;this.totalPage=Math.ceil(this.totalSaveSlot/this.totalItemPerPage);1<this.totalPage?(this.btnPrev.visible=this.btnNext.visible=
!0,this.btnNext.repos(),this.btnPrev.repos()):this.btnPrev.visible=this.btnNext.visible=!1;this.pageNow=0==this.prevPage[this.totalItemPerPage]?Math.ceil((this.lastIdxSlot+1)/this.totalItemPerPage):this.prevPage[this.totalItemPerPage];b!=this.totalItemPerPage&&this.loadPage()},draw:function(){this.parent();if(this.visible){var b=ig.system.context;_DATAGAME.simplifiedUI||(b.save(),b.fillStyle="black",b.globalAlpha=0.8,b.fillRect(0,0,ig.system.width,ig.system.height),b.restore());b.save();b.font=ig.game.fontNameWeight+
" "+Math.round(1.1*ig.game.fontNameSize*_DATAGAME.ratioRes*ig.game.fontRatio)+"px "+ig.game.fontName;b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].chapterNLTitle;b.textAlign="center";b.fillText(this.stateSaveLoad==this.STAT_LOAD?_STRINGS.Load.title:_STRINGS.Save.title,ig.game.midX,ig.game.midY-this.sizeButton.x-35*_DATAGAME.ratioRes+this.offset.y);b.restore()}}})});ig.baked=!0;
ig.module("game.entities.object.ui-replay").requires("impact.entity","game.entities.buttons.button-yes","game.entities.buttons.button-no-reset").defines(function(){EntityUIReplay=ig.Entity.extend({size:{x:604*_DATAGAME.ratioRes,y:450*_DATAGAME.ratioRes},halfSize:{x:750*_DATAGAME.ratioRes,y:80*_DATAGAME.ratioRes},zIndex:_DATAGAME.zIndexData.UIReplay,fontSize:45*_DATAGAME.ratioRes,visible:!0,selectedButton:0,SELECTED_BUTTON_YES:1,SELECTED_BUTTON_NO:2,init:function(b,d,e){this.parent(b,d,e);this.bgReplay=
new ig.Image(_RESOURCESINFO.image.bgInput);this.size.x*=0.85;this.size.y*=0.85;this.halfSize={x:this.size.x/2,y:this.size.y/2};this.btnYes=ig.game.spawnEntity(EntityButtonYes,0,0,{_parent:this,zIndex:_DATAGAME.zIndexData.buttonUIReplay,enableHover:!0,repos:function(){this.pos={x:this._parent.pos.x-this.halfSize.x,y:this._parent.pos.y-this.halfSize.y+20*_DATAGAME.ratioRes}}});this.btnNo=ig.game.spawnEntity(EntityButtonNoReset,0,0,{_parent:this,zIndex:_DATAGAME.zIndexData.buttonUIReplay,enableHover:!0,
onClicked:function(){this._parent.enabledButton(!1);ig.game.fadeInWindow(LevelMenu)}});ig.game.sortEntitiesDeferred();this.repos();this.btnNo.repos();ig.sizeHandler.resizeLayers();this.enabledButton(!0)},enabledButton:function(b){null!=this.btnYes&&(this.btnYes.isClickable=b);null!=this.btnNo&&(this.btnNo.isClickable=b);b&&(null!=this.btnYes&&this.btnYes.repos(),null!=this.btnNo&&this.btnNo.repos())},repos:function(){this.pos={x:ig.system.width/2,y:ig.system.height/2}},update:function(){this.parent()},
checkKeyboardButton:function(){ig.input.pressed("ENTER")&&0!=this.selectedButton?this.selectedButton==this.SELECTED_BUTTON_YES?this.btnYes.clicked():this.selectedButton==this.SELECTED_BUTTON_NO&&this.btnNo.clicked():(ig.input.pressed("UP")||ig.input.pressed("DOWN"))&&0==this.selectedButton?(this.selectedButton=1,this.btnYes.isHover=!0):ig.input.pressed("UP")?(this.btnNo.isHover=!1,this.selectedButton=1,this.btnYes.isHover=!0):ig.input.pressed("DOWN")&&(this.btnYes.isHover=!1,this.selectedButton=2,
this.btnNo.isHover=!0)},draw:function(){this.parent();if(this.visible){this.checkKeyboardButton();this.fontSize=Math.round(0.81*ig.game.fontNameSize*_DATAGAME.ratioRes);var b=ig.system.context;b.save();b.fillStyle="black";b.globalAlpha=0.7;b.fillRect(0,0,ig.system.width,ig.system.height);b.restore();b.save();b.translate(this.pos.x-this.halfSize.x,this.pos.y-this.halfSize.y);this.bgReplay.draw(0,0,0,0,this.bgReplay.width,this.bgReplay.height,this.size.x,this.size.y);b.restore();b.save();b.translate(this.pos.x-
this.halfSize.x,this.pos.y-this.halfSize.y);var d=Math.round(0.72*ig.game.fontNameSize*_DATAGAME.ratioRes),e=55*_DATAGAME.ratioRes;b.font=ig.game.fontNameWeight+" "+d*ig.game.fontRatio+"px "+ig.game.fontName;b.fillStyle=_DATAGAME.uiColor[_DATAGAME.uiTheme].replayText;b.textAlign="center";b.textBaseline="top";b.fillText(_STRINGS.Replay.textReplay1,this.halfSize.x,e);e+=d*ig.game.fontRatio+8*_DATAGAME.ratioRes;b.fillText(_STRINGS.Replay.textReplay2,this.halfSize.x,e);b.restore()}}})});ig.baked=!0;
ig.module("game.entities.object.char").requires("impact.entity","plugins.spriter.spriter-display","plugins.spriter.scml").defines(function(){SpriterChar=ig.Entity.extend({zIndex:_DATAGAME.zIndexData.character,boolStart:!1,boolLoop:!1,animationName:"",_keyIndex:-1,loopCount:0,arrPose:[2,3,4,5,6,7,8],arrDance:[1,2,3],totalLoop:1,numMouth:1,statMouth:"open",emotionNow:0,poseNow:"idle",durTimerTalking:0.1,defSpeedAnimWalk:150,speedAnimWalk:150,isFrown:!1,isMouthDefault:!0,isHaveEmotion:!0,talkingMouthType:_DATAGAME.TALKING_NORMAL,
isRear:!1,noChar:0,timePausePose:[0,1200,900,1100,1100,0,900,0,0,0,0,1200,0,900,900,1500,1500,1200,900,1500,1E3,1400,1400,5300,0,0,1200,700,1200,1400,1400,5300,700,0,1400,0,800,1400,900,1500,1500,1300,0,0,0,0,0,0,0,1200,0,1200,1300,1200,0,0,0,0,0,0,0,0,0,0,0,0,1190,900,0,1600,0,1790,1E3,1150,0,0,0,1400,0,0,900,0,2580,1800,1800,1400,1600,1800,0,0,0,900,900,0,0,0,0,0,0,0,0,0,0,1600,1600,0,0,0,0,0,0,0,0,1E3,1E3,700,700,0,0,0,0,0,800,1150,1200,1500,0,0,0,1E3,1E3,0,1E3,800,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,1300,1300,1300,1300,1300,0,1200,0,1200,700,0,0,0,2E3,0,1500,0,0,0,900,0,900,1E3,1E3,1E3,1600,600,600,1350,1300,600,0,0],boolStartTalking:!1,boolLoopTalking:!1,boolPauseTalking:!1,boolFinishTalking:!1,timerTalking:null,isTalking:!1,isWalkInAndOut:!1,defScale:{x:1,y:1},spriter:null,scmlSprite:null,charName:"",radShadow:146,hScaleShadow:36,offsetShadowY:-66,offsetShadowX:0,isShadow:!0,flipState:1,animSpeed:100,boolContinueIdle:!1,lastPoseBeforeIdle:"ANIM_IDLE",init:function(b,
d,e){this.parent(b,d,e);this.durTimerTalking=ig.game.mouthTalkingSpeed;this.poseNow="ANIM_IDLE";this.emotionNow=_DATAGAME.listEmotion.indexOf("EMO_NEUTRAL")},changeScale:function(b,d){if(null==b||0>=b)b=1;this.defScale.x=b*d;this.defScale.y=b;this.flipState=d},changePoseDefault:function(){this.spriter.entityName="du";this.spriter.setAnimationSpeedPercent(this.animSpeed);this.spriter.setAnimationByName(this.poseNow);"photoshoot"==ig.game.windowName&&(this._parent.playPose=!0)},removeHandheld:function(b){if(0<=
b){var d=this.charName.toLowerCase(),d=d.replaceAll(" ","");"girl"==this.mainFolder&&"amy"==this.charName&&(d=ig.game.sessionData.dressUpTheme[ig.game.currentWindow.numChapter].now,d=d.toLowerCase().replaceAll(" ",""));for(var e=0;e<_handPart[b]["front"+this.mainFolder].length;e++){this.spriter.detachImage(_handPart[b]["front"+this.mainFolder][e]+".png");var f=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[d][this.mainFolder].skin+"/"+_handPart[b]["front"+this.mainFolder][e]+
".png");this.spriter.attachImage(_handPart[b]["front"+this.mainFolder][e]+".png",f,0,0,!0)}for(e=0;e<_handPart[b]["back"+this.mainFolder].length;e++)this.spriter.detachImage(_handPart[b]["back"+this.mainFolder][e]+".png"),f=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[d][this.mainFolder].skin+"/"+_handPart[b]["back"+this.mainFolder][e]+".png"),this.spriter.attachImage(_handPart[b]["back"+this.mainFolder][e]+".png",f,0,0,!0)}},addHandheld:function(b,d,e,f){e=new ig.Image(_BASEPATH.object+
d+".png");var g=this.charName.toLowerCase(),g=g.replaceAll(" ","");"girl"==this.mainFolder&&"amy"==this.charName&&(g=ig.game.sessionData.dressUpTheme[ig.game.currentWindow.numChapter].now,g=g.toLowerCase().replaceAll(" ",""));f=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[g][this.mainFolder].skin+"/0_hand-hold"+(f?"-rear":"")+".png");var j=0,l={x:0,y:0};switch(_DATAGAME.pose[b]){case "ANIM_CAMERA_FILMING":f=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[g][this.mainFolder].skin+
"/0_hand-front2.png");j="girl"==this.mainFolder?-50:-40;l={x:10,y:-30};break;case "ANIM_RIFLE_HOLD_PRONE_IDLE":f=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[g][this.mainFolder].skin+"/0_hand-close-front.png");j="girl"==this.mainFolder?31:35;l="girl"==this.mainFolder?{x:-10,y:-10}:{x:-10,y:10};break;case "ANIM_RIFLE_HOLD_CROUCH_IDLE":f=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[g][this.mainFolder].skin+"/0_hand-close-front.png");j="girl"==
this.mainFolder?9:10;l="girl"==this.mainFolder?{x:-20,y:10}:{x:-10,y:10};break;case "ANIM_RIFLE_HOLD_ONE_HANDED":f=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[g][this.mainFolder].skin+"/0_hand-close-front.png");j="girl"==this.mainFolder?17:20;l="girl"==this.mainFolder?{x:-10,y:0}:{x:0,y:10};break;case "ANIM_RIFLE_HOLD_SIDEWAYS_IDLE":f=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[g][this.mainFolder].skin+"/0_hand-close-front.png");j="girl"==
this.mainFolder?12:10;l="girl"==this.mainFolder?{x:-10,y:0}:{x:-10,y:10};break;case "ANIM_RIFLE_HOLD_NORMAL_IDLE":case "ANIM_RIFLE_HOLD_NORMAL_RECOIL_5_SHOTS_CONSTANT":case "ANIM_RIFLE_HOLD_NORMAL_RECOIL_5_SHOTS_RANDOM":case "ANIM_RIFLE_HOLD_NORMAL_RECOIL_NORMAL_SINGLE_CONSTANT":case "ANIM_RIFLE_HOLD_NORMAL_RECOIL_SINGLE_BIG":case "ANIM_RIFLE_HOLD_NORMAL_RECOIL_SINGLE_NOODLE_HANDS":case "ANIM_RIFLE_HOLD_NORMAL_RECOIL_SINGLE_SMALL":case "ANIM_RIFLE_HOLD_NORMAL_WALK_STEALTH_POINT_DOWNWARDS":case "ANIM_RIFLE_HOLD_NORMAL_WALK_STEALTH_POINT_HORIZONTAL":f=
new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[g][this.mainFolder].skin+"/0_hand-close-front.png");j="girl"==this.mainFolder?-5:10;l={x:-10,y:10};break;case "ANIM_RIFLE_HOLD_INACCURATE_MID_IDLE":f=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[g][this.mainFolder].skin+"/0_hand-close-front.png");j="girl"==this.mainFolder?45:48;l="girl"==this.mainFolder?{x:10,y:-30}:{x:-10,y:10};break;case "ANIM_RIFLE_HOLD_INACCURATE_UP_IDLE":f=new ig.Image(_BASEPATH.spriter+
this.mainFolder+"/"+_DATAGAME.spriterData[g][this.mainFolder].skin+"/0_hand-close-front.png");j=50;l="girl"==this.mainFolder?{x:10,y:-30}:{x:-10,y:10};break;case "ANIM_DEFEND_HOLD_OBJECT":f=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[g][this.mainFolder].skin+"/0_hand-close-front.png");j=22;break;case "ANIM_STAB_ON_KNEES":j=-68}g=0;"boy"==this.mainFolder&&(g=7*_DATAGAME.ratioRes);for(var n=0;n<_handPart[b]["front"+this.mainFolder].length;n++)this.spriter.attachImage(_handPart[b]["front"+
this.mainFolder][n]+".png",e,_DATAGAME.objectHandheld[d].x,_DATAGAME.objectHandheld[d].y+g,!0,f,j,g,l)},changePose:function(b,d,e,f,g,j){this.spriter.entityName="du";this.spriter.tint=g;this.isWalkInAndOut=null==j?!1:j;g=!0;if(null==f||0>=f)g=!1;this.animSpeed=null==f||0>=f?100:f;this.spriter.setAnimationSpeedPercent(this.animSpeed);this.lastPoseBeforeIdle=f=this.poseNow;"ANIM_IDLE"!=b&&"ANIM_IDLE_REAR"!=b&&(this.boolContinueIdle=!1);!1==this.boolContinueIdle&&(this.poseNow!=b&&(this.poseNow=b,"ANIM_IDLE"==
this.poseNow&&this.spriter.pause||"ANIM_IDLE_REAR"==this.poseNow&&this.spriter.pause?(this.boolPauseTalking=!1,this.spriter.pause=!1,this.boolContinueIdle=this.boolFinishTalking=!0,this.checkMouthDefault(this.lastPoseBeforeIdle)):(this.boolStart=this.boolPauseTalking=!1,this.loopCount=0,this.boolLoop=!1,this.spriter.pause=!1,this.isWalkInAndOut&&(g&&(this.speedAnimWalk=this.animSpeed),this.spriter.setAnimationSpeedPercent(this.speedAnimWalk)),this.spriter.setAnimationByName(this.poseNow))),"amy"==
this.charName?this.changeDU(ig.game.sessionData.dressUpTheme[ig.game.currentWindow.numChapter].now):this.changeDU(this.charName),this.boolContinueIdle?null!=d&&""!=d&&(b=0<=_DATAGAME.listRearAnim.indexOf(f)?!0:!1,this.addHandheld(_DATAGAME.pose.indexOf(f),d,"amy"==this.charName?ig.game.sessionData.dressUpTheme[ig.game.currentWindow.numChapter].now:this.charName,b)):(this.removeHandheld(_DATAGAME.pose.indexOf(f)),null!=d&&""!=d&&(b=0<=_DATAGAME.listRearAnim.indexOf(this.poseNow)?!0:!1,this.addHandheld(_DATAGAME.pose.indexOf(this.poseNow),
d,"amy"==this.charName?ig.game.sessionData.dressUpTheme[ig.game.currentWindow.numChapter].now:this.charName,b))),"photoshoot"==ig.game.windowName&&(this._parent.playPose=!0),this.checkShadow(e),this.calculateShadow(_DATAGAME.pose.indexOf(this.poseNow)))},checkMouthDefault:function(b){this.isMouthDefault=0<=_DATAGAME.frownEmo.indexOf(b)?!1:!0},checkShadow:function(b){if(null==b){if(this.isShadow=!0,"ANIM_SWIM_REAR"==this.poseNow||"ANIM_SWIM_LOW_REAR"==this.poseNow||"ANIM_CLIMB_REAR"==this.poseNow||
"ANIM_LAY_IDLE"==this.poseNow||"ANIM_LAY_SLEEP"==this.poseNow||"ANIM_SIT_VEHICLE"==this.poseNow||"ANIM_SIT_TYPING_GENTLE"==this.poseNow||"ANIM_SIT_TYPING_GENTLE_REAR"==this.poseNow||"ANIM_SIT_TYPING_FURIOUS"==this.poseNow||"ANIM_SIT_TYPING_FURIOUS_REAR"==this.poseNow||"ANIM_SIT_TYPING_IDLE"==this.poseNow||"ANIM_SIT_TYPING_IDLE_REAR"==this.poseNow||"ANIM_SIT_TYPING_REST"==this.poseNow||"ANIM_SIT_TYPING_REST_REAR"==this.poseNow||"ANIM_PIANO_FINGER_REAR"==this.poseNow||"ANIM_PIANO_ENTHUSIASTIC_REAR"==
this.poseNow||"ANIM_PIANO_ENTHUSIASTIC2_REAR"==this.poseNow||"ANIM_PIANO_GENTLE_REAR"==this.poseNow||"ANIM_PIANO_FINGER"==this.poseNow||"ANIM_PIANO_ENTHUSIASTIC"==this.poseNow||"ANIM_PIANO_ENTHUSIASTIC2"==this.poseNow||"ANIM_PIANO_GENTLE"==this.poseNow)this.isShadow=!1}else if(!0==b||!1==b)this.isShadow=b},checkAnimation:function(){if(0===this.spriter.keyIndex)if(this.boolStart){if(this.spriter.animation.loopType===SpriterAnimationLooping.LOOPING&&!this.boolLoop){this.boolLoop=!0;if(0<this.loopCount)if("idle-blink"==
this.spriter.animation.name)this.spriter.entityName="du",this.poseNow="ANIM_IDLE",this.spriter.setAnimationSpeedPercent(this.animSpeed),this.spriter.setAnimationByName("ANIM_IDLE"),this.boolContinueIdle=!1,this.checkMouthDefault(this.poseNow),this.calculateShadow(_DATAGAME.pose.indexOf(this.poseNow));else if("ANIM_IDLE"==this.spriter.animation.name)this.spriter.entityName="du",this.poseNow="ANIM_IDLE",this.spriter.setAnimationSpeedPercent(this.animSpeed),this.spriter.setAnimationByName("ANIM_IDLE"),
this.boolContinueIdle=!1,this.checkMouthDefault(this.poseNow),this.calculateShadow(_DATAGAME.pose.indexOf(this.poseNow));else if("ANIM_IDLE_REAR"==this.spriter.animation.name)this.spriter.entityName="du",this.poseNow="ANIM_IDLE_REAR",this.spriter.setAnimationSpeedPercent(this.animSpeed),this.spriter.setAnimationByName("ANIM_IDLE_REAR"),this.boolContinueIdle=!1,this.checkMouthDefault(this.poseNow),this.calculateShadow(_DATAGAME.pose.indexOf(this.poseNow));else if("ANIM_WALK"==this.spriter.animation.name)this.spriter.entityName=
"du",this.poseNow="ANIM_WALK",this.spriter.setAnimationSpeedPercent(this.speedAnimWalk),this.spriter.setAnimationByName("ANIM_WALK");else if("ANIM_WALK_REAR"==this.spriter.animation.name)this.spriter.entityName="du",this.poseNow="ANIM_WALK_REAR",this.spriter.setAnimationSpeedPercent(this.speedAnimWalk),this.spriter.setAnimationByName("ANIM_WALK_REAR");else if("ANIM_RUN"==this.spriter.animation.name)this.spriter.entityName="du",this.poseNow="ANIM_RUN",this.spriter.setAnimationSpeedPercent(this.speedAnimWalk),
this.spriter.setAnimationByName("ANIM_RUN");else if("ANIM_RUN_REAR"==this.spriter.animation.name)this.spriter.entityName="du",this.poseNow="ANIM_RUN_REAR",this.spriter.setAnimationSpeedPercent(this.speedAnimWalk),this.spriter.setAnimationByName("ANIM_RUN_REAR");else{var b=_DATAGAME.pose.indexOf(this.spriter.animation.name);0>_DATAGAME.listRearAnim.indexOf(this.spriter.animation.name)?0==this.timePausePose[b]?(this.spriter.entityName="du",this.poseNow=this.spriter.animation.name,this.spriter.setAnimationSpeedPercent(this.isWalkInAndOut?
this.speedAnimWalk:this.animSpeed),this.spriter.setAnimationByName(this.spriter.animation.name)):(this.spriter.entityName="du",this.poseNow="ANIM_IDLE",this.spriter.setAnimationSpeedPercent(this.animSpeed),this.spriter.setAnimationByName("ANIM_IDLE"),this.checkFinishPose(),this.boolContinueIdle=!1,this.checkMouthDefault(this.poseNow)):0==this.timePausePose[b]?(this.spriter.entityName="du",this.poseNow=this.spriter.animation.name,this.spriter.setAnimationSpeedPercent(this.isWalkInAndOut?this.speedAnimWalk:
this.animSpeed),this.spriter.setAnimationByName(this.spriter.animation.name)):(this.spriter.entityName="du",this.poseNow="ANIM_IDLE_REAR",this.spriter.setAnimationSpeedPercent(this.animSpeed),this.spriter.setAnimationByName("ANIM_IDLE_REAR"),this.checkFinishPose(),this.boolContinueIdle=!1,this.checkMouthDefault(this.poseNow));this.calculateShadow(_DATAGAME.pose.indexOf(this.poseNow))}this.loopCount++}}else this.boolStart=!0,this.isTalking&&this.checkTalking();else this.spriter.animation.loopType===
SpriterAnimationLooping.LOOPING&&(this.boolLoop=!1),this.checkTalking()},checkTalking:function(){var b=_DATAGAME.pose.indexOf(this.spriter.animation.name);!0==this.boolContinueIdle&&(b=_DATAGAME.pose.indexOf(this.lastPoseBeforeIdle));0==this.timePausePose[b]?10<=this.spriter.time&&(!this.boolStartTalking&&this.isTalking)&&(this.counterTalking=0,this.timerTalking.set(this.durTimerTalking),this.timerTalking.reset(),this.statMouth="open",this.boolLoopTalking=this.boolStartTalking=!0):this.insideCheckTalking(b)},
insideCheckTalking:function(b){10<=this.spriter.time&&(!this.boolStartTalking&&this.isTalking)&&(this.counterTalking=0,this.timerTalking.set(this.durTimerTalking),this.timerTalking.reset(),this.statMouth="open",this.boolLoopTalking=this.boolStartTalking=!0);this.spriter.time>=this.timePausePose[b]&&!this.boolPauseTalking&&("ANIM_IDLE"==this.poseNow||"ANIM_IDLE_REAR"==this.poseNow?this.spriter.time>=this.timePausePose[b]+10&&(!this.boolStartTalking&&this.isTalking)&&(this.counterTalking=0,this.timerTalking.set(this.durTimerTalking),
this.timerTalking.reset(),this.statMouth="open",this.boolLoopTalking=this.boolStartTalking=!0):(this.boolPauseTalking=!0,this.spriter.time=this.timePausePose[b],this.spriter.pause=!0))},checkFinishPose:function(){},ready:function(){},changeEmotion:function(b,d){this.emotionNow=b;var e=this.charName.toLowerCase(),e=e.replaceAll(" ","");"girl"==this.mainFolder&&"amy"==this.charName&&(e=ig.game.sessionData.dressUpTheme[ig.game.currentWindow.numChapter].now,e=e.toLowerCase().replaceAll(" ",""));var f=
120,g=81;"boy"==this.mainFolder&&(f=111,g=30);var j="emo_default",l=_emoEye[j.toUpperCase()],j=new ig.AnimationSheet(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].face+"/"+j+".png",f,g),n=new ig.Animation(j,l.frameTime,JSON.parse(l.sequence),l.stop);n.tint=this.spriter.tint;n.alphaTint=1;var m=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].face+"/0_brow.png"),r=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].skin+
"/0_head.png"),q=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].hair+"/0_head.png"),s=0,t=!1,l=_emoEye[_DATAGAME.listEmotion[this.emotionNow]];this.talkingMouthType=_DATAGAME["TALKING_"+l.talkingType.toUpperCase()];!0==this.isWalk?this.changeMouthEmotion(d):this.changeMouthEmotion();"EMO_NEUTRAL"!=l.pngFile.toUpperCase()&&(t=!0,j=_emoEye[_DATAGAME.listEmotion[this.emotionNow]].pngFile,j=new ig.AnimationSheet(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].face+
"/"+j+".png",f,g),n=new ig.Animation(j,l.frameTime,JSON.parse(l.sequence),l.stop));if(this.isHaveEmotion)switch(this.emotionNow){case _DATAGAME.listEmotion.indexOf("EMO_SHOCK"):case _DATAGAME.listEmotion.indexOf("EMO_SURPRISED"):s=-3;break;case _DATAGAME.listEmotion.indexOf("EMO_BLUSH"):r=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].skin+"/0_head-blush.png");break;case _DATAGAME.listEmotion.indexOf("EMO_IRRITABLE"):case _DATAGAME.listEmotion.indexOf("EMO_PAIN"):case _DATAGAME.listEmotion.indexOf("EMO_PAIN_EXTREME"):t=
!0;m=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].face+"/0_brow-casual-angry.png");break;case _DATAGAME.listEmotion.indexOf("EMO_SOUR"):case _DATAGAME.listEmotion.indexOf("EMO_SOUR_EXTREME"):t=!0;m=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].face+"/0_brow-casual-frown.png");break;case _DATAGAME.listEmotion.indexOf("EMO_HAPPY"):case _DATAGAME.listEmotion.indexOf("EMO_LAUGH"):case _DATAGAME.listEmotion.indexOf("EMO_EYE_CLOSED"):case _DATAGAME.listEmotion.indexOf("EMO_EXORCISED"):t=
!0;break;case _DATAGAME.listEmotion.indexOf("EMO_ANGRY"):case _DATAGAME.listEmotion.indexOf("EMO_DISGUST"):case _DATAGAME.listEmotion.indexOf("EMO_RAGE"):case _DATAGAME.listEmotion.indexOf("EMO_RAGE_EXTREME"):case _DATAGAME.listEmotion.indexOf("EMO_INSANE"):m=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].face+"/0_brow-casual-angry.png");break;case _DATAGAME.listEmotion.indexOf("EMO_SKEPTICAL"):case _DATAGAME.listEmotion.indexOf("EMO_ANNOYING"):s=-3;m=
new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].face+"/0_brow-casual-skeptical.png");break;case _DATAGAME.listEmotion.indexOf("EMO_WINK"):case _DATAGAME.listEmotion.indexOf("EMO_FLIRT"):case _DATAGAME.listEmotion.indexOf("EMO_FLIRT_CHEESY"):s=-2;m=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].face+"/0_brow-wink.png");break;case _DATAGAME.listEmotion.indexOf("EMO_GRUDGE"):m=new ig.Image(_BASEPATH.spriter+this.mainFolder+
"/"+_DATAGAME.spriterData[e][this.mainFolder].face+"/0_brow-casual-angry.png");r=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].skin+"/0_head-scary.png");break;case _DATAGAME.listEmotion.indexOf("EMO_SAD"):case _DATAGAME.listEmotion.indexOf("EMO_SCARED"):case _DATAGAME.listEmotion.indexOf("EMO_BITTERSWEET"):case _DATAGAME.listEmotion.indexOf("EMO_AWKWARD"):m=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].face+
"/0_brow-casual-frown.png");break;case _DATAGAME.listEmotion.indexOf("EMO_HORRIFIED"):m=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].face+"/0_brow-casual-frown.png");r=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].skin+"/0_head-scary.png");break;case _DATAGAME.listEmotion.indexOf("EMO_SNEAKY"):m=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].face+"/0_brow-casual-angry.png");
break;case _DATAGAME.listEmotion.indexOf("EMO_SCARY"):case _DATAGAME.listEmotion.indexOf("EMO_DISGUST_EXTREME"):m=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].face+"/0_brow-casual-angry.png"),r=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].skin+"/0_head-scary.png")}if(2<=this._parent.totalChar||"ANIM_RUN"==this.poseNow||"ANIM_STUMBLE"==this.poseNow||"ANIM_WALK"==this.poseNow||"ANIM_PIANO_FINGER"==this.poseNow||
"ANIM_PIANO_ENTHUSIASTIC"==this.poseNow||"ANIM_PIANO_ENTHUSIASTIC2"==this.poseNow||"ANIM_PIANO_GENTLE"==this.poseNow)!1==t&&(j=new ig.AnimationSheet(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].face+"/"+l.pngFile+".png",f,g)),n=new ig.Animation(j,l.frameTime,null==l.sequence2?JSON.parse(l.sequence):JSON.parse(l.sequence2),l.stop);n.tint=this.spriter.tint;n.alphaTint=1;this.spriter.attachAnimation("0_eyes.png",n,0,0,!0);this.spriter.attachImage("0_brow.png",m,0,s,
!0);this.spriter.attachImage("0_head.png",r,0,0,!0,q)},changeEyeHappy:function(){if(this.emotionNow==_DATAGAME.listEmotion.indexOf("EMO_HAPPY")||this.emotionNow==_DATAGAME.listEmotion.indexOf("EMO_LAUGH")||this.emotionNow==_DATAGAME.listEmotion.indexOf("EMO_EYE_CLOSED")||this.emotionNow==_DATAGAME.listEmotion.indexOf("EMO_IRRITABLE")||this.emotionNow==_DATAGAME.listEmotion.indexOf("EMO_SOUR")||this.emotionNow==_DATAGAME.listEmotion.indexOf("EMO_SOUR_EXTREME")||this.emotionNow==_DATAGAME.listEmotion.indexOf("EMO_PAIN")||
this.emotionNow==_DATAGAME.listEmotion.indexOf("EMO_PAIN_EXTREME")||this.emotionNow==_DATAGAME.listEmotion.indexOf("EMO_EXORCISED")){var b=this.charName.toLowerCase(),b=b.replaceAll(" ","");"girl"==this.mainFolder&&"amy"==this.charName&&(b=ig.game.sessionData.dressUpTheme[ig.game.currentWindow.numChapter].now,b=b.toLowerCase().replaceAll(" ",""));var d=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[b][this.mainFolder].face+"/0_eyes.png");2<=this._parent.totalChar&&(d=new ig.Image(_BASEPATH.spriter+
this.mainFolder+"/"+_DATAGAME.spriterData[b][this.mainFolder].face+"/0_eyes-casual-left.png"));this.spriter.attachImage("0_eyes.png",d,0,0,!0)}},checkLastMouth:function(b){var d=null;switch(this.emotionNow){case _DATAGAME.listEmotion.indexOf("EMO_SHOCK"):case _DATAGAME.listEmotion.indexOf("EMO_DISGUST"):case _DATAGAME.listEmotion.indexOf("EMO_SCARED"):case _DATAGAME.listEmotion.indexOf("EMO_HORRIFIED"):case _DATAGAME.listEmotion.indexOf("EMO_EXORCISED"):case _DATAGAME.listEmotion.indexOf("EMO_RAGE_EXTREME"):case _DATAGAME.listEmotion.indexOf("EMO_SOUR_EXTREME"):case _DATAGAME.listEmotion.indexOf("EMO_PAIN_EXTREME"):d=
new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[b][this.mainFolder].face+"/0_mouth-shock.png");break;case _DATAGAME.listEmotion.indexOf("EMO_HAPPY"):case _DATAGAME.listEmotion.indexOf("EMO_SNEAKY"):case _DATAGAME.listEmotion.indexOf("EMO_SCARY"):case _DATAGAME.listEmotion.indexOf("EMO_FLIRT"):case _DATAGAME.listEmotion.indexOf("EMO_AWKWARD"):case _DATAGAME.listEmotion.indexOf("EMO_INSANE"):d=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[b][this.mainFolder].face+
"/0_mouth-happy.png");break;case _DATAGAME.listEmotion.indexOf("EMO_LAUGH"):case _DATAGAME.listEmotion.indexOf("EMO_FLIRT_CHEESY"):d=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[b][this.mainFolder].face+"/0_mouth-laugh.png");break;case _DATAGAME.listEmotion.indexOf("EMO_ANGRY"):case _DATAGAME.listEmotion.indexOf("EMO_SAD"):case _DATAGAME.listEmotion.indexOf("EMO_GRUDGE"):case _DATAGAME.listEmotion.indexOf("EMO_DISAPPOINTED"):case _DATAGAME.listEmotion.indexOf("EMO_SKEPTICAL"):case _DATAGAME.listEmotion.indexOf("EMO_SURPRISED"):case _DATAGAME.listEmotion.indexOf("EMO_IRRITABLE"):case _DATAGAME.listEmotion.indexOf("EMO_RAGE"):case _DATAGAME.listEmotion.indexOf("EMO_SOUR"):case _DATAGAME.listEmotion.indexOf("EMO_PAIN"):case _DATAGAME.listEmotion.indexOf("EMO_DISGUST_EXTREME"):d=
new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[b][this.mainFolder].face+"/0_mouth-frown.png");break;case _DATAGAME.listEmotion.indexOf("EMO_ANNOYING"):d=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[b][this.mainFolder].face+"/0_mouth-wide.png")}return d},changeMouthEmotion:function(){var b=this.isMouthDefault?"0_mouth":"0_mouth-frown",d="0_mouth",e=this.charName.toLowerCase(),e=e.replaceAll(" ","");this.isFrown&&(d="0_mouth-frown");d=new ig.Image(_BASEPATH.spriter+
this.mainFolder+"/"+_DATAGAME.spriterData[e][this.mainFolder].face+"/"+d+".png");this.isHaveEmotion&&null!=this.checkLastMouth(e)&&(d=this.checkLastMouth(e));!0==this.isWalk&&(null!=this.checkLastMouth(e)&&(d=this.checkLastMouth(e)),b="0_mouth");this.spriter.attachImage(b+".png",d,0,0,!0)},talkingAnimation:function(){var b=this.charName,b=b.replaceAll(" ",""),d=this.isMouthDefault?"0_mouth":"0_mouth-frown",e="0_mouth",f="0_mouth-open1",g="0_mouth-open2",j="0_mouth-shock";this.isFrown&&(e="0_mouth-frown",
f="0_mouth-frown-open1",g="0_mouth-frown-open2",j="0_mouth-frown-shock");this.talkingMouthType==_DATAGAME.TALKING_BIG&&(f="0_mouth-pursed",g="0_mouth-wide");e=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[b][this.mainFolder].face+"/"+e+".png");"open"==this.statMouth?(this.numMouth++,4<=this.numMouth&&(this.statMouth="close")):(this.numMouth--,1>=this.numMouth&&(this.statMouth="open"));2==this.numMouth?e=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[b][this.mainFolder].face+
"/"+f+".png"):3==this.numMouth?e=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[b][this.mainFolder].face+"/"+g+".png"):4==this.numMouth&&(e=new ig.Image(_BASEPATH.spriter+this.mainFolder+"/"+_DATAGAME.spriterData[b][this.mainFolder].face+"/"+j+".png"));this.spriter.attachImage(d+".png",e,0,0,!0)},update:function(){this.parent();this.checkAnimation();this.boolStartTalking&&(this.boolLoopTalking&&this.isTalking&&!ig.game.isPauseSetting)&&(0<this.timerTalking.delta()&&(this.timerTalking.set(this.durTimerTalking),
this.timerTalking.reset(),this.talkingAnimation()),this._parent.isBubble&&!this._parent.loadSentence&&(this.boolLoopTalking=this.boolStartTalking=this.isTalking=!1,this.statMouth="close",this.changeEyeHappy(),this.changeMouthEmotion()))},calculateShadow:function(b){var d=this.spriter.animation.name;this.radShadow=_DATAGAME.shadowWidth[b];this.hScaleShadow=36/this.radShadow;this.offsetShadowY=-66*this.radShadow/146;this.offsetShadowX=0;if("rear"==d.substring(d.length-4,d.length).toLowerCase())if(b=
d.split("_"),this.offsetShadowY=("girl"==this.mainFolder?-50:30)*this.radShadow/146,"ANIM_RUN_REAR"==d)this.offsetShadowX=130,this.offsetShadowY=30*this.radShadow/146;else if("ANIM_CRAWL_REAR"==d)this.offsetShadowX="girl"==this.mainFolder?50:100,this.offsetShadowY=-100*this.radShadow/146;else if(0<=b.indexOf("SWIM"))this.offsetShadowX=110,this.offsetShadowY=-1100*this.radShadow/146,0<=b.indexOf("LOW")&&(this.offsetShadowY=300*this.radShadow/146);else{if(0>b.indexOf("CLIMB"))switch(this.offsetShadowX=
"girl"==this.mainFolder?130:100,d){case "ANIM_PIANO_FINGER_REAR":case "ANIM_PIANO_ENTHUSIASTIC_REAR":case "ANIM_PIANO_ENTHUSIASTIC2_REAR":case "ANIM_PIANO_GENTLE_REAR":case "ANIM_SIT_TYPING_GENTLE_REAR":case "ANIM_SIT_TYPING_FURIOUS_REAR":case "ANIM_SIT_TYPING_IDLE_REAR":case "ANIM_SIT_TYPING_REST_REAR":this.offsetShadowX=("girl"==this.mainFolder?20:30)*this.radShadow/146;this.offsetShadowY=("girl"==this.mainFolder?10:0)*this.radShadow/146;break;case "ANIM_IDLE_HANDS_DOWN_LEGS_WIDE_REAR":this.offsetShadowX=
120*this.radShadow/146;break;case "ANIM_KISS_BEND1_REAR":this.offsetShadowX=("girl"==this.mainFolder?20:0)*this.radShadow/146;break;case "ANIM_KISS_BEND2_REAR":this.offsetShadowX=("girl"==this.mainFolder?50:0)*this.radShadow/146}}else switch(d){case "ANIM_DANCEUP":case "ANIM_DANCEHIP":this.offsetShadowX=-30;break;case "ANIM_RUN":this.offsetShadowY=-100*this.radShadow/146;break;case "ANIM_FALL":case "ANIM_FAINTED":this.offsetShadowX=-450;this.offsetShadowY=-30*this.radShadow/146;break;case "ANIM_FLIRT":this.offsetShadowX=
20;break;case "ANIM_JUMP":this.offsetShadowY=0*this.radShadow/146;break;case "ANIM_LAY_IDLE":case "ANIM_LAY_SLEEP":this.offsetShadowX=-370;this.offsetShadowY=-1700*this.radShadow/146;break;case "ANIM_LAY_IDLE_LOW":this.offsetShadowX=-370;this.offsetShadowY=-100*this.radShadow/146;break;case "ANIM_LAY_STRUGGLE_WEAK":case "ANIM_LAY_STRUGGLE_HARD":this.offsetShadowX=-280;this.offsetShadowY=("girl"==this.mainFolder?-100:-50)*this.radShadow/146;this.hScaleShadow=5*(36/this.radShadow)/4;break;case "ANIM_PUNCH":this.offsetShadowX=
30;this.offsetShadowY=("girl"==this.mainFolder?-600:-550)*this.radShadow/146;break;case "ANIM_SIT":this.offsetShadowX=-30;break;case "ANIM_SQUAT":this.offsetShadowX=("girl"==this.mainFolder?-20:-50)*this.radShadow/146;break;case "ANIM_MEDITATE_IDLE":case "ANIM_MEDITATE_FLOATING":"girl"==this.mainFolder?this.offsetShadowX=-30*this.radShadow/146:(this.radShadow=1.2*_DATAGAME.shadowWidth[b],this.hScaleShadow=36/this.radShadow,this.offsetShadowY=-66*this.radShadow/146,this.offsetShadowX=0,this.offsetShadowX=
-10*this.radShadow/146);break;case "ANIM_KICK_PUSH":this.offsetShadowY=-100*this.radShadow/146;this.offsetShadowX=("girl"==this.mainFolder?-20:-30)*this.radShadow/146;break;case "ANIM_STRANGLED":this.offsetShadowX=-30*this.radShadow/146;break;case "ANIM_STRANGLER":this.offsetShadowX=20*this.radShadow/146;this.offsetShadowY=-100*this.radShadow/146;break;case "ANIM_SIDE_KICK":this.offsetShadowX=("girl"==this.mainFolder?-20:-30)*this.radShadow/146;break;case "ANIM_PUNCH_LUNGE":case "ANIM_PUNCH_LUNGE_SINGLE":this.offsetShadowX=
-60*this.radShadow/146;this.offsetShadowY=-20*this.radShadow/146;break;case "ANIM_EXPLAIN_DEFENSE":this.offsetShadowX=-35*this.radShadow/146;break;case "ANIM_SWAY_DRUNK_LIGHT":case "ANIM_SWAY_DRUNK_MODERATE":case "ANIM_SWAY_DRUNK_HEAVY":this.radShadow="girl"==this.mainFolder?1.2*_DATAGAME.shadowWidth[b]:1.35*_DATAGAME.shadowWidth[b];this.offsetShadowX=("girl"==this.mainFolder?-20:-10)*this.radShadow/146;break;case "ANIM_DEFEND_HOLD_OBJECT":this.radShadow=1.1*_DATAGAME.shadowWidth[b];this.offsetShadowX=
("girl"==this.mainFolder?-20:-5)*this.radShadow/146;break;case "ANIM_STRIKE_OVERHEAD_TO_GROUND":this.offsetShadowX=("girl"==this.mainFolder?-20:-5)*this.radShadow/146;this.offsetShadowY=("girl"==this.mainFolder?-60:-20)*this.radShadow/146;break;case "ANIM_STRIKE_OVERHEAD_TO_MIDDLE":this.offsetShadowX=("girl"==this.mainFolder?-30:-5)*this.radShadow/146;this.offsetShadowY=("girl"==this.mainFolder?-60:-20)*this.radShadow/146;break;case "ANIM_PIANO_FINGER":case "ANIM_PIANO_ENTHUSIASTIC":case "ANIM_PIANO_ENTHUSIASTIC2":case "ANIM_PIANO_GENTLE":case "ANIM_SIT_TYPING_GENTLE":case "ANIM_SIT_TYPING_FURIOUS":case "ANIM_SIT_TYPING_IDLE":case "ANIM_SIT_TYPING_REST":"boy"==
this.mainFolder&&(this.radShadow=1.3*_DATAGAME.shadowWidth[b]);this.offsetShadowX=-70*this.radShadow/146;this.offsetShadowY=("girl"==this.mainFolder?-30:-40)*this.radShadow/146;break;case "ANIM_EMBRACE_GIRL":case "ANIM_EMBRACE_BOY":case "ANIM_EMBRACE_IDLE_GIRL":case "ANIM_EMBRACE_IDLE_BOY":this.offsetShadowX=-80*this.radShadow/146;break;case "ANIM_POINT_FOWARD_ENERGETIC":this.offsetShadowX=("girl"==this.mainFolder?-50:-60)*this.radShadow/146;break;case "ANIM_SHAKEITTOTHEMAX_KNEESBEND":this.offsetShadowX=
("girl"==this.mainFolder?-60:-40)*this.radShadow/146;break;case "ANIM_ARMS_WIDE_OPEN_RECEIVING_LOOP":this.offsetShadowX=("girl"==this.mainFolder?-40:-30)*this.radShadow/146;break;case "ANIM_STRIKE_OVERHEAD_HEAVY":this.offsetShadowX=("girl"==this.mainFolder?10:20)*this.radShadow/146;break;case "ANIM_SIT_VEHICLE":this.offsetShadowX=-70*this.radShadow/146;break;case "ANIM_POINT_FOWARD_DOUBLE_FINGER_ENERGETIC":this.offsetShadowX=("girl"==this.mainFolder?-40:-60)*this.radShadow/146;break;case "ANIM_SLASH_LUNGE":this.offsetShadowX=
("girl"==this.mainFolder?-50:-40)*this.radShadow/146;break;case "ANIM_SLASH_SWING":this.offsetShadowX=("girl"==this.mainFolder?30:20)*this.radShadow/146;break;case "ANIM_FALL_FLOATING":this.offsetShadowX=("girl"==this.mainFolder?-10:10)*this.radShadow/146;break;case "ANIM_FLY_BACKWARDS_FLOATING":this.offsetShadowX=-90*this.radShadow/146;break;case "ANIM_JOG_HAND_CLOSE":case "ANIM_JOG_HAND_OPEN":this.offsetShadowX=10*this.radShadow/146;break;case "ANIM_RUN_WIDE_HAND_CLOSE":case "ANIM_RUN_WIDE_HAND_OPEN":this.offsetShadowX=
20*this.radShadow/146;break;case "ANIM_IDLE_HANDS_DOWN_LEGS_WIDE":this.offsetShadowX=-10*this.radShadow/146;break;case "ANIM_FALL_KICKED_BACKWARDS":case "ANIM_FALL_KICKED_BACKWARDS_UNCONSCIOUS":this.offsetShadowX=("girl"==this.mainFolder?120:140)*this.radShadow/146;this.offsetShadowY=20*this.radShadow/146;break;case "ANIM_FALL_KICKED_BACKWARDS_OVER_OBJECT":case "ANIM_FALL_KICKED_BACKWARDS_OVER_OBJECT_UNCONSCIOUS":this.offsetShadowX=("girl"==this.mainFolder?255:235)*this.radShadow/146;this.offsetShadowY=
20*this.radShadow/146;break;case "ANIM_RIFLE_HOLD_INACCURATE_UP_IDLE":case "ANIM_RIFLE_HOLD_INACCURATE_MID_IDLE":case "ANIM_RIFLE_HOLD_SIDEWAYS_IDLE":case "ANIM_RIFLE_HOLD_ONE_HANDED":this.offsetShadowX=("girl"==this.mainFolder?-20:0)*this.radShadow/146;break;case "ANIM_RIFLE_HOLD_NORMAL_IDLE":case "ANIM_RIFLE_HOLD_NORMAL_RECOIL_5_SHOTS_CONSTANT":case "ANIM_RIFLE_HOLD_NORMAL_RECOIL_5_SHOTS_RANDOM":case "ANIM_RIFLE_HOLD_NORMAL_RECOIL_NORMAL_SINGLE_CONSTANT":case "ANIM_RIFLE_HOLD_NORMAL_RECOIL_SINGLE_BIG":case "ANIM_RIFLE_HOLD_NORMAL_RECOIL_SINGLE_NOODLE_HANDS":case "ANIM_RIFLE_HOLD_NORMAL_RECOIL_SINGLE_SMALL":this.offsetShadowX=
("girl"==this.mainFolder?-10:0)*this.radShadow/146;break;case "ANIM_RIFLE_HOLD_CROUCH_IDLE":this.offsetShadowX=10*this.radShadow/146;break;case "ANIM_RIFLE_HOLD_PRONE_IDLE":this.offsetShadowX=60*this.radShadow/146;break;case "ANIM_FALL_FRONT":case "ANIM_FALL_FRONT_UNCONSCIOUS":case "ANIM_FALL_FRONT_SWAY":case "ANIM_FALL_FRONT_SWAY_UNCONSCIOUS":this.offsetShadowX=("girl"==this.mainFolder?-115:-120)*this.radShadow/146;this.offsetShadowY=("girl"==this.mainFolder?0:20)*this.radShadow/146;break;case "ANIM_HAND_ON_GROUND_IDLE":case "ANIM_HAND_ON_GROUND_LOOK_FORWARD_IDLE":case "ANIM_HAND_ON_GROUND_LOOK_FORWARD":case "ANIM_LONGJUMP_LAND1":case "ANIM_LONGJUMP_LAND1_LOOK_FORWARD":case "ANIM_LONGJUMP_LAND1_LOOK_FORWARD2":this.offsetShadowX=
("girl"==this.mainFolder?25:10)*this.radShadow/146,this.offsetShadowY=-100*this.radShadow/146}},draw:function(){this.parent();var b=ig.system.context;this.isShadow&&(null!=this.spriter&&0<this.spriter.root.alpha)&&(b.save(),b.globalAlpha=0.2*this.spriter.root.alpha,b.translate(this.spriter.pos.x,this.spriter.pos.y),b.scale(1*this.defScale.y,this.hScaleShadow*this.defScale.y),b.fillStyle="black",b.beginPath(),b.arc(this.offsetShadowX*this.flipState*_DATAGAME.ratioRes,this.offsetShadowY*_DATAGAME.ratioRes*
this._parent.zoomBG,this.radShadow*_DATAGAME.ratioRes*this._parent.zoomBG,0,2*Math.PI),b.fill(),b.restore())}})});ig.baked=!0;
ig.module("game.entities.object.girl").requires("impact.entity","game.entities.object.char","plugins.spriter.spriter-display","plugins.spriter.scml").defines(function(){SpriterGirl=SpriterChar.extend({charName:"amy",mainFolder:"girl",spriter:null,scmlSprite:new SpriterScml(_RESOURCESINFO.spriter.girl),init:function(b,d,e){this.parent(b,d,e);this.spriter=ig.game.spawnEntity(SpriterDisplay,ig.game.midX,ig.game.midY,{scml:this.scmlSprite,zIndex:_DATAGAME.zIndexData.spriter});this.changePoseDefault("idle");
this.timerTalking=new ig.Timer(0.5);this.calculateShadow(_DATAGAME.pose.indexOf(this.poseNow))},changeDU:function(b){b=b.toLowerCase().replaceAll(" ","");var d="bottom-long-skirt"==_DATAGAME.spriterData[b].girl.bottom.substr(0,17)?!0:!1,e="normal";"shoes-heel"==_DATAGAME.spriterData[b].girl.shoes.substr(0,10)?e="heel":"shoes-sneaker"==_DATAGAME.spriterData[b].girl.shoes.substr(0,13)?e="sneaker":"shoes-boot"==_DATAGAME.spriterData[b].girl.shoes.substr(0,10)&&(e="boot");for(var f=1;13>=f;f++){var g=
"skin";2==f?g="face":3==f?g="hair":4==f?g="top":5==f?g="bottom":6==f?g="shoes":7==f?g="glasses":8==f?g="earrings":9==f?g="hat":10==f?g="beard":11==f?g="anklet":12==f?g="bracelet":13==f&&(g="necklace");if(!(7<=f&&null==_DATAGAME.spriterData[b].girl[g]))for(var j=0;j<_DATAGAME.girlPart[f].length;j++){var l=_DATAGAME.girlPart[f][j];5==f&&"0_leg-left-cross"==_DATAGAME.girlPart[f][j]?l="0_leg-left":5==f&&"0_leg-right-cross"==_DATAGAME.girlPart[f][j]&&(l="0_leg-right");l=new ig.Image(_BASEPATH.spriter+
"girl/"+_DATAGAME.spriterData[b].girl[g]+"/"+l+".png");if("shoes"==g){if(!d)if("sneaker"==e||"boot"==e){var n=new ig.Image(_BASEPATH.spriter+"girl/"+_DATAGAME.spriterData[b].girl.skin+"/"+_DATAGAME.girlPart[f][j]+".png");"0_sock"==_DATAGAME.girlPart[f][j]||"0_sock-rear"==_DATAGAME.girlPart[f][j]?this.spriter.attachImage(_DATAGAME.girlPart[f][j]+".png",n,0,0,!0,l):this.spriter.attachImage(_DATAGAME.girlPart[f][j]+".png",l,0,0,!0)}else{if("heel"==e){n="-heel.png";if("0_sock"==_DATAGAME.girlPart[f][j]||
"0_sock-rear"==_DATAGAME.girlPart[f][j])n=".png";n=new ig.Image(_BASEPATH.spriter+"girl/"+_DATAGAME.spriterData[b].girl.skin+"/"+_DATAGAME.girlPart[f][j]+n)}else n=new ig.Image(_BASEPATH.spriter+"girl/"+_DATAGAME.spriterData[b].girl.skin+"/"+_DATAGAME.girlPart[f][j]+".png");this.spriter.attachImage(_DATAGAME.girlPart[f][j]+".png",n,0,0,!0,l)}}else 3==f||4==f||5==f||6==f?(n=new ig.Image(_BASEPATH.spriter+"girl/"+_DATAGAME.spriterData[b].girl.skin+"/"+_DATAGAME.girlPart[f][j]+".png"),this.spriter.attachImage(_DATAGAME.girlPart[f][j]+
".png",n,0,0,!0,l)):this.spriter.attachImage(_DATAGAME.girlPart[f][j]+".png",l,0,0,!0,l)}if(d)for(g=0;g<_DATAGAME.girlPart[0].length;g++)l=new ig.Image(_BASEPATH.spriter+"girl/blank/"+_DATAGAME.girlPart[0][g]+".png"),this.spriter.attachImage(_DATAGAME.girlPart[0][g]+".png",l,0,0,!0,l)}},draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.object.boy").requires("impact.entity","game.entities.object.char","plugins.spriter.spriter-display","plugins.spriter.scml").defines(function(){SpriterBoy=SpriterChar.extend({charName:"jack",mainFolder:"boy",spriter:null,scmlSprite:new SpriterScml(_RESOURCESINFO.spriter.boy),init:function(b,d,e){this.parent(b,d,e);this.spriter=ig.game.spawnEntity(SpriterDisplay,ig.game.midX,ig.game.midY,{scml:this.scmlSprite,zIndex:_DATAGAME.zIndexData.spriter});this.timerTalking=new ig.Timer(0.5);
this.changePoseDefault("idle");this.calculateShadow(_DATAGAME.pose.indexOf(this.poseNow))},changeDU:function(b){b=b.toLowerCase().replaceAll(" ","");for(var d=1;13>=d;d++){var e="skin";2==d?e="face":3==d?e="hair":4==d?e="top":5==d?e="bottom":6==d?e="shoes":7==d?e="glasses":8==d?e="earrings":9==d?e="hat":10==d?e="beard":11==d?e="anklet":12==d?e="bracelet":13==d&&(e="necklace");if(!(7<=d&&null==_DATAGAME.spriterData[b].boy[e]))for(var f=0;f<_DATAGAME.boyPart[d].length;f++){var g=_DATAGAME.boyPart[d][f];
5==d&&"0_leg-left-cross"==_DATAGAME.boyPart[d][f]?g="0_leg-left":5==d&&"0_leg-right-cross"==_DATAGAME.boyPart[d][f]&&(g="0_leg-right");g=new ig.Image(_BASEPATH.spriter+"boy/"+_DATAGAME.spriterData[b].boy[e]+"/"+g+".png");if(3==d||4==d||5==d||6==d){var j=new ig.Image(_BASEPATH.spriter+"boy/"+_DATAGAME.spriterData[b].boy.skin+"/"+_DATAGAME.boyPart[d][f]+".png");this.spriter.attachImage(_DATAGAME.boyPart[d][f]+".png",j,0,0,!0,g)}else this.spriter.attachImage(_DATAGAME.boyPart[d][f]+".png",g,0,0,!0,g)}}},
draw:function(){this.parent()}})});ig.baked=!0;
ig.module("game.entities.object.flashback").requires("impact.entity").defines(function(){EntityFlashback=ig.Entity.extend({zIndex:_DATAGAME.zIndexData.flashback,visible:!0,init:function(b,d,e){this.parent(b,d,e);ig.game.sortEntitiesDeferred();this.repos()},show:function(){this.visible=!0},hide:function(){this.visible=!1},repos:function(){},update:function(){this.parent()},drawFlashback:function(b){if(null!=ig.game.sessionData.flashbackColor[this._parent.numChapter]){var d=ig.system.width,e=ig.system.height,
f=300;b.save();d>e?(f=d,b.scale(1,e/d)):(f=e,b.scale(d/e,1));var g=b.createRadialGradient(f/2,f/2,0,f/2,f/2,f);g.addColorStop(0.45,"rgba(255, 255, 255, 0)");g.addColorStop(0.7,ig.game.sessionData.flashbackColor[this._parent.numChapter]);b.fillStyle=g;b.fillRect(0,0,f,f);b.restore();b.save();b.globalAlpha=0.2;b.fillStyle=ig.game.sessionData.flashbackColor[this._parent.numChapter];b.fillRect(0,0,d,e);b.restore()}},draw:function(){this.parent();this.visible&&this.drawFlashback(ig.system.context)}})});
ig.baked=!0;
ig.module("game.entities.object.background").requires("impact.entity","plugins.data.vector").defines(function(){EntityBackground=ig.Entity.extend({image:null,isLoop:!0,isMenu:!1,placeName:"",offsetXBG:0,offsetYBG:0,moveStatus:{LEFT:1,RIGHT:2,SCALE:3,NONE:0},statMove:0,scale:1,pntX:0.5,pntY:0.5,posScaleX:0,posScaleY:0,zIndex:0,size:{x:1920*_DATAGAME.ratioRes,y:1280*_DATAGAME.ratioRes},defSize:{x:1920*_DATAGAME.ratioRes,y:1280*_DATAGAME.ratioRes},bigSize:{x:1920*_DATAGAME.ratioRes,y:1280*_DATAGAME.ratioRes},
isImage:!1,isVertical:!1,isScroll:!1,scrollDirection:"left",speed:10,posScroll:{x:0,y:0},init:function(b,d,e){this.parent(b,d,e);if(this.isImage="#"==this.placeName.substring(0,1)?!1:!0){if(0<=_DATAGAME.smallBG.indexOf(this.placeName))this.size={x:1280*_DATAGAME.ratioRes,y:1280*_DATAGAME.ratioRes},this.defSize={x:1280*_DATAGAME.ratioRes,y:1280*_DATAGAME.ratioRes};else if(0<=_DATAGAME.highResBG.indexOf(this.placeName)||"hd_"==this.placeName.substring(0,3).toLowerCase())this.defSize={x:3840*_DATAGAME.ratioRes,
y:2560*_DATAGAME.ratioRes};this.cvsBG=document.createElement("canvas");this.ctxBG=this.cvsBG.getContext("2d");this.image=new ig.Image(_BASEPATH.background+this.placeName+"."+_DATAGAME.BGFileType[this.placeName],this.size.x,this.size.y);this.repos()}},calculatePosBG:function(){var b=(Math.abs(-ig.game.screen.x+this._parent.posXBG+this.posScroll.x-this.offsetXBG)+(-ig.game.screen.x+ig.sizeHandler.minW*this.pntX))/this.cvsBG.width,d=this.cvsBG.height*this.pntY,e=(Math.abs(-ig.game.screen.y+this._parent.posYBG+
this.posScroll.y-this.offsetYBG)+(-ig.game.screen.y+ig.sizeHandler.minH*this.pntY))/this.cvsBG.height;this.isVertical||(e=d/this.cvsBG.height);this.posScaleX=this.cvsBG.width*(this._parent.zoomBG-1)*b;this.posScaleY=this.cvsBG.height*(this._parent.zoomBG-1)*e;this.pos.x=-ig.game.screen.x+this._parent.posXBG+this.posScroll.x-this.offsetXBG-this.posScaleX;this.pos.y=-ig.game.screen.y+this._parent.posYBG-this.offsetYBG-this.posScaleY+this.posScroll.y},draw:function(){var b=ig.system.context;!0==this.isClear?
b.clearRect(0,0,ig.system.width,ig.system.height):(this.isImage?(b.save(),this.isLoop&&!this.isVertical&&(b.fillStyle=_DATAGAME.colorBG["top"+this.placeName],b.fillRect(0,0,ig.system.width,ig.system.height/2+this._parent.posYBG),b.fillStyle=_DATAGAME.colorBG["floor"+this.placeName],b.fillRect(0,ig.game.midY+this._parent.posYBG,ig.system.width,ig.system.height/2+-1*this._parent.posYBG)),this.isScroll&&!ig.game.isPauseSetting&&0!=ig.Timer.timeScale&&("up"==this.scrollDirection||"down"==this.scrollDirection?
this.posScroll.y+=this.speed:this.posScroll.x+=this.speed),this.calculatePosBG(),Math.abs(this.posScroll.x)>=2*this.size.x&&(this.posScroll.x=0>this.posScroll.x?this.posScroll.x+2*this.size.x:this.posScroll.x-2*this.size.x),Math.abs(this.posScroll.y)>=this.size.y&&(this.posScroll.y=0>this.posScroll.y?this.posScroll.y+this.size.y:this.posScroll.y-this.size.y),b.translate(this.pos.x,this.pos.y),b.drawImage(this.cvsBG,0,0,this.cvsBG.width*this._parent.zoomBG,this.cvsBG.height*this._parent.zoomBG)):(b.save(),
b.fillStyle=this.placeName,b.fillRect(0,0,ig.system.width,ig.system.height)),b.restore())},repos:function(){if(this.isLoop){if(this.isImage&&this.ctxBG){for(var b=-this.size.x/2+ig.sizeHandler.minW/2,d=2*this.size.x,e=2*-this.size.x,f=0;f>ig.game.screen.x-d;)f-=this.size.x;this.offsetXBG=-f;for(var f=this.size.x,g=0;g<ig.system.width-e+f;)g+=this.size.x;this.offsetYBG=this.isVertical?2*this.size.y:0;this.cvsBG.width=ig.system.width+this.offsetXBG+g;this.cvsBG.height=ig.system.height+2*this.offsetYBG;
ig.sizeHandler.isPortrait&&!this.isVertical&&(this.cvsBG.height=this.size.y);this.ctxBG.clearRect(0,0,ig.system.width+this.offsetXBG+g,ig.system.height);for(var g=0,j=1;g<ig.system.width-e+f;){this.ctxBG.save();if(1==j%2)this.ctxBG.scale(1,1),this.image.drawCtx(this.ctxBG,g+this.offsetXBG+b,0,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y),this.isVertical&&(this.image.drawCtx(this.ctxBG,g+this.offsetXBG+b,this.size.y,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y),this.image.drawCtx(this.ctxBG,
g+this.offsetXBG+b,2*this.size.y,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y),this.image.drawCtx(this.ctxBG,g+this.offsetXBG+b,3*this.size.y,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y),ig.sizeHandler.isPortrait&&this.image.drawCtx(this.ctxBG,g+this.offsetXBG+b,4*this.size.y,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y));else{if(!this.isVertical||this.isVertical&&!ig.sizeHandler.isPortrait)this.ctxBG.translate(g+this.offsetXBG+b+this.size.x,0),this.ctxBG.scale(-1,
1),this.image.drawCtx(this.ctxBG,0,0,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y);this.isVertical&&(this.image.drawCtx(this.ctxBG,0,this.size.y,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y),this.image.drawCtx(this.ctxBG,0,2*this.size.y,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y),this.image.drawCtx(this.ctxBG,0,3*this.size.y,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y),ig.sizeHandler.isPortrait&&this.image.drawCtx(this.ctxBG,0,4*this.size.y,0,
0,this.defSize.x,this.defSize.y,this.size.x,this.size.y))}this.ctxBG.restore();g+=this.size.x;j++}e=0;for(f=1;e>ig.game.screen.x-d;){e-=this.size.x;this.ctxBG.save();if(1==f%2)this.ctxBG.translate(e+this.offsetXBG+b+this.size.x,0),this.ctxBG.scale(-1,1),this.image.drawCtx(this.ctxBG,0,0,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y),this.isVertical&&(this.image.drawCtx(this.ctxBG,0,this.size.y,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y),this.image.drawCtx(this.ctxBG,0,2*
this.size.y,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y),this.image.drawCtx(this.ctxBG,0,3*this.size.y,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y),ig.sizeHandler.isPortrait&&this.image.drawCtx(this.ctxBG,0,4*this.size.y,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y));else{if(!this.isVertical||this.isVertical&&!ig.sizeHandler.isPortrait)this.ctxBG.scale(1,1),this.image.drawCtx(this.ctxBG,e+this.offsetXBG+b,0,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y);
this.isVertical&&(this.image.drawCtx(this.ctxBG,e+this.offsetXBG+b,this.size.y,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y),this.image.drawCtx(this.ctxBG,e+this.offsetXBG+b,2*this.size.y,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y),this.image.drawCtx(this.ctxBG,e+this.offsetXBG+b,3*this.size.y,0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y),ig.sizeHandler.isPortrait&&this.image.drawCtx(this.ctxBG,e+this.offsetXBG+b,4*this.size.y,0,0,this.defSize.x,this.defSize.y,
this.size.x,this.size.y))}this.ctxBG.restore();f++}}}else if(this.isImage&&this.ctxBG){b=-this.size.x/2+ig.sizeHandler.minW/2;e=d=this._parent.posXBG;this.statMove==this.moveStatus.LEFT?e=this._parent.lastposXBG:this.statMove==this.moveStatus.RIGHT&&(d=this._parent.lastposXBG);for(f=0;f>ig.game.screen.x-d;)f-=this.size.x;this.offsetXBG=-f;f=this.size.x;for(g=0;g<ig.system.width-e+f;)g+=this.size.x;this.cvsBG.width=ig.system.width+this.offsetXBG+g;this.cvsBG.height=ig.system.height;ig.sizeHandler.isPortrait&&
(this.cvsBG.height=this.size.y);this.ctxBG.clearRect(0,0,ig.system.width+this.offsetXBG+g,ig.system.height);this.image.drawCtx(this.ctxBG,this.offsetXBG+b,-1*((ig.sizeHandler.minH-this.size.y)/2),0,0,this.defSize.x,this.defSize.y,this.size.x,this.size.y)}}});EntityOverlayBackground=ig.Entity.extend({image:null,placeName:"",zIndex:0,size:{x:2880,y:1920},bigSize:{x:2880,y:1920},isImage:!1,init:function(b,d,e){this.parent(b,d,e);if(this.isImage="#"==this.placeName.substring(0,1)?!1:!0)0<=_DATAGAME.smallBG.indexOf(this.placeName)&&
(this.size={x:1920,y:1920}),this.image=new ig.Image(_BASEPATH.background+this.placeName+"."+_DATAGAME.BGFileType[this.placeName],this.size.x,this.size.y),this.cvsBG=document.createElement("canvas"),this.ctxBG=this.cvsBG.getContext("2d"),this.repos()},draw:function(){var b=ig.system.context;this.isImage&&(b.save(),this.image.draw(0,0,this.bgX,this.bgY,this.bgW,this.bgH,ig.system.width,ig.system.height),this.image.draw(0,0,this.bgX,this.bgY,this.bgW,this.bgH,ig.system.width,ig.system.height),b.globalAlpha=
0.5,this.image.draw(-4,0,this.bgX,this.bgY,this.bgW,this.bgH,ig.system.width,ig.system.height),this.image.draw(4,0,this.bgX,this.bgY,this.bgW,this.bgH,ig.system.width,ig.system.height),b.fillStyle="black",b.fillRect(0,0,ig.system.width,ig.system.height),b.restore())},repos:function(){if(this.isImage){var b=ig.system.width/ig.system.height;this.image.width/this.image.height>b?(this.bgH=this.image.height,this.bgW=this.bgH*b,this.bgX=(this.image.width-this.bgW)/2,this.bgY=0):(this.bgW=this.image.width,
this.bgH=this.bgW/b,this.bgX=0,this.bgY=(this.image.height-this.bgH)/2)}}})});ig.baked=!0;
ig.module("game.entities.controller.game-controller").requires("impact.entity","plugins.data.vector","game.entities.text-view","plugins.tiered-rv.rv-sample-control","game.entities.buttons.button-setting","game.entities.buttons.button-option","game.entities.buttons.button-show","game.entities.buttons.button-save","game.entities.buttons.button-load","game.entities.buttons.button-log","game.entities.buttons.button-auto","game.entities.buttons.button-skip","game.entities.particle.particle","game.entities.particle.single_particle",
"game.entities.topoverlay.topoverlay","game.entities.object.overlay","game.entities.object.phone","game.entities.object.letter","game.entities.object.email","game.entities.object.ui-setting","game.entities.object.ui-entername","game.entities.object.ui-currency","game.entities.object.ui-shop","game.entities.object.ui-log","game.entities.object.ui-saveload","game.entities.object.ui-replay","game.entities.object.girl","game.entities.object.boy","game.entities.object.flashback","game.entities.object.background").defines(function(){EntityGameController=
ig.Entity.extend({type:ig.Entity.TYPE.BOTH,zIndex:0,buttons:{},images:{},tweenParam:{},entityGame:{},entityOverlay:{},entitySingleParticle:{},entityWindowBoxing:{},objectList:[],overlayList:[],isAutoScroll:!1,isStartDialog:!1,isFirstLoad:!0,isAnimChar:!1,isAnimDU:!1,timerAutoDialog:null,bg:null,sptCharDU1:null,sptCharDU2:null,alphaDU:0,alphaChar:1,optionType:"normal",longestDurWalkIn:1500,defDurWalkIn:1500,maxDurWalkIn:3E3,maxWalkingSpeed:250,sptDU1:null,sptDU2:null,chatBubble:null,numChapter:1,numChat:0,
prevChatIdForConsole:0,lastChatId:0,isOption:!1,optionSelected:1,isBubbleOption:!1,optionSelectedByKeyboard:0,plusYBubble:0,bubbleScriptOffsetY:0,offsetBubble:{x:100*_DATAGAME.ratioRes,y:-200*_DATAGAME.ratioRes},boolZoomPanCamera:!1,dataZoomPanCamera:null,posXBG:0,lastposXBG:0,posYBG:0,lastposYBG:0,anchorBGX:0.5,anchorBGY:0.5,zoomBG:1,arrChar:[],posDefChar:[],offsetDefChar:[],posXIn:{left:-200*_DATAGAME.ratioRes,right:200*_DATAGAME.ratioRes,center:0},posXOut:{left:-700*_DATAGAME.ratioRes,right:700*
_DATAGAME.ratioRes,center:0},offsetPivot:270*this.ratioRes,totalAllChar:3,isVisibleChar:[],miniButtonOpenedBefore:!0,fullSentence:[],arrText:[],text:"",textTrack:" ",currentWord:0,counterWord:0,modWord:60,loadSentence:!1,isBubble:!1,isNarration:!1,bubbleConfigs:{narrationWidth:480*_DATAGAME.ratioRes,width:440*_DATAGAME.ratioRes,height:60*_DATAGAME.ratioRes,fontSize:30*_DATAGAME.ratioRes,fontSizeName:30,fontName:"metromed",fontTextName:"metroblack",position:{x:0,y:0},bubbleWidth:440*_DATAGAME.ratioRes},
TAIL_STATUS:{none:0,right:1,left:2},totalChar:0,isCost:!1,virtualCurrency1:0,virtualCurrency2:0,virtualCurrency3:0,virtualCurrency4:0,virtualCurrency5:0,virtualCurrency6:0,virtualCurrency7:0,virtualCurrency8:0,isInputKeyboard:!1,isDelayFlashback:!0,tempTextView:null,canClickStage:!1,sfxAlreadyPlayed:!1,finishAddOverlayObject:!1,isClickButton:!1,durDelayClick:0,isShowingButtonShop:!1,init:function(b,d,e){this.parent(b,d,e);this.maxWalkingSpeed=_DATAGAME.walkSpeed[_DATAGAME.walkSpeed.length-1];ig.game.boolChooseChapter=
!1;"default"==ig.game.sessionData.playerName.toLowerCase()&&(ig.game.sessionData.playerName=_DATAGAME.defaultName);this.timerAutoDialog=new ig.Timer(ig.game.delayDialog);this.timerAutoDialog.pause();this.modWord=ig.game.textDialogSpeed;this.bubbleConfigs.fontName=ig.game.fontBubbleThin;this.bubbleConfigs.fontTextName=ig.game.fontBubble;for(b=0;b<this.totalAllChar;b++)this.isVisibleChar.push(!1);this.numChapter=ig.game.numChapter;null==ig.game.sessionData.dressUpTheme[this.numChapter]&&(ig.game.sessionData.dressUpTheme[this.numChapter]=
{now:"amy",last:"amy"});null==ig.game.sessionData.numChat[this.numChapter]||0>ig.game.sessionData.numChat[this.numChapter]?(this.lastChatId=this.numChat=0,null==ig.game.sessionData.isReward&&(ig.game.sessionData.isReward[this.numChapter]=!0)):(this.numChat=ig.game.sessionData.numChat[this.numChapter],this.lastChatId=ig.game.sessionData.lastChatId[this.numChapter]);_DATAGAME.enableCurrentProgress||(this.numChat=0);-1!=ig.game.startFromSceneID&&"menu"==ig.game.windowBefore&&(this.numChat=ig.game.startFromSceneID,
ig.game.sessionData.isFlashback[this.numChapter]=!1);"none"!=ig.game.loveGender&&(ig.game.sessionData.loveInterest=ig.game.loveGender);0==this.numChat&&(null!=_DATAGAME.firstMCOutfit["chapter"+this.numChapter]&&""!=_DATAGAME.firstMCOutfit["chapter"+this.numChapter]?ig.game.sessionData.dressUpTheme[this.numChapter].now="default"==_DATAGAME.firstMCOutfit["chapter"+this.numChapter].toLowerCase()?"amy":_DATAGAME.firstMCOutfit["chapter"+this.numChapter]:2<=this.numChapter?(null==ig.game.sessionData.dressUpTheme[this.numChapter-
1]&&(ig.game.sessionData.dressUpTheme[this.numChapter-1]={now:"amy",last:"amy"}),null==ig.game.sessionData.dressUpTheme[this.numChapter-1].last&&(ig.game.sessionData.dressUpTheme[this.numChapter-1].last="amy"),ig.game.sessionData.dressUpTheme[this.numChapter].now=ig.game.sessionData.dressUpTheme[this.numChapter-1].last):ig.game.sessionData.dressUpTheme[this.numChapter].now="amy");for(b=1;b<=_DATAGAME.totalVirtualCurrency;b++)this["virtualCurrency"+b]=ig.game.sessionData["virtualCurrency"+b];ig.game.windowName=
"game";ig.game.currentWindow=this;ig.game.totalCart=0;this.apiRVSample=ig.game.spawnEntity(EntityRvSampleControl,0,0);this.entityGame.uiCurrency=ig.game.spawnEntity(EntityUICurrency,0,0,{_parent:this});ig.game.showUI&&(this.buttons.btnSetting=ig.game.spawnEntity(EntityButtonSetting,0,0,{_parent:this}));this.buttons.btnOption1=ig.game.spawnEntity(EntityButtonOption,0,0,{_parent:this,noOption:1,visible:!1,zIndex:_DATAGAME.zIndexData.buttonOption});this.buttons.btnOption2=ig.game.spawnEntity(EntityButtonOption,
0,0,{_parent:this,noOption:2,visible:!1,zIndex:_DATAGAME.zIndexData.buttonOption});this.buttons.btnOption3=ig.game.spawnEntity(EntityButtonOption,0,0,{_parent:this,noOption:3,visible:!1,zIndex:_DATAGAME.zIndexData.buttonOption});!0==ig.game.showMiniButton&&this.setMiniButton();this.uiShop=ig.game.spawnEntity(EntityUIShop,0,0,{_parent:this});this.uiShop.hide();this.uiShop.repos();this.uiSetting=ig.game.spawnEntity(EntityUISetting,0,0,{_parent:this});this.uiSetting.hide();this.uiSetting.repos();this.checkStory();
this.checkChatBubble();this.entityGame.flashback=ig.game.spawnEntity(EntityFlashback,0,0,{_parent:this,visible:!1});this.keyboard=ig.game.spawnEntity(ig.EntityKeyboard,0,0,{zIndex:_DATAGAME.zIndexData.virtualKeyboard,onKeyboardPressed:this.onKeyboardPressed.bind(this),fontStyle:"bold "+34*_DATAGAME.ratioRes+"px arial,sans-serif",fontColor:"rgba(0,0,0,1)",keyboardBackground:"rgba(221,223,228,1)",backgroundColorRegular:"rgba(255,255,255,1)",backgroundColorSpecial:"rgba(179,179,179,1)",tileRounded:10*
_DATAGAME.ratioRes,space:5*_DATAGAME.ratioRes,padding:{x:50*_DATAGAME.ratioRes,y:10*_DATAGAME.ratioRes},iconSize:38*_DATAGAME.ratioRes});this.setupInput();this.keyboard.hide();_DATAGAME.enableCurrentProgress||null!=ig.game.sessionData.historyLog["chapter"+this.numChapter]&&(ig.game.sessionData.historyLog["chapter"+this.numChapter]=[]);!0==ig.game.showGameArea&&(this.grid=ig.game.spawnEntity(EntityGrid,0,0,{_parent:this}));ig.game.sortEntitiesDeferred();this.repos();this.prevChatIdForConsole=this.numChat},
setMiniButton:function(){this.buttons.btnShow=ig.game.spawnEntity(EntityButtonShow,0,0,{_parent:this});for(var b in _DATAGAME.miniButton)!0==_DATAGAME.miniButton[b]&&(this.buttons["btn"+ig.game.firstLetterCapslock(b)]=ig.game.spawnEntity("EntityButton"+ig.game.firstLetterCapslock(b),0,0,{_parent:this}));!0==_DATAGAME.miniButton.log&&(this.uiLog=ig.game.spawnEntity(EntityUILog,0,0,{_parent:this}),this.uiLog.hide(),this.uiLog.repos());!0==_DATAGAME.miniButton.save&&(this.uiSaveLoad=ig.game.spawnEntity(EntityUISaveLoad,
0,0,{_parent:this}),this.uiSaveLoad.hide(),this.uiSaveLoad.repos())},searchIdxPhone:function(){},tweenDelay:function(b,d,e){this.tween({paramDelay:1},d/1E3,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){b[e]()}.bind(b)}).start()},reposMiniButton:function(){if(!0==ig.game.showMiniButton){this.buttons.btnShow.repos();for(var b in _DATAGAME.miniButton)!0==_DATAGAME.miniButton[b]&&this.buttons["btn"+ig.game.firstLetterCapslock(b)].repos()}},enabledButton:function(b){ig.game.showUI&&this.buttons.btnSetting&&
(this.buttons.btnSetting.isClickable=b);this.buttons.btnOption1.isClickable=b;this.buttons.btnOption2.isClickable=b;this.buttons.btnOption3.isClickable=b;this.entityGame.uiReplay&&(this.entityGame.uiReplay.btnYes.isClickable=b,this.entityGame.uiReplay.btnNo.isClickable=b);if(!0==ig.game.showMiniButton){this.buttons.btnShow.isClickable=b;for(var d in _DATAGAME.miniButton)!0==_DATAGAME.miniButton[d]&&(this.buttons["btn"+ig.game.firstLetterCapslock(d)].isClickable=b)}},onKeyboardPressed:function(b){if(this.isInputKeyboard)switch(b){case "BACKSPACE":this.tempTextView.removeText();
break;default:this.tempTextView.addText(b)}},setupInputVirtualKeyboard:function(b){!1==b?(ig.input.unbind(ig.KEY.A,"A"),ig.input.unbind(ig.KEY.B,"B"),ig.input.unbind(ig.KEY.C,"C"),ig.input.unbind(ig.KEY.D,"D"),ig.input.unbind(ig.KEY.E,"E"),ig.input.unbind(ig.KEY.F,"F"),ig.input.unbind(ig.KEY.G,"G"),ig.input.unbind(ig.KEY.H,"H"),ig.input.unbind(ig.KEY.I,"I"),ig.input.unbind(ig.KEY.J,"J"),ig.input.unbind(ig.KEY.K,"K"),ig.input.unbind(ig.KEY.L,"L"),ig.input.unbind(ig.KEY.M,"M"),ig.input.unbind(ig.KEY.N,
"N"),ig.input.unbind(ig.KEY.O,"O"),ig.input.unbind(ig.KEY.P,"P"),ig.input.unbind(ig.KEY.Q,"Q"),ig.input.unbind(ig.KEY.R,"R"),ig.input.unbind(ig.KEY.S,"S"),ig.input.unbind(ig.KEY.T,"T"),ig.input.unbind(ig.KEY.U,"U"),ig.input.unbind(ig.KEY.V,"V"),ig.input.unbind(ig.KEY.W,"W"),ig.input.unbind(ig.KEY.X,"X"),ig.input.unbind(ig.KEY.Y,"Y"),ig.input.unbind(ig.KEY.Z,"Z"),ig.input.unbind(ig.KEY.BACKSPACE,"BACKSPACE"),ig.input.unbind(ig.KEY.SHIFT,"SHIFT")):(ig.input.bind(ig.KEY.A,"A"),ig.input.bind(ig.KEY.B,
"B"),ig.input.bind(ig.KEY.C,"C"),ig.input.bind(ig.KEY.D,"D"),ig.input.bind(ig.KEY.E,"E"),ig.input.bind(ig.KEY.F,"F"),ig.input.bind(ig.KEY.G,"G"),ig.input.bind(ig.KEY.H,"H"),ig.input.bind(ig.KEY.I,"I"),ig.input.bind(ig.KEY.J,"J"),ig.input.bind(ig.KEY.K,"K"),ig.input.bind(ig.KEY.L,"L"),ig.input.bind(ig.KEY.M,"M"),ig.input.bind(ig.KEY.N,"N"),ig.input.bind(ig.KEY.O,"O"),ig.input.bind(ig.KEY.P,"P"),ig.input.bind(ig.KEY.Q,"Q"),ig.input.bind(ig.KEY.R,"R"),ig.input.bind(ig.KEY.S,"S"),ig.input.bind(ig.KEY.T,
"T"),ig.input.bind(ig.KEY.U,"U"),ig.input.bind(ig.KEY.V,"V"),ig.input.bind(ig.KEY.W,"W"),ig.input.bind(ig.KEY.X,"X"),ig.input.bind(ig.KEY.Y,"Y"),ig.input.bind(ig.KEY.Z,"Z"),ig.input.bind(ig.KEY.BACKSPACE,"BACKSPACE"),ig.input.bind(ig.KEY.SHIFT,"SHIFT"))},setupInput:function(){ig.input.bind(ig.KEY.SPACE,"SPACE");ig.input.bind(ig.KEY.ENTER,"ENTER");ig.input.bind(ig.KEY.UP_ARROW,"UP");ig.input.bind(ig.KEY.DOWN_ARROW,"DOWN")},checkKeyboardOption:function(){if(ig.input.pressed("ENTER")&&0!=this.optionSelectedByKeyboard)this.buttons["btnOption"+
this.optionSelectedByKeyboard].clicked();else if((ig.input.pressed("UP")||ig.input.pressed("DOWN"))&&0==this.optionSelectedByKeyboard)for(var b=1;b<=this.totalOption;b++){if(!0==this.buttons["btnOption"+b].enabled){this.optionSelectedByKeyboard=b;this.buttons["btnOption"+b].isHover=!0;break}}else if(ig.input.pressed("UP"))for(b=this.totalOption;1<=b;b--){if(!0==this.buttons["btnOption"+b].enabled&&b<this.optionSelectedByKeyboard){this.buttons["btnOption"+this.optionSelectedByKeyboard].isHover=!1;
this.optionSelectedByKeyboard=b;this.buttons["btnOption"+b].isHover=!0;break}}else if(ig.input.pressed("DOWN"))for(b=1;b<=this.totalOption;b++)if(!0==this.buttons["btnOption"+b].enabled&&b>this.optionSelectedByKeyboard){this.buttons["btnOption"+this.optionSelectedByKeyboard].isHover=!1;this.optionSelectedByKeyboard=b;this.buttons["btnOption"+b].isHover=!0;break}},checkButtonInput:function(){if(this.isInputKeyboard){var b=!1,d="";null!=ig.input.state("SHIFT")&&(b=ig.input.state("SHIFT"));ig.input.pressed("A")?
d="a":ig.input.pressed("B")?d="b":ig.input.pressed("C")?d="c":ig.input.pressed("D")?d="d":ig.input.pressed("E")?d="e":ig.input.pressed("F")?d="f":ig.input.pressed("G")?d="g":ig.input.pressed("H")?d="h":ig.input.pressed("I")?d="i":ig.input.pressed("J")?d="j":ig.input.pressed("K")?d="k":ig.input.pressed("L")?d="l":ig.input.pressed("M")?d="m":ig.input.pressed("N")?d="n":ig.input.pressed("O")?d="o":ig.input.pressed("P")?d="p":ig.input.pressed("Q")?d="q":ig.input.pressed("R")?d="r":ig.input.pressed("S")?
d="s":ig.input.pressed("T")?d="t":ig.input.pressed("U")?d="u":ig.input.pressed("V")?d="v":ig.input.pressed("W")?d="w":ig.input.pressed("X")?d="x":ig.input.pressed("Y")?d="y":ig.input.pressed("Z")?d="z":ig.input.pressed("SPACE")?d=" ":ig.input.pressed("BACKSPACE")&&this.tempTextView.removeText();""!=d&&(d=ig.input.isUpperCase?b?d.toLowerCase():d.toUpperCase():b?d.toUpperCase():d.toLowerCase(),this.tempTextView.addText(d))}},enable_buttons:function(b){this.buttons.btnOption1.isClickable=b;this.buttons.btnOption2.isClickable=
b;this.buttons.btnOption3.isClickable=b;this.buttons.btnSetting.isClickable=b;this.entityGame.uiCurrency.btnShop.isClickable=b},afterRVSuccess:function(){this.buttons.btnOption1.isClickable=!1;this.buttons.btnOption2.isClickable=!1;this.buttons.btnOption3.isClickable=!1;this.buttons.btnOption1.showOption(!1,!0);this.buttons.btnOption2.showOption(!1,!1);this.buttons.btnOption3.showOption(!1,!1);this.buttons["btnOption"+this.optionSelected].hasClick=!0;this.checkOptionReward();this.entityGame.uiCurrency.showUI(!1);
if("du"==this.optionType){var b=this.buttons["btnOption"+this.optionSelected].textButton.replaceAll(" ","");ig.game.sessionData.dressUpTheme[this.numChapter].now=b.toLowerCase();this["sptChar"+this.arrChar.indexOf("Amy")].changeDU(ig.game.sessionData.dressUpTheme[this.numChapter].now)}},checkOptionReward:function(){var b=!1;if(ig.game.sessionData.isReward[this.numChapter]&&_DATAGAME.enableCurrency){var d=_STRINGS["Chapter"+this.numChapter][this.numChat];if(null!=d.option[this.optionSelected].reward)for(var e=
0,f=1;f<=_DATAGAME.totalVirtualCurrency;f++)null!=d.option[this.optionSelected].reward["virtualCurrency"+f]&&(e=d.option[this.optionSelected].reward["virtualCurrency"+f],this["virtualCurrency"+f]+=parseInt(e),this.entityGame.uiCurrency.vcGain=f,this.entityGame.uiCurrency.spawnChatBubble(_STRINGS.Game.reward+" "+e),this.entityGame.uiCurrency.repos(),b=!0)}b&&ig.soundHandler.sfxPlayer.play("rewardTieredRV");return b},checkRewardStory:function(){if(ig.game.sessionData.isReward[this.numChapter]&&_DATAGAME.enableCurrency){var b=
!1,d=_STRINGS["Chapter"+this.numChapter][this.numChat];if(null!=d.reward)for(var e=0,f=0;f<=_DATAGAME.virtualCurrencyUsed.length;f++){var g=_DATAGAME.virtualCurrencyUsed[f];null!=d.reward["virtualCurrency"+g]&&(e=d.reward["virtualCurrency"+g],this["virtualCurrency"+g]+=parseInt(e),this.entityGame.uiCurrency.vcGain=g,this.entityGame.uiCurrency.spawnChatBubble(_STRINGS.Game.reward+" "+e),this.entityGame.uiCurrency.repos(),b=!0)}this.entityGame.uiCurrency.isShop=!1;b&&(ig.soundHandler.sfxPlayer.play("rewardTieredRV"),
this.entityGame.uiCurrency.showUI(!0))}},afterRVFail:function(){this.buttons["btnOption"+this.optionSelected].spawnChatBubble(_STRINGS.Game.adserror)},searchIdxChar:function(b,d){return b.char.map(function(b){return b.name}).indexOf(d)},searchIdxAnimEffectChar:function(b,d){return b.animEffect.char.map(function(b){return b.name}).indexOf(d)},checkBGM:function(){if(_DATAGAME.loadBackgroundMusic){var b=_STRINGS["Chapter"+this.numChapter][this.numChat];if(null!=b.bgm&&null!=b.bgm.name&&(b=b.bgm.name.replaceAll("-",
""),"default"==b&&(b="bgmdefault"),b!=ig.game.lastBGM&&(!("bgmdefault"==b||b==_RESOURCESINFO.bgm.replaceAll("-",""))||!("bgmdefault"==ig.game.lastBGM||ig.game.lastBGM==_RESOURCESINFO.bgm.replaceAll("-","")))))ig.soundHandler.bgmPlayer.onStopBGM(),ig.game.lastBGM=b,ig.soundHandler.bgmPlayer.play(b),ig.soundHandler.bgmPlayer.volume(ig.game.sessionData.music/ig.game.maxVolume)}},checkScriptVariable:function(b,d){null==d&&(d=!1);if(null!=_CUSTOMLOAD.Chapter[this.numChapter].variable&&0<_CUSTOMLOAD.Chapter[this.numChapter].variable.length)for(var e=
0;e<_CUSTOMLOAD.Chapter[this.numChapter].variable.length;e++)null==ig.game.sessionData[_CUSTOMLOAD.Chapter[this.numChapter].variable[e]]&&(ig.game.sessionData.varScript.push(_CUSTOMLOAD.Chapter[this.numChapter].variable[e]),ig.game.save(_CUSTOMLOAD.Chapter[this.numChapter].variable[e],!1));if(b.variable&&0<b.variable.length)for(e=0;e<b.variable.length;e++){"number"===typeof b.variable[e].value&&"number"!=typeof ig.game.sessionData[b.variable[e].type]&&(ig.game.sessionData[b.variable[e].type]=0);var f=
b.variable[e].value;d||("number"===typeof b.variable[e].value||null!=b.variable[e].value.min&&null!=b.variable[e].value.max?(null!=b.variable[e].value.min&&null!=b.variable[e].value.max&&(f=ig.game.calculateRandom(b.variable[e].value.min,b.variable[e].value.max)),ig.game.sessionData[b.variable[e].type]="+"==b.variable[e].operator?ig.game.sessionData[b.variable[e].type]+f:"-"==b.variable[e].operator?ig.game.sessionData[b.variable[e].type]-f:"/"==b.variable[e].operator?ig.game.sessionData[b.variable[e].type]/
f:"*"==b.variable[e].operator?ig.game.sessionData[b.variable[e].type]*f:f):ig.game.sessionData[b.variable[e].type]=b.variable[e].value);d||ig.game.consoleLog("VARIABLE "+b.variable[e].type+" "+b.variable[e].operator+" "+f);ig.game.consoleLog("VARIABLE "+b.variable[e].type+" = "+ig.game.sessionData[b.variable[e].type])}},checkStory:function(){var b=this.isDelayFlashback=!1,d=this.numChat,d=_STRINGS["Chapter"+this.numChapter][d];this.checkScriptVariable(d,!0);this.checkAnimDelayOnTransition(d);if(null!=
d.animEffect&&("trans"==ig.game.getString(d.animEffect.type)||"flashback"==ig.game.getString(d.animEffect.type)||"flashback_end"==ig.game.getString(d.animEffect.type)))this.checkAnimDelayOnTransition(d),this.checkOutfitChar(d),"flashback"==ig.game.getString(d.animEffect.type)?(ig.game.sessionData.isFlashback[this.numChapter]=!0,ig.game.sessionData.flashbackColor[this.numChapter]=d.animEffect.color):"flashback"==!ig.game.getString(d.animEffect.type)&&(ig.game.sessionData.isFlashback[this.numChapter]=
!1),this.numChat++;null!=d.animEffect&&"text_chat"==ig.game.getString(d.animEffect.type)&&(this.canClickStage=!1,this.searchIdxPhone(d.animEffect.name),this.entityGame.phone=ig.game.spawnEntity(EntityPhone,0,0,{_parent:this,idxStory:d.animEffect.name}),this.entityGame.phone.repos());null!=d.animEffect&&"letter"==ig.game.getString(d.animEffect.type)&&(this.canClickStage=!1,this.entityGame.letter=ig.game.spawnEntity(EntityLetter,0,0,{_parent:this,idxStory:d.animEffect.name}),this.entityGame.letter.repos());
null!=d.animEffect&&"email"==ig.game.getString(d.animEffect.type)&&(this.canClickStage=!1,this.entityGame.email=ig.game.spawnEntity(EntityEmail,0,0,{_parent:this,idxStory:d.animEffect.name}),this.entityGame.email.repos());null!=d.animEffect&&"freeze_frame"==ig.game.getString(d.animEffect.type)?(b=!0,this.bg=ig.game.spawnEntity(EntityBackground,0,0,{_parent:this,placeName:_STRINGS["Chapter"+this.numChapter][this.lastChatId].bg.name}),d=this.lastChatId):(this.bg=ig.game.spawnEntity(EntityBackground,
0,0,{_parent:this,placeName:_STRINGS["Chapter"+this.numChapter][this.numChat].bg.name}),d=this.numChat);d=_STRINGS["Chapter"+this.numChapter][d];null!=d.bg.pos&&("left"==d.bg.pos?this.posXBG=this.lastposXBG=-700:"center"==d.bg.pos?this.posXBG=this.lastposXBG=0:"right"==d.bg.pos&&(this.posXBG=this.lastposXBG=700),this.bg.repos(),this.repos());d.object&&this.placeOverlayObject(!1,d);this.checkParticle(d);this.checkTopOverlay(d);this.checkWindowBoxing(d);this.checkVignette(d);this.checkProgressBar(d);
if(!(0>=d.char.length)){for(var e=0;e<d.char.length;e++)if(d.char[e]){var f=0;if(-1==this.arrChar.indexOf(d.char[e].name)&&(null==d.animEffect||"walk_in"!=d.animEffect.type&&"fade_in"!=d.animEffect.type||"walk_in"==d.animEffect.type&&-1==this.searchIdxAnimEffectChar(d,d.char[e].name)||"fade_in"==d.animEffect.type&&-1==this.searchIdxAnimEffectChar(d,d.char[e].name)||"walk_in"==d.animEffect.type&&b||"fade_in"==d.animEffect.type&&b)){this.arrChar.push(d.char[e].name);this.posDefChar.push({x:0,y:0});
this.offsetDefChar.push({x:0,y:500*_DATAGAME.ratioRes,alpha:1});f=this.arrChar.length-1;this["sptChar"+f]="Amy"==d.char[e].name||0<=_DATAGAME.neutral_girl.indexOf(d.char[e].name)?ig.game.spawnEntity(SpriterGirl,ig.game.midX,ig.game.midY,{_parent:this,charName:d.char[e].name.toLowerCase(),noChar:f}):0<=_DATAGAME.neutral_boy.indexOf(d.char[e].name)?ig.game.spawnEntity(SpriterBoy,ig.game.midX,ig.game.midY,{charName:d.char[e].name.toLowerCase(),_parent:this,noChar:f}):"girl"==ig.game.sessionData.loveInterest?
ig.game.spawnEntity(SpriterGirl,ig.game.midX,ig.game.midY,{_parent:this,charName:d.char[e].name.toLowerCase(),noChar:f}):ig.game.spawnEntity(SpriterBoy,ig.game.midX,ig.game.midY,{charName:d.char[e].name.toLowerCase(),_parent:this,noChar:f});this["sptChar"+f].checkShadow(d.char[e].shadow);if("Amy"==d.char[e].name)null!=d.char[e].outfit&&(ig.game.sessionData.dressUpTheme[this.numChapter].now=d.char[e].outfit.toLowerCase().replaceAll(" ","")),ig.game.consoleLog("Amy : "+ig.game.sessionData.dressUpTheme[this.numChapter].now),
this["sptChar"+f].changeDU(ig.game.sessionData.dressUpTheme[this.numChapter].now);else{var g=d.char[e].name.toLowerCase(),g=g.replaceAll(" ","");this.checkCurrentCharDU(g);if(null!=d.char[e].outfit){var j=d.char[e].outfit.toLowerCase(),j=j.replaceAll(" ","");ig.game.sessionData.dressUpChar[this.numChapter][g]=j}this["sptChar"+f].charName=ig.game.sessionData.dressUpChar[this.numChapter][g];ig.game.consoleLog(d.char[e].name+" : "+this["sptChar"+f].charName);this["sptChar"+f].changeDU(ig.game.sessionData.dressUpChar[this.numChapter][g])}null!=
d.char[e].posX&&5E3<=Math.abs(d.char[e].posX)||null!=d.char[e].posY&&5E3<=Math.abs(d.char[e].posY)||this.totalChar++;this.isVisibleChar[f]=!0;this.offsetDefChar[f].x=this.posXIn[d.char[e].position];this.calculatePosChar(f);if(g="rear"==d.char[e].anim.substring(d.char[e].anim.length-4,d.char[e].anim.length).toLowerCase()?!0:!1)this["sptChar"+f].changePose("ANIM_IDLE_REAR",d.char[e].handheld,d.char[e].shadow,d.char[e].animSpeed,d.char[e].tint),this["sptChar"+f].changeScale(d.char[e].scale,this["sptChar"+
f].flipState);this["sptChar"+f]&&(null==d.char[e].position?(this.offsetDefChar[f].x=null==d.char[e].posX?200*_DATAGAME.ratioRes:d.char[e].posX-ig.sizeHandler.minW/2,this.offsetDefChar[f].y=null==d.char[e].posY?500*_DATAGAME.ratioRes:d.char[e].posY-ig.sizeHandler.minH/2):null==d.char[e].faceTo?"left"==d.char[e].position&&!g||("right"==d.char[e].position||"center"==d.char[e].position)&&g?this["sptChar"+f].changeScale(1,-1):this["sptChar"+f].changeScale(1,1):"right"==d.char[e].faceTo?this["sptChar"+
f].changeScale(1,-1):this["sptChar"+f].changeScale(1,1))}}if(0<=this.numChat-1){b=_STRINGS["Chapter"+this.numChapter][this.numChat-1];if(null!=b.animEffect&&("trans"==ig.game.getString(b.animEffect.type)||"flashback"==ig.game.getString(b.animEffect.type)))b=_STRINGS["Chapter"+this.numChapter][this.numChat];this.playAnimCharStory(b,!0)}else b=_STRINGS["Chapter"+this.numChapter][this.numChat],this.playAnimCharStory(b,!0,!0);this.checkBGM()}},checkCurrentCharDU:function(b){null==ig.game.sessionData.dressUpChar[this.numChapter]&&
(ig.game.sessionData.dressUpChar[this.numChapter]={});null==ig.game.sessionData.dressUpChar[this.numChapter][b]&&(ig.game.sessionData.dressUpChar[this.numChapter][b]=b)},checkOutfitChar:function(b){for(var d=0;d<b.char.length;d++)if(b.char[d])if("Amy"==b.char[d].name){if(null!=b.char[d].outfit){var e=b.char[d].outfit.toLowerCase(),e=e.replaceAll(" ","");ig.game.sessionData.dressUpTheme[this.numChapter].now=e}}else if(e=b.char[d].name.toLowerCase(),e=e.replaceAll(" ",""),this.checkCurrentCharDU(e),
null!=b.char[d].outfit){var f=b.char[d].outfit.toLowerCase(),f=f.replaceAll(" ","");ig.game.sessionData.dressUpChar[this.numChapter][e]=f}},checkBGAnimation:function(b,d){null==d&&(d=!1);if(null!=b.bg&&null!=b.bg.type&&"scroll"==b.bg.type){var e=b.bg.direction.toLowerCase();"up"==e||"down"==e?this.bg.isVertical||(this.bg.isVertical=!0,this.bg.repos()):this.bg.isVertical&&(this.bg.isVertical=!1,this.bg.repos());this.bg.scrollDirection=e;null==b.bg.speed||0==b.bg.speed?this.bg.isScroll=!1:(this.bg.speed=
"up"==e||"left"==e?-1*b.bg.speed:b.bg.speed,!1==d&&(this.bg.isScroll=!0))}else this.bg.isScroll=!1},checkAnimDelayOnTransition:function(b){null!=b.animEffect&&null!=b.animEffect.animStart&&"instant"==b.animEffect.animStart.toLowerCase()?ig.game.animDelayed=!1:null!=b.animEffect&&null!=b.animEffect.animStart?ig.game.animDelayed=!0:null!=b.bg&&null!=b.bg.type&&"scroll"==b.bg.type?(this.isAutoScroll=!0,ig.game.animDelayed=!1):ig.game.animDelayed=!0},playAnimCharStory:function(b,d,e){null==d&&(d=!1);
this.checkBGAnimation(b,d);if(0<b.char.length)for(var f=0;f<b.char.length;f++)0<=this.arrChar.indexOf(b.char[f].name)&&(!0==e?("ANIM_LAY_"==b.char[f].anim.substring(0,9)||"ANIM_PIANO_"==b.char[f].anim.substring(0,11))&&this.changeAnimChar(b,f,d):this.changeAnimChar(b,f,d))},changeAnimChar:function(b,d,e){null!=this["tweenDelayAnimChar"+d]&&this["tweenDelayAnimChar"+d].stop(!1);this["tweenDelayAnimChar"+d]=null;var f=null==b.char[d].anim_delay?0:b.char[d].anim_delay;0==f?this.playCharPose(b,d,e):this["tweenDelayAnimChar"+
d]=this.tween({paramDelay:1},f,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(b,d,e){this.playCharPose(b,d,e)}.bind(this,b,d,e)}).start()},playCharPose:function(b,d,e){var f="rear"==b.char[d].anim.substring(b.char[d].anim.length-4,b.char[d].anim.length).toLowerCase()?!0:!1,g=this.arrChar.indexOf(b.char[d].name);null==b.char[d].faceTo?"left"==b.char[d].position&&!f||("right"==b.char[d].position||"center"==b.char[d].position)&&f?this["sptChar"+g].changeScale(1,-1):this["sptChar"+g].changeScale(1,
1):"right"==b.char[d].faceTo?this["sptChar"+g].changeScale(1,-1):this["sptChar"+g].changeScale(1,1);this.checkEmotionandMouthFrown(g,b,d);if(-1!=g&&"ANIM_NONE"!=b.char[d].anim){f=b.char[d].animSpeed;if(null==b.char[d].animSpeed||0>=b.char[d].animSpeed)f=100;this["sptChar"+g].changePose(b.char[d].anim.toUpperCase(),b.char[d].handheld,b.char[d].shadow,f,b.char[d].tint);this["sptChar"+g].changeScale(b.char[d].scale,this["sptChar"+g].flipState);!0==e&&(e=this["sptChar"+g].timePausePose[_DATAGAME.pose.indexOf(b.char[d].anim)],
0<e&&(this["sptChar"+g].boolStart=!0,this["sptChar"+g].boolPauseTalking=!0,this["sptChar"+g].spriter.time=e,this["sptChar"+g].spriter.pause=!0))}-1!=g&&"ANIM_NONE"!=b.char[d].emotion&&this["sptChar"+g].changeEmotion(_DATAGAME.listEmotion.indexOf(b.char[d].emotion))},checkEmotionandMouthFrown:function(b,d,e){this["sptChar"+b].isHaveEmotion=!0;_DATAGAME.noEmotion.indexOf(d.char[e].anim);this["sptChar"+b].isFrown=0<=_DATAGAME.frownEmo.indexOf(d.char[e].anim)||!0==_emoEye[d.char[e].emotion].mouthFrown?
!0:!1;this["sptChar"+b].isMouthDefault=0<=_DATAGAME.frownEmo.indexOf(d.char[e].anim)?!1:!0},playSFXStory:function(b){if(!this.sfxAlreadyPlayed){null!=b.sfx&&(null!=b.sfx.stop&&(b.sfx.stop&&null!=ig.game.dataSFXLoop)&&(ig.soundHandler.sfxPlayer.stopSFX(ig.game.dataSFXLoop.name,ig.game.dataSFXLoop.id),ig.game.dataSFXLoop=null),null!=b.sfx.name&&(null==b.sfx.loop||!b.sfx.loop?null==b.sfx.delay||0>=b.sfx.delay?(ig.soundHandler.sfxPlayer.playSFX(b.sfx.name,!1),ig.soundHandler.sfxPlayer.volume(ig.game.sessionData.sound/
ig.game.maxVolume)):ig.game.tweenDelay(this,1E3*b.sfx.delay,function(){ig.soundHandler.sfxPlayer.playSFX(b.sfx.name,!1);ig.soundHandler.sfxPlayer.volume(ig.game.sessionData.sound/ig.game.maxVolume)}.bind(this)):null==b.sfx.delay||0>=b.sfx.delay?(ig.game.dataSFXLoop=ig.soundHandler.sfxPlayer.playSFX(b.sfx.name,b.sfx.loop),ig.soundHandler.sfxPlayer.volume(ig.game.sessionData.sound/ig.game.maxVolume)):ig.game.tweenDelay(this,1E3*b.sfx.delay,function(){ig.game.dataSFXLoop=ig.soundHandler.sfxPlayer.playSFX(b.sfx.name,
b.sfx.loop);ig.soundHandler.sfxPlayer.volume(ig.game.sessionData.sound/ig.game.maxVolume)}.bind(this))));if(_DATAGAME.enableVoiceOver&&(null!=ig.game.dataVoiceOver&&(ig.soundHandler.sfxPlayer.stopSFX(ig.game.dataVoiceOver.name,ig.game.dataVoiceOver.id),ig.game.dataVoiceOver=null),null!=_CUSTOMLOAD.Chapter[ig.game.numChapter].voiceover&&0<=_CUSTOMLOAD.Chapter[ig.game.numChapter].voiceover.indexOf(b.sceneID))){var d="chapter"+this.numChapter+"_"+b.sceneID;ig.game.dataVoiceOver=0<=_DATAGAME.dynamic_name.indexOf(b.charTalk)?
ig.soundHandler.sfxPlayer.playSFX(d+"_"+ig.game.sessionData.loveInterest,!1):ig.soundHandler.sfxPlayer.playSFX(d,!1)}this.sfxAlreadyPlayed=!0}},loadBubbleChat:function(){this.loadSentence=this.isBubbleOption=!1;this.stopSFXText();this.counterWord=this.currentWord=0;this.text="";var b=_STRINGS["Chapter"+this.numChapter][this.numChat];this.checkScriptVariable(b);this.fullSentence=b.text;this.fullSentence=this.fullSentence.replaceAll("{NAME}",ig.game.sessionData.playerName);for(var d in _STRINGS.dynamic_character)this.fullSentence=
this.fullSentence.replaceAll("{"+d+"}",_STRINGS.dynamic_character[d][ig.game.sessionData.loveInterest]);ig.game.noSpacing?(d=this.fullSentence.split(""),this.arrText=[],ig.game.arrayWordWrapRegex(d,this.arrText)):this.arrText=this.fullSentence.split(" ");this.textTrack=" ";if(this.isOption=null==b.option||0>=b.option.length?!1:!0){this.isCost=!1;for(d=1;d<=b.option.length-1;d++){var e;if("string"==typeof b.option[d].sceneID)e=b.option[d].sceneID;else{e=_STRINGS["Chapter"+this.numChapter][b.option[d].sceneID].text;
e=e.replaceAll("{NAME}",ig.game.sessionData.playerName);for(var f in _STRINGS.dynamic_character)e=e.replaceAll("{"+f+"}",_STRINGS.dynamic_character[f][ig.game.sessionData.loveInterest]);var g=[],j=[],l=!1;e=e.split("");for(var n=0;n<e.length;n++)"|"==e[n]&&(l?(j.push(n),l=!1):(g.push(n),l=!0));for(l=g.length-1;0<=l;l--)e.splice(g[l],j[l]-g[l]+2);e=e.join("")}this.buttons["btnOption"+d].textButton=e;if(null==b.option[d].cost)this.buttons["btnOption"+d].costType=-1;else if(_DATAGAME.CurrencyOption){g=
0;for(j=1;j<=_DATAGAME.totalVirtualCurrency;j++)if(null!=b.option[d].cost["virtualCurrency"+j]){g=j;break}1<=g?(this.isCost=!0,this.buttons["btnOption"+d].costType=g,this.buttons["btnOption"+d].cost=b.option[d].cost["virtualCurrency"+g]):null!=b.option[d].cost.rv&&(_DATAGAME.RVOption?(this.isCost=!0,this.buttons["btnOption"+d].costType=0):this.buttons["btnOption"+d].costType=-1)}else!_DATAGAME.RVOption&&!_DATAGAME.CurrencyOption?this.buttons["btnOption"+d].costType=-1:(this.isCost=!0,this.buttons["btnOption"+
d].costType=0);this.buttons["btnOption"+d].reloadSize()}"du"!=this.optionType&&(this.buttons.btnOption1.posX=this.isCost?this.buttons.btnOption1.posX:0,this.buttons.btnOption2.posX=this.isCost?this.buttons.btnOption2.posX:0,this.buttons.btnOption3.posX=this.isCost?this.buttons.btnOption3.posX:0)}var m="none";"none"!=b.charTalk&&(m=b.char[this.searchIdxChar(b,b.charTalk)].position);this.playAnimCharStory(b);this.playSFXStory(b);null!=this.fullSentence&&""!=this.fullSentence?(this.searchIdxChar(b,b.charTalk),
f=null==b.text_delay?0:b.text_delay,!0==this.isAutoScroll&&(this.isAutoScroll=!1,f=0.5),this.tween({paramDelay:1},f,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){"none"!=b.charTalk&&(this["sptChar"+this.arrChar.indexOf(b.charTalk)].isTalking=!0);this.spawnChatBubble(this.textTrack,this.fullSentence,this.TAIL_STATUS[m],b)}.bind(this)}).start()):(f=null==b.text_delay?0:b.text_delay,!0==this.isAutoScroll&&(this.isAutoScroll=!1,f=0.5),this.tween({paramDelay:1},f,{easing:ig.Tween.Easing.Linear.EaseNone,
onComplete:function(){!0==this.isOption&&"du"==this.optionType||this.checkChatBubble()}.bind(this)}).start());this.checkRewardStory()},stopSFXText:function(){null!=ig.game.dataSFXText&&(ig.soundHandler.sfxPlayer.stopSFX(ig.game.dataSFXText.name,ig.game.dataSFXText.id),ig.game.dataSFXText=null)},loadBubbleOption:function(){this.isOption=!1;this.isBubbleOption=!0;this.text="";this.isBubble=!1;this.chatBubble.chatBubbleAliveTime=0.1},trackTextFormat:function(){this.currentWord++;var b=this.arrText[this.currentWord];
this.text+=b;ig.game.noSpacing||(this.text+=" ");"|"==b?this.finishTrackFormat():this.trackTextFormat()},finishTrackFormat:function(){this.currentWord++;this.textTrack=ig.game.wordWrapForChatBubble(this.text,this.isNarration?this.bubbleConfigs.narrationWidth:this.bubbleConfigs.bubbleWidth,this.bubbleConfigs.fontSize,this.bubbleConfigs.fontName,!0);"|"!=this.textTrack.replaceAll(" ","")&&(this.chatBubble._chatBubbleCanvasConfigs.textConfigs.text=this.textTrack)},trackWord:function(){if(this.currentWord<
this.arrText.length){var b=this.arrText[this.currentWord];this.text+=b;ig.game.noSpacing||(this.text+=" ");var d=!1;"|"==b&&(d=!0);d?this.trackTextFormat():this.finishTrackFormat()}else this.loadSentence=!1,this.stopSFXText(),this.counterWord=this.currentWord=0,this.checkOption(),this.timerAutoDialog.set(ig.game.delayDialog),this.timerAutoDialog.reset(),this.timerAutoDialog.unpause()},scaleBG:function(b,d,e,f,g){0<d&&(this.bg.pntX=d);0<e&&(this.bg.pntY=e);null==f&&(f=0);this.lastposXBG=this.posXBG+
f;this.bg.statMove=0<this.lastposXBG-this.posXBG?this.bg.moveStatus.RIGHT:this.bg.moveStatus.LEFT;this.bg.repos();this.tween({zoomBG:b,posXBG:this.lastposXBG},Math.abs(this.zoomBG-b)/1.5,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.bg.statMove=this.bg.moveStatus.NONE;null!=g&&g()}.bind(this)}).start()},panBG:function(b,d,e){this.lastposXBG=b*_DATAGAME.ratioRes;this.bg.statMove=0<this.lastposXBG-this.posXBG?this.bg.moveStatus.RIGHT:this.bg.moveStatus.LEFT;this.bg.repos();this.tween({posXBG:this.lastposXBG},
Math.abs(this.lastposXBG-this.posXBG)/500,{delay:d,easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.bg.statMove=this.bg.moveStatus.NONE;null!=e&&e()}.bind(this)}).start()},spawnChatBubble:function(b,d,e,f){this.bubbleScriptOffsetY=null==f.bubbleOffsetY?_DATAGAME.dialogBox.offsetY*_DATAGAME.ratioRes:f.bubbleOffsetY*_DATAGAME.ratioRes;null!=_DATAGAME.speakerName.fontSize&&(this.bubbleConfigs.fontSizeName=_DATAGAME.speakerName.fontSize*_DATAGAME.ratioRes);this.bubbleConfigs.fontSize=
ig.game.fontBubbleSize*_DATAGAME.ratioRes;null!=f.textFontSize&&(this.bubbleConfigs.fontSize=f.textFontSize*_DATAGAME.ratioRes);var g=f.charTalk,j=f.bubbleType,l=f.nameTag,n=f.charTalk.toLowerCase().replaceAll(" ","");null==_DATAGAME.dialogBox[n]&&(n="default");var m=f.char[this.searchIdxChar(f,f.charTalk)],r="",q="",s=!1;null!=m&&(r=m.anim,s="rear"==r.substring(r.length-4,r.length).toLowerCase()?!0:!1,!0==s&&(q=null==m.faceTo?"right"==m.position||"center"==m.position?"right":"left":m.faceTo));this.plusYBubble=
0;var m={x:0,y:this.bubbleConfigs.fontSizeName+10*_DATAGAME.ratioRes},j=null==j?"default":j.toLowerCase(),t=g;"none"!=g?("amy"==g.toLowerCase()?t=ig.game.sessionData.playerName:0>_DATAGAME.neutral_girl.indexOf(g)&&0>_DATAGAME.neutral_boy.indexOf(g)&&(t=_STRINGS.dynamic_character[g][ig.game.sessionData.loveInterest]),l=ig.system.context,l.font=this.bubbleConfigs.fontSizeName+"px "+this.bubbleConfigs.fontTextName,m.x=l.measureText(t).width+40*_DATAGAME.ratioRes):null!=l&&(t="amy"==l.toLowerCase()?ig.game.sessionData.playerName:
0>_DATAGAME.neutral_girl.indexOf(l)&&0>_DATAGAME.neutral_boy.indexOf(l)?null!=_STRINGS.dynamic_character[l]?_STRINGS.dynamic_character[l][ig.game.sessionData.loveInterest]:l:l,l=ig.system.context,l.font=this.bubbleConfigs.fontSizeName+"px "+this.bubbleConfigs.fontTextName,m.x=l.measureText(t).width+40*_DATAGAME.ratioRes);var v=this.bubbleConfigs.width;this.isNarration=!1;e==this.TAIL_STATUS.none&&"rectangle"!=_DATAGAME.dialogStyle.toLowerCase()&&(this.isNarration=!0,v=this.bubbleConfigs.narrationWidth);
var l=30*_DATAGAME.ratioRes,u=15*_DATAGAME.ratioRes,x=0.9,D=0,H=1,M="right";s&&(H="right"==q?0.9:1);var E=ig.sizeHandler.minW/2+v*x/2-v*(1-x)/2+5*_DATAGAME.ratioRes-this.offsetBubble.x;s&&("left"==q&&e==this.TAIL_STATUS.right)&&(E+=100*_DATAGAME.ratioRes);"rectangle"==_DATAGAME.dialogStyle.toLowerCase()?(x=0.5,D=0,H=0.5,E=ig.sizeHandler.minW/2+v*x/2-v*(1-H)/2-8*_DATAGAME.ratioRes,M="none",v=this.setBubbleWidth()):e==this.TAIL_STATUS.none?(x=0.5,D=0,H=0.5,s&&(H="right"==q?0.4:0.6),E=ig.sizeHandler.minW/
2+v*x/2-v*(1-H)/2-8*_DATAGAME.ratioRes,M="none"):e==this.TAIL_STATUS.left?(x=0.1,H=D=0,M="left",s&&(H="right"==q?0:0.1),E=ig.sizeHandler.minW/2+v*x/2-v*(1-H)/2-8*_DATAGAME.ratioRes+this.offsetBubble.x,s&&"right"==q&&(E-=100*_DATAGAME.ratioRes)):e==this.TAIL_STATUS.center&&(x=0.5,D=0,H=0.5,M="center",s&&(H="right"==q?0.4:0.6),E=ig.sizeHandler.minW/2+v*x/2-v*(1-H)/2-8*_DATAGAME.ratioRes);q=ig.sizeHandler.minH/2+this.offsetBubble.y;if("rectangle"!=_DATAGAME.dialogStyle.toLowerCase())if(e!=this.TAIL_STATUS.none&&
e!=this.TAIL_STATUS.center&&"think"!=j||"think"==j)q-=30*_DATAGAME.ratioRes;else if(e==this.TAIL_STATUS.none||e==this.TAIL_STATUS.center)q-=30*_DATAGAME.ratioRes;q+=this.bubbleScriptOffsetY;if(ig.game.outputBubbleTextToConsole){e=d.split(" ");for(var s=[],F=!0,S=0;S<e.length;S++)"|"==e[S]&&F?(s.push({start:S,end:0}),F=!1):"|"==e[S]&&!F&&(s[s.length-1].end=S,F=!0);for(F=s.length-1;0<=F;F--)e.splice(s[F].start,s[F].end-s[F].start+1);s="";for(F=0;F<e.length;F++)s+=e[F]+" ";e=parseInt(this.prevChatIdForConsole)+
1;null!=this.prevChatIdForConsole&&this.numChat>e&&ig.game.consoleLog("\u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f WARNING: Chat ID jumped from "+this.prevChatIdForConsole+" to "+this.numChat+"\u26a0\ufe0f\u26a0\ufe0f\u26a0\ufe0f");ig.game.consoleLog("id : "+this.numChat);this.prevChatIdForConsole=this.numChat;ig.game.consoleLog(s)}"rectangle"!=_DATAGAME.dialogStyle.toLowerCase()&&(this.isOption&&"du"==this.optionType?q-=350*_DATAGAME.ratioRes:null!=r&&(""!=r&&"ANIM_LAY_"==r.substring(0,9))&&(this.plusYBubble=
150*_DATAGAME.ratioRes,q+=this.plusYBubble));"rectangle"!=_DATAGAME.dialogStyle.toLowerCase()&&(this.bubbleConfigs.position.x=E,this.bubbleConfigs.position.y=q,this.bubbleConfigs.bubbleWidth=v);r=0.4;v=0.3;null!=f.tweenOut&&!1==f.tweenOut&&(v=0);null!=f.tweenIn&&!1==f.tweenIn&&(r=0);ig.game.sfxTextName=f.sfxText;this.chatBubble=ig.game.spawnChatBubble(this,{zIndex:_DATAGAME.zIndexData.dialogChatBubble,chatBubbleDrawConfigs:{chatStyle:_DATAGAME.dialogStyle.toLowerCase(),textConfigs:{fullText:ig.game.wordWrapForChatBubble(d,
this.bubbleConfigs.bubbleWidth,this.bubbleConfigs.fontSize,this.bubbleConfigs.fontName,!0),text:b,sizeTextName:m,fillStyle:null==_DATAGAME.dialogBox[n].textColor?_DATAGAME.dialogBox.default.textColor:_DATAGAME.dialogBox[n].textColor,textAlign:"left",fontSizeName:this.bubbleConfigs.fontSizeName,fontSize:this.bubbleConfigs.fontSize,fontFamily:this.bubbleConfigs.fontName,counterAnim:0,chatStyle:_DATAGAME.dialogStyle.toLowerCase(),showFlash:[!0,!0,!0,!0,!0,!0],showShake:[!0,!0,!0,!0,!0,!0]},avatarConfigs:{image:null,
size:{x:100,y:100},padding:{x:4,y:4}},bubbleConfigs:{textName:g,realName:t,sizeTextName:m,fontSizeName:this.bubbleConfigs.fontSizeName,fontSize:this.bubbleConfigs.fontSize,fontFamily:this.bubbleConfigs.fontTextName,lineWidth:4*_DATAGAME.ratioRes,fillStyle:null==_DATAGAME.dialogBox[n].boxColor?_DATAGAME.dialogBox.default.boxColor:_DATAGAME.dialogBox[n].boxColor,fillOpacity:null==_DATAGAME.dialogBox[n].boxOpacity?_DATAGAME.dialogBox.default.boxOpacity:_DATAGAME.dialogBox[n].boxOpacity,strokeStyle:null==
_DATAGAME.dialogBox[n].outlineColor?_DATAGAME.dialogBox.default.outlineColor:_DATAGAME.dialogBox[n].outlineColor,shadowColor:"black",shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,chatType:j,box:{width:this.bubbleConfigs.bubbleWidth,height:"rectangle"==_DATAGAME.dialogStyle.toLowerCase()?_DATAGAME.dialogBox.height*_DATAGAME.ratioRes:60*_DATAGAME.ratioRes,round:"rectangle"==_DATAGAME.dialogStyle.toLowerCase()?0:30*_DATAGAME.ratioRes,padding:{x:"rectangle"==_DATAGAME.dialogStyle.toLowerCase()?_DATAGAME.dialogBox.padding.x*
_DATAGAME.ratioRes:25*_DATAGAME.ratioRes,y:"rectangle"==_DATAGAME.dialogStyle.toLowerCase()?_DATAGAME.dialogBox.padding.y*_DATAGAME.ratioRes:30*_DATAGAME.ratioRes}},tail:{position:M,length:l,width:u,direction:{x:x,y:D,stretchx:H,stretchy:D}}}},chatStyle:_DATAGAME.dialogStyle.toLowerCase(),chatBubbleAppearTime:"rectangle"==_DATAGAME.dialogStyle.toLowerCase()&&this.lastSpeakerName==g?0:r,chatBubbleAliveTime:-1,chatBubbleDisappearTime:"rectangle"==_DATAGAME.dialogStyle.toLowerCase()?0:v,chatBubblePercent:{x:0.5,
y:0},chatBubbleOffset:{x:0,y:0},parentPos:{x:this.bubbleConfigs.position.x,y:this.bubbleConfigs.position.y},chatBubbleAlpha:1});"rectangle"==_DATAGAME.dialogStyle.toLowerCase()&&(this.calculatePosBubble(!0),this.chatBubble.repos());this.lastSpeakerName=g;this.reposOption();ig.game.sortEntitiesDeferred()},hideDU:function(){this.isOption=!1;this.text="";var b=!1;this.isBubble?this.chatBubble.chatBubbleAliveTime=0.1:b=!0;this.isBubble=!1;this.alphaChar=0;this.alphaDU=1;this.isAnimDU=!0;var d=this.tween({alphaChar:1},
0.2,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.isAnimChar=!1;for(var d=0;d<this.totalAllChar;d++)this.isVisibleChar[d]&&(this["sptChar"+d].spriter.root.alpha=1);b&&this.checkChatBubble()}.bind(this)});this.tween({alphaDU:0},0.2,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.isAnimDU=!1;this.isAnimChar=!0;this.sptCharDU1.spriter.root.alpha=0;this.sptCharDU2.spriter.root.alpha=0;d.start()}.bind(this)}).start()},checkChatBubble:function(){var b=_STRINGS["Chapter"+
this.numChapter][this.numChat];if(!(!1==this.isStartDialog&&!0==ig.game.animDelayed)){this.isStartDialog=!0;this.sfxAlreadyPlayed=!1;var d=!0;this.optionType="normal";if(this.isBubbleOption)null!=b.animEffect&&"love_gender"==b.animEffect.type?(ig.game.sessionData.loveInterest=1==this.optionSelected?"boy":"girl",this.saveToLogHistory(b.option[this.optionSelected].sceneID,!0),this.numChat=_STRINGS["Chapter"+this.numChapter][b.option[this.optionSelected].sceneID].linkSceneID):(this.numChat=b.option[this.optionSelected].sceneID,
_DATAGAME.repeatOption||(this.saveToLogHistory(this.numChat),this.checkScriptVariable(_STRINGS["Chapter"+this.numChapter][this.numChat]),null!=_STRINGS["Chapter"+this.numChapter][b.option[this.optionSelected].sceneID].linkSceneID?this.numChat=_STRINGS["Chapter"+this.numChapter][b.option[this.optionSelected].sceneID].linkSceneID:this.numChat++)),ig.game.sessionData.numChat[this.numChapter]=this.numChat;else if(null!=b.linkSceneID)if(this.isFirstLoad)this.isFirstLoad=!1;else if("number"===typeof b.linkSceneID&&
!isNaN(b.linkSceneID))this.numChat=b.linkSceneID,ig.game.sessionData.numChat[this.numChapter]=this.numChat;else if(null!=b.linkSceneID[0].type&&"switch"==b.linkSceneID[0].type.toLowerCase()){for(var e=[],f=0;f<b.linkSceneID[0].variables.length;f++){var g=b.linkSceneID[0].variables[f];e.push({type:g,total:ig.game.sessionData[g]})}e="min"==b.linkSceneID[0].operator.toLowerCase()?ig.game.sortArrayByProp(e,"total",!1):ig.game.sortArrayByProp(e,"total",!0);f=!1;for(g=1;g<b.linkSceneID.length;g++)if(b.linkSceneID[g].condition.toLowerCase()==
e[0].type.toLowerCase()){f=!0;this.numChat=b.linkSceneID[g].linkID;ig.game.sessionData.numChat[this.numChapter]=this.numChat;break}f||(e=b.linkSceneID.map(function(b){return b.condition?b.condition.toLowerCase():""}).indexOf("default"),this.numChat=b.linkSceneID[e].linkID,ig.game.sessionData.numChat[this.numChapter]=this.numChat)}else for(e=0;e<b.linkSceneID.length;e++){var f=b.linkSceneID[e].condition,g=b.linkSceneID[e].type,j=b.linkSceneID[e].linkID;if(null==f){this.numChat=j;ig.game.sessionData.numChat[this.numChapter]=
this.numChat;break}else if(!0==ig.game.checkConditionFormatting(f,g)){this.numChat=j;ig.game.sessionData.numChat[this.numChapter]=this.numChat;break}else if(e==b.linkSceneID.length-1){this.numChat++;ig.game.sessionData.numChat[this.numChapter]=this.numChat;break}}else this.isFirstLoad?this.isFirstLoad=!1:(this.numChat++,ig.game.sessionData.numChat[this.numChapter]=this.numChat);b=_STRINGS["Chapter"+this.numChapter][this.numChat];e=!1;b.object&&(e=!0);this.placeOverlayObject(!0,b);this.placeSingleParticle(b);
this.checkParticle(b);this.checkTopOverlay(b);this.checkWindowBoxing(b);this.checkVignette(b);this.checkProgressBar(b);if(b.toastBox)for(f=0;f<b.toastBox.length;f++)ig.game.tweenDelay(this,200*f,function(b,d,e){null!=e&&""!=e&&(ig.soundHandler.sfxPlayer.playSFX(e,!1),ig.soundHandler.sfxPlayer.volume(ig.game.sessionData.sound/ig.game.maxVolume));ig.game.spawnNotification(b,d)}.bind(this,b.toastBox[f].text,b.toastBox[f].time,b.toastBox[f].sfx));if(d)if(null!=b.animEffect)switch("freeze_frame"!=ig.game.getString(b.animEffect.type)&&
(this.lastChatId=this.numChat,ig.game.sessionData.lastChatId[this.numChapter]=this.lastChatId),ig.game.getString(b.animEffect.type)){case "end":ig.game.isChapterEnd=!0;d=!1;ig.game.sessionData.numChat[this.numChapter]=0;ig.game.sessionData.dressUpTheme[this.numChapter].last=ig.game.sessionData.dressUpTheme[this.numChapter].now;this.numChapter==ig.game.sessionData.unlockChapter&&ig.game.sessionData.unlockChapter++;_DATAGAME.chapters.multipleChapter?null!=b.animEffect.char&&null!=b.animEffect.char[0]||
null!=b.animEffect.color?null!=b.animEffect.color?ig.game.fadeInWindow(LevelMenu,null,b.animEffect.color):null!=b.animEffect.char&&null!=b.animEffect.char[0]&&ig.game.fadeInWindow(LevelMenu,null,b.animEffect.char[0]):ig.game.fadeInWindow(LevelMenu):this.entityGame.uiReplay=ig.game.spawnEntity(EntityUIReplay,0,0,{_parent:this});break;case "text_chat":this.canClickStage=!1;var l=this.searchIdxPhone(b.animEffect.name);null!=this.entityGame.phone?this.entityGame.phone.idxStory=l:this.entityGame.phone=
ig.game.spawnEntity(EntityPhone,0,0,{_parent:this,idxStory:b.animEffect.name});this.entityGame.phone.startText();this.entityGame.phone.repos();break;case "letter":ig.game.consoleLog("letter");this.canClickStage=!1;null==this.entityGame.letter&&(this.entityGame.letter=ig.game.spawnEntity(EntityLetter,0,0,{_parent:this,idxStory:b.animEffect.name}));this.entityGame.letter.repos();break;case "email":ig.game.consoleLog("email");this.canClickStage=!1;null==this.entityGame.email&&(this.entityGame.email=
ig.game.spawnEntity(EntityEmail,0,0,{_parent:this,idxStory:b.animEffect.name}));this.entityGame.email.repos();break;case "freeze_frame":d=b.text;d=d.replaceAll("{NAME}",ig.game.sessionData.playerName);e=b.animEffect.sfxStart;f=b.animEffect.sfxText;null!=e&&""!=e?"none"==e&&(e=null):e="freeze1";null!=f&&""!=f?"none"==f&&(f=null):f="freeze2";for(l in _STRINGS.dynamic_character)d=d.replaceAll("{"+l+"}",_STRINGS.dynamic_character[l][ig.game.sessionData.loveInterest]);this.freeze=ig.game.spawnEntity("EntityFreezeFrame"+
b.animEffect.frame_type,0,0,{_parent:this,bg:new ig.Image(_BASEPATH.background+b.animEffect.char[0].bg+"."+_DATAGAME.BGFileType[b.animEffect.char[0].bg]),textBg:ig.FreezeFrame.images.textBg,charConfig:b.animEffect.char[0],timeAlive:null!=b.animEffect.timeAlive&&0<b.animEffect.timeAlive?b.animEffect.timeAlive:4,text:d,font:2.18*ig.game.fontNameSize,textColor:"#ffffff",textShadowColor:"#000000",textOffset:{x:-50,y:0},firstSound:e,secondSound:f,callback:this.onFreezeFrameComplete.bind(this)});break;
case "dress_up":this.optionType="du";this.afterAnimation("du");this.alphaChar=1;this.alphaDU=0;this.isAnimChar=!0;var n=this.tween({alphaDU:1},0.2,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.isAnimDU=!1;this.sptCharDU1.spriter.root.alpha=1;this.sptCharDU2.spriter.root.alpha=1;null!=b.text&&""==b.text&&this.checkOption()}.bind(this)});this.tween({alphaChar:0},0.2,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.isAnimChar=!1;this.isAnimDU=!0;for(var d=0;d<this.totalAllChar;d++)this.isVisibleChar[d]&&
(this["sptChar"+d].spriter.root.alpha=0);null==this.sptCharDU1&&(this.sptCharDU1=ig.game.spawnEntity(SpriterGirl,ig.game.midX,ig.game.midY,{scml:this.scmlGirl,_parent:this}),this.sptCharDU1.spriter.scale.x=-1,this.sptCharDU1.changeDU(b.option[1].sceneID.toLowerCase()));null==this.sptCharDU2&&(this.sptCharDU2=ig.game.spawnEntity(SpriterGirl,ig.game.midX,ig.game.midY,{scml:this.scmlGirl,_parent:this,noChar:m}),this.sptCharDU2.changeDU(b.option[2].sceneID.toLowerCase()));ig.game.sortEntitiesDeferred();
this.repos();n.start()}.bind(this)}).start();ig.game.sortEntitiesDeferred();break;case "input_name":this.entityGame.uiEnterName=ig.game.spawnEntity(EntityUIEnterName,0,0,{_parent:this});this.entityGame.uiEnterName.repos();this.tempTextView=this.entityGame.uiEnterName.textView;this.setupInputVirtualKeyboard(!0);this.keyboard.show();this.isInputKeyboard=!0;break;case "walk_in":case "fade_in":this.longestDurWalkIn=this.defDurWalkIn;"fade_in"==ig.game.getString(b.animEffect.type)&&(this.longestDurWalkIn=
0);for(l=0;l<b.animEffect.char.length;l++){var d=this.searchIdxChar(b,b.animEffect.char[l].name),m=0;-1==this.arrChar.indexOf(b.char[d].name)&&(this.arrChar.push(b.char[d].name),this.posDefChar.push({x:0,y:0}),this.offsetDefChar.push({x:0,y:500*_DATAGAME.ratioRes,alpha:1}),m=this.arrChar.length-1,this["sptChar"+m]="Amy"==b.char[d].name||0<=_DATAGAME.neutral_girl.indexOf(b.char[d].name)?ig.game.spawnEntity(SpriterGirl,ig.game.midX,ig.game.midY,{_parent:this,charName:b.char[d].name.toLowerCase(),noChar:m}):
0<=_DATAGAME.neutral_boy.indexOf(b.char[d].name)?ig.game.spawnEntity(SpriterBoy,ig.game.midX,ig.game.midY,{charName:b.char[d].name.toLowerCase(),_parent:this,noChar:m}):"girl"==ig.game.sessionData.loveInterest?ig.game.spawnEntity(SpriterGirl,ig.game.midX,ig.game.midY,{_parent:this,charName:b.char[d].name.toLowerCase(),noChar:m}):ig.game.spawnEntity(SpriterBoy,ig.game.midX,ig.game.midY,{charName:b.char[d].name.toLowerCase(),_parent:this,noChar:m}),"Amy"==b.char[d].name?(null!=b.char[d].outfit&&(ig.game.sessionData.dressUpTheme[this.numChapter].now=
b.char[d].outfit.toLowerCase().replaceAll(" ","")),this["sptChar"+m].changeDU(ig.game.sessionData.dressUpTheme[this.numChapter].now)):(e=b.char[d].name.toLowerCase(),e=e.replaceAll(" ",""),this.checkCurrentCharDU(e),null!=b.char[d].outfit&&(f=b.char[d].outfit.toLowerCase(),f=f.replaceAll(" ",""),ig.game.sessionData.dressUpChar[this.numChapter][e]=f),this["sptChar"+m].charName=ig.game.sessionData.dressUpChar[this.numChapter][e],this["sptChar"+m].changeDU(ig.game.sessionData.dressUpChar[this.numChapter][e]),
ig.game.consoleLog(ig.game.sessionData.dressUpChar[this.numChapter][e])),this["sptChar"+m].spriter.root.alpha=0,this["sptChar"+m].speedAnimWalk=this["sptChar"+m].defSpeedAnimWalk,null!=b.char[d].posX&&5E3<=Math.abs(b.char[d].posX)||null!=b.char[d].posY&&5E3<=Math.abs(b.char[d].posY)||this.totalChar++,this.isVisibleChar[m]=!0);e=this.defDurWalkIn;f=e=0;if(0==this["sptChar"+m].spriter.root.alpha){g=b.animEffect.char[l].rear?!0:!1;j=b.char[d].faceTo?b.char[d].faceTo:b.char[d].position;"center"==j&&(j=
"right");if(null==b.animEffect.char[l].from&&"left"==b.char[d].position||null!=b.animEffect.char[l].from&&"left"==b.animEffect.char[l].from)this["sptChar"+m].changeScale(1,-1),this.offsetDefChar[m].x=-(ig.system.width/2+100*_DATAGAME.ratioRes),f=this.posXIn[b.char[d].position],g&&"left"==j&&(f+=this.offsetPivot),e=this.offsetDefChar[m].x+(this.posXIn.left-f);else if(null==b.animEffect.char[l].from&&"right"==b.char[d].position||null!=b.animEffect.char[l].from&&"right"==b.animEffect.char[l].from||null==
b.animEffect.char[l].from&&"center"==b.char[d].position)this["sptChar"+m].changeScale(1,1),this.offsetDefChar[m].x=ig.system.width/2+100*_DATAGAME.ratioRes,f=this.posXIn[b.char[d].position],g&&"right"==j&&(f-=this.offsetPivot),e=this.offsetDefChar[m].x+(this.posXIn.right-f);null!=b.animEffect.char[l].faceTo&&""!=b.animEffect.char[l].faceTo&&("right"==b.animEffect.char[l].faceTo.toLowerCase()?this["sptChar"+m].changeScale(1,-1):"left"==b.animEffect.char[l].faceTo.toLowerCase()&&this["sptChar"+m].changeScale(1,
1))}"fade_in"==ig.game.getString(b.animEffect.type)?(e=null==b.animEffect.char[l].time?500:1E3*b.animEffect.char[l].time,e>this.longestDurWalkIn&&(this.longestDurWalkIn=e),this.offsetDefChar[m].x=f,this.offsetDefChar[m].alpha=0,this.calculatePosChar(m),0>=b.animEffect.char[l].time?this["sptChar"+m].spriter.root.alpha=1:(new ig.TweenDef(this.offsetDefChar[m])).to({alpha:1},e).easing(ig.Tween.Easing.Linear.EaseNone).onUpdate(function(b){this["sptChar"+b].spriter.root.alpha=this.offsetDefChar[b].alpha}.bind(this,
m)).onComplete(function(b){this["sptChar"+b].spriter.root.alpha=1}.bind(this,m,b.char[d].position,b.char[d].faceTo,b.animEffect.char[l].rear,b.char[d].emotion)).start(),null!=b.animEffect.char[l].faceTo&&""!=b.animEffect.char[l].faceTo&&("right"==b.animEffect.char[l].faceTo.toLowerCase()?this["sptChar"+m].changeScale(1,-1):"left"==b.animEffect.char[l].faceTo.toLowerCase()&&this["sptChar"+m].changeScale(1,1)),e=null==b.animEffect.char[l].anim?"ANIM_IDLE":b.animEffect.char[l].anim.toUpperCase(),b.animEffect.char[l].rear?
null!=e?this["sptChar"+m].changePose(e,b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,null,b.animEffect.char[l].tint,!0):this["sptChar"+m].changePose("ANIM_IDLE_REAR",b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,null,b.animEffect.char[l].tint,!0):(null!=e?this["sptChar"+m].changePose(e,b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,null,b.animEffect.char[l].tint,!0):this["sptChar"+m].changePose("ANIM_IDLE",b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,
null,b.animEffect.char[l].tint,!0),null!=b.animEffect.char[l].emo&&""!=b.animEffect.char[l].emo?this["sptChar"+m].changeEmotion(_DATAGAME.listEmotion.indexOf(b.animEffect.char[l].emo),!0):"ANIM_NONE"!=b.char[d].emotion&&this["sptChar"+m].changeEmotion(_DATAGAME.listEmotion.indexOf(b.char[d].emotion),!0))):(g=null==b.animEffect.char[l].anim?"ANIM_WALK":b.animEffect.char[l].anim.toUpperCase(),"ANIM_"!=g.substring(0,5)&&(g="ANIM_"+b.animEffect.char[l].anim.toUpperCase()),e=this.defDurWalkIn*Math.abs(e)/
(500*_DATAGAME.ratioRes),null!=g&&(e=this.checkAnimationDurationForWalkInAndOut(g,e)),e=this.checkWalkingSpeed(e,this["sptChar"+m],b.animEffect.char[l].speed),(new ig.TweenDef(this.offsetDefChar[m])).to({x:f},e).easing(ig.Tween.Easing.Linear.EaseNone).onComplete(function(b,d,e,f,g,j,l,m,n,q,r){this.offsetDefChar[b].x=this.posXIn[d];this["sptChar"+b].changePose(l,q,"shadow",j,n);this["sptChar"+b].changeScale(r,this["sptChar"+b].flipState);"ANIM_NONE"!=_DATAGAME[g]&&this["sptChar"+b].changeEmotion(_DATAGAME.listEmotion.indexOf(g),
!1);null==e?"left"==d&&!f||("right"==d||"center"==d)&&f?this["sptChar"+b].changeScale(r,-1):this["sptChar"+b].changeScale(r,1):"right"==e?this["sptChar"+b].changeScale(r,-1):this["sptChar"+b].changeScale(r,1)}.bind(this,m,b.char[d].position,b.char[d].faceTo,b.animEffect.char[l].rear,b.char[d].emotion,b.char[d].animSpeed,b.char[d].anim,g,b.char[d].tint,b.char[d].handheld,b.char[d].scale)).start(),this.calculatePosChar(m),this["sptChar"+m].spriter.root.alpha=1,0!=this.idxChar&&this["sptChar"+m].changeDU(this["sptChar"+
m].charName),b.animEffect.char[l].rear?null!=g?this["sptChar"+m].changePose(g+"_REAR",b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,null,b.animEffect.char[l].tint,!0):this["sptChar"+m].changePose("ANIM_WALK_REAR",b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,null,b.animEffect.char[l].tint,!0):(null!=g?this["sptChar"+m].changePose(g,b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,null,b.animEffect.char[l].tint,!0):this["sptChar"+m].changePose("ANIM_WALK",b.animEffect.char[l].handheld,
b.animEffect.char[l].shadow,null,b.animEffect.char[l].tint,!0),null!=b.animEffect.char[l].emo&&""!=b.animEffect.char[l].emo?this["sptChar"+m].changeEmotion(_DATAGAME.listEmotion.indexOf(b.animEffect.char[l].emo),!0):"ANIM_NONE"!=b.char[d].emotion&&this["sptChar"+m].changeEmotion(_DATAGAME.listEmotion.indexOf(b.char[d].emotion),!0)),this["sptChar"+m].changeScale(b.char[l].scale,this["sptChar"+m].flipState))}ig.game.tweenDelay(this,this.longestDurWalkIn,"afterAnimation");break;case "walk_out":case "fade_out":this.longestDurWalkIn=
this.defDurWalkIn;"fade_out"==ig.game.getString(b.animEffect.type)&&(this.longestDurWalkIn=0);for(l=0;l<b.animEffect.char.length;l++){d=this.searchIdxChar(b,b.animEffect.char[l].name);m=this.arrChar.indexOf(b.char[d].name);g=b.animEffect.char[l].rear;this.totalChar--;this.isVisibleChar[m]=!1;e=this.defDurWalkIn;j=f=e=0;this.offsetDefChar[m].x=this.posXIn[b.char[d].position];if(g)if(j=300*_DATAGAME.ratioRes,0>this["sptChar"+m].defScale.x&&(null!=b.animEffect.char[l].from&&"left"==b.animEffect.char[l].from||
null==b.animEffect.char[l].from&&"left"==b.char[d].position))this.offsetDefChar[m].x-=this.offsetPivot,e+=this.offsetPivot;else if(0<this["sptChar"+m].defScale.x&&(null!=b.animEffect.char[l].from&&"right"==b.animEffect.char[l].from||null==b.animEffect.char[l].from&&"right"==b.char[d].position))this.offsetDefChar[m].x+=this.offsetPivot,e+=this.offsetPivot;if("fade_out"==ig.game.getString(b.animEffect.type))e=null==b.animEffect.char[l].time||0>=b.animEffect.char[l].time?500:1E3*b.animEffect.char[l].time,
e>this.longestDurWalkIn&&(this.longestDurWalkIn=e),this.offsetDefChar[m].alpha=1,(new ig.TweenDef(this.offsetDefChar[m])).to({alpha:0},e).easing(ig.Tween.Easing.Linear.EaseNone).onUpdate(function(b){this["sptChar"+b].spriter.root.alpha=this.offsetDefChar[b].alpha}.bind(this,m)).onComplete(function(b){this["sptChar"+b].spriter.root.alpha=0;this["sptChar"+b].kill();this["sptChar"+b]=null;this.arrChar[b]=""}.bind(this,m)).start(),null!=b.animEffect.char[l].faceTo&&""!=b.animEffect.char[l].faceTo&&("right"==
b.animEffect.char[l].faceTo.toLowerCase()?this["sptChar"+m].changeScale(1,-1):"left"==b.animEffect.char[l].faceTo.toLowerCase()&&this["sptChar"+m].changeScale(1,1)),e=null==b.animEffect.char[l].anim?"ANIM_IDLE":b.animEffect.char[l].anim.toUpperCase(),b.animEffect.char[l].rear?null!=e?this["sptChar"+m].changePose(e,b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,null,b.animEffect.char[l].tint,!0):this["sptChar"+m].changePose("ANIM_IDLE_REAR",b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,
null,b.animEffect.char[l].tint,!0):(null!=e?this["sptChar"+m].changePose(e,b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,null,b.animEffect.char[l].tint,!0):this["sptChar"+m].changePose("ANIM_IDLE",b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,null,b.animEffect.char[l].tint,!0),null!=b.animEffect.char[l].emo&&""!=b.animEffect.char[l].emo?this["sptChar"+m].changeEmotion(_DATAGAME.listEmotion.indexOf(b.animEffect.char[l].emo),!0):"ANIM_NONE"!=b.char[d].emotion&&this["sptChar"+
m].changeEmotion(_DATAGAME.listEmotion.indexOf(b.char[d].emotion),!0));else{if(null==b.animEffect.char[l].from&&"left"==b.char[d].position||null!=b.animEffect.char[l].from&&"left"==b.animEffect.char[l].from||null==b.animEffect.char[l].from&&"center"==b.char[d].position)this["sptChar"+m].changeScale(1,1),f=-(ig.system.width/2+100*_DATAGAME.ratioRes+j),e=f+(this.posXIn.left-this.posXIn[b.char[d].position]);else if(null==b.animEffect.char[l].from&&"right"==b.char[d].position||null!=b.animEffect.char[l].from&&
"right"==b.animEffect.char[l].from)this["sptChar"+m].changeScale(1,-1),f=ig.system.width/2+100*_DATAGAME.ratioRes+j,e=f+(this.posXIn.right-this.posXIn[b.char[d].position]);null!=b.animEffect.char[l].faceTo&&""!=b.animEffect.char[l].faceTo&&("right"==b.animEffect.char[l].faceTo.toLowerCase()?this["sptChar"+m].changeScale(1,-1):"left"==b.animEffect.char[l].faceTo.toLowerCase()&&this["sptChar"+m].changeScale(1,1));e=this.defDurWalkIn*Math.abs(e)/(500*_DATAGAME.ratioRes);g=null==b.animEffect.char[l].anim?
"ANIM_WALK":b.animEffect.char[l].anim.toUpperCase();"ANIM_"!=g.substring(0,5)&&(g="ANIM_"+b.animEffect.char[l].anim.toUpperCase());null!=g&&(e=this.checkAnimationDurationForWalkInAndOut(g,e));e=this.checkWalkingSpeed(e,this["sptChar"+m],b.animEffect.char[l].speed);(new ig.TweenDef(this.offsetDefChar[m])).to({x:f},e).easing(ig.Tween.Easing.Linear.EaseNone).onComplete(function(b,d){this["sptChar"+b].changePose("ANIM_IDLE",null,"shadow",null,d);this["sptChar"+b].spriter.root.alpha=0;this["sptChar"+b].kill();
this["sptChar"+b]=null;this.arrChar[b]=""}.bind(this,m,b.animEffect.char[l].tint)).start();b.animEffect.char[l].rear?null!=g?this["sptChar"+m].changePose(g+"_REAR",b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,null,b.animEffect.char[l].tint,!0):this["sptChar"+m].changePose("ANIM_WALK_REAR",b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,null,b.animEffect.char[l].tint,!0):(null!=g?this["sptChar"+m].changePose(g,b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,null,b.animEffect.char[l].tint,
!0):this["sptChar"+m].changePose("ANIM_WALK",b.animEffect.char[l].handheld,b.animEffect.char[l].shadow,null,b.animEffect.char[l].tint,!0),null!=b.animEffect.char[l].emo&&""!=b.animEffect.char[l].emo?this["sptChar"+m].changeEmotion(_DATAGAME.listEmotion.indexOf(b.animEffect.char[l].emo),!0):"ANIM_NONE"!=b.char[d].emotion&&this["sptChar"+m].changeEmotion(_DATAGAME.listEmotion.indexOf(b.char[d].emotion),!0));this["sptChar"+m].changeScale(b.char[l].scale,this["sptChar"+m].flipState);this.calculatePosChar(m)}}ig.game.tweenDelay(this,
this.longestDurWalkIn,"afterAnimation");break;case "pan":(null==_STRINGS["Chapter"+this.numChapter][this.numChat].text||""==_STRINGS["Chapter"+this.numChapter][this.numChat].text)&&this.playSFXStory(b);this.playAnimCharStory(b);this.panBG(_DATAGAME.pan[b.animEffect.panEnd],0.1,function(){this.afterAnimation()}.bind(this));break;case "trans":this.checkOutfitChar(b);for(l=0;l<this.totalAllChar;l++)this.isVisibleChar[l]=!1;this.totalChar=0;this.checkAnimDelayOnTransition(b);"trans0"==b.animEffect.type?
(ig.game.windowBefore="game",ig.game.sessionData.numChat[this.numChapter]=this.numChat+1,ig.game.withoutTransition()):((null==_STRINGS["Chapter"+this.numChapter][this.numChat].text||""==_STRINGS["Chapter"+this.numChapter][this.numChat].text)&&this.playSFXStory(b),null!=b.animEffect.color?ig.game.fadeInWindow(LevelGame,ig.game.getNumber(b.animEffect.type),b.animEffect.color):ig.game.fadeInWindow(LevelGame,ig.game.getNumber(b.animEffect.type)),ig.game.sessionData.numChat[this.numChapter]=this.numChat+
1);break;case "flashback":this.checkOutfitChar(b);(null==_STRINGS["Chapter"+this.numChapter][this.numChat].text||""==_STRINGS["Chapter"+this.numChapter][this.numChat].text)&&this.playSFXStory(b);for(l=0;l<this.totalAllChar;l++)this.isVisibleChar[l]=!1;this.totalChar=0;ig.game.fadeInWindow(LevelGame,1,b.animEffect.color);this.isDelayFlashback=ig.game.sessionData.isFlashback[this.numChapter]=!0;ig.game.sessionData.flashbackColor[this.numChapter]=null==b.animEffect.color?"white":b.animEffect.color;ig.game.sessionData.numChat[this.numChapter]=
this.numChat+1;break;case "flashback_end":(null==_STRINGS["Chapter"+this.numChapter][this.numChat].text||""==_STRINGS["Chapter"+this.numChapter][this.numChat].text)&&this.playSFXStory(b);for(l=0;l<this.totalAllChar;l++)this.isVisibleChar[l]=!1;this.totalChar=0;ig.game.fadeInWindow(LevelGame,1,ig.game.sessionData.flashbackColor[this.numChapter]);ig.game.sessionData.isFlashback[this.numChapter]=!1;this.isDelayFlashback=!0;ig.game.sessionData.numChat[this.numChapter]=this.numChat+1;break;case "heartbeat":case "pulse":case "hover":(null==
_STRINGS["Chapter"+this.numChapter][this.numChat].text||""==_STRINGS["Chapter"+this.numChapter][this.numChat].text)&&this.playSFXStory(b);this.playAnimCharStory(b);if(null!=b.animEffect.remove&&!0==b.animEffect.remove)null!=this.zoomPanCameraTween&&this.zoomPanCameraTween.stop(),null!=this.zoomPanCameraTweenDuration&&this.zoomPanCameraTweenDuration.stop(),this.afterAnimation();else{var d=b.animEffect.scaleStart,e=b.animEffect.scale,l=b.animEffect.posX,f=b.animEffect.posY,g=b.animEffect.moveX,j=b.animEffect.moveY,
r=b.animEffect.time,q=b.animEffect.interval,s=0,t=b.animEffect.easing,v=b.animEffect.shakeDistance;null!=b.animEffect.delay&&0<b.animEffect.delay&&(s=b.animEffect.delay);var u=!1;null==this.dataZoomPanCamera?u=!0:this.dataZoomPanCamera.type!=b.animEffect.type.toLowerCase()?u=!0:this.dataZoomPanCamera.scaleStart!=d?u=!0:this.dataZoomPanCamera.scale!=e?u=!0:this.dataZoomPanCamera.posX!=l?u=!0:this.dataZoomPanCamera.posY!=f?u=!0:this.dataZoomPanCamera.moveX!=g?u=!0:this.dataZoomPanCamera.moveY!=j?u=
!0:this.dataZoomPanCamera.time!=r?u=!0:this.dataZoomPanCamera.interval!=q?u=!0:this.dataZoomPanCamera.delay!=s?u=!0:this.dataZoomPanCamera.easing!=t?u=!0:"hover"==ig.game.getString(b.animEffect.type)&&this.dataZoomPanCamera.shakeDistance!=v&&(u=!0);u&&(this.dataZoomPanCamera={},this.dataZoomPanCamera.type=_DATAGAME["animEffect_"+b.animEffect.type.toLowerCase()],this.dataZoomPanCamera.scaleStart=d,this.dataZoomPanCamera.scale=e,this.dataZoomPanCamera.posX=l,this.dataZoomPanCamera.posY=f,this.dataZoomPanCamera.moveX=
g,this.dataZoomPanCamera.moveY=j,this.dataZoomPanCamera.time=r,this.dataZoomPanCamera.interval=q,this.dataZoomPanCamera.delay=s,this.dataZoomPanCamera.easing=t,this.dataZoomPanCamera.shakeDistance=v,this.zoomPanCamera(e,g,j,l,f,r,s,function(){this.afterAnimation()}.bind(this),t,q,d,v))}break;case "zoom_pan":this.dataZoomPanCamera=null;(null==_STRINGS["Chapter"+this.numChapter][this.numChat].text||""==_STRINGS["Chapter"+this.numChapter][this.numChat].text)&&this.playSFXStory(b);this.playAnimCharStory(b);
e=b.animEffect.scale;g=b.animEffect.moveX;j=b.animEffect.moveY;l=b.animEffect.posX;f=b.animEffect.posY;r=b.animEffect.time;s=0;t=b.animEffect.easing;null!=b.animEffect.delay&&0<b.animEffect.delay&&(s=b.animEffect.delay);this.zoomPanCamera(e,g,j,l,f,r,s,function(){this.afterAnimation()}.bind(this),t);break;case "zoom_in":this.dataZoomPanCamera=null;(null==_STRINGS["Chapter"+this.numChapter][this.numChat].text||""==_STRINGS["Chapter"+this.numChapter][this.numChat].text)&&this.playSFXStory(b);this.playAnimCharStory(b);
d=b.char[this.searchIdxChar(b,b.animEffect.char[0])].position;l=_DATAGAME.zoom[d].x*_DATAGAME.originalSize.x*_DATAGAME.ratioRes;f=_DATAGAME.zoom[d].y*_DATAGAME.originalSize.y*_DATAGAME.ratioRes;s=0;t=b.animEffect.easing;null!=b.animEffect.delay&&0<b.animEffect.delay&&(s=b.animEffect.delay);this.zoomPanCamera(2,0,0,l,f,0.5,s,function(){this.afterAnimation()}.bind(this),t);break;case "zoom_out":this.dataZoomPanCamera=null;(null==_STRINGS["Chapter"+this.numChapter][this.numChat].text||""==_STRINGS["Chapter"+
this.numChapter][this.numChat].text)&&this.playSFXStory(b);this.playAnimCharStory(b);s=0;t=b.animEffect.easing;null!=b.animEffect.delay&&0<b.animEffect.delay&&(s=b.animEffect.delay);this.zoomPanCamera(1,0,0,0,0,0.5,s,function(){this.afterAnimation()}.bind(this),t);break;case "love_gender":this.loadBubbleChat()}else this.lastChatId=this.numChat,ig.game.sessionData.lastChatId[this.numChapter]=this.lastChatId,e&&this.playSFXStory(b),this.loadBubbleChat();for(l=1;l<=_DATAGAME.totalVirtualCurrency;l++)ig.game.sessionData["virtualCurrency"+
l]=this["virtualCurrency"+l];null!=b.animEffect?"end"!=ig.game.getString(b.animEffect.type)&&"trans"!=ig.game.getString(b.animEffect.type)&&"flashback"!=ig.game.getString(b.animEffect.type)&&"flashback_end"!=ig.game.getString(b.animEffect.type)&&"input_name"!=ig.game.getString(b.animEffect.type)&&"freeze_frame"!=ig.game.getString(b.animEffect.type)&&"text_chat"!=ig.game.getString(b.animEffect.type)&&"email"!=ig.game.getString(b.animEffect.type)&&"letter"!=ig.game.getString(b.animEffect.type)&&""!=
b.text.replaceAll(" ","")&&this.saveToLogHistory(this.numChat):""!=b.text.replaceAll(" ","")&&this.saveToLogHistory(this.numChat);!0==_DATAGAME.enableCurrentProgress&&ig.game.saveAll();this.checkBGM()}},checkAnimationDurationForWalkInAndOut:function(b,d){switch(b){case "ANIM_JOG_HAND_CLOSE":case "ANIM_JOG_HAND_OPEN":case "ANIM_WALK_SHIVER_MILD":case "ANIM_WALK_SHIVER_MEDIUM":case "ANIM_WALK_SHIVER_EXTREME":d/=1.5;break;case "ANIM_RUN":d/=2;break;case "ANIM_SPRINT_HAND_CLOSE":case "ANIM_SPRINT_HAND_OPEN":case "ANIM_RUN_WIDE_HAND_CLOSE":case "ANIM_RUN_WIDE_HAND_OPEN":d/=
3;break;case "ANIM_STUMBLE":d*=3}return d},saveToLogHistory:function(b,d){null==d&&(d=!1);null==ig.game.sessionData.historyLog["chapter"+this.numChapter]&&(ig.game.sessionData.historyLog["chapter"+this.numChapter]=[]);0<=b?ig.game.sessionData.historyLog["chapter"+this.numChapter][0]!=this.numChat&&!d?ig.game.sessionData.historyLog["chapter"+this.numChapter].splice(0,0,this.numChat):ig.game.sessionData.historyLog["chapter"+this.numChapter][0]!=b&&d&&ig.game.sessionData.historyLog["chapter"+this.numChapter].splice(0,
0,b):ig.game.sessionData.historyLog["chapter"+this.numChapter][0]!=b&&ig.game.sessionData.historyLog["chapter"+this.numChapter].splice(0,0,b)},zoomPanCamera:function(b,d,e,f,g,j,l,n,m,r,q){null==b&&(b=this.zoomBG);null!=d&&(this.lastposXBG=-1*d);null!=e&&(this.lastposYBG=-1*e);var s=this.bg.pntX,t=this.bg.pntY;null!=f&&(s=f/ig.sizeHandler.minW);null!=g&&(t=g/ig.sizeHandler.minH);this.bg.statMove=0<this.lastposXBG-this.posXBG?this.bg.moveStatus.RIGHT:this.bg.moveStatus.LEFT;this.bg.repos();d=m&&""!=
m?m.split("."):["Linear","EaseNone"];null!=this.zoomPanCameraTween&&this.zoomPanCameraTween.stop();null!=this.zoomPanCameraTweenDuration&&this.zoomPanCameraTweenDuration.stop();(null==j||0>=j)&&null==this.dataZoomPanCamera?(this.zoomBG=b,this.posXBG=this.lastposXBG,this.posYBG=this.lastposYBG,this.anchorBGX=s,this.anchorBGY=t,this.bg.pntX=s,this.bg.pntY=t,this.bg.statMove=this.bg.moveStatus.NONE,null!=n&&n()):(this.boolZoomPanCamera=!0,null==this.dataZoomPanCamera?this.zoomPanCameraTween=this.tween({zoomBG:b,
posXBG:this.lastposXBG,posYBG:this.lastposYBG,anchorBGX:s,anchorBGY:t},j,{delay:l,easing:ig.Tween.Easing[d[0]][d[1]],onComplete:function(){this.bg.pntX=s;this.bg.pntY=t;this.bg.statMove=this.bg.moveStatus.NONE;this.boolZoomPanCamera=!1;null!=n&&n()}.bind(this)}):(this.zoomBG=this.dataZoomPanCamera.type==_DATAGAME.animEffect_hover?b:q,this.posXBG=this.lastposXBG,this.posYBG=this.lastposYBG,this.anchorBGX=s,this.anchorBGY=t,this.bg.pntX=s,this.bg.pntY=t,this.dataZoomPanCamera.type==_DATAGAME.animEffect_hover?
this.tweenHoverRepeat(!0,b,s,t,r,l,d):this.zoomPanCameraTween=this.tween({zoomBG:b,posXBG:this.lastposXBG,posYBG:this.lastposYBG,anchorBGX:s,anchorBGY:t},r,{delay:l,easing:ig.Tween.Easing[d[0]][d[1]],loop:this.dataZoomPanCamera.type==_DATAGAME.animEffect_heartbeat?ig.Tween.Loop.Reverse:ig.Tween.Loop.Revert}),0>j?null!=n&&n():(this.dummyDurationEffect=0,this.zoomPanCameraTweenDuration=this.tween({dummyDurationEffect:1},j,{delay:l,easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.zoomPanCameraTween.stop();
this.bg.pntX=s;this.bg.pntY=t;this.bg.statMove=this.bg.moveStatus.NONE;this.boolZoomPanCamera=!1;null!=n&&n()}.bind(this)}),this.zoomPanCameraTweenDuration.start())),this.zoomPanCameraTween.start())},tweenHoverRepeat:function(b,d,e,f,g,j,l){null!=this.zoomPanCameraTween&&this.zoomPanCameraTween.stop();var n=null!=this.dataZoomPanCamera.moveX?this.dataZoomPanCamera.moveX:0,m=null!=this.dataZoomPanCamera.moveY?this.dataZoomPanCamera.moveY:0;this.bg.statMove=0<this.lastposXBG-this.posXBG?this.bg.moveStatus.RIGHT:
this.bg.moveStatus.LEFT;if(null==this.arrHoverShake||0==this.arrHoverShake.length)if(this.arrHoverShake=[1,2,3,4],this.arrHoverShake=ig.game.shuffleArray(this.arrHoverShake),null!=this.lastRandomShake&&this.lastRandomShake==this.arrHoverShake[0]){var r=this.arrHoverShake.concat([]);this.arrHoverShake=[];this.arrHoverShake.push(r[1]);this.arrHoverShake.push(r[0]);this.arrHoverShake.push(r[2]);this.arrHoverShake.push(r[3])}1==this.arrHoverShake[0]?n+=this.dataZoomPanCamera.shakeDistance:2==this.arrHoverShake[0]?
n-=this.dataZoomPanCamera.shakeDistance:3==this.arrHoverShake[0]?m+=this.dataZoomPanCamera.shakeDistance:4==this.arrHoverShake[0]&&(m-=this.dataZoomPanCamera.shakeDistance);this.lastRandomShake=this.arrHoverShake[0];this.lastposXBG=-1*n;this.lastposYBG=-1*m;this.zoomPanCameraTween=this.tween({zoomBG:d,posXBG:this.lastposXBG,posYBG:this.lastposYBG,anchorBGX:e,anchorBGY:f},g,{delay:!0==b?j:0,easing:ig.Tween.Easing[l[0]][l[1]],onComplete:function(b,d,e,f,g,j){null!=this.zoomPanCameraTween&&this.zoomPanCameraTween.stop();
this.arrHoverShake.splice(0,1);this.tweenHoverRepeat(!1,b,d,e,f,g,j);this.zoomPanCameraTween.start()}.bind(this,d,e,f,g,j,l)})},killWindowBoxing:function(b){null!=this.entityWindowBoxing[b.toLowerCase()]&&(this.entityWindowBoxing[b.toLowerCase()].kill(),this.entityWindowBoxing[b.toLowerCase()]=null)},spawnWindowBoxing:function(b,d){var e=b.windowBoxing[d.toLowerCase()];null!=e?(null==this.entityWindowBoxing[d.toLowerCase()]&&(this.entityWindowBoxing[d.toLowerCase()]=ig.game.spawnEntity(EntityWindowBoxing,
0,0,{_parent:this,position:d.toLowerCase()})),null==e.zIndex?this.entityWindowBoxing[d.toLowerCase()].zIndex=_DATAGAME.windowBoxing[d.toLowerCase()].zIndex:this.entityWindowBoxing[d.toLowerCase()].zIndex=0>e.zIndex?_DATAGAME.zIndexData.windowBoxingBelow:_DATAGAME.zIndexData.windowBoxingTop,null==e.thickness?this.entityWindowBoxing[d.toLowerCase()].thickness=_DATAGAME.windowBoxing[d.toLowerCase()].thickness:this.entityWindowBoxing[d.toLowerCase()].thickness=0<e.thickness?e.thickness:_DATAGAME.windowBoxing[d.toLowerCase()].thickness,
null==e.color||""==e.color||"none"==e.color?this.entityWindowBoxing[d.toLowerCase()].color=_DATAGAME.windowBoxing[d.toLowerCase()].color:this.entityWindowBoxing[d.toLowerCase()].color=e.color):this.killWindowBoxing(d.toLowerCase())},checkProgressBar:function(b){if(b.progressBar){var d=0.04*ig.system.height;if("bottom"==_DATAGAME.defaultProgressBar.position.toLowerCase())d=0.96*ig.system.height;else if("center"==_DATAGAME.defaultProgressBar.position.toLowerCase()||"middle"==_DATAGAME.defaultProgressBar.position.toLowerCase())d=
0.5*ig.system.height;for(var e=0;e<b.progressBar.length;e++){var f=-1;null!=EntityProgressBar.progressBarArr&&(f=EntityProgressBar.progressBarArr.map(function(b){return b.id}).indexOf(b.progressBar[e].progressID));var g=b.progressBar[e],j=_DATAGAME.progressBar[b.progressBar[e].progressID],l=_DATAGAME.defaultProgressBar,n=null==g.strokeColor?null==j.strokeColor?l.strokeColor:j.strokeColor:g.strokeColor,m=null==g.strokeThickness?null==j.strokeThickness?l.strokeThickness*_DATAGAME.ratioRes:j.strokeThickness*
_DATAGAME.ratioRes:g.strokeThickness*_DATAGAME.ratioRes,r=null==n||"none"==n||""==n||0==m?!1:!0,q=null==g.showText?null==j.showText?l.showText:j.showText:g.showText,s=null==g.showMaxValue?null==j.showMaxValue?l.showMaxValue:j.showMaxValue:g.showMaxValue,t=null==g.width?null==j.width?l.width*_DATAGAME.ratioRes:j.width*_DATAGAME.ratioRes:g.width*_DATAGAME.ratioRes,v=null==g.height?null==j.height?l.height*_DATAGAME.ratioRes:j.height*_DATAGAME.ratioRes:g.height*_DATAGAME.ratioRes,u=null==g.progressColor?
null==j.progressColor?l.progressColor:j.progressColor:g.progressColor,x=null==g.corner?null==j.corner?l.corner*_DATAGAME.ratioRes:j.corner*_DATAGAME.ratioRes:g.corner*_DATAGAME.ratioRes,D=null==g.textColor?null==j.textColor?l.textColor:j.textColor:g.textColor,H=null==g.textSize?null==j.textSize?l.textSize*_DATAGAME.ratioRes:j.textSize*_DATAGAME.ratioRes:g.textSize*_DATAGAME.ratioRes,M=null==g.strokeTextColor?null==j.strokeTextColor?l.strokeTextColor:j.strokeTextColor:g.strokeTextColor,g=null==g.strokeTextThickness?
null==j.strokeTextThickness?l.strokeTextThickness*_DATAGAME.ratioRes:j.strokeTextThickness*_DATAGAME.ratioRes:g.strokeTextThickness*_DATAGAME.ratioRes;null==EntityProgressBar.progressBarArr||0>f?ig.game.spawnEntity(EntityProgressBar,0,d,{id:b.progressBar[e].progressID,zIndex:_DATAGAME.zIndexData.progressBar,barPosition:_DATAGAME.defaultProgressBar.position.toLowerCase(),prevPos:{x:0.5*ig.system.width,y:d},defPos:{x:0.5*ig.system.width,y:d},barProperties:{showText:q,showMaxValue:s,width:t,height:v,
progressColor:u,strokeColor:n,strokeThickness:m,corner:x,textColor:D,textSize:H,isStroke:r,strokeTextColor:M,strokeTextThickness:g},barPadding:!0==r?13*_DATAGAME.ratioRes+m:13*_DATAGAME.ratioRes}):(EntityProgressBar.progressBarArr[f].barProperties={showText:q,showMaxValue:s,width:t,height:v,progressColor:u,strokeColor:n,strokeThickness:m,corner:x,textColor:D,textSize:H,isStroke:r,strokeTextColor:M,strokeTextThickness:g},EntityProgressBar.progressBarArr[f].barPadding=!0==r?13*_DATAGAME.ratioRes+m:
13*_DATAGAME.ratioRes)}}if(null!=EntityProgressBar.progressBarArr)for(d=0;d<EntityProgressBar.progressBarArr.length;d++)null==b.progressBar?EntityProgressBar.progressBarArr[d].tweenFadeOut():0>b.progressBar.map(function(b){return b.progressID}).indexOf(EntityProgressBar.progressBarArr[d].id)&&EntityProgressBar.progressBarArr[d].tweenFadeOut()},checkVignette:function(){},checkWindowBoxing:function(b){b.windowBoxing?(this.spawnWindowBoxing(b,"top"),this.spawnWindowBoxing(b,"bottom"),this.spawnWindowBoxing(b,
"left"),this.spawnWindowBoxing(b,"right"),ig.game.sortEntitiesDeferred()):(this.killWindowBoxing("top"),this.killWindowBoxing("bottom"),this.killWindowBoxing("left"),this.killWindowBoxing("right"))},checkTopOverlay:function(b){if(b.overlayType){var d=!0;null!=this.entityTopOverlay&&(this.entityTopOverlay.overlayType!=b.overlayType.toLowerCase()?(this.entityTopOverlay.kill(),this.entityTopOverlay=null):d=!1);d&&(this.entityTopOverlay=ig.game.spawnEntity("Entity"+b.overlayType.toLowerCase(),0,0,{_parent:this,
overlayType:b.overlayType.toLowerCase()}));ig.game.sortEntitiesDeferred()}else null!=this.entityTopOverlay&&(this.entityTopOverlay.kill(),this.entityTopOverlay=null,ig.game.consoleLog("kill top overlay"))},checkParticle:function(b){b.particle?null==this.entityParticle?(this.entityParticle=ig.game.spawnEntity(EntityParticle,0,0,{_parent:this,dataParticle:b.particle}),this.entityParticle.setInitialProp(),ig.game.sortEntitiesDeferred()):this.entityParticle.dataParticle.type!=b.particle.type&&(this.entityParticle.dataParticle=
b.particle,this.entityParticle.setInitialProp(),ig.game.sortEntitiesDeferred()):null!=this.entityParticle&&(this.entityParticle.animType==this.entityParticle.TYPE_MATRIX?(this.entityParticle.killEntityMatrix(),this.entityParticle.killOtherEntity(),ig.game.consoleLog("kill particle matrix")):(this.entityParticle.killOtherEntity(),this.entityParticle.kill(),this.entityParticle=null,ig.game.consoleLog("kill particle")))},placeOverlayObject:function(b,d){this.finishAddOverlayObject=!1;this.overlayList=
[];this.objectList=null==d.object?[]:d.object;var e=[],f=!0;if(d.object){for(var g=0;g<d.object.length;g++){var j=d.object[g];this.overlayList.push(!1);e.push(j.objectID);null!=j.to&&(f=!1);!0==f&&g==d.object.length-1&&(this.finishAddOverlayObject=!0);if(!(0<=j.chain))if(this.entityOverlay[j.objectID])if(!0==this.entityOverlay[j.objectID].isFirstLoad||null==this.entityOverlay[j.objectID].dataTween.loop||"none"==this.entityOverlay[j.objectID].dataTween.loop.toLowerCase()||this.entityOverlay[j.objectID].dataTween.loop!=
j.loop||this.entityOverlay[j.objectID].dataTween.time!=j.time)this.entityOverlay[j.objectID].objectID=j.objectID,this.entityOverlay[j.objectID].dataTween=j,this.entityOverlay[j.objectID].tweenID=j.id,this.entityOverlay[j.objectID].setInitialProp(b),!0==b&&(this.entityOverlay[j.objectID].isFirstLoad=!1);else{var l=!1;this.entityOverlay[j.objectID].dataTween.from.angle!=j.from.angle&&(l=!0);this.entityOverlay[j.objectID].dataTween.from.scaleX!=j.from.scaleX&&(l=!0);this.entityOverlay[j.objectID].dataTween.from.scaleY!=
j.from.scaleY&&(l=!0);this.entityOverlay[j.objectID].dataTween.from.x!=j.from.x&&(l=!0);this.entityOverlay[j.objectID].dataTween.from.y!=j.from.y&&(l=!0);this.entityOverlay[j.objectID].dataTween.from.alpha!=j.from.alpha&&(l=!0);this.entityOverlay[j.objectID].dataTween.to.angle!=j.to.angle&&(l=!0);this.entityOverlay[j.objectID].dataTween.to.scaleX!=j.to.scaleX&&(l=!0);this.entityOverlay[j.objectID].dataTween.to.scaleY!=j.to.scaleY&&(l=!0);this.entityOverlay[j.objectID].dataTween.to.x!=j.to.x&&(l=!0);
this.entityOverlay[j.objectID].dataTween.to.y!=j.to.y&&(l=!0);this.entityOverlay[j.objectID].dataTween.to.alpha!=j.to.alpha&&(l=!0);this.entityOverlay[j.objectID].dataTween.tint!=j.tint&&(l=!0);!0==l&&(this.entityOverlay[j.objectID].objectID=j.objectID,this.entityOverlay[j.objectID].dataTween=j,this.entityOverlay[j.objectID].tweenID=j.id,this.entityOverlay[j.objectID].setInitialProp(b))}else this.entityOverlay[j.objectID]=ig.game.spawnEntity(EntityOverlay,0,0,{_parent:this,objectID:j.objectID,dataTween:j,
tweenID:j.id}),this.entityOverlay[j.objectID].setInitialProp(b)}this.finishAddOverlayObject=!0}if(0>=this.objectList.length){for(var n in this.entityOverlay)this.entityOverlay[n]&&(this.entityOverlay[n].kill(),this.entityOverlay[n]=null);this.entityOverlay={}}else for(var m in this.entityOverlay)0>e.indexOf(m)&&this.entityOverlay[m]&&(this.entityOverlay[m].kill(),this.entityOverlay[m]=null);ig.game.sortEntitiesDeferred()},placeSingleParticle:function(b){this.singleParticleList=null==b.singleParticle?
[]:b.singleParticle;var d=[];if(b.singleParticle)for(var e=0;e<b.singleParticle.length;e++){var f=b.singleParticle[e].objectID,g=b.singleParticle[e];d.push(f);if(this.entitySingleParticle[f]){var j=this.entitySingleParticle[f].dataParticle.color,l=this.entitySingleParticle[f].dataParticle.size;this.entitySingleParticle[f].dataParticle=g;null==this.entitySingleParticle[f].dataParticle.color&&(this.entitySingleParticle[f].dataParticle.color=j);null==this.entitySingleParticle[f].dataParticle.size&&(this.entitySingleParticle[f].dataParticle.size=
l);null!=this.entitySingleParticle[f].entitySP&&(this.entitySingleParticle[f].entitySP.dataParticle=this.entitySingleParticle[f].dataParticle)}else this.entitySingleParticle[f]=ig.game.spawnEntity(EntitySingleParticle,0,0,{_parent:this,objectID:f,dataParticle:g}),this.entitySingleParticle[f].setInitialProp(),ig.game.sortEntitiesDeferred()}if(0>=this.singleParticleList.length){for(var n in this.entitySingleParticle)this.entitySingleParticle[n]&&(null!=this.entitySingleParticle[n].entitySP&&(this.entitySingleParticle[n].entitySP.kill(),
this.entitySingleParticle[n].entitySP=null),this.entitySingleParticle[n].kill(),this.entitySingleParticle[n]=null);this.entitySingleParticle={}}else for(var m in this.entitySingleParticle)0>d.indexOf(m)&&this.entitySingleParticle[m]&&(null!=this.entitySingleParticle[m].entitySP&&(this.entitySingleParticle[m].entitySP.kill(),this.entitySingleParticle[m].entitySP=null),this.entitySingleParticle[m].kill(),this.entitySingleParticle[m]=null);ig.game.sortEntitiesDeferred()},finishAllOverlay:function(){ig.game.consoleLog("continue dialog after overlay")},
checkWalkingSpeed:function(b,d,e){e=null==e||0==e?_DATAGAME.walkSpeed[2]:6<=e?_DATAGAME.walkSpeed[5]+10*(e-5):_DATAGAME.walkSpeed[e];b*=d.defSpeedAnimWalk/e;b>=this.maxDurWalkIn?(e=b/this.maxDurWalkIn*d.defSpeedAnimWalk,e>=this.maxWalkingSpeed?(d.speedAnimWalk=this.maxWalkingSpeed,b*=d.defSpeedAnimWalk/d.speedAnimWalk):(d.speedAnimWalk=e,b=this.maxDurWalkIn)):d.speedAnimWalk=e;this.longestDurWalkIn<b&&(this.longestDurWalkIn=b);return b},onFreezeFrameComplete:function(){this.checkChatBubble()},afterAnimation:function(b){null==
_STRINGS["Chapter"+this.numChapter][this.numChat].text||""==_STRINGS["Chapter"+this.numChapter][this.numChat].text?"du"==b||null!=_STRINGS["Chapter"+this.numChapter][this.numChat].text_delay&&0<_STRINGS["Chapter"+this.numChapter][this.numChat].text_delay?this.loadBubbleChat():(this.isBubbleOption=!1,this.playAnimCharStory(_STRINGS["Chapter"+this.numChapter][this.numChat]),this.checkChatBubble()):this.loadBubbleChat()},reposOption:function(){if("du"==this.optionType)this.buttons.btnOption1.pos={x:-ig.game.screen.x+
ig.sizeHandler.minW/2-this.buttons.btnOption1.halfSize.x-200*_DATAGAME.ratioRes,y:-ig.game.screen.y+ig.sizeHandler.minH-400*_DATAGAME.ratioRes},this.buttons.btnOption2.pos={x:-ig.game.screen.x+ig.sizeHandler.minW/2-this.buttons.btnOption2.halfSize.x+200*_DATAGAME.ratioRes,y:-ig.game.screen.y+ig.sizeHandler.minH-400*_DATAGAME.ratioRes},this.buttons.btnOption3.pos={x:-ig.game.screen.x+ig.sizeHandler.minW/2,y:-ig.game.screen.y+ig.sizeHandler.minH};else{var b=this.getBubbleHeight(),d=this.bubbleScriptOffsetY;
b<=94*_DATAGAME.ratioRes&&(b=104*_DATAGAME.ratioRes);"rectangle"==_DATAGAME.dialogStyle.toLowerCase()&&(d=b=0);this.buttons.btnOption1.pos={x:-ig.game.screen.x+ig.sizeHandler.minW/2-this.buttons.btnOption1.halfSize.x-this.buttons.btnOption1.posX,y:-ig.game.screen.y+ig.sizeHandler.minH/2+b+50*_DATAGAME.ratioRes+this.offsetBubble.y+this.plusYBubble+d};this.buttons.btnOption2.pos={x:-ig.game.screen.x+ig.sizeHandler.minW/2-this.buttons.btnOption2.halfSize.x-this.buttons.btnOption2.posX,y:-ig.game.screen.y+
ig.sizeHandler.minH/2+b+50*_DATAGAME.ratioRes+140*_DATAGAME.ratioRes+this.offsetBubble.y+this.plusYBubble+d};this.buttons.btnOption3.pos={x:-ig.game.screen.x+ig.sizeHandler.minW/2-this.buttons.btnOption3.halfSize.x-this.buttons.btnOption3.posX,y:-ig.game.screen.y+ig.sizeHandler.minH/2+b+50*_DATAGAME.ratioRes+280*_DATAGAME.ratioRes+this.offsetBubble.y+this.plusYBubble+d}}},repos:function(){this.reposOption();null!=this.sptCharDU1&&(this.sptCharDU1.spriter.pos={x:-ig.game.screen.x+ig.sizeHandler.minW/
2+this.posXIn.left,y:-ig.game.screen.y+ig.sizeHandler.minH/2+this.offsetDefChar[0].y});null!=this.sptCharDU2&&(this.sptCharDU2.spriter.pos={x:-ig.game.screen.x+ig.sizeHandler.minW/2+this.posXIn.right,y:-ig.game.screen.y+ig.sizeHandler.minH/2+this.offsetDefChar[0].y});"rectangle"==_DATAGAME.dialogStyle.toLowerCase()&&null!=this.chatBubble&&this.calculatePosBubble()},setBubbleWidth:function(){var b=0,b="rectangle"==_DATAGAME.dialogStyle.toLowerCase()?2*_DATAGAME.dialogBox.padding.x*_DATAGAME.ratioRes:
0;return b=ig.system.width>=1.5*ig.sizeHandler.minW?0.7*ig.system.width-b:0.95*ig.sizeHandler.minW-b},calculatePosBubble:function(){var b=this.setBubbleWidth();this.bubbleConfigs.position.x=ig.sizeHandler.minW/2+0.5*b/2-0.5*b/2-4*_DATAGAME.ratioRes;this.bubbleConfigs.bubbleWidth=b;null!=this.chatBubble&&(this.chatBubble._chatBubbleCanvasConfigs.bubbleConfigs.box.width=this.bubbleConfigs.bubbleWidth,this.chatBubble._chatBubbleCanvasConfigs.textConfigs.fullText=ig.game.wordWrapForChatBubble(this.fullSentence,
this.bubbleConfigs.bubbleWidth,this.bubbleConfigs.fontSize,this.bubbleConfigs.fontName,!0),this.textTrack=ig.game.wordWrapForChatBubble(this.text,this.isNarration?this.bubbleConfigs.narrationWidth:this.bubbleConfigs.bubbleWidth,this.bubbleConfigs.fontSize,this.bubbleConfigs.fontName,!0),this.chatBubble._chatBubbleCanvasConfigs.textConfigs.text=this.textTrack,this.bubbleConfigs.position.y=ig.game.screen.y+ig.system.height-this.chatBubble._chatBubbleCanvas.height+this.bubbleScriptOffsetY,this.chatBubble.parentPos=
{x:this.bubbleConfigs.position.x,y:this.bubbleConfigs.position.y},this.chatBubble.repos())},ready:function(){},calculatePosChar:function(b){this.posDefChar[b]={x:-ig.game.screen.x+ig.sizeHandler.minW/2+this.offsetDefChar[b].x,y:-ig.game.screen.y+ig.sizeHandler.minH/2+this.offsetDefChar[b].y};var d=this.posDefChar[b].x+this.posXBG-(-ig.game.screen.x+ig.sizeHandler.minW*this.bg.pntX),e=1280*_DATAGAME.ratioRes,e=e*(this.zoomBG-1)*(e*this.bg.pntY/e),f=this.posYBG;this.bg.isVertical&&(f=this.posYBG*this.zoomBG);
this["sptChar"+b].spriter.pos={x:-ig.game.screen.x+ig.sizeHandler.minW*this.bg.pntX+d*this.zoomBG,y:-ig.game.screen.y+f-e+(this.posDefChar[b].y- -ig.game.screen.y)*this.zoomBG};this["sptChar"+b].spriter.scale.x=this["sptChar"+b].defScale.x*this.zoomBG;this["sptChar"+b].spriter.scale.y=this["sptChar"+b].defScale.y*this.zoomBG},checkOption:function(){if(this.isOption){var b=_STRINGS["Chapter"+this.numChapter][this.numChat];this.totalOption=0;for(var d=1;d<=b.option.length-1;d++)this.buttons["btnOption"+
d].showOption(!0),this.totalOption++;_DATAGAME.enableCurrency&&(this.entityGame.uiCurrency.isShop=_DATAGAME.enableShop,this.entityGame.uiCurrency.showUI(!0),this.entityGame.uiCurrency.repos())}},getBubbleHeight:function(){var b=0;this.chatBubble&&(b=this.chatBubble._chatBubbleCanvasConfigs.bubbleConfigs.contentArea.h);console.log("heightbubble",b);return b},startWindow:function(){!1==this.isStartDialog&&(this.isStartDialog=!0,this.checkChatBubble());this.canClickStage=!0},checkClickStagePos:function(){return ig.game.io.getClickPos().x>=
ig.system.width-this.buttons.btnSetting.size.x-25&&ig.game.io.getClickPos().y<=this.buttons.btnSetting.size.y+25?!1:!0},checkFowardDialog:function(){var b=!1;ig.input.pressed("SPACE")?b=!0:ig.input.pressed("ENTER")&&(b=!0);return b},delayClickButton:function(){null!=this.tweenDelayClick&&this.tweenDelayClick.stop();this.isClickButton=!0;this.durDelayClick=0;this.tweenDelayClick=this.tween({durDelayClick:1},0.5,{easing:ig.Tween.Easing.Linear.EaseNone,onComplete:function(){this.isClickButton=!1}.bind(this)}).start()},
update:function(){this.parent();this.checkButtonInput();this.boolZoomPanCamera&&(this.bg.pntX=this.anchorBGX,this.bg.pntY=this.anchorBGY);for(var b=0;b<this.arrChar.length;b++)null!=this["sptChar"+b]&&this.calculatePosChar(b);if(this.isBubble&&this.canClickStage&&!ig.game.isPauseSetting&&!ig.game.isClickClose&&!this.isClickButton)if(this.loadSentence){if(this.counterWord++,0==this.counterWord%this.modWord&&this.trackWord(),(ig.input.released("click")||!0==this.checkFowardDialog())&&ig.game.dialogAutoStatus==
ig.game.STAT_DIALOG_NORMAL)this.loadSentence=!1,this.stopSFXText(),this.counterWord=this.currentWord=0,this.textTrack=ig.game.wordWrapForChatBubble(this.fullSentence,this.isNarration?this.bubbleConfigs.narrationWidth:this.bubbleConfigs.bubbleWidth,this.bubbleConfigs.fontSize,this.bubbleConfigs.fontName,!0),this.chatBubble._chatBubbleCanvasConfigs.textConfigs.text=this.textTrack,this.checkOption()}else{if(ig.game.dialogAutoStatus!=ig.game.STAT_DIALOG_NORMAL)!this.isOption&&(null!=this.timerAutoDialog&&
0<this.timerAutoDialog.delta())&&(this.timerAutoDialog.set(ig.game.delayDialog),this.timerAutoDialog.reset(),this.timerAutoDialog.pause(),this.text="",this.isBubble=!1,this.chatBubble.chatBubbleAliveTime=0.1);else if(!this.isOption&&(ig.input.released("click")||!0==this.checkFowardDialog())&&ig.game.dialogAutoStatus==ig.game.STAT_DIALOG_NORMAL)this.text="",this.isBubble=!1,this.chatBubble.chatBubbleAliveTime=0.1;this.isOption&&this.checkKeyboardOption()}if(this.isAnimChar)for(b=0;b<this.totalAllChar;b++)this.isVisibleChar[b]&&
(this["sptChar"+b].spriter.root.alpha=this.alphaChar);this.isAnimDU&&(this.sptCharDU1.spriter.root.alpha=this.alphaDU,this.sptCharDU2.spriter.root.alpha=this.alphaDU)},draw:function(){this.parent();ig.game.sessionData.isFlashback[this.numChapter]&&!this.isDelayFlashback||!ig.game.sessionData.isFlashback[this.numChapter]&&this.isDelayFlashback?this.entityGame.flashback.show():this.entityGame.flashback.hide()}});EntityGrid=ig.Entity.extend({zIndex:9E4,init:function(b,d,e){this.parent(b,d,e);this.gridCanvas=
document.createElement("canvas");this.gridCanvas.width=1080;this.gridCanvas.height=1920;this.gridCtx=this.gridCanvas.getContext("2d",{alpha:!0});this.gridCanvas.style.position="absolute";this.gridCanvas.style.left="0px";this.gridCanvas.style.top="0px";this.gridCanvas.style.zIndex=9999;this.gridCtx.strokeStyle="white";this.gridCtx.lineWidth=10;this.gridCtx.strokeRect(0,0,1080,1920);this.gridCtx.strokeStyle="red";this.gridCtx.lineWidth=5;this.gridCtx.strokeRect(0,0,1080,1920)},draw:function(){this.parent();
var b=ig.system.context;b.save();b.drawImage(this.gridCanvas,-ig.game.screen.x,-ig.game.screen.y);b.restore()}})});ig.baked=!0;ig.module("game.levels.game").requires("impact.image","game.entities.controller.game-controller").defines(function(){LevelGame={entities:[{type:"EntityGameController",x:0,y:0}],layer:[]};LevelGameResources=[new ig.Image(_BASEPATH.media+"graphics/backgrounds/desktop/background.jpg")]});ig.baked=!0;
ig.module("game.entities.controller.preview-controller").requires("impact.entity","game.entities.object.girl","game.entities.buttons.button-play").defines(function(){EntityPreviewController=ig.Entity.extend({type:ig.Entity.TYPE.BOTH,zIndex:0,isLoad:0,init:function(b,d,e){this.parent(b,d,e);this.posYBG=this.posXBG=this.lastposXBG=0;this.zoomBG=1;_DATAGAME.BGFileType.office="png";ig.game.bgPreview=ig.game.spawnEntity(EntityBackground,0,0,{_parent:this,placeName:"office"});ig.game.girlPreview=ig.game.spawnEntity(SpriterGirl,
0,0,{_parent:this,charName:"amy",noChar:1,zIndex:10});ig.game.girlPreview.spriter.pos.y=ig.game.midY+500;ig.game.girlPreview.spriter.pos.x=ig.game.midX;ig.game.boyPreview=ig.game.spawnEntity(SpriterBoy,0,0,{_parent:this,charName:"jack",noChar:1,zIndex:10});ig.game.boyPreview.spriter.pos.y=ig.game.midY+500;ig.game.boyPreview.spriter.pos.x=ig.game.midX;ig.game.boyPreview.changePose("ANIM_IDLE")},update:function(){this.parent();0<=ig.game.midX&&10>this.isLoad&&(ig.game.bgPreview.repos(),this.isLoad++)}})});
ig.baked=!0;ig.module("game.levels.preview").requires("impact.image","game.entities.controller.preview-controller").defines(function(){LevelPreview={entities:[{type:"EntityPreviewController",x:0,y:0}],layer:[]};LevelPreviewResources=[new ig.Image(_BASEPATH.media+"graphics/backgrounds/desktop/background.jpg")]});ig.baked=!0;
ig.module("game.main").requires("impact.game","plugins.packer.packer-plugin","plugins.patches.fps-limit-patch","plugins.patches.timer-patch","plugins.patches.user-agent-patch","plugins.patches.webkit-image-smoothing-patch","plugins.patches.windowfocus-onMouseDown-patch","plugins.patches.input-patch","plugins.data.vector","plugins.data.color-rgb","plugins.pointer","plugins.responsive","plugins.font.font-loader","plugins.handlers.dom-handler","plugins.handlers.size-handler","plugins.handlers.api-handler",
"plugins.handlers.visibility-handler","plugins.audio.sound-handler","plugins.io.io-manager","plugins.io.storage-manager","plugins.splash-loader","plugins.custom-loader","plugins.tweener","plugins.tween","plugins.tweens-handler","plugins.url-parameters","plugins.director","plugins.impact-storage","plugins.fullscreen","plugins.spriter.spriter","plugins.chat-bubble.chat-bubble-manager","plugins.responsive-keyboard.keyboard","plugins.tiered-rv.tiered-rv","plugins.secure-ls","plugins.freezeframe.freezeframe-plugin",
"plugins.multilang","plugins.notification","plugins.progressbar","game.entities.buttons.button-more-games","game.entities.pointer","game.entities.pointer-selector","game.entities.select","game.entities.object.transition","game.levels.menu","game.levels.game","game.levels.preview").defines(function(){this.START_OBFUSCATION;this.FRAMEBREAKER;MyGame=ig.Game.extend({name:_GAMESETTING._LOCALSTORAGE_KEY,version:"1.0.0",frameworkVersion:"2.0.2",sessionData:{},io:null,isClickClose:!1,isPauseSetting:!1,animDelayed:!0,
paused:!1,tweens:null,theme:0,currentWindow:null,isChapterEnd:!1,windowName:"menu",windowBefore:"menu",selectedIcon:[1,1,1,1,1,1],totalCart:0,photoAnimAnchor:{x:0,y:0},paramDurDelay:0,datePartner:1,transType:1,transColor:1,dataVoiceOver:null,dataSFXLoop:null,boolChooseChapter:!1,isFullScreen:!0,maxVolume:12,prevLang:"en",lastBGM:"bgmdefault",chapter_list:[],autoDialog:!1,delayDialog:2,delayTextChat:2,mouthTalkingSpeed:0.05,textDialogSpeed:2,textDialogSpeedDef:2,fontNameWeight:"",fontName:"metroblack",
fontNameThin:"metromed",fontNameSize:50,buttonTextColor:"white",fontBubbleWeight:"",fontBubble:"metroblack",fontBubbleThin:"metromed",fontBubbleSize:30,openMiniButton:!0,dialogAutoStatus:0,STAT_DIALOG_NORMAL:0,STAT_DIALOG_SKIP:1,STAT_DIALOG_AUTO:2,languageOn:!0,noSpacing:!0,directLoadChapter:0,startFromSceneID:-1,loveGender:"boy",openAllChapter:!1,showGameArea:!0,showShop:!1,showCurrency:!1,showUI:!0,showBubbleTextInGame:!0,outputBubbleTextToConsole:!0,init:function(){for(var b=1;b<=_STRINGS.Chapter.title.length-
1;b++)ig.game.statusLoad.push(0);this.showShop=_DATAGAME.enableShop;this.showCurrency=_DATAGAME.enableCurrency;this.languageOn=_DATAGAME.enableLanguage;this.isFullScreen=_DATAGAME.enableFullScreen;this.showGameArea=_DATAGAME.showGameArea;_DATAGAME.enableURLParam&&(null!=getQueryVariable("showGameArea")&&(this.showGameArea="true"==getQueryVariable("showGameArea")?!0:!1),null!=getQueryVariable("openAllChapter")&&(this.openAllChapter="true"==getQueryVariable("openAllChapter")?!0:!1),this.loveGender=
null!=getQueryVariable("loveGender")?getQueryVariable("loveGender"):"none",this.startFromSceneID=null!=getQueryVariable("startFromSceneID")?getQueryVariable("startFromSceneID"):this.startFromSceneID,this.directLoadChapter=null!=getQueryVariable("directLoadChapter")?getQueryVariable("directLoadChapter"):this.directLoadChapter,null!=getQueryVariable("showBubbleTextInGame")&&(this.showBubbleTextInGame="true"==getQueryVariable("showBubbleTextInGame")?!0:!1),null!=getQueryVariable("autoDialog")&&(this.autoDialog=
"true"==getQueryVariable("autoDialog")?!0:!1),b=null!=getQueryVariable("dialogSpeed")?getQueryVariable("dialogSpeed"):1,this.mouthTalkingSpeed=0.05*b,this.textDialogSpeed=Math.round(this.textDialogSpeedDef*b),this.speedModDialog=b,!0==this.autoDialog&&(this.dialogAutoStatus=1==b?this.STAT_DIALOG_AUTO:this.STAT_DIALOG_SKIP),this.delayDialog=this.textDialogSpeed,this.dialogAutoStatus==this.STAT_DIALOG_SKIP&&(this.delayDialog=0.001),this.delayTextChat=this.textDialogSpeed);this.languageSelector=new SelectLanguage({onSelected:function(){ig.game.onLangChange()}});
ig.tieredRV=new ig.TieredRv;this.tweens=new ig.TweensHandler;this.setupMarketJsGameCenter();this.io=new IoManager;this.setupStorageManager();this.setupUrlParams=new ig.UrlParameters;this.removeLoadingWheel();this.checkFont();(!_DATAGAME.isLinearChapter||_DATAGAME.isLinearChapter&&_DATAGAME.linearChapterWithThumbnail)&&this.sortChapterList();this.finalize();ig.soundHandler.bgmPlayer.volume(ig.game.sessionData.music/ig.game.maxVolume);ig.soundHandler.sfxPlayer.volume(ig.game.sessionData.sound/ig.game.maxVolume)},
setAutoDialog:function(){if(!0==_DATAGAME.miniButton.skip||!0==_DATAGAME.miniButton.auto){var b=1;switch(this.dialogAutoStatus){case this.STAT_DIALOG_NORMAL:this.autoDialog=!1;b=1;break;case this.STAT_DIALOG_SKIP:!0==_DATAGAME.miniButton.skip&&(this.autoDialog=!0,b=0.5);break;case this.STAT_DIALOG_AUTO:!0==_DATAGAME.miniButton.auto&&(this.autoDialog=!0,b=1)}this.autoDialog=null!=getQueryVariable("autoDialog")?getQueryVariable("autoDialog"):this.autoDialog;b=null!=getQueryVariable("dialogSpeed")?getQueryVariable("dialogSpeed"):
b;this.mouthTalkingSpeed=0.05*b;this.textDialogSpeed=Math.round(this.textDialogSpeedDef*b);this.speedModDialog=b;this.delayDialog=this.textDialogSpeed;this.dialogAutoStatus==this.STAT_DIALOG_SKIP&&(this.delayDialog=0.001);this.delayTextChat=this.textDialogSpeed;"game"==this.windowName&&(ig.game.currentWindow.modWord=this.textDialogSpeed)}},checkArialOffset:function(b){var d=0;0<=_DATAGAME.defaultFontLang.indexOf(ig.game.languageSelector.selected)&&(d=b/10);return d},getDateNow:function(){var b="",
d="",e=new Date,b=e.getDate()+", "+e.getFullYear(),d=e.getHours()+":"+this.addZeroMinuteSecond(e.getMinutes())+":"+this.addZeroMinuteSecond(e.getSeconds());return{month:e.getMonth(),date:b,time:d}},addZeroMinuteSecond:function(b){return 1==b.toString().length?"0"+b:b},saveDatatoSlot:function(b){for(var d=ig.game.sessionData.saveSlot[b].id,e=this.getDateNow(),d={id:d,date:e.date,month:e.month,time:e.time,currentChapter:ig.game.currentWindow.numChapter,isReward:ig.game.sessionData.isReward.concat([]),
unlockChapter:ig.game.sessionData.unlockChapter,numChat:ig.game.sessionData.numChat.concat([]),lastChatId:ig.game.sessionData.lastChatId.concat([]),virtualCurrency1:ig.game.sessionData.virtualCurrency1,virtualCurrency2:ig.game.sessionData.virtualCurrency2,virtualCurrency3:ig.game.sessionData.virtualCurrency3,virtualCurrency4:ig.game.sessionData.virtualCurrency4,virtualCurrency5:ig.game.sessionData.virtualCurrency5,virtualCurrency6:ig.game.sessionData.virtualCurrency6,virtualCurrency7:ig.game.sessionData.virtualCurrency7,
virtualCurrency8:ig.game.sessionData.virtualCurrency8,playerName:ig.game.sessionData.playerName,dressUpTheme:ig.game.sessionData.dressUpTheme.concat([]),dressUpChar:ig.game.sessionData.dressUpChar.concat([]),isFlashback:ig.game.sessionData.isFlashback.concat([]),flashbackColor:ig.game.sessionData.flashbackColor.concat([]),historyLog:{},varScript:ig.game.sessionData.varScript.concat([])},e=1;e<ig.game.sessionData.varScript.length;e++)d[ig.game.sessionData.varScript[e]]=ig.game.sessionData[ig.game.sessionData.varScript[e]];
for(var f in ig.game.sessionData.historyLog)d.historyLog[f]=ig.game.sessionData.historyLog[f].concat([]);f=ig.game.sessionData.saveSlot.concat([]);f[b]=d;ig.game.save("saveSlot",f);this.consoleLog("save");this.consoleLog(f[b])},loadDataSlot:function(b){b=ig.game.sessionData.saveSlot[b];ig.game.sessionData.isReward=b.isReward.concat([]);ig.game.sessionData.unlockChapter=b.unlockChapter;ig.game.sessionData.numChat=b.numChat.concat([]);ig.game.sessionData.lastChatId=b.lastChatId.concat([]);ig.game.sessionData.virtualCurrency1=
b.virtualCurrency1;ig.game.sessionData.virtualCurrency2=b.virtualCurrency2;ig.game.sessionData.virtualCurrency3=b.virtualCurrency3;ig.game.sessionData.virtualCurrency4=b.virtualCurrency4;ig.game.sessionData.virtualCurrency5=b.virtualCurrency5;ig.game.sessionData.virtualCurrency6=b.virtualCurrency6;ig.game.sessionData.virtualCurrency7=b.virtualCurrency7;ig.game.sessionData.virtualCurrency8=b.virtualCurrency8;ig.game.sessionData.playerName=b.playerName;ig.game.sessionData.dressUpTheme=b.dressUpTheme.concat([]);
ig.game.sessionData.dressUpChar=b.dressUpChar.concat([]);ig.game.sessionData.isFlashback=b.isFlashback.concat([]);ig.game.sessionData.flashbackColor=b.flashbackColor.concat([]);ig.game.sessionData.historyLog={};for(var d in b.historyLog)ig.game.sessionData.historyLog[d]=b.historyLog[d].concat([]);for(d=1;d<ig.game.sessionData.varScript.length;d++)ig.game.sessionData[ig.game.sessionData.varScript[d]]=null;ig.game.sessionData.varScript=b.varScript;for(d=1;d<ig.game.sessionData.varScript.length;d++)ig.game.sessionData[ig.game.sessionData.varScript[d]]=
b[ig.game.sessionData.varScript[d]];ig.game.numChapter=b.currentChapter;null==ig.game.statusLoad[ig.game.numChapter]&&(ig.game.statusLoad[ig.game.numChapter]=0);console.log("load");this.consoleLog(b)},resetAllData:function(){ig.game.sessionData.isReward=[!0,!0];ig.game.sessionData.unlockChapter=1;ig.game.sessionData.numChat=[0,0];ig.game.sessionData.lastChatId=[0,0];ig.game.sessionData.virtualCurrency1=1E3;ig.game.sessionData.virtualCurrency2=0;ig.game.sessionData.virtualCurrency3=0;ig.game.sessionData.virtualCurrency4=
0;ig.game.sessionData.virtualCurrency5=0;ig.game.sessionData.virtualCurrency6=0;ig.game.sessionData.virtualCurrency7=0;ig.game.sessionData.virtualCurrency8=0;ig.game.sessionData.playerName=_DATAGAME.defaultName;ig.game.sessionData.dressUpTheme=[{now:"amy",last:"amy"}];ig.game.sessionData.dressUpChar=[{carl:"carl"}];ig.game.sessionData.isFlashback=[!1,!1];ig.game.sessionData.flashbackColor=["white","white"];ig.game.sessionData.historyLog={};for(var b=1;b<ig.game.sessionData.varScript.length;b++)ig.game.sessionData[ig.game.sessionData.varScript[b]]=
null;ig.game.sessionData.varScript=["default"];ig.game.saveAll()},consoleLog:function(b){_DATAGAME.enableConsoleLog&&console.log(b)},onLangChange:function(){},sortChapterList:function(){this.chapter_list=_DATAGAME.isLinearChapter&&_DATAGAME.linearChapterWithThumbnail?ig.game.sortArrayByProp(_STRINGS.chapter_list,"chapterID",!1):ig.game.sortArrayByProp(_STRINGS.chapter_list,"timestamp")},firstLetterCapslock:function(b){var d=b.toLowerCase().substring(0,1).toUpperCase();b=b.toLowerCase().substring(1,
b.length);return d+b},checkFont:function(){this.fontRatio=null==_DATAGAME.ratioLangFont[ig.game.languageSelector.selected]?1:_DATAGAME.ratioLangFont[ig.game.languageSelector.selected];var b=_DATAGAME.uiColor[_DATAGAME.uiTheme].button,d=_DATAGAME.uiColor[_DATAGAME.uiTheme].bubble;!0==ig.ua.iOS?(this.fontName=b.iosfont,this.fontNameThin=b.iosfontThin,this.fontNameSize=b.iosfontSize,this.fontBubble=d.iosfont,this.fontBubbleThin=d.iosfontThin,this.fontBubbleSize=d.iosfontSize,this.fontNameWeight=b.iosfontWeight,
this.fontBubbleWeight=d.iosfontWeight):0<=_DATAGAME.defaultFontLang.indexOf(ig.game.languageSelector.selected)?(this.fontName=b.langfont,this.fontNameThin=b.langfontThin,this.fontNameSize=b.langfontSize,this.fontBubble=d.langfont,this.fontBubbleThin=d.langfontThin,this.fontBubbleSize=d.langfontSize,this.fontNameWeight=b.langfontWeight,this.fontBubbleWeight=d.langfontWeight):(this.fontName=b.font,this.fontNameThin=b.fontThin,this.fontNameSize=b.fontSize,this.fontBubble=d.font,this.fontBubbleThin=d.fontThin,
this.fontBubbleSize=d.fontSize,this.fontNameWeight=b.fontWeight,this.fontBubbleWeight=d.fontWeight);if("none"==this.fontNameWeight||""==this.fontNameWeight||null==this.fontNameWeight)this.fontNameWeight="";if("none"==this.fontBubbleWeight||""==this.fontBubbleWeight||null==this.fontBubbleWeight)this.fontBubbleWeight="";this.buttonTextColor=b.textColor;if(""==this.buttonTextColor||null==this.buttonTextColor)this.buttonTextColor="white";this.noSpacing=0<=_DATAGAME.noSpaceLang.indexOf(ig.game.languageSelector.selected)?
!0:!1},checkLang:function(){return ig.game.languageSelector.selected},tweenDelay:function(b,d,e){(new ig.TweenDef({dur:0})).to({dur:1E3},10).delay(d).easing(ig.Tween.Easing.Linear.EaseNone).onComplete(function(){if("function"===typeof e)e();else b[e]()}.bind(b)).start()},disableButtons:function(){for(var b=0;b<ig.game.entities.length;b++)ig.game.entities[b].inputEnabled=!1;_SETTINGS.MoreGames.Enabled&&ig.game.currentWindow.buttons.btnMoreGames&&ig.game.currentWindow.buttons.btnMoreGames.exists&&ig.game.currentWindow.buttons.btnMoreGames.hide();
this.isFullScreen&&("menu"==ig.game.windowName&&ig.game.currentWindow.buttons.btnFullScreen&&ig.game.currentWindow.buttons.btnFullScreen.exists)&&(ig.Fullscreen.enableFullscreenButton=!1,ig.game.currentWindow.buttons.btnFullScreen.hide())},sortArrayByProp:function(b,d,e){null==e&&(e=!0);return b.slice().sort(function(b,g){return!0==e?g[d]-b[d]:b[d]-g[d]})},frameConvertToHourMinSec:function(b){var d=b/60,e,f;e=100+Math.floor(d/3600);f=100+Math.floor(d/60);d=100+d%60;b=100+b%60;return e.toString().substr(1,
2)+":"+f.toString().substr(1,2)+":"+d.toString().substr(1,2)+":"+b.toString().substr(1,2)},convertToMinuteSeconds:function(b){var d;d=100+Math.floor(b/60);b=100+b%60;return d.toString().substr(1,2)+":"+b.toString().substr(1,2)},removeAllProgressBar:function(){if(null!=EntityProgressBar.progressBarArr)for(var b=0;b<EntityProgressBar.progressBarArr.length;b++)EntityProgressBar.progressBarArr[b].tweenFadeOut()},fadeInWindow:function(b,d,e){if(null==this.transition||!this.transition.isRunning)this.removeAllProgressBar(),
ig.game.tweens.removeAll(),this.disableButtons(),this.transColor=null==e?_DATAGAME.uiColor[_DATAGAME.uiTheme].basebg:e,this.transType=null==d?1:d,this.transition=ig.game.spawnEntity("EntityTransition"+this.transType,0,0,{_parent:this,transAlpha:0,fill:this.transColor}),this.transition.close(b)},fadeOutWindow:function(){null!=this.transition&&this.transition.kill();this.transition=ig.game.spawnEntity("EntityTransition"+this.transType,0,0,{_parent:this,fill:this.transColor});this.transition.open()},
fadeOutWindowSplash:function(){this.transColor=_DATAGAME.uiColor[_DATAGAME.uiTheme].basebg;ig.game.tweens.removeAll();ig.game.director.jumpTo(LevelGame);null!=this.transition&&this.transition.kill();this.transition=ig.game.spawnEntity("EntityTransition"+this.transType,0,0,{_parent:this,fill:this.transColor});this.transition.open()},withoutTransition:function(){ig.game.director.jumpTo(LevelGame);ig.game.currentWindow.startWindow()},initData:function(){return this.sessionData={sound:8,music:8,level:1,
isReward:[!0,!0,!0,!0,!0,!0],unlockChapter:1,numChat:[0,0],lastChatId:[0,0],historyLog:{},varScript:["default"],virtualCurrency1:1E3,virtualCurrency2:0,virtualCurrency3:0,virtualCurrency4:0,virtualCurrency5:0,virtualCurrency6:0,virtualCurrency7:0,virtualCurrency8:0,loveInterest:"boy",playerName:"default",dressUpTheme:[{now:"amy",last:"amy"}],dressUpChar:[{carl:"carl"}],isFlashback:[!1,!1],flashbackColor:["white","white"],saveSlot:[{id:1},{id:2},{id:3},{id:4},{id:5},{id:6},{id:7},{id:8},{id:9},{id:10},
{id:11},{id:12}],isClaimedStarter:!1,isShowedStarter:!1}},pauseGameviaButton:function(b,d){if(b.visible&&b.isClickable&&(null==ig.game.transition||!ig.game.transition.isRunning))"game"==ig.game.windowName?(ig.game.isPauseSetting=!0,ig.game.currentWindow.canClickStage=!1,ig.game.pauseGame()):b.sinkingEffect(),ig.soundHandler.sfxPlayer.play("click"),b._parent[d].show()},resumeGameviaButton:function(b){b.visible&&b.isClickable&&(ig.soundHandler.sfxPlayer.play("click"),b.sinkingEffect(),b._parent.tweenCloseFalse.stop(),
ig.game.isClickClose=!0,b._parent.tweenCloseFalse.start(),ig.game.isPauseSetting=!1,b._parent.hide(),"game"==ig.game.windowName&&(ig.game.resumeGame(),ig.game.currentWindow.canClickStage=!0))},setupMarketJsGameCenter:function(){if(_SETTINGS&&_SETTINGS.MarketJSGameCenter){var b=ig.domHandler.getElementByClass("gamecenter-activator");_SETTINGS.MarketJSGameCenter.Activator.Enabled&&_SETTINGS.MarketJSGameCenter.Activator.Position&&(console.log("MarketJSGameCenter activator settings present ...."),ig.domHandler.css(b,
{position:"absolute",left:_SETTINGS.MarketJSGameCenter.Activator.Position.Left,top:_SETTINGS.MarketJSGameCenter.Activator.Position.Top,"z-index":3}));ig.domHandler.show(b)}},checkVariableFormat:function(){},spawnNotification:function(b,d){null==d&&(d=_DATAGAME.toastBox.timeAlive);var e=0.1*ig.system.height;if("bottom"==_DATAGAME.toastBox.position.toLowerCase())e=0.95*ig.system.height;else if("center"==_DATAGAME.toastBox.position.toLowerCase()||"middle"==_DATAGAME.toastBox.position.toLowerCase())e=
0.5*ig.system.height;ig.game.spawnEntity(EntityNotification,0,e,{zIndex:8500,text:b,timeAlive:d,notifPosition:_DATAGAME.toastBox.position.toLowerCase(),prevPos:{x:0.5*ig.system.width,y:e},defPos:{x:0.5*ig.system.width,y:e}})},checkConditionFormatting:function(b,d){var e={"<":function(b,d){return b<d},">":function(b,d){return b>d},"===":function(b,d){return b===d},"==":function(b,d){return b==d},"<=":function(b,d){return b<=d},">=":function(b,d){return b>=d},"!=":function(b,d){return b!=d}},f=b.map(function(b){var d=
!0;"number"===typeof b.value&&(d=!1);if((!0==b.value||!1==b.value)&&!0==d)return e["=="](ig.game.sessionData[b.type],b.value);null==b.operator&&(b.operator="==");return"string"===typeof b.value?e[b.operator](ig.game.sessionData[b.type],ig.game.sessionData[b.value]):e[b.operator](ig.game.sessionData[b.type],b.value)});if("AND"===d?f.every(function(b){return b}):f.some(function(b){return b}))return console.log("result"),!0;console.log("condition not met");return!1},drawTextFormat:function(b,d,e,f){b.font=
e.fontSize+"px "+e.fontFace;b.textAlign="left";b.textBaseline=e.textBaseline;b.fillStyle=e.fontColor;for(var g=0,j=0;j<d.textData.textLines.length;j++){var l=d.textData.textLines[j].split("<>"),n=b.measureText(d.textData.textLines[j].replaceAll("<>","")).width,m=0,r=0;"center"==e.textAlign&&"center"==e.textAnchor&&(r=-n/2);for(n=0;n<l.length;n++){var q=!1;0<n&&(g++,m+=b.measureText(l[n-1]).width);if(n+1<l.length&&("."==l[n+1].substr(0,1)||","==l[n+1].substring(0,1)||"!"==l[n+1].substring(0,1)||"?"==
l[n+1].substring(0,1)))" "==l[n].substr(l[n].length-1,1)&&(l[n]=l[n].substr(0,l[n].length-1));0==g||0!=g&&null!=e.formatText["formatText"+f+g].reset&&!0==this.formatText["formatText"+f+g].reset?(b.fillStyle=d.fillStyle,b.font=d.fontSize+"px "+d.fontFamily):(b.fillStyle=null==e.formatText["formatText"+f+g].color?d.fillStyle:e.formatText["formatText"+f+g].color,null!=e.formatText["formatText"+f+g].format?!0==ig.ua.iOS?-1==e.formatText["formatText"+f+g].format.search("bold")?b.font=e.formatText["formatText"+
f+g].format+" "+d.fontSize+"px "+d.fontFamily:(q=e.formatText["formatText"+f+g].format.replaceAll("bold",""),b.font=q+" "+d.fontSize+"px "+d.fontFamily,q=!0):b.font=e.formatText["formatText"+f+g].format+" "+d.fontSize+"px "+d.fontFamily:b.font=d.fontSize+"px "+d.fontFamily);0!=g&&null!=e.formatText["formatText"+f+g].animEffect?"flash"==e.formatText["formatText"+f+g].animEffect?(null==e.formatText["formatText"+f+g].speed&&(e.formatText["formatText"+f+g].speed=1),d["showFlash"+e.formatText["formatText"+
f+g].speed]&&b.fillText(l[n],0+m+r,0+j*e.lineHeight)):"shake"==e.formatText["formatText"+f+g].animEffect&&(null==e.formatText["formatText"+f+g].speed&&(e.formatText["formatText"+f+g].speed=1),d["showShake"+e.formatText["formatText"+f+g].speed]?b.fillText(l[n],0+m+r+1,0+j*e.lineHeight):b.fillText(l[n],0+m+r-1,0+j*e.lineHeight)):(q&&(b.lineCap="round",c.lineJoin="round",b.strokeText(l[n],0+m+r,0+j*e.lineHeight)),b.fillText(l[n],0+m+r,0+j*e.lineHeight))}}0!=d.counterAnim&&(0==d.counterAnim%10&&(d.showFlash5=
d.showFlash5?!1:!0),0==d.counterAnim%20&&(d.showFlash4=d.showFlash4?!1:!0),0==d.counterAnim%30&&(d.showFlash3=d.showFlash3?!1:!0),0==d.counterAnim%40&&(d.showFlash2=d.showFlash2?!1:!0),0==d.counterAnim%50&&(d.showFlash1=d.showFlash1?!1:!0),0==d.counterAnim%8&&(d.showShake1=d.showShake1?!1:!0),0==d.counterAnim%7&&(d.showShake2=d.showShake2?!1:!0),0==d.counterAnim%6&&(d.showShake3=d.showShake3?!1:!0),0==d.counterAnim%5&&(d.showShake4=d.showShake4?!1:!0),0==d.counterAnim%4&&(d.showShake5=d.showShake5?
!1:!0));d.counterAnim++},measureLine:function(b,d){for(var e=b.measureText(d[0]),f=1;f<d.length;f++){var g=b.measureText(d[f]);g.width>=e.width&&(e=g)}return e},wrapText:function(b,d,e,f,g,j){d=d.split("<br>");for(var l=0;l<d.length;l++){for(var n=d[l].split(" "),m="",r=0;r<n.length;r++){var q=m+n[r]+" ";this.measureLine(b,q).width>g&&0<r?(this.fillText(m,e,f),m=n[r]+" ",f+=j):m=q}b.fillText(m,e,f);f+=j}},drawText:function(b,d,e,f,g,j){null==j&&(j=1.1);for(var l=0;l<b.length;l++)e.fillText(b[l],f,
g),g+=d*j},arrayWordWrapRegex:function(b,d){for(var e=/[^A-Za-z0-9!@#$%^&*()\-+=\]:;"'<>,.?\/\\]/,f="",g=0;g<b.length;g++)e.test(b[g])?(""!=f&&(d.push(f),f=""),d.push(b[g])):f+=b[g]},wordWrapLetter:function(b,d,e,f,g){null==g&&(g=!0);var j=ig.system.context;j.font=e+"px "+f;e=b.split(" ");this.noSpacing&&(f=b.split(""),e=[],this.arrayWordWrapRegex(f,e));for(f=e.length-1;-1<f;f--){e[f]=e[f].replaceAll("<br>"," <br> ");var l=e[f].split(" ");if(1<l.length)for(var n=l.length-1;-1<n;n--)n==l.length-1?
e.splice(f,1,l[n]):e.splice(f,0,l[n])}f="";l=[];if(1==e.length)for(var n=0,m=b.length;n<m;n++){var r=f+b[n],q=j.measureText(r),q=q.width;"<br>"==b[n]?(l.push(f),f=""):q>d&&0<n?(l.push(f),f=b[n]):f=r}else{n=0;for(m=e.length;n<m;n++)if(q=j.measureText(f+e[n]),!g&&q.width>d){b=0;for(var s=e[n].length;b<s;b++)r=f+e[n][b],q=j.measureText(r),q=q.width,"<br>"==e[n]?(l.push(f),f=""):q>d&&0<b?(l.push(f),f=e[n][b]):f=r;this.noSpacing||(f+=" ")}else r=f+e[n]+" ",this.noSpacing&&(r=f+e[n]),q=j.measureText(r),
q=q.width,"<br>"==e[n]?(l.push(f),f=""):q>d&&0<n?(l.push(f),f=this.noSpacing?e[n]:e[n]+" "):f=r}l.push(f);return l},wordWrap:function(b,d,e,f,g){null==g&&(g=!0);var j=ig.system.context;j.font=e+"px "+f;e=b.split(" ");this.noSpacing&&(f=b.split(""),e=[],this.arrayWordWrapRegex(f,e));f="";var l=[];if(1==e.length)for(var n=0,m=b.length;n<m;n++){var r=f+b[n],q=j.measureText(r),q=q.width;q>d&&0<n?(l.push(f),f=b[n]):f=r}else{n=0;for(m=e.length;n<m;n++)if(q=j.measureText(f+e[n]),!g&&q.width>d){b=0;for(var s=
e[n].length;b<s;b++)r=f+e[n][b],q=j.measureText(r),q=q.width,q>d&&0<b?(l.push(f),f=e[n][b]):f=r;this.noSpacing||(f+=" ")}else r=f+e[n]+" ",this.noSpacing&&(r=f+e[n]),q=j.measureText(r),q=q.width,q>d&&0<n?(l.push(f),f=this.noSpacing?e[n]:e[n]+" "):f=r}l.push(f);return l},wordWrapForChatBubble:function(b,d,e,f,g,j){null==g&&(g=!0);var l=ig.system.context;l.font=e+"px "+f;e=b.split(" ");f="";if(this.noSpacing){var n=b.split("");e=[];this.arrayWordWrapRegex(n,e)}for(n=e.length-1;-1<n;n--){e[n]=e[n].replaceAll("<br>",
" <br> ");var m=e[n].split(" ");if(1<m.length)for(var r=m.length-1;-1<r;r--)r==m.length-1?e.splice(n,1,m[r]):e.splice(n,0,m[r])}n="";m=!1;r="";if(1==e.length)for(var q=0,s=b.length;q<s;q++){var t=f+b[q],v=l.measureText(t),v=v.width;"<br>"==b[q]?(n+=f+"<br>",f=""):v>d&&0<q?(n+=f+"<br>",f=b[q]):f=t}else{q=b=0;for(s=e.length;q<s;q++)if(v=l.measureText(f+e[q]),!g&&v.width>d){for(var u=0,x=e[q].length;u<x;u++)t=f+e[q][u],v=t.replaceAll("<>",""),v=l.measureText(v),v=v.width,"<br>"==e[q]?(n+=f+"<br>",f=
""):v>d&&0<u?(n+=f+"<br>",f=e[q][u]):f=t;this.noSpacing||(f+=" ")}else"|"==e[q]?m?(m=!1,"reset"==r.replaceAll(" ","").toLowerCase()?null!=j?j["formatText"+b]=JSON.parse('{ "reset":true }'):ig.game["formatText"+b]=JSON.parse('{ "reset":true }'):null!=j?j["formatText"+b]=JSON.parse("{"+r+"}"):ig.game["formatText"+b]=JSON.parse("{"+r+"}"),f+="<>"):(b++,m=!0,r=""):m?r=this.noSpacing?r+e[q]:r+(e[q]+" "):"<br>"==e[q]?(n+=f+"<br>",f=""):(t=f+e[q]+" ",this.noSpacing&&(t=f+e[q]),v=t.replaceAll("<>",""),v=
l.measureText(v),v=v.width,v>d&&0<q?(n+=f+"<br>",f=this.noSpacing?e[q]:e[q]+" "):f=t)}return n+f},removeFormatDialog:function(b,d,e,f,g){null==g&&(g=!0);b=b.replaceAll("<br>"," ");b=b.replaceAll("  "," ");b=b.replaceAll("{NAME}",ig.game.sessionData.playerName);for(var j in _STRINGS.dynamic_character)b=b.replaceAll("{"+j+"}",_STRINGS.dynamic_character[j][ig.game.sessionData.loveInterest]);j=ig.system.context;j.font=e+"px "+f;e=b.split(" ");f="";if(this.noSpacing){var l=b.split("");e=[];this.arrayWordWrapRegex(l,
e)}var l=[],n=!1,m="";if(1==e.length)for(var r=0,q=b.length;r<q;r++){var s=f+b[r],t=j.measureText(s),t=t.width;t>d&&0<r?(l.push(f),f=b[r]):f=s}else{r=b=0;for(q=e.length;r<q;r++)if(t=j.measureText(f+e[r]),!g&&t.width>d){for(var v=0,u=e[r].length;v<u;v++)s=f+e[r][v],t=s.replaceAll("<>",""),t=j.measureText(t),t=t.width,t>d&&0<v?(l.push(f),f=e[r][v]):f=s;this.noSpacing||(f+=" ")}else"|"==e[r]?n?(n=!1,ig.game["formatText"+b]="reset"==m.replaceAll(" ","").toLowerCase()?JSON.parse('{ "reset":true }'):JSON.parse("{"+
m+"}")):(b++,n=!0,m=""):n||(s=f+e[r]+" ",this.noSpacing&&(s=f+e[r]),t=s.replaceAll("<>",""),t=j.measureText(t),t=t.width,t>d&&0<r?(l.push(f),f=this.noSpacing?e[r]:e[r]+" "):f=s)}l.push(f);return l},shuffleArray:function(b){for(var d=b.length,e,f;d;)f=Math.floor(Math.random()*d--),e=b[d],b[d]=b[f],b[f]=e;return b},getNumber:function(b){temp="";for(var d=0;d<b.length;d++)-1<"0123456789".split("").indexOf(b.substr(d,1))&&(temp+=b.substr(d,1));return parseInt(temp)},getString:function(b){temp="";for(var d=
0;d<b.length;d++)-1=="0123456789".split("").indexOf(b.substr(d,1))&&(temp+=b.substr(d,1));return temp},getHexColor:function(b){if("#"!=b.substr(0,1)){var d=document.createElement("div");d.style.color=b;b=window.getComputedStyle(document.body.appendChild(d)).color.match(/\d+/g).map(function(b){return parseInt(b,10)});document.body.removeChild(d);return 3<=b.length?"#"+(16777216+(b[0]<<16)+(b[1]<<8)+b[2]).toString(16).substr(1):!1}return b},hexToRGBA:function(b,d){"#"!=b.substr(0,1)&&(b=this.getHexColor(b));
var e=parseInt(b.slice(1,3),16),f=parseInt(b.slice(3,5),16),g=parseInt(b.slice(5,7),16);null==d&&(d=1);return"rgba("+e+","+f+","+g+","+d+")"},calculateRandom:function(b,d){return Math.floor(Math.random()*(d-b+1))+b},calculateRandomDecimal:function(b,d){return Math.random()*(d-b+1)+b},calculateDistance:function(b,d,e,f){return Math.sqrt(Math.pow(e-b,2)+Math.pow(f-d,2))},finalize:function(){this.start();ig.sizeHandler.reorient()},removeLoadingWheel:function(){try{$("#ajaxbar").css("background","none")}catch(b){console.log(b)}},
showDebugMenu:function(){console.log("showing debug menu ...");ig.Entity._debugShowBoxes=!0;$(".ig_debug").show()},start:function(){this.director=new ig.Director(this,[LevelMenu,LevelGame,LevelPreview]);ig.soundHandler.bgmPlayer.play("bgmdefault");this.director.loadLevel(this.director.currentLevel);ig.soundHandler.bgmPlayer.volume(ig.game.sessionData.music/ig.game.maxVolume);ig.soundHandler.sfxPlayer.volume(ig.game.sessionData.sound/ig.game.maxVolume)},fpsCount:function(){this.fpsTimer||(this.fpsTimer=
new ig.Timer(1));this.fpsTimer&&0>this.fpsTimer.delta()&&(null!=this.fpsCounter?this.fpsCounter++:(ig.game.fps=this.fpsCounter,this.fpsCounter=0,this.fpsTimer.reset()))},endGame:function(){console.log("End game");ig.soundHandler.bgmPlayer.stop();ig.apiHandler.run("MJSEnd")},pauseGame:function(){ig.Timer.timeScale=0;ig.game.tweens.onSystemPause();ig.soundHandler.onSystemPause(!1);console.log("Game Paused")},resumeGame:function(){ig.game.isPauseSetting||(ig.Timer.timeScale=1,ig.game.tweens.onSystemResume(),
ig.soundHandler.onSystemResume(!1),console.log("Game Resumed"))},showOverlay:function(b){for(i=0;i<b.length;i++)$("#"+b[i])&&$("#"+b[i]).show(),document.getElementById(b[i])&&(document.getElementById(b[i]).style.visibility="visible")},hideOverlay:function(b){for(i=0;i<b.length;i++)$("#"+b[i])&&$("#"+b[i]).hide(),document.getElementById(b[i])&&(document.getElementById(b[i]).style.visibility="hidden")},currentBGMVolume:1,addition:0.1,update:function(){this.paused?(this.updateWhilePaused(),this.checkWhilePaused()):
(this.parent(),this.tweens.update(this.tweens.now()))},updateWhilePaused:function(){for(var b=0;b<this.entities.length;b++)this.entities[b].ignorePause&&this.entities[b].update()},checkWhilePaused:function(){for(var b={},d=0;d<this.entities.length;d++){var e=this.entities[d];if(e.ignorePause&&!(e.type==ig.Entity.TYPE.NONE&&e.checkAgainst==ig.Entity.TYPE.NONE&&e.collides==ig.Entity.COLLIDES.NEVER))for(var f={},g=Math.floor(e.pos.y/this.cellSize),j=Math.floor((e.pos.x+e.size.x)/this.cellSize)+1,l=Math.floor((e.pos.y+
e.size.y)/this.cellSize)+1,n=Math.floor(e.pos.x/this.cellSize);n<j;n++)for(var m=g;m<l;m++)if(b[n])if(b[n][m]){for(var r=b[n][m],q=0;q<r.length;q++)e.touches(r[q])&&!f[r[q].id]&&(f[r[q].id]=!0,ig.Entity.checkPair(e,r[q]));r.push(e)}else b[n][m]=[e];else b[n]={},b[n][m]=[e]}},draw:function(){this.parent();this.dctf()},dctf:function(){this.COPYRIGHT},clearCanvas:function(b,d,e){var f=b.canvas;b.clearRect(0,0,d,e);f.style.display="none";f.offsetHeight;f.style.display="inherit"},drawDebug:function(){if(!ig.global.wm&&
(this.debugEnable(),this.viewDebug&&(ig.system.context.fillStyle="#000000",ig.system.context.globalAlpha=0.35,ig.system.context.fillRect(0,0,ig.system.width/4,ig.system.height),ig.system.context.globalAlpha=1,this.debug&&0<this.debug.length)))for(i=0;i<this.debug.length;i++)ig.system.context.font="10px Arial",ig.system.context.fillStyle="#ffffff",ig.system.context.fillText(this.debugLine-this.debug.length+i+": "+this.debug[i],10,50+10*i)},debugCL:function(b){this.debug?(50>this.debug.length||this.debug.splice(0,
1),this.debug.push(b),this.debugLine++):(this.debug=[],this.debugLine=1,this.debug.push(b));console.log(b)},debugEnable:function(){ig.input.pressed("click")&&(this.debugEnableTimer=new ig.Timer(2));this.debugEnableTimer&&0>this.debugEnableTimer.delta()?ig.input.released("click")&&(this.debugEnableTimer=null):this.debugEnableTimer&&0<this.debugEnableTimer.delta()&&(this.debugEnableTimer=null,this.viewDebug=this.viewDebug?!1:!0)},drawVersion:function(){if("undefined"!==typeof _SETTINGS.Versioning&&
null!==_SETTINGS.Versioning&&_SETTINGS.Versioning.DrawVersion){var b=ig.system.context;fontSize=_SETTINGS.Versioning.FontSize;fontFamily=_SETTINGS.Versioning.FontFamily;fillStyle=_SETTINGS.Versioning.FillStyle;b.save();b.textBaseline="bottom";b.textAlign="left";b.font=fontSize+" "+fontFamily||"10px Arial";b.fillStyle=fillStyle||"#ffffff";b.fillText("v"+_SETTINGS.Versioning.Version+"+build."+_SETTINGS.Versioning.Build,10,ig.system.height-10);b.restore()}}});ig.packer.initPacker(function(){ig.domHandler=
null;ig.domHandler=new ig.DomHandler;ig.domHandler.forcedDeviceDetection();ig.domHandler.forcedDeviceRotation();ig.apiHandler=new ig.ApiHandler;ig.sizeHandler=new ig.SizeHandler(ig.domHandler);ig.ua.mobile?(ig.Sound.enabled=!1,ig.main("#canvas",MyGame,60,ig.sizeHandler.mobile.actualResolution.x,ig.sizeHandler.mobile.actualResolution.y,ig.sizeHandler.scale,ig.SplashLoader),ig.sizeHandler.resize()):ig.main("#canvas",MyGame,60,ig.sizeHandler.desktop.actualResolution.x,ig.sizeHandler.desktop.actualResolution.y,
ig.sizeHandler.scale,ig.SplashLoader);ig.visibilityHandler=new ig.VisibilityHandler;ig.soundHandler=null;ig.soundHandler=new ig.SoundHandler;ig.sizeHandler.reorient()}.bind(this));this.DOMAINLOCK_BREAKOUT_ATTEMPT;this.END_OBFUSCATION});var savedCanvas={};
